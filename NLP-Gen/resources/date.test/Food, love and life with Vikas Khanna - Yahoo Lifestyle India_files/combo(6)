
if(typeof YAHOO==="undefined"||!YAHOO){YAHOO={};}
if(!YAHOO.ULT){YAHOO.ULT={};}
if(!YAHOO.ULT.CONF){YAHOO.ULT.CONF={};}
if(!YAHOO.ULT.BEACON){YAHOO.ULT.BEACON="http://geo.yahoo.com/t";}
if(!YAHOO.ULT.DOMAIN){YAHOO.ULT.DOMAIN=".yahoo.com";}
if(!YAHOO.ULT.IMG){YAHOO.ULT.IMG=new Image();}
if(typeof(YAHOO.ULT.DEBUG)==="undefined"){YAHOO.ULT.DEBUG=0;}
YAHOO.ULT.DELIMITERS={'/':'P',';':'1','?':'P','&':'1','#':'P'};(function(){var YLT=YAHOO.ULT;}());(function(){var YLT=YAHOO.ULT;YLT.strip_rd=function(u,data){var idx=u.indexOf('/**');if(idx!==-1){data.clean=u.substr(idx+3);data.clean=decodeURIComponent(data.clean);}
return data;};YLT.strip=function(u){var delims=YLT.DELIMITERS;var data={url:u,clean:'',cookie:'',keys:[]};var idx=0;while(u.indexOf('_yl',idx)!==-1){var start=u.indexOf('_yl',idx);if(idx<start){data.clean+=u.slice(idx,start-1);}
idx=start+3;if(delims[u.charAt(start-1)]&&u.charAt(start+4)==='='){data.ult=1;var key="_yl"+u.charAt(start+3);var value="";for(start=start+5;start<u.length&&!delims[u.charAt(start)];start++){value+=u.charAt(start);}
data.keys.push(key);data[key]=value;if(key!=='_ylv'){data.cookie+="&"+key+"="+value;}
if(delims[u.charAt(start)]&&delims[u.charAt(start)]==='P'){data.clean+=u.charAt(start);}
idx=start+1;}else{data.clean+=u.slice(start-1,idx);}}
if(data.ult){data.cookie=data.cookie.substr(1);data.clean+=u.substr(idx);if(data._ylv==='0'){YLT.strip_rd(u,data);}}
return data;};YLT.click_token=function(e,u,t,i){if(!i){i=YLT.IMG;}
var src=YLT.BEACON+"?"+t+'&t='+Math.random();YLT.IMG.onerror=YLT.IMG.onload=function(){if(e.currentTarget.get('target')==="_top"){top.location=u;}else{location=u;}};e.preventDefault();i.src=src;};YLT.beacon_token=function(t,i){if(!i){i=YLT.IMG;}
var src=YLT.BEACON+"?"+t+'&t='+Math.random();i.src=src;};}());YUI().use('node',function(Y){var YLT=YAHOO.ULT;YLT.set_href=function(el,data,keyname){if(data.html){el.set('href',data[keyname]);el.set('innerHTML',data.html);}else{el.set('href',data[keyname]);}};YLT.clicked=function(e,data){var el=e.currentTarget;while(el&&el.get('nodeName').toLowerCase()!=='a'){el=el.get('parentNode');}
if(!el){return;}
if(el.get('className').indexOf('yltasis')!==-1){}else if(el.get('className').indexOf('yltnofollow')!==-1){YLT.set_href(el,data,"clean");YLT.beacon_token(data.cookie);}else if(data._ylv==3){YLT.set_href(el,data,"clean");var cook="D="+data.cookie+"; Max-Age=10; Path=/; Domain="+YLT.DOMAIN;document.cookie=cook;}else if(data._ylv==8||data._ylv==9){}else if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||data.target==="_blank"){YLT.set_href(el,data,"clean");YLT.beacon_token(data.cookie);}else{YLT.set_href(el,data,"clean");YLT.click_token(e,data.clean,data.cookie);}};YLT.revert=function(e,data){var el=e.currentTarget;var ie_ischild=0;while(el&&el.get('nodeName').toLowerCase()!=='a'){el=el.get('parentNode');ie_ischild=1;}
if(!el){}else{if(YLT.isIE&&ie_ischild){delete data.html;}
YLT.set_href(el,data,"url");}};YLT.clean=function(){if(YAHOO.YHLDEBUG){return;}
YLT.isIE=(typeof(ActiveXObject)==='function');var el,data,name,i;for(i=0;i<document.links.length;i++){el=document.links[i];if(el.className.indexOf('yltasis')!==-1){continue;}
data=YLT.strip(el.getAttribute('href',2));if(!data.ult){continue;}else if(YLT.CONF.force_beacon&&data._ylv!=8&&data._ylv!=9){data._ylv='X';}
for(name=0;name<data.keys.length;name++){if(data.keys[name]!=='_ylv'){delete data[data.keys[name]];}}
delete data.keys;delete data.ult;data.target=el.target;if(YLT.isIE&&el.children.length===0&&(el.innerHTML.indexOf('http')===0||el.innerHTML.indexOf('www')===0||el.innerHTML.indexOf('@')!==-1||el.className.indexOf('yltiefix')!==-1)){data.html=el.innerHTML;}
var node=Y.one(el);YLT.set_href(node,data,"clean");node.on("click",YLT.clicked,null,data);if(!YLT.CONF.cleanest){node.on("mousedown",YLT.revert,null,data);}}};window.setTimeout(function(){YAHOO.ULT.clean();},1);});/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("datatype-xml-parse",function(e,t){var n=e.Lang;e.mix(e.namespace("XML"),{parse:function(e){var t=null;if(n.isString(e))try{n.isUndefined(ActiveXObject)||(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e))}catch(r){try{n.isUndefined(DOMParser)||(t=(new DOMParser).parseFromString(e,"text/xml")),n.isUndefined(Windows.Data.Xml.Dom)||(t=new Windows.Data.Xml.Dom.XmlDocument,t.loadXml(e))}catch(i){}}return n.isNull(t)||n.isNull(t.documentElement)||t.documentElement.nodeName==="parsererror",t}}),e.namespace("Parsers").xml=e.XML.parse,e.namespace("DataType"),e.DataType.XML=e.XML},"3.9.1");
/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("io-xdr",function(e,t){function a(e,t,n){var r='<object id="io_swf" type="application/x-shockwave-flash" data="'+e+'" width="0" height="0">'+'<param name="movie" value="'+e+'">'+'<param name="FlashVars" value="yid='+t+"&uid="+n+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",i=s.createElement("div");s.body.appendChild(i),i.innerHTML=r}function f(t,n,r){return n==="flash"&&(t.c.responseText=decodeURI(t.c.responseText)),r==="xml"&&(t.c.responseXML=e.DataType.XML.parse(t.c.responseText)),t}function l(e,t){return e.c.abort(e.id,t)}function c(e){return u?i[e.id]!==4:e.c.isInProgress(e.id)}var n=e.publish("io:xdrReady",{fireOnce:!0}),r={},i={},s=e.config.doc,o=e.config.win,u=o&&o.XDomainRequest;e.mix(e.IO.prototype,{_transport:{},_ieEvt:function(e,t){var n=this,r=e.id,s="timeout";e.c.onprogress=function(){i[r]=3},e.c.onload=function(){i[r]=4,n.xdrResponse("success",e,t)},e.c.onerror=function(){i[r]=4,n.xdrResponse("failure",e,t)},e.c.ontimeout=function(){i[r]=4,n.xdrResponse(s,e,t)},e.c[s]=t[s]||0},xdr:function(t,n,i){var s=this;return i.xdr.use==="flash"?(r[n.id]=i,o.setTimeout(function(){try{n.c.send(t,{id:n.id,uid:n.uid,method:i.method,data:i.data,headers:i.headers})}catch(e){s.xdrResponse("transport error",n,i),delete r[n.id]}},e.io.xdr.delay)):u?(s._ieEvt(n,i),n.c.open(i.method||"GET",t),setTimeout(function(){n.c.send(i.data)},0)):n.c.send(t,n,i),{id:n.id,abort:function(){return n.c?l(n,i):!1},isInProgress:function(){return n.c?c(n.id):!1},io:s}},xdrResponse:function(e,t,n){n=r[t.id]?r[t.id]:n;var s=this,o=u?i:r,a=n.xdr.use,l=n.xdr.dataType;switch(e){case"start":s.start(t,n);break;case"success":s.success(f(t,a,l),n),delete o[t.id];break;case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e};case"failure":s.failure(f(t,a,l),n),delete o[t.id]}},_xdrReady:function(t,r){e.fire(n,t,r)},transport:function(t){t.id==="flash"&&(a(e.UA.ie?t.src+"?d="+(new Date).valueOf().toString():t.src,e.id,t.uid),e.IO.transports.flash=function(){return s.getElementById("io_swf")})}}),e.io.xdrReady=function(t,n){var r=e.io._map[n];e.io.xdr.delay=0,r._xdrReady.apply(r,[t,n])},e.io.xdrResponse=function(t,n,r){var i=e.io._map[n.uid];i.xdrResponse.apply(i,[t,n,r])},e.io.transport=function(t){var n=e.io._map["io:0"]||new e.IO;t.uid=n._uid,n.transport.apply(n,[t])},e.io.xdr={delay:100}},"3.9.1",{requires:["io-base","datatype-xml-parse"]});
/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("io-form",function(e,t){var n=encodeURIComponent;e.IO.stringify=function(t,n){n=n||{};var r=e.IO.prototype._serialize({id:t,useDisabled:n.useDisabled},n.extra&&typeof n.extra=="object"?e.QueryString.stringify(n.extra):n.extra);return r},e.mix(e.IO.prototype,{_serialize:function(t,r){var i=[],s=t.useDisabled||!1,o=0,u=typeof t.id=="string"?t.id:t.id.getAttribute("id"),a,f,l,c,h,p,d,v,m,g;u||(u=e.guid("io:"),t.id.setAttribute("id",u)),f=e.config.doc.getElementById(u);if(!f||!f.elements)return r||"";for(p=0,d=f.elements.length;p<d;++p){a=f.elements[p],h=a.disabled,l=a.name;if(s?l:l&&!h){l=n(l)+"=",c=n(a.value);switch(a.type){case"select-one":a.selectedIndex>-1&&(g=a.options[a.selectedIndex],i[o++]=l+n(g.attributes.value&&g.attributes.value.specified?g.value:g.text));break;case"select-multiple":if(a.selectedIndex>-1)for(v=a.selectedIndex,m=a.options.length;v<m;++v)g=a.options[v],g.selected&&(i[o++]=l+n(g.attributes.value&&g.attributes.value.specified?g.value:g.text));break;case"radio":case"checkbox":a.checked&&(i[o++]=l+c);break;case"file":case undefined:case"reset":case"button":break;case"submit":default:i[o++]=l+c}}}return r&&(i[o++]=r),i.join("&")}},!0)},"3.9.1",{requires:["io-base","node-base"]});
/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("io-upload-iframe",function(e,t){function u(t,n,r){var i=e.Node.create('<iframe src="#" id="io_iframe'+t.id+'" name="io_iframe'+t.id+'" />');i._node.style.position="absolute",i._node.style.top="-1000px",i._node.style.left="-1000px",e.one("body").appendChild(i),e.on("load",function(){r._uploadComplete(t,n)},"#io_iframe"+t.id)}function a(t){e.Event.purgeElement("#io_iframe"+t,!1),e.one("body").removeChild(e.one("#io_iframe"+t))}var n=e.config.win,r=e.config.doc,i=r.documentMode&&r.documentMode>=8,s=decodeURIComponent,o=e.IO.prototype.end;e.mix(e.IO.prototype,{_addData:function(t,n){e.Lang.isObject(n)&&(n=e.QueryString.stringify(n));var i=[],o=n.split("="),u,a;for(u=0,a=o.length-1;u<a;u++)i[u]=r.createElement("input"),i[u].type="hidden",i[u].name=s(o[u].substring(o[u].lastIndexOf("&")+1)),i[u].value=u+1===a?s(o[u+1]):s(o[u+1].substring(0,o[u+1].lastIndexOf("&"))),t.appendChild(i[u]);return i},_removeData:function(e,t){var n,r;for(n=0,r=t.length;n<r;n++)e.removeChild(t[n])},_setAttrs:function(t,n,r){t.setAttribute("action",r),t.setAttribute("method","POST"),t.setAttribute("target","io_iframe"+n),t.setAttribute(e.UA.ie&&!i?"encoding":"enctype","multipart/form-data")},_resetAttrs:function(t,n){e.Object.each(n,function(e,n){e?t.setAttribute(n,e):t.removeAttribute(n)})},_startUploadTimeout:function(e,t){var r=this;r._timeout[e.id]=n.setTimeout(function(){e.status=0,e.statusText="timeout",r.complete(e,t),r.end(e,t)},t.timeout)},_clearUploadTimeout:function(e){var t=this;n.clearTimeout(t._timeout[e]),delete t._timeout[e]},_uploadComplete:function(t,r){var i=this,s=e.one("#io_iframe"+t.id).get("contentWindow.document"),o=s.one("body"),u;r.timeout&&i._clearUploadTimeout(t.id);try{o?(u=o.one("pre:first-child"),t.c.responseText=u?u.get("text"):o.get("text")):t.c.responseXML=s._node}catch(f){t.e="upload failure"}i.complete(t,r),i.end(t,r),n.setTimeout(function(){a(t.id)},0)},_upload:function(t,n,i){var s=this,o=typeof i.form.id=="string"?r.getElementById(i.form.id):i.form.id,u={action:o.getAttribute("action"),target:o.getAttribute("target")},f;return s._setAttrs(o,t.id,n),i.data&&(f=s._addData(o,i.data)),i.timeout&&s._startUploadTimeout(t,i),o.submit(),s.start(t,i),i.data&&s._removeData(o,f),{id:t.id,abort:function(){t.status=0,t.statusText="abort";if(!e.one("#io_iframe"+t.id))return!1;a(t.id),s.complete(t,i),s.end(t,i,u)},isInProgress:function(){return e.one("#io_iframe"+t.id)?!0:!1},io:s}},upload:function(e,t,n){return u(e,n,this),this._upload(e,t,n)},end:function(e,t,n){if(t&&t.form&&t.form.upload){var r=this;r._resetAttrs(f,n)}return o.call(this,e,t)}})},"3.9.1",{requires:["io-base","node-base"]});
/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("queue-promote",function(e,t){e.mix(e.Queue.prototype,{indexOf:function(t){return e.Array.indexOf(this._q,t)},promote:function(e){var t=this.indexOf(e);t>-1&&this._q.unshift(this._q.splice(t,1)[0])},remove:function(e){var t=this.indexOf(e);t>-1&&this._q.splice(t,1)}})},"3.9.1",{requires:["yui-base"]});
/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("io-queue",function(e,t){function r(e,t){return n.queue.apply(n,[e,t])}var n=e.io._map["io:0"]||new e.IO;e.mix(e.IO.prototype,{_q:new e.Queue,_qActiveId:null,_qInit:!1,_qState:1,_qShift:function(){var e=this,t=e._q.next();e._qActiveId=t.id,e._qState=0,e.send(t.uri,t.cfg,t.id)},queue:function(t,n){var r=this,i={uri:t,cfg:n,id:this._id++};return r._qInit||(e.on("io:complete",function(e,t){r._qNext(e)},r),r._qInit=!0),r._q.add(i),r._qState===1&&r._qShift(),i},_qNext:function(e){var t=this;t._qState=1,t._qActiveId===e&&t._q.size()>0&&t._qShift()},qPromote:function(e){this._q.promote(e)},qRemove:function(e){this._q.remove(e)},qEmpty:function(){this._q=new e.Queue},qStart:function(){var e=this;e._qState=1,e._q.size()>0&&e._qShift()},qStop:function(){this._qState=0},qSize:function(){return this._q.size()}},!0),r.start=function(){n.qStart()},r.stop=function(){n.qStop()},r.promote=function(e){n.qPromote(e)},r.remove=function(e){n.qRemove(e)},r.size=function(){n.qSize()},r.empty=function(){n.qEmpty()},e.io.queue=r},"3.9.1",{requires:["io-base","queue-promote"]});
YUI.add("gallery-preload",function(B){var A=[];B.preload=function(C){var F,E=B.UA.ie,D=B.config.doc;C=(B.Lang.isArray(C)?C:B.Array(arguments,0,true));B.Array.each(C,function(G){if(E){(new Image()).src=G;}else{F=D.createElement("object");F.data=G;F.width=F.height=0;D.body.appendChild(F);}});return B;};B.preloadOnIdle=function(D,C){A.push(D);B.use("gallery-idletimer",function(E){E.IdleTimer.subscribe("idle",function(){var F=D.shift();if(F){E.preload(F);}else{E.IdleTimer.stop();}});E.IdleTimer.start(C);});return B;};},"gallery-2010.05.05-19-39",{requires:["yui"]});/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("history-base",function(e,t){function p(){this._init.apply(this,arguments)}function d(e){return n.type(e)==="object"}var n=e.Lang,r=e.Object,i=YUI.namespace("Env.History"),s=e.Array,o=e.config.doc,u=o.documentMode,a=e.config.win,f={merge:!0},l="change",c="add",h="replace";e.augment(p,e.EventTarget,null,null,{emitFacade:!0,prefix:"history",preventable:!1,queueable:!0}),i._state||(i._state={}),p.NAME="historyBase",p.SRC_ADD=c,p.SRC_REPLACE=h,p.html5=!!(a.history&&a.history.pushState&&a.history.replaceState&&("onpopstate"in a||e.UA.gecko>=2)&&(!e.UA.android||e.UA.android>=2.4)),p.nativeHashChange=("onhashchange"in a||"onhashchange"in o)&&(!u||u>7),e.mix(p.prototype,{_init:function(e){var t;e=this._config=e||{},this.force=!!e.force,t=this._initialState=this._initialState||e.initialState||null,this.publish(l,{broadcast:2,defaultFn:this._defChangeFn}),t&&this.replace(t)},add:function(){var e=s(arguments,0,!0);return e.unshift(c),this._change.apply(this,e)},addValue:function(e,t,n){var r={};return r[e]=t,this._change(c,r,n)},get:function(t){var n=i._state,s=d(n);return t?s&&r.owns(n,t)?n[t]:undefined:s?e.mix({},n,!0):n},replace:function(){var e=s(arguments,0,!0);return e.unshift(h),this._change.apply(this,e)},replaceValue:function(e,t,n){var r={};return r[e]=t,this._change(h,r,n)},_change:function(t,n,r){return r=r?e.merge(f,r):f,r.merge&&d(n)&&d(i._state)&&(n=e.merge(i._state,n)),this._resolveChanges(t,n,r),this},_fireEvents:function(e,t,n){this.fire(l,{_options:n,changed:t.changed,newVal:t.newState,prevVal:t.prevState,removed:t.removed,src:e}),r.each(t.changed,function(t,n){this._fireChangeEvent(e,n,t)},this),r.each(t.removed,function(t,n){this._fireRemoveEvent(e,n,t)},this)},_fireChangeEvent:function(e,t,n){this.fire(t+"Change",{newVal:n.newVal,prevVal:n.prevVal,src:e})},_fireRemoveEvent:function(e,t,n){this.fire(t+"Remove",{prevVal:n,src:e})},_resolveChanges:function(e,t,n){var s={},o,u=i._state,a={};t||(t={}),n||(n={}),d(t)&&d(u)?(r.each(t,function(e,t){var n=u[t];e!==n&&(s[t]={newVal:e,prevVal:n},o=!0)},this),r.each(u,function(e,n){if(!r.owns(t,n)||t[n]===null)delete t[n],a[n]=e,o=!0},this)):o=t!==u,(o||this.force)&&this._fireEvents(e,{changed:s,newState:t,prevState:u,removed:a},n)},_storeState:function(e,t){i._state=t||{}},_defChangeFn:function(e){this._storeState(e.src,e.newVal,e._options)}},!0),e.HistoryBase=p},"3.9.1",{requires:["event-custom-complex"]});
/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("history-html5",function(e,t){function a(){a.superclass.constructor.apply(this,arguments)}var n=e.HistoryBase,r=e.Lang,i=e.config.win,s=e.config.useHistoryHTML5,o="popstate",u=n.SRC_REPLACE;e.extend(a,n,{_init:function(t){var n=i.history.state;e.Object.isEmpty(n)&&(n=null),t||(t={}),t.initialState&&r.type(t.initialState)==="object"&&r.type(n)==="object"?this._initialState=e.merge(t.initialState,n):this._initialState=n,e.on("popstate",this._onPopState,i,this),a.superclass._init.apply(this,arguments)},_storeState:function(t,n,r){t!==o&&i.history[t===u?"replaceState":"pushState"](n,r.title||e.config.doc.title||"",r.url||null),a.superclass._storeState.apply(this,arguments)},_onPopState:function(e){this._resolveChanges(o,e._event.state||null)}},{NAME:"historyhtml5",SRC_POPSTATE:o}),e.Node.DOM_EVENTS.popstate||(e.Node.DOM_EVENTS.popstate=1),e.HistoryHTML5=a;if(s===!0||s!==!1&&n.html5)e.History=a},"3.9.1",{optional:["json"],requires:["event-base","history-base","node-base"]});
/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("history-hash",function(e,t){function p(){p.superclass.constructor.apply(this,arguments)}var n=e.HistoryBase,r=e.Lang,i=e.Array,s=e.Object,o=YUI.namespace("Env.HistoryHash"),u="hash",a,f,l,c=e.config.win,h=e.config.useHistoryHTML5;e.extend(p,n,{_init:function(t){var n=p.parseHash();t=t||{},this._initialState=t.initialState?e.merge(t.initialState,n):n,e.after("hashchange",e.bind(this._afterHashChange,this),c),p.superclass._init.apply(this,arguments)},_change:function(e,t,n){return s.each(t,function(e,n){r.isValue(e)&&(t[n]=e.toString())}),p.superclass._change.call(this,e,t,n)},_storeState:function(e,t){var r=p.decode,i=p.createHash(t);p.superclass._storeState.apply(this,arguments),e!==u&&r(p.getHash())!==r(i)&&p[e===n.SRC_REPLACE?"replaceHash":"setHash"](i)},_afterHashChange:function(e){this._resolveChanges(u,p.parseHash(e.newHash),{})}},{NAME:"historyHash",SRC_HASH:u,hashPrefix:"",_REGEX_HASH:/([^\?#&]+)=([^&]+)/g,createHash:function(e){var t=p.encode,n=[];return s.each(e,function(e,i){r.isValue(e)&&n.push(t(i)+"="+t(e))}),n.join("&")},decode:function(e){return decodeURIComponent(e.replace(/\+/g," "))},encode:function(e){return encodeURIComponent(e).replace(/%20/g,"+")},getHash:e.UA.gecko?function(){var t=e.getLocation(),n=/#(.*)$/.exec(t.href),r=n&&n[1]||"",i=p.hashPrefix;return i&&r.indexOf(i)===0?r.replace(i,""):r}:function(){var t=e.getLocation(),n=t.hash.substring(1),r=p.hashPrefix;return r&&n.indexOf(r)===0?n.replace(r,""):n},getUrl:function(){return location.href},parseHash:function(e){var t=p.decode,n,i,s,o,u={},a=p.hashPrefix,f;e=r.isValue(e)?e:p.getHash();if(a){f=e.indexOf(a);if(f===0||f===1&&e.charAt(0)==="#")e=e.replace(a,"")}s=e.match(p._REGEX_HASH)||[];for(n=0,i=s.length;n<i;++n)o=s[n].split("="),u[t(o[0])]=t(o[1]);return u},replaceHash:function(t){var n=e.getLocation(),r=n.href.replace(/#.*$/,"");t.charAt(0)==="#"&&(t=t.substring(1)),n.replace(r+"#"+(p.hashPrefix||"")+t)},setHash:function(t){var n=e.getLocation();t.charAt(0)==="#"&&(t=t.substring(1)),n.hash=(p.hashPrefix||"")+t}}),a=o._notifiers,a||(a=o._notifiers=[]),e.Event.define("hashchange",{on:function(t,n,r){(t.compareTo(c)||t.compareTo(e.config.doc.body))&&a.push(r)},detach:function(e,t,n){var r=i.indexOf(a,n);r!==-1&&a.splice(r,1)}}),f=p.getHash(),l=p.getUrl(),n.nativeHashChange?o._hashHandle||(o._hashHandle=e.Event.attach("hashchange",function(e){var t=p.getHash(),n=p.getUrl();i.each(a.concat(),function(r){r.fire({_event:e,oldHash:f,oldUrl:l,newHash:t,newUrl:n})}),f=t,l=n},c)):o._hashPoll||(o._hashPoll=e.later(50,null,function(){var e=p.getHash(),t,n;f!==e&&(n=p.getUrl(),t={oldHash:f,oldUrl:l,newHash:e,newUrl:n},f=e,l=n,i.each(a.concat(),function(e){e.fire(t)}))},null,!0)),e.HistoryHash=p;if(h===!1||!e.History&&h!==!0&&(!n.html5||!e.HistoryHTML5))e.History=p},"3.9.1",{requires:["event-synthetic","history-base","yui-later"]});
/* YUI 3.9.1 (build 5852) Copyright 2013 Yahoo! Inc. http://yuilibrary.com/license/ */
YUI.add("history-hash-ie",function(e,t){if(e.UA.ie&&!e.HistoryBase.nativeHashChange){var n=e.Do,r=YUI.namespace("Env.HistoryHash"),i=e.HistoryHash,s=r._iframe,o=e.config.win;i.getIframeHash=function(){if(!s||!s.contentWindow)return"";var e=i.hashPrefix,t=s.contentWindow.location.hash.substr(1);return e&&t.indexOf(e)===0?t.replace(e,""):t},i._updateIframe=function(e,t){var n=s&&s.contentWindow&&s.contentWindow.document,r=n&&n.location;if(!n||!r)return;t?r.replace(e.charAt(0)==="#"?e:"#"+e):(n.open().close(),r.hash=e)},n.before(i._updateIframe,i,"replaceHash",i,!0),s||e.on("domready",function(){var t=i.getHash();s=r._iframe=e.Node.getDOMNode(e.Node.create('<iframe src="javascript:0" style="display:none" height="0" width="0" tabindex="-1" title="empty"/>')),e.config.doc.documentElement.appendChild(s),i._updateIframe(t||"#"),e.on("hashchange",function(e){t=e.newHash,i.getIframeHash()!==t&&i._updateIframe(t)},o),e.later(50,null,function(){var e=i.getIframeHash();e!==t&&i.setHash(e)},null,!0)})}},"3.9.1",{requires:["history-hash","node-base"]});

/* tracking.js 1552282 */ if(!window.YAHOO){window.YAHOO={}}if(!YAHOO.Media){YAHOO.Media={}}YUI.add("media-tracking",function(a){YAHOO.Media.Tracking=function(c){var d=YAHOO.ULT,e=null;if(!d){return false}var b=function(g,l){var n=g.type,i=n&&e.conf.events[n]?e.conf.events[n][l.type]:false;if(i){var k=g.target,p=k.get("tagName").toLowerCase();for(var m in i){var o=i[m],h=o.node?o.node===p:true;if(!h&&o.bubbles){var j=k.ancestor(m);if(j!=null){k=j}p=k?k.get("tagName").toLowerCase():null;h=(p===o.node)}if(h&&k.hasClass(m)){if("test" in i[m]){var f={target:k};if("obj" in e){f.obj=e.obj}if(!i[m].test(f)){return}}this.beacon(this.evaluateData(o.data,k,g))}}}};this.init=function(f){if(f.conf){e=f;if("events" in e.conf){var g=e.conf.events;for(var h in g){if(g[h].hasOwnProperty(e.namespace)){this.track(e.el,h,{type:e.namespace})}}}}else{return false}};this.pageView=function(g,h){if(!this.iframe){this.iframe=a.Node.create('<iframe frameborder=0 height=0 width=0 title=""></iframe>');this.iframe.generateID();a.one(document.body).appendChild(this.iframe)}var f=new Date().getTime();g=g||e.pageView;g=g+(g.match("\\?")?"&":"?")+"ymgts="+f;this.iframe.set("src","javascript:document.location.replace('"+g+"');");if(h&&YAHOO.i13n&&YAHOO.i13n.sendComscoreEvent){var i=window.location.protocol+"//"+window.location.host+g;YAHOO.i13n.sendComscoreEvent({c7:i})}};this.track=function(g,h,f){if(a.Lang.isString(g)&&g.indexOf("#")!==0){g="#"+g}a.on(h,b,g,this,f)};this.evaluateData=function(l,m,p){var g={},i="callback",h,k,f;var j=a.Lang.isFunction(l)?l:false;if(j){k={target:m,event:p};if("obj" in e){k.obj=e.obj}var o=j(k);for(var q in o){g[q]=o[q]}}else{for(var n in l){if(l.hasOwnProperty(n)&&n!==i){h=a.Lang.isFunction(l[n])?l[n]:!l[n]&&a.Lang.isFunction(l[i])?l[i]:false;if(h){k={target:m,event:p,param:n};if("obj" in e){k.obj=e.obj}f=h(k)}else{f=l[n]}g[n]=this.normalize(f)}}}return g};this.normalize=function(f){return a.Lang.isString(f)?f.toLowerCase().replace(/[ \t\r\n\?'":]/g,"").substr(0,12):f};this.beacon=function(i){if(!i[YAHOO.ULT.SRC_SPACEID_KEY]){i[YAHOO.ULT.SRC_SPACEID_KEY]=e.conf.spaceid}if(YMedia.rapid){var f={},h={};f={sec:i.sec||"",linkname:i.slk||"",pos:i.pos||0};if(typeof i==="object"&&!i.keys){for(var g in i){if(g!=="sec"&&g!=="slk"&&g!=="pos"){h[g]=i[g]}}f.keys=h}a.Global.fire("rapid-tracker:click",{data:f})}else{if(YAHOO.ULT&&typeof YAHOO.ULT.beacon_click==="function"){YAHOO.ULT.beacon_click(i)}}};this.init(c)};YAHOO.Media.Tracking.prototype.iframe=null},"1.0",{requires:["node","event-base"]});
/* boba.js 1632796 */ YUI.add("media-boba",function(a){a.namespace("Photos");if(window.MediaPerfTiming){window.MediaPerfTiming.config({console:true})}a.Photos.Boba=function(c,b,h,g){this.YBOBA_DEFAULT={ROW_HEIGHT:61,MAX_THUMB_ROWS:12,PHOTOS_PER_ROW:5,EOG_WIDTH:600,EOG_HEIGHT:220,VIDEO_MAX_WIDTH:960,VIDEO_MAX_HEIGHT:540,SIDEBAR_WIDTH:320,MODULE_WIDTH_SHORT:630,MODULE_WIDTH_LONG:948};this.config=[];this.config=a.JSON.parse(c);this.YBOBA_TEMPLATE=(this.config.template_js_param)?a.merge(this.YBOBA_DEFAULT,this.config.template_js_param):this.YBOBA_DEFAULT;if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("MediaPhotosLightbox","m6");this.kpiFirstImage=true}this.showInterAds=false;this.InterAdsShown=false;this.InterAdsProcessing=false;this.ignoreInterAds=false;this.config.interAdsCount=this.config.interAdsViewed;if(this.config.interAds!=""&&this.config.interAdsViewed>0&&!a.UA.ios){this.config.interAdsEnable=true}else{this.config.interAdsEnable=false}this.embedAdsViewed=1;this.config.capenable=typeof(lightbox_capenable)!=="undefined"?lightbox_capenable:"0";this.config.autoplay_if_first_item_is_video=typeof(this.config.autoplay_if_first_item_is_video)!=="undefined"?this.config.autoplay_if_first_item_is_video:false;this.config.darla_version=(this.config.darla_version?this.config.darla_version:(((YMedia.DarlaVersion&&YMedia.DarlaVersion!=="1")?"2":"1")));this.config.multimediagallery=typeof(this.config.multimediagallery)=="undefined"?(typeof(lightbox_enable_feature_multimediagallery)!=="undefined"?lightbox_enable_feature_multimediagallery:""):this.config.multimediagallery;var f=this.moduleId=(typeof(this.config.mode)=="undefined"?"photoslightboxdarla":this.config.mode);var e=this.me="#photos_"+this.moduleId;this.mode=(typeof(this.config.mode)=="undefined"?"default":this.config.mode);if(g===true){this.openmode="testing"}else{if("undefined"===typeof(h)||"undefined"===typeof(h.xhrtype)){this.openmode=(typeof(g)=="undefined"?"default":g)}else{this.openmode=(typeof(this.config.mode)=="undefined"?"module-lightbox":g)}}this.is_ext_lightbox=(typeof(this.config.is_ext_lightbox)=="undefined")?"0":this.config.is_ext_lightbox;this.photo_alias=(typeof(this.config.photo_alias)=="undefined")?"":this.config.photo_alias;this.enable_redirect_lightbox=(typeof(this.config.enable_redirect_lightbox)=="undefined")?false:this.config.enable_redirect_lightbox;if(a.UA.ie>0&&a.UA.ie<7){if(this.openmode!=="testing"&&this.openmode!=="landing"&&this.openmode!=="embed"){var d=a.one(e);if(null!==d&&typeof(d)!=="undefined"){d._node.innerHTML="";d.set("className","");d.set("id","")}}this.checksupport=function(){return false};this.slideShow=function(j){return false};return this}else{if(a.UA.ie){this.xhrInterval=1002}else{this.xhrInterval=50.1}this.checksupport=function(){return true}}this.processQueue=new a.AsyncQueue();this.showing=0;this.itemPagingCount=0;this.startTime=0;this.rowsToShow=0;this.showCtrlBar=1;this.slideWidth=0;this.slideHeight=0;this.scrWidth=0;this.scrHeight=0;this.thumbHeightAdj=0;this.imgMARTopAdj=0;this.view=(typeof(this.config.view)=="undefined"?"lightbox|thumbs":this.config.view);this.simages=new Array();this.total_images=NaN;this.isSlideshow=true;this.item_to_list=false;this.bimages_preload_size=6;this.simages_batch_size=(typeof(this.config.batchSize)=="undefined"?30:this.config.batchSize);this.bimages_point_to_load=4;this.current_thumbnail_page=0;this.current_thumbnail_page_total=30;this.sshow_load=false;this.eog=NaN;this.eogFetched=false;this.eogShowing=false;this.current_imgchange_times=0;this.videoCreated=false;this.capShowMore=false;this.showcap=true;this.loadedThumbs=0;this.allThumbLi=0;this.thumbsLeft=NaN;this.thumbStart=0;this.nextBatch=0;this.thumbIndex=[];this.availableThumbList=[];this.sidebarShowing=true;this.initObj="";this.imgLoading=0;this.current_xhr_start=0;this.historyInitialized=null;this.historyinitialURL="";this.historyKey=this.moduleId||"sptlgt";this.history=null;this.historyEnabled=true;this.stateToIdMap={};this.ss_info=NaN;this.ss_info_height=0;this.ss_info_height_hd=NaN;this.ss_info_value=[];this.xhr_call=null;this.video_js=(this.config.video_js?this.config.video_js:"/media/modules/videos/assets/js/yepcainlineplayer.js");this.enable_comment=this.config.enable_comment?this.config.enable_comment:0;this.enable_fullscreen=this.config.enable_fullscreen?this.config.enable_fullscreen:0;this.video_player_js=(this.config.video_player_js?this.config.video_player_js:"http://yep.video.yahoo.com/js/3/videoplayer-min.js?lang=en-US");this.ywaActions={LIGHTBOX_OPEN:12,LIGHTBOX_VISIBLE:13,LIGHTBOX_CLOSE:14,PHOTO_EOG_VISIBLE:15,PHOTO_EOG_MORE:16,PHOTO_NEXT:17,PHOTO_PREV:18,PHOTO_THUMB_SELECT:19,PHOTO_THUMB_NEXT:20,PHOTO_THUMB_PREV:21,PHOTO_VIDEO_THUMB_VISIBLE:25,PHOTO_VIDEO_CLICK:26,PHOTO_VIDEO_PLAY:27,PHOTO_CAPTION_EVENT:28,PHOTO_SSINFO_EVENT:29,PHOTO_MON_VISIBLE:30,PHOTO_CLICK:41,SOCIAL_SHARING:31,LIGHTBOX_COMMENT:32,LIGHTBOX_RELATED_CONTENT:33,LIGHTBOX_FULLSCREEN:34};this.ywaFields={PHOTO_MODULE_NAME_P:7,PHOTO_SLIDESHOW_ID_P:8,PHOTO_PHOTO_ID_P:9,PHOTO_BUCKET_P:10,PHOTO_ACTION_P:11,PHOTO_SEEM_SEQ_P:14,PHOTO_MODULE_NAME_A:17,PHOTO_SLIDESHOW_ID_A:18,PHOTO_PHOTO_ID_A:19,PHOTO_BUCKET_A:20,PHOTO_ACTION_A:21,PHOTO_ACTION_DETAIL_A:22};this.ywaTracking.itemPagingCount=0;this.prepareNodes=function(j){j.nodetree={slideshow:a.one(e),mainSec:a.one(e+" .mainSec"),sidebar:a.one(e+" .sidebar"),stage:a.one(e+" .stage"),closeBtn:a.one(e+" .closeBtn"),imageContainer:a.one(e+" .imageContainer"),bimgs:a.one(e+" .bimgs"),desc:a.one(e+" .desc"),imgDesc:a.one(e+" .imgDesc"),relatedContent:a.one(e+" .related"),imgMeta:a.one(e+" .imgMeta"),provider:a.one(e+" .provider"),imgDate:a.one(e+" .imgDate"),propertyLogo:a.one(e+" .yui-lightbox-property-logo"),control:a.one(e+" .control"),controlArrowLeft:a.one(e+" .mainSec .arrowLeft"),controlArrowRight:a.one(e+" .mainSec .arrowRight"),fbshare:a.one(e+" .fbshare"),pintshare:a.one(e+" .pintshare"),twitshare:a.one(e+" .twitshare"),currentSlide:a.one(e+" .currentSlide"),allSlides:a.one(e+" .all_Slides"),LREC:(this.config.darla_version==="1"?a.one(e+" .LREC"):a.one(e+" #yom-ad-LREC-tgt")),LREC2:(this.config.darla_version==="1"?a.one(e+" .LREC2"):a.one(e+" #yom-ad-LREC2-tgt")),LREC3:(this.config.darla_version==="1"?a.one(e+" .LREC3"):a.one(e+" #yom-ad-LREC3-tgt")),ss_info:a.one(e+" .ss_info"),RRThumbnail:a.one(e+" .RRThumbnail"),RRThumbnailList:a.one(e+" .RRThumbnailList"),aTags:a.all(e+" .thumb_a"),RRThumbCtrl:a.one(e+" .RRThumbCtrl"),visableThumbFrom:a.one(e+" .visableThumbFrom"),visableThumbTo:a.one(e+" .visableThumbTo"),allThumbs:a.one(e+" .allThumbs"),RRThumbCtrlArrowLeft:a.one(e+" .RRThumbCtrl .arrowLeft"),RRThumbCtrlArrowRight:a.one(e+" .RRThumbCtrl .arrowRight"),lightboxCommentCtrl:a.one(e+" .lightbox_comment_ctrl"),lightboxCommentBtn:a.one(e+" .lightbox_comment_ctrl .lightbox_comment_btn"),lightboxCommentBox:a.one(e+" .lightbox_commentbox"),lightboxCommentCloseBtn:a.one(e+" .lightbox_comment_closeBtn"),lightboxCommentInput:a.one(e+" .lightbox_comment_ctrl .lightbox_comment_input"),lightbox_fullscreen:a.one(e+" .lightbox_fullscreen"),eog:"",bd:a.one("body"),selectedImg:""}};this.initHistory();this.origUrl=location.href;if(this.openmode!=="testing"){this.prepareNodes(this)}this.lightbox_commentCtrl_anim=new a.Anim({node:this.nodetree.lightboxCommentCtrl,to:{top:0},easing:a.Easing.easeOut,duration:1});this.lightbox_commentBox_anim=new a.Anim({node:this.nodetree.lightboxCommentBox,from:{opacity:0},to:{opacity:1},easing:a.Easing.easeOut,duration:2})};a.publish("BOBA:itemChanged",{broadcast:2});a.Photos.Boba.prototype={setBtnAction:function(){var j=this;(function(){a.Event.define("arrow",{_event:(a.UA.webkit||a.UA.ie)?"keyup":"keyup",_keys:{"37":"left","38":"up","39":"right","40":"down","27":"esc"},_keyHandler:function(o,n){if(this._keys[o.keyCode]){o.direction=this._keys[o.keyCode];n.fire(o)}},on:function(p,n,o){n._detacher=p.on(this._event,this._keyHandler,this,o)},detach:function(p,n,o){n._detacher.detach()},delegate:function(q,o,p,n){o._delegateDetacher=q.delegate(this._event,this._keyHandler,n,this,p)},detachDelegate:function(p,n,o){n._delegateDetacher.detach()}})})();var b=function(){j.unhideImageAndMeta();var n=j.nodetree.slideshow.one(" .thumb_"+j.showing);if(n!==null){n.addClass("selected")}};if(a.UA.gecko>0){this.keyupHandler=a.one("body").on("keyup",function(p){var n=false,o=(a.one(".photos_ss")?a.one(".photos_ss").hasClass("on"):false);if((j.openmode!=="landing"&&j.openmode!=="embed")||((j.openmode==="landing"||j.openmode==="embed")&&p.target._node.type!=="text"&&p.target._node.type!=="textarea"&&!o)){n=true}if(n){if(p.keyCode==27&&o){if("undefined"==typeof(inlinePlayer)||!inlinePlayer.fullScrEvent){j.linkTracking(j.showing,"Close-Key");j.slideShow(p)}else{if(inlinePlayer){inlinePlayer.fullScrEvent=false}}}else{if(p.keyCode==37||p.keyCode==65){if(j.isSlideshow){if(j.showInterAds||j.InterAdsProcessing){b()}else{if(j.enable_comment==0||(p.keyCode==37&&((j.nodetree.lightboxCommentInput&&!j.nodetree.lightboxCommentInput.hasClass("on_focus"))||(a.one(".sidebar .ugccmt-comments-post-field")&&!a.one(".sidebar .ugccmt-comments-post-field").hasClass("on_focus"))))){j.selectThumb((j.lookupAvailableThumb(j.showing,-1)).thumbkey,"pre-key")}}}}else{if(p.keyCode==39||p.keyCode==68){if(j.isSlideshow){if(j.showInterAds||j.InterAdsProcessing){b()}else{if(j.enable_comment==0||(p.keyCode==39&&((j.nodetree.lightboxCommentInput&&!j.nodetree.lightboxCommentInput.hasClass("on_focus"))||(a.one(".sidebar .ugccmt-comments-post-field")&&!a.one(".sidebar .ugccmt-comments-post-field").hasClass("on_focus"))))){j.selectThumb((j.lookupAvailableThumb(j.showing,1)).thumbkey,"next-key")}}}}else{if(p.keyCode==38){}else{if(p.keyCode==40){}}}}}p.preventDefault();p.stopPropagation()}})}else{this.keyupHandler=a.one("body").on("arrow",function(p){var n=false,o=(a.one(".photos_ss")?a.one(".photos_ss").hasClass("on"):false);if((j.openmode!=="landing"&&j.openmode!=="embed")||((j.openmode==="landing"||j.openmode==="embed")&&p.target._node.type!=="text"&&p.target._node.type!=="textarea"&&!o)){n=true}if(n){if(p.direction=="esc"&&o){if("undefined"==typeof(inlinePlayer)||!inlinePlayer.fullScrEvent){j.linkTracking(j.showing,"Close-Key");j.slideShow(p)}else{if(inlinePlayer){inlinePlayer.fullScrEvent=false}}}else{if(p.direction=="left"){if(j.isSlideshow){if(j.showInterAds||j.InterAdsProcessing){b()}else{if(j.enable_comment==0||((j.nodetree.lightboxCommentInput&&!j.nodetree.lightboxCommentInput.hasClass("on_focus"))||(a.one(".sidebar .ugccmt-comments-post-field")&&!a.one(".sidebar .ugccmt-comments-post-field").hasClass("on_focus")))){j.selectThumb(j.lookupAvailableThumb(j.showing,-1).thumbkey,"pre-key")}}}}else{if(p.direction=="right"){if(j.isSlideshow){if(j.showInterAds||j.InterAdsProcessing){b()}else{if(j.enable_comment==0||((j.nodetree.lightboxCommentInput&&!j.nodetree.lightboxCommentInput.hasClass("on_focus"))||(a.one(".sidebar .ugccmt-comments-post-field")&&!a.one(".sidebar .ugccmt-comments-post-field").hasClass("on_focus")))){j.selectThumb(j.lookupAvailableThumb(j.showing,1).thumbkey,"next-key")}}}}else{if(p.direction=="up"){}else{if(p.direction=="down"){}}}}}p.preventDefault();p.stopPropagation()}})}if(j.enable_comment==1){this.lightbox_comment_keyupHandler=j.nodetree.lightboxCommentInput.on("keyup",function(o){if(o.keyCode==13){var n=j.nodetree.lightboxCommentInput.get("value");a.one(".sidebar #ugccmt-post-frm-textarea").set("value",n);a.one(".sidebar #ugccmt-post-frm-submit").simulate("click");j.comment_setting();a.one(".sidebar #ugccmt-post-frm-textarea").scrollIntoView()}})}if((j.openmode!=="landing"||j.is_ext_lightbox==="1")&&j.openmode!=="embed"){this.windowresizeHandler=a.on("windowresize",function(n){j.hideThumbs(j.current_thumbnail_page);j.scrWidth=a.config.win.innerWidth||a.config.doc.documentElement.clientWidth;j.scrHeight=a.config.win.innerHeight||a.config.doc.documentElement.clientHeight;j.updateLayout()});this.nodetree.closeBtn.on("click",function(o){j.linkTracking(j.thumbIndex[j.showing],"Close-Button");if(j.is_ext_lightbox==="1"){var n=function(){window.location="/"+j.photo_alias+"/"};o.preventDefault();if(window.history.length&&window.history.length>1){this.history.replaceValue(this.historyKey,this.historyinitialURL,{url:this.historyinitialURL});window.history.back()}else{n()}}else{j.slideShow(o)}},this)}j.nodetree.ss_info.one(" .btn").on("click",function(o){var n=this;n.toggleInfo(false);setTimeout(function(){n.hideThumbs(n.current_thumbnail_page)},301)},this);if(j.isSlideshow){j.nodetree.controlArrowLeft.on("click",function(o){if(j.showInterAds||j.InterAdsProcessing){j.unhideImageAndMeta();var n=j.nodetree.slideshow.one(" .thumb_"+j.showing);if(n!==null){n.addClass("selected")}}else{j.selectThumb(j.lookupAvailableThumb(j.showing,-1).thumbkey,"pre-button")}},this);j.nodetree.controlArrowRight.on("click",function(o){if(j.firstNavClick){j.firstNavClick=false}if(j.showInterAds||j.InterAdsProcessing){j.unhideImageAndMeta();var n=j.nodetree.slideshow.one(" .thumb_"+j.showing);if(n!==null){n.addClass("selected")}}else{j.selectThumb(j.lookupAvailableThumb(j.showing,1).thumbkey,"next-button")}},this);if(j.nodetree.RRThumbCtrlArrowLeft){j.nodetree.RRThumbCtrlArrowLeft.on("click",function(n){if(j.firstNavClick){j.firstNavClick=false}j.linkTracking(j.thumbIndex[j.showing],"Thumb-pre");if(j.current_thumbnail_page-1<0){j.current_thumbnail_page=Math.ceil(j.loadedThumbs/j.current_thumbnail_page_total)-1}else{j.current_thumbnail_page=j.current_thumbnail_page-1}j.hideThumbs(j.current_thumbnail_page)},this)}if(j.nodetree.RRThumbCtrlArrowRight){j.nodetree.RRThumbCtrlArrowRight.on("click",function(n){j.linkTracking(j.thumbIndex[j.showing],"Thumb-next");if(j.current_thumbnail_page_total*(j.current_thumbnail_page+1)>=j.loadedThumbs){j.current_thumbnail_page=0}else{j.current_thumbnail_page=j.current_thumbnail_page+1}j.hideThumbs(j.current_thumbnail_page)},this)}if(j.openmode!=="landing"&&j.openmode!=="embed"){if(a.UA.ios||a.UA.android){var e=0,m=0;var g=this;var d=this.nodetree.control;var f=((a.UA.ios)?"translate3d({X},0,0)":"translate({X},0)");var h=function(q){var r=q.flick.distance;var n=g.nodetree.imageContainer.one(".selected");if(r<0){var p=1,o="next-button";n.setStyle("webkitTransform",a.substitute(f,{X:"-30%"}));n.setStyle("opacity",0);setTimeout(function(){n.setStyle("webkitTransform",a.substitute(f,{X:"0"}));n.setStyle("opacity",1);g.selectThumb(g.lookupAvailableThumb(g.showing,p).thumbkey,o)},200)}else{if(r>0){var p=-1,o="pre-button";n.setStyle("webkitTransform",a.substitute(f,{X:"30%"}));n.setStyle("opacity",0);setTimeout(function(){n.setStyle("webkitTransform",a.substitute(f,{X:"0"}));n.setStyle("opacity",1);g.selectThumb(g.lookupAvailableThumb(g.showing,p).thumbkey,o)},200)}else{}}};g.nodetree.imageContainer.on("flick",h,this);g.nodetree.imgDesc.on("flick",h,this);g.nodetree.slideshow.addClass("tablet")}}}if(j.openmode!=="landing"&&j.openmode!=="embed"){if(a.UA.ios||a.UA.android){this.nodetree.RRThumbnail.setStyle("opacity",1);this.nodetree.slideshow.on("touchmove",function(n){n.preventDefault()});this.nodetree.imgDesc.on("touchmove",function(n){n.preventDefault()})}}j.nodetree.desc.on("mousewheel",function(n){if(n.target&&!n.target.ancestor(".desc")){return}else{if(j.nodetree.desc&&(j.nodetree.desc.get("scrollHeight")<=j.nodetree.desc.get("clientHeight"))){return}else{if(j.linktrackCaptionScroll&&j.linktrackCaptionScroll===j.itemPagingCount){return}}}j.linktrackCaptionScroll=j.itemPagingCount;j.linkTracking(j.thumbIndex[j.showing],"caption-scroll")},this);j.nodetree.fbshare.on("click",function(n){n.stopPropagation();j.fbshare(n.currentTarget)},this);if(j.nodetree.twitshare){j.nodetree.twitshare.on("click",function(n){n.stopPropagation();j.twitshare()},this)}if(j.nodetree.pintshare){j.nodetree.pintshare.on("click",function(n){n.stopPropagation();j.pintshare()},this)}j.nodetree.imgDesc.on("click",function(n){n.stopPropagation();if(n.target.hasClass("more")||n.target.hasClass("less")||n.target.ancestor("a.more")||n.target.ancestor("a.less")){j.setCaptionVisibility(n.target.hasClass("more")||n.target.ancestor("a.more"),n);n.preventDefault()}},this);if(j.enable_comment==1){j.nodetree.lightboxCommentBtn.on("click",function(){if(j.nodetree.lightboxCommentBox.hasClass("hide")){j.comment_setting();j.nodetree.lightboxCommentBtn.setAttribute("disabled","disabled");j.linkTracking(j.showing,"comment-open")}});if(j.nodetree.lightboxCommentCloseBtn){j.nodetree.lightboxCommentCloseBtn.on("click",function(){j.comment_setting()})}if(j.nodetree.lightboxCommentInput){j.nodetree.lightboxCommentInput.on("focus",function(){j.nodetree.lightboxCommentInput.addClass("on_focus")});j.nodetree.lightboxCommentInput.on("blur",function(){j.nodetree.lightboxCommentInput.removeClass("on_focus")})}if(j.nodetree.lightboxCommentBox){j.nodetree.lightboxCommentBox.delegate("focus",function(n){n.currentTarget.addClass("on_focus")},"textarea");j.nodetree.lightboxCommentBox.delegate("blur",function(n){n.currentTarget.removeClass("on_focus")},"textarea");j.nodetree.lightboxCommentBox.delegate("mouseover",function(n){n.currentTarget.removeAttribute("href");n.currentTarget.replaceClass("ugccmt-user-cmt","lightbox-ugccmt-user-cmt")},".ugccmt-info .ugccmt-user-cmt");j.nodetree.lightboxCommentBox.delegate("click",function(n){if(n.currentTarget.hasClass("ugccmt-post-button")){j.linkTracking(j.showing,"comment-post")}if(n.currentTarget.hasClass("ugccmt-view-more")){j.linkTracking(j.showing,"comment-more")}},".ugccmt-post-button, .ugccmt-view-more")}}if(j.openmode==="landing"&&j.openmode==="embed"){j.toggleProvider()}if(!(a.UA.ie>0&&j.openmode==="embed")){j.nodetree.slideshow.focus()}if(typeof(j.relatedContentEvent)=="function"&&j.nodetree.relatedContent!=null){j.nodetree.relatedContent.delegate("click",function(){j.linkTracking(j.showing,"related_content_click");j.relatedContentEvent()},".related")}if(j.enable_fullscreen&&j.enable_fullscreen==1&&a.UA.ie<=0){var c=j.nodetree.mainSec._node;var l=j.nodetree.lightbox_fullscreen;var k="fullscreenchange";if(a.UA.gecko>0){k="mozfullscreenchange"}if(a.UA.webkit){k="webkitfullscreenchange"}if(l){l.on("click",function(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement){if(c.requestFullscreen){c.requestFullscreen()}else{if(c.mozRequestFullScreen){c.mozRequestFullScreen()}else{if(c.webkitRequestFullscreen){c.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}}}else{if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}}}}})}document.addEventListener(k,function(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement){l.replaceClass("on","off");j.nodetree.slideshow.all(".sharebuttons").removeClass("hide");j.nodetree.closeBtn.removeClass("hide");j.updatePermalink(j.showing);j.linkTracking(j.showing,"fullscreen-exit")}else{l.replaceClass("off","on");j.nodetree.slideshow.all(".sharebuttons").addClass("hide");j.nodetree.closeBtn.addClass("hide");j.linkTracking(j.showing,"fullscreen-enter");j.linkTracking(j.showing,"fullscreen-pv")}})}},unsetBtnAction:function(){},uiInit:function(d,b,c){},slideShow:function(b){},hideThumbs:function(b){},updateLayout:function(){},checkThumbs:function(){},selectedImgSwitch:function(){},animImg:function(){},populateCaption:function(){},setCaptionVisibility:function(b,c){},setTriggerShortenUrlArea:function(){if(a.UA.ie>0&&a.UA.ie<7){return true}else{if(!a.UA.ie){document.captureEvents(Event.MOUSEMOVE)}}var e=this;var b=e.nodetree.slideshow.one(".sharebuttons").get("region");var d=(b.right-200>0?b.right-200:0);var c=b.right+150;var g=(b.top-100>0?b.top-100:0);var f=b.top+100;document.onmousemove=function(l){if(e.sshow_load==false){return}if(a.UA.ie){var k=event.clientX+document.body.scrollLeft;var h=event.clientY+document.body.scrollTop}else{if(!a.UA.ie){var k=l.pageX;var h=l.pageY}}if((k>=d&&k<=c&&h>=g&&h<=f)&&e.eogShowing==false){if(typeof(e.simages[e.thumbIndex[e.showing]].social_photo_shortenedLink)==="undefined"){e.simages[e.thumbIndex[e.showing]].social_photo_shortenedLink=[];for(var j=1;j<=3;j++){e.getSocialShortenedURL(j)}}}}},comment_setting:function(){var b=this;if(b.nodetree.lightboxCommentBox&&!b.nodetree.lightboxCommentBox.hasClass("hide")){b.lightbox_commentCtrl_anim.stop();if(b.nodetree.LREC){b.nodetree.LREC.removeClass("hide")}if(b.nodetree.LREC2){b.nodetree.LREC2.removeClass("hide")}if(b.nodetree.LREC3){b.nodetree.LREC3.removeClass("hide")}if(b.nodetree.sidebar.one(".darla")){b.nodetree.sidebar.one(".darla").removeClass("hide")}b.nodetree.ss_info.removeClass("hide");b.nodetree.RRThumbnail.removeClass("hide");b.nodetree.lightboxCommentBox.addClass("hide");b.nodetree.lightboxCommentCtrl.removeAttribute("style");b.nodetree.lightboxCommentInput.removeClass("hide");b.nodetree.lightboxCommentInput.set("value","");if(b.nodetree.lightboxCommentCloseBtn){b.nodetree.lightboxCommentCloseBtn.addClass("hide")}b.nodetree.lightboxCommentBtn.removeAttribute("disabled")}else{if(b.nodetree.LREC){b.nodetree.LREC.addClass("hide")}if(b.nodetree.LREC2){b.nodetree.LREC2.addClass("hide")}if(b.nodetree.LREC3){b.nodetree.LREC3.addClass("hide")}if(b.nodetree.sidebar.one(".darla")){b.nodetree.sidebar.one(".darla").addClass("hide")}b.nodetree.ss_info.addClass("hide");b.nodetree.RRThumbnail.addClass("hide");if(b.nodetree.lightboxCommentCloseBtn){b.nodetree.lightboxCommentCloseBtn.removeClass("hide")}b.nodetree.lightboxCommentBox.removeClass("hide");b.nodetree.lightboxCommentInput.addClass("hide");this.lightbox_commentBox_anim.run();this.lightbox_commentCtrl_anim.run()}},loadImages:function(n,e,l,k,c,g,f){var m=this;if(window.MediaPerfTiming&&isNaN(m.thumbsLeft)){window.MediaPerfTiming.startTimer("MediaPhotosLightbox","m1")}k=!k?false:k;c=!c?1:c;g=!g?false:g;m.current_xhr_start=e=m.item_to_list?e-1:e;if(f){var j=f}else{if(typeof(this.config.pt_alias)!=="undefined"){var j="/_xhr/photos/single-lightbox/?photoalias="+encodeURIComponent(this.config.pt_alias)+"&start="+e+"&count="+l+"&capenable="+this.config.capenable}else{if(typeof(this.config.pt_uuid)!=="undefined"||n==="photo"){var j="/_xhr/photos/single-lightbox/?photoid="+this.config.pt_uuid+"&start="+e+"&count="+l+"&capenable="+this.config.capenable}else{if(typeof(this.config.ss_alias)!=="undefined"){if(typeof(this.config.ss_pivot_alias)!=="undefined"&&e===0){var j="/_xhr/photos/gallery-lightbox/?slideshowalias="+encodeURIComponent(this.config.ss_alias)+"&pivotalias="+encodeURIComponent(this.config.ss_pivot_alias)+"&start="+e+"&count="+l+"&view="+n}else{var j="/_xhr/photos/gallery-lightbox/?slideshowalias="+encodeURIComponent(this.config.ss_alias)+"&start="+e+"&count="+l+"&view="+n}}else{if(typeof(this.config.ss_pivot_alias)!=="undefined"&&e===0){var j="/_xhr/photos/gallery-lightbox/?slideshowid="+this.config.ss_uuid+"&pivotalias="+encodeURIComponent(this.config.ss_pivot_alias)+"&start="+e+"&count="+l+"&view="+n}else{var j="/_xhr/photos/gallery-lightbox/?slideshowid="+this.config.ss_uuid+"&start="+e+"&count="+l+"&view="+n}}}}}if(typeof(m.config.multimediagallery)!="undefined"&&m.config.multimediagallery=="1"&&typeof(m.LightboxInlineYep)=="undefined"&&e==0){j=j+"&getvideoconf=1";if(typeof(yql_url)!="undefined"){yql_url+=' and getvideoconf="1"'}}if(typeof(m.config.multimediagallery)!="undefined"&&m.config.multimediagallery=="1"){j=j+"&_enable_feature_multimediagallery="+m.config.multimediagallery;if(typeof(yql_url)!="undefined"){yql_url+=' and multimediagallery="'+m.config.multimediagallery+'"'}}if(m.openmode==="default-lightbox"||m.openmode==="module-lightbox"){var p=screen.availWidth-320;var b=((p>1440)?"1920x1080":((p>1024)?"1440x900":((p>800)?"1024x768":"800x600")));j+="&mainArea="+b;if(typeof(yql_url)!="undefined"){yql_url+=' and mainArea="'+b+'"'}}if(typeof(m.config.enable_dedup)!="undefined"){j=j+"&enable_dedup="+m.config.enable_dedup}var h={inject:function(r,u){var t=[];if(u[0]==="photo"&&r.xhrtype==="photo"){if(r.photo==null){t[0]=a.Lang.isArray(r.photos)?r.photos[0]:r.photos;m.config.pt_uuid=t[0].uuid}else{t[0]=r.photo;m.config.pt_uuid=r.photo.uuid}m.total_images=t[0].url!=""?1:0}else{if(u[0]==="photo"){m.isSlideshow=true;m.item_to_list=true;u[0]=m.view;u[1]++;if(m.sshow_load){m.unsetBtnAction();m.setBtnAction()}}t=r.photos;if(isNaN(m.thumbsLeft)){m.thumbsLeft=r.total-u[2];m.config.ss_uuid=r.slideshow_id;var s=new Image();s.src=t[0].url;if(typeof(m.config.ss_uuid)=="string"){m.fetchGalleryEndContent()}if(isNaN(m.ss_info)){if((r.slideshow_title_baked_html!==undefined&&r.slideshow_title_baked_html!==""&&r.slideshow_title_baked_html!==null)||(r.slideshow_desc!==""&&r.slideshow_desc!==undefined&&r.slideshow_desc!==null)){if(typeof(m.ss_info_value)=="undefined"){m.ss_info_value=["",""]}m.ss_info_value[0]=r.slideshow_title_baked_html||"";m.ss_info_value[1]=r.slideshow_desc||"";m.ss_info=2}else{m.ss_info=-1}}}else{m.thumbsLeft=m.thumbsLeft-u[2]}if(m.thumbsLeft>0){m.thumbStart=u[1]+u[2];m.nextBatch=Math.min(u[2],m.thumbsLeft);if(m.sshow_load){setTimeout(function(){m.loadImages(m.view,m.thumbStart,m.nextBatch,false,false,true)},m.xhrInterval)}}}m.config.spaceid=(r.spaceid!==undefined&&r.spaceid!==null&&r.spaceid!==""&&r.spaceid!=="0")?r.spaceid:((m.config.spaceid!==undefined&&m.config.spaceid!==null)?m.config.spaceid:0);if(m.openmode==="embed"){m.config.spaceid=(lightbox_default_spaceid?lightbox_default_spaceid:m.config.spaceid)}m.config.photoBy=r.photoby||"";m.config.ss_title=r.slideshow_title||"";m.config.ss_plink_vita=r.slideshow_plink_vita||"";if(typeof(m.config.videoconf)=="undefined"&&typeof(r.videoconf)!="undefined"){m.config.videoconf=r.videoconf}var w=typeof(t);if(w=="object"&&w!=="undefined"&&t.length>0){var v=m.insertImages(t,u);u[1]=v[0];u[2]=v[1];m.total_images=m.simages.length;if(m.sshow_load){m.loadthumbs(u[1],u[2])}}},kpiStart:function(){if(window.MediaPerfTiming&&isNaN(m.thumbsLeft)){window.MediaPerfTiming.endTimer("MediaPhotosLightbox","m1");window.MediaPerfTiming.startTimer("MediaPhotosLightbox","m2");return true}else{return false}},kpiEnd:function(r){if(window.MediaPerfTiming&&r){window.MediaPerfTiming.endTimer("MediaPhotosLightbox","m2")}},complete:function(w,v,s){if(v.responseText!=""){try{var u=this.kpiStart();var r=a.JSON.parse(v.responseText);if(s[4]){m.processQueue.run()}this.inject(r,s);this.kpiEnd(u)}catch(t){a.log(s[0]+":xhr return error. ")}}else{if(m.config.xhr_url){m.thumbsLeft=0}else{m.current_xhr_start=Math.max(m.current_xhr_start-s[1]-m.simages_batch_size,0)}}},success:function(u,x,s,v,r,t){try{var y=this.kpiStart();if(t){m.processQueue.run()}if(typeof(u)=="undefined"||u==null){return}if(typeof(u.query)!="undefined"&&typeof(u.query.results)!="undefined"&&typeof(u.query.results.result)!="undefined"){var z=u.query.results.result;this.inject(z,[x,s,v])}this.kpiEnd(y)}catch(w){a.log(x+":xhr return error. ")}},retry:function(t,r,w,s,v,u){if(v<5){m.loadImages(r,w,s,false,v+1,u)}else{a.log("Failure xhr call;","info","example")}},failure:function(t,s,r){if(r[3]<5){m.loadImages(r[0],r[1],r[2],k,r[3]+1,true)}else{a.log("Failure xhr call; tranID: "+t+", http status: "+s.status,"info","example")}}};var o=(typeof(yql_url)!="undefined");if(o){j="http://legophotos.yql.yahooapis.com/v1/public/yql?q="+encodeURIComponent(yql_url)+"&format=json&callback=cbfunc";var q={on:{success:h.success,failure:h.retry},context:h,args:[n,e,l,c,g]}}else{var q={on:{complete:h.complete,failure:h.failure},context:h,sync:k,arguments:[n,e,l,c,g]}}if(g){var d="tx-"+n+e;m.processQueue.add({id:d,fn:function(){m.processQueue.pause();m.xhr_call=(o)?a.jsonp(j,q):a.io(j,q)},context:m,timeout:50});if(!m.processQueue.isRunning()){m.processQueue.run()}}else{m.xhr_call=(o)?a.jsonp(j,q):a.io(j,q)}},insertImages:function(e,d){var f=d[0],g=this.simages.length;insertcount=d[2],insertimgs=e;var c=this;if(f=="photo"){insertcount=1}var j=0;for(var h=0;h<insertcount;h++){if(insertimgs[h]){if(!(this.simages[0]&&(c.openmode=="landing"||c.openmode=="embed")&&d[1]==0)){var b=g+j;var k=(insertimgs[h].provider!=""&&insertimgs[h].provider!=null?insertimgs[h].provider:"")+((insertimgs[h].provider!=""&&insertimgs[h].provider!=null)&&((insertimgs[h].byline!=""&&insertimgs[h].byline!=null)||(insertimgs[h].credit!=""&&insertimgs[h].credit!=null))?" | ":"")+((insertimgs[h].byline!=""&&insertimgs[h].byline!=null)||(insertimgs[h].credit!=""&&insertimgs[h].credit!=null)?this.config.photoBy+" ":"")+(insertimgs[h].byline!=""&&insertimgs[h].byline!=null?insertimgs[h].byline:"")+((insertimgs[h].byline!=""&&insertimgs[h].byline!=null)&&(insertimgs[h].credit!=""&&insertimgs[h].credit!=null)?" / ":"")+(insertimgs[h].credit!=""&&insertimgs[h].credit!=null?insertimgs[h].credit:"");this.simages[b]={link:insertimgs[h].url,slink:insertimgs[h].surl,uuid:insertimgs[h].uuid,type:insertimgs[h].type||"image",provider:k,provider_p:insertimgs[h].provider,provider_c:insertimgs[h].credit,provider_b:insertimgs[h].byline,imgDate:insertimgs[h].date,desc:insertimgs[h].captionBakedHtml,p_title:insertimgs[h].photo_title,rev:insertimgs[h].rev,revsp:insertimgs[h].revsp,plink:insertimgs[h].plink,thumbStatus:"loaded",imgStatus:0,slideWidth:insertimgs[h].width,slideHeight:insertimgs[h].height,swidth:insertimgs[h].swidth,sheight:insertimgs[h].sheight,plink_vita:insertimgs[h].plink_vita,srchtrm:insertimgs[h].srchtrm};if("video"===insertimgs[h].type){this.simages[b].videoPlayerData=insertimgs[h].videoPlayerData;this.simages[b].duration=insertimgs[h].duration}this.simages[b].relatedContents=insertimgs[h].relatedContents?insertimgs[h].relatedContents:""}j++}}return[g,j]},preloadImages:function(d,h){var e=this;var g=d.length;var j=a.one(a.config.doc.createDocumentFragment());var f=function(m,l,k){k.onload=function(){if(m.imgStatus===0){var o=j.appendChild(a.Node.create('<li class="bimg_'+l+'">'));var p=e.nodetree;if(m.type==="video"){var q=o.appendChild(a.Node.create('<div class="video_wrap">'));var n=q.appendChild(a.Node.create('<button class="icon">'));q.appendChild(k);n.on("click",function(s){e.createVideo();s.stopPropagation()});if(!YMedia.YepCAInlinePlayer){e.initVideoObj();var r=a.Photos.VideosYepCAInlinePlayer.getInstance();r.loadVideoJS()}}else{var q=o.appendChild(a.Node.create('<div class="bimg">'));q.appendChild(k)}m.imgStatus=1;if(e.isSlideshow&&!a.UA.ios&&!a.UA.android){q.on("click",function(s){e.selectThumb(e.lookupAvailableThumb(l,1).thumbkey,"next-hover");s.stopPropagation()})}if(a.UA.ie){o.on("mouseover",function(){p.control.setStyle("display","block");if(p.propertyLogo){p.propertyLogo.setStyle("display","block")}})}p.bimgs.appendChild(j)}}};for(var c=0;c<g;c++){if(typeof(d[c])=="object"&&d[c].imgStatus===0){if((d[c].type=="image")||(d[c].type=="video")){var b=new Image();b.src=d[c].link;f(d[c],h[c],b)}}}},loadthumbs:function(c,k,b){if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("MediaPhotosLightbox","m3")}var l=this;var m=l.nodetree;var j=a.one(a.config.doc.createDocumentFragment());for(var g=0;g<k;g++){var q=c+g;if(l.simages[q].thumbStatus=="loaded"){l.availableThumbList.push(q);var p=j.appendChild(a.Node.create('<li class="thumb_'+q+'">'));var o=p.appendChild(a.Node.create('<a class="thumb_a" tabindex='+q+' href="">'));var f=o.appendChild(a.Node.create('<img class="thumb_img" tabindex='+q+">"));if("video"===l.simages[q].type){var d=o.appendChild(a.Node.create('<div class="thumbBorder"><span class="video_play"></span></div>'))}else{var d=o.appendChild(a.Node.create('<div class="thumbBorder">'))}f.on("error",function(t){if(t.currentTarget.get("parentNode")!=null){t.currentTarget.get("parentNode").get("parentNode").setStyle("display","none");l.loadedThumbs--;var r=a.Array.indexOf(l.availableThumbList,parseInt(t.currentTarget.get("tabIndex")));l.availableThumbList.splice(r,1);l.nodetree.allSlides._node.innerHTML=l.nodetree.allThumbs._node.innerHTML=l.loadedThumbs;if(l.openmode==="embed"){var s=l.nodetree.slideshow.one(".all_Slides-top");if(s){s._node.innerHTML=l.nodetree.allSlides._node.innerHTML}}l.hideThumbs(l.current_thumbnail_page);a.log("Loading "+t.currentTarget.get("tabIndex")+" thumbnail fail(removed): "+t.currentTarget.get("src"));if(l.showing==r){l.selectThumb(l.lookupAvailableThumb(r+1,0).thumbkey,"Auto-Next")}}else{a.log("Loading "+t.currentTarget.get("tabIndex")+" thumbnail fail(no removed): "+t.currentTarget.get("src"))}});f.set("src",l.simages[q].slink);l.thumbIndex[q]=q;o.on("click",function(r){r.preventDefault();r.stopPropagation();if(l.isSlideshow){l.selectThumb(this.getAttribute("tabIndex"),"Thumb-Photo")}});l.loadedThumbs++;l.allThumbLi++}}l.nodetree.RRThumbnailList.appendChild(j);l.nodetree.allSlides._node.innerHTML=l.nodetree.allThumbs._node.innerHTML=l.loadedThumbs;if(l.openmode==="embed"){var h=l.nodetree.slideshow.one(".all_Slides-top");if(h){h._node.innerHTML=l.nodetree.allSlides._node.innerHTML}}if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("MediaPhotosLightbox","m3")}l.hideThumbs(l.current_thumbnail_page);var e=l.nodetree.RRThumbnailList.one("li.selected");if(b){var n=l.simages.length;for(var g=n;g--;){if(b===l.simages[g].uuid){l.showing=g;e=null;break}}}if(e==null&&l.eogShowing==false&&l.showInterAds==false){this.startTime=Math.floor(new Date().getTime()/10000)*10;if(l.openmode!="landing"){l.linkTracking("open","lgt-ss-open")}l.selectThumb(l.lookupAvailableThumb(l.showing,0).thumbkey,"Open-Button");l.nodetree.slideshow.removeClass("loading");l.imgLoading=0;l.updateLayout();if(l.ss_info==2){l.loadInfo()}}},fbshare:function(f){var h=this;var e=h.simages[h.thumbIndex[h.showing]];if(e){var g="http://"+document.domain+e.plink;if(this.enable_redirect_lightbox=="1"){g=this.translateLightboxUrl(g)}var b=(h.simages[h.thumbIndex[h.showing]].social_photo_shortenedLink[1])?h.simages[h.thumbIndex[h.showing]].social_photo_shortenedLink[1]:g;var j=e.p_title;var c=e.slink;var d="http://www.facebook.com/sharer.php?u="+encodeURIComponent(b)+"&t="+encodeURIComponent(j);if(!a.UA.ie){window.open(d,"","toolbar=0,status=0,width=640,height=320")}else{window.open(d,"","toolbar=0,status=0")}h.linkTracking(h.showing,"fbshare")}},pintshare:function(){var f=this;var d=f.simages[f.thumbIndex[f.showing]];var e=document.domain+d.plink;var b=(f.simages[f.thumbIndex[f.showing]].social_photo_shortenedLink[3])?f.simages[f.thumbIndex[f.showing]].social_photo_shortenedLink[3]:e;if(d){var c="http://pinterest.com/pin/create/button/?url="+encodeURIComponent(b)+"&media="+d.link;if(!a.UA.ie){window.open(c,"","toolbar=0,status=0,width=640,height=320")}else{window.open(c,"","toolbar=0,status=0")}f.linkTracking(f.showing,"pintshare")}},twitshare:function(){var e=this;var g=e.nodetree.twitshare;var d=encodeURI("http://"+document.domain+e.simages[e.thumbIndex[e.showing]].plink);if(this.enable_redirect_lightbox=="1"){d=this.translateLightboxUrl(d)}var b=(e.simages[e.thumbIndex[e.showing]].social_photo_shortenedLink[2])?e.simages[e.thumbIndex[e.showing]].social_photo_shortenedLink[2]:d;var f=e.simages[e.thumbIndex[e.showing]].p_title;var c="http://twitter.com/share?url="+encodeURIComponent(b)+"&text="+encodeURIComponent(f);if(e.simages[e.thumbIndex[e.showing]]){if(!a.UA.ie){window.open(c,"","toolbar=0,status=0,width=640,height=320")}else{window.open(c,"","toolbar=0,status=0")}e.linkTracking(e.showing,"twitshare")}},load_lightbox_comment:function(){var d=this;var e=d.current_imgchange_times;var c=d.config.comment_button_text?d.config.comment_button_text:"Comments";var b={srcNode:".lightbox_commentbox",path:"/_remote/",params:{m_id:"MediaRemoteInstance",m_mode:"multipart",instance_id:"6230d875-17ae-322e-91ab-1f4c04f554da",content_id:d.simages[d.thumbIndex[d.showing]].uuid,mi_asset_title:d.simages[d.thumbIndex[d.showing]].p_title,mi_vita_type:"photo",mi_vita_img_url:d.simages[d.thumbIndex[d.showing]].slink,mi_vita_img_width:d.simages[d.thumbIndex[d.showing]].swidth,mi_vita_img_height:d.simages[d.thumbIndex[d.showing]].sheight,mi_vita_img_rights:"anywhere",mi_vita_photo_album:d.config.ss_title,baseurl:"http://"+document.domain+d.simages[d.thumbIndex[d.showing]].plink},timeout:10000,onSuccess:function(j){if(e==d.current_imgchange_times){var g=0;if(a.one(".sidebar #ugccmt-total")){var h=a.one(".sidebar #ugccmt-total").getHTML();h=h.replace(/^\s+|\s+$/g,"");g=h.split(" ",1);g=g[0]}d.nodetree.lightboxCommentBtn.one("span").setHTML(c+"("+g+")");if(d.nodetree.lightboxCommentCtrl.one(".lightbox_comment_btn_mask")){d.nodetree.lightboxCommentCtrl.one(".lightbox_comment_btn_mask").remove()}if(d.nodetree.lightboxCommentBtn.one(".loadico")){d.nodetree.lightboxCommentBtn.one(".loadico").remove()}var f=d.nodetree.lightboxCommentBtn.getStyle("width");d.nodetree.lightboxCommentInput.setStyles({display:"block",left:f});d.current_imgchange_times=0}},onMarkup:function(h){if(e==d.current_imgchange_times){var g=this,f=a.one(g.config.srcNode);f.setContent(g.markup);f.setStyle("minHeight","");f.removeClass("yom-loading")}},onFailure:function(h,g){if(e==d.current_imgchange_times){if(d.nodetree.lightboxCommentBtn.one(".loadico")){d.nodetree.lightboxCommentBtn.one(".loadico").remove()}if(d.nodetree.lightboxCommentBtn){var f=d.nodetree.lightboxCommentBtn.one("span");if(f){f.setHTML(c+"(X)");if(!d.nodetree.lightboxCommentCtrl.one(".lightbox_comment_btn_mask")){d.nodetree.lightboxCommentBtn.insert(a.Node.create('<div class="lightbox_comment_btn_mask"></div>'),"before")}}}d.current_imgchange_times=0}console.log("comment loaded fail: "+h+JSON.stringify(g))}};if(!d.nodetree.lightboxCommentCtrl.one(".lightbox_comment_btn_mask")){d.nodetree.lightboxCommentBtn.insert(a.Node.create('<div class="lightbox_comment_btn_mask"></div>'),"before")}d.nodetree.lightboxCommentInput.setStyle("display","none");d.nodetree.lightboxCommentBtn.one("span").setHTML(c);if(!d.nodetree.lightboxCommentBtn.one(".loadico")){d.nodetree.lightboxCommentBtn.appendChild(a.Node.create('<div class="loadico"></div>'))}new a.Media.RMP.load(b)},hideExternalComment:function(){if(a.one("#yom-comments")){var c=a.one("#yom-comments");var b=a.one("#ugccmt-comments");var f=a.one("#ugccmt-total");var h=a.one("#ugccmt-post-frm");var e=a.one("#ugccmt-post-frm-textarea");var d=a.one("#ugccmt-post-frm-container");var g=a.one("#ugccmt-container");if(c){c.set("id","yom-commentshidden")}if(b){b.set("id","ugccmt-commentshidden")}if(f){f.set("id","ugccmt-totalhidden")}if(h){h.set("id","ugccmt-post-frmhidden")}if(e){e.set("id","ugccmt-post-frm-textareahidden")}if(d){d.set("id","ugccmt-post-frm-containerhidden")}if(g){g.set("id","ugccmt-containerhidden")}}},unhideExternalComment:function(){if(a.one("#yom-commentshidden")){var c=a.one("#yom-commentshidden");var b=a.one("#ugccmt-commentshidden");var f=a.one("#ugccmt-totalhidden");var h=a.one("#ugccmt-post-frmhidden");var e=a.one("#ugccmt-post-frm-textareahidden");var d=a.one("#ugccmt-post-frm-containerhidden");var g=a.one("#ugccmt-containerhidden");if(c){c.set("id","yom-comments")}if(b){b.set("id","ugccmt-comments")}if(f){f.set("id","ugccmt-total")}if(h){h.set("id","ugccmt-post-frm")}if(e){e.set("id","ugccmt-post-frm-textarea")}if(d){d.set("id","ugccmt-post-frm-container")}if(g){g.set("id","ugccmt-container")}}},attachThumbEvent:function(b,h){var j=this;var k=j.nodetree;for(var e=0;e<h;e++){var m=b+e;var c=k.RRThumbnailList.one(" .thumb_"+m);var f=c.one(" .thumb_img");var l=c.one(" .thumbBorder");var d=c.one(" .thumb_a");var g=k.imageContainer.one(".bimgs li.bimg_"+m+".selected .video_wrap .icon");j.availableThumbList.push(m);f.on("error",function(p){var n=p.currentTarget.get("tabIndex");k.RRThumbnailList.one(" .thumb_"+n).setStyle("display","none");a.log("Loading "+p.currentTarget.get("tabIndex")+" thumbnail fail: "+p.currentTarget.get("src"));j.loadedThumbs--;j.availableThumbList.splice(n,1);j.nodetree.allSlides._node.innerHTML=j.nodetree.allThumbs._node.innerHTML=j.loadedThumbs;if(j.openmode==="embed"){var o=j.nodetree.slideshow.one(".all_Slides-top");if(o){o._node.innerHTML=j.nodetree.allSlides._node.innerHTML}}j.hideThumbs(j.current_thumbnail_page)});j.thumbIndex[m]=m;if(d&&d.hasAttribute("href")&&j.YBOBA_TEMPLATE.TEMPLATE_ID!="template_boba_embed_lightbox"){d.removeAttribute("href")}if(j.isSlideshow){d.on("click",function(n){j.selectThumb(this.getAttribute("tabIndex"),"Thumb-Photo")})}if(j.simages[m].type==="video"&&g){g.on("click",function(n){j.createVideo();n.stopPropagation()})}j.loadedThumbs++;j.allThumbLi++}},illusionResize:function(h,c){var j=this;var f=j.sidebarShowing?(j.scrWidth-320):j.scrWidth;var k=j.scrHeight*0.9;var l=h.slideWidth;var e=h.slideHeight;var d=l/e;var m=f/k;if((l>f)||(e>k)){if(d>m){var g=f;var b=Math.round(g/d)}else{var b=k;var g=Math.round(b*d)}}else{var g=l;var b=e}if(c){c.setStyle("width",g);c.setStyle("height",b)}},showMedia:function(g,c){if(!g){return}if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("MediaPhotosLightbox","m4")}var h=this;var l=h.nodetree;var b=h.nodetree.imageContainer;var r=h.nodetree.bimgs;var j=h.nodetree.stage;var e=g.imgStatus;var n=l.stage.one(".bimg_"+c);var k=g.type;h.pvTracking(c);if(e!==0&&n){if((h.yepRenderingNow==h.showing)&&(k=="video")){return}l.slideshow.removeClass("loading");h.imgLoading=0;n.addClass("selected");h.slideWidth=g.slideWidth;h.slideHeight=g.slideHeight;if(k=="video"){h.linkTracking(h.thumbIndex[h.showing],"lgt-vid-thmb")}h.updateLayout();if(typeof h.kpiSelectThumbStart!="undefined"&&window.MediaPerfTiming){window.MediaPerfTiming.startTimer("MediaPhotosLightboxNavigation","m1",h.kpiSelectThumbStart);window.MediaPerfTiming.endTimer("MediaPhotosLightboxNavigation","m1");window.MediaPerfTiming.done("MediaPhotosLightboxNavigation");delete h.kpiSelectThumbStart}}else{if(g){g.imgStatus=2;if((k=="image")||(k=="video")){var q=a.one(a.config.doc.createDocumentFragment());var o=q.appendChild(a.Node.create('<li class="bimg_'+c+'">'));var m=o.appendChild(a.Node.create('<div class="tempimg">'));var d=m.appendChild(a.Node.create('<div class="frame"><div class="loadico"></div></div>'));var f=a.Node.create('<img alt="">');r.appendChild(q);f.on("load",function(s){d.appendChild(f);if(h.showing===c){h.slideWidth=g.slideWidth;h.slideHeight=g.slideHeight;o.addClass("selected");h.updateLayout()}if(h.isSlideshow&&!a.UA.ios&&!a.UA.android){f.on("click",function(t){h.selectThumb(h.lookupAvailableThumb(c,1).thumbkey,"next-hover");t.stopPropagation()});if(a.UA.ie){o.on("mouseover",function(){l.control.setStyle("display","block");if(l.propertyLogo){l.propertyLogo.setStyle("display","block")}})}}if(h.itemPagingCount==1&&o.className=="bimg_"+h.showing){if(h.config.autoplay_if_first_item_is_video&&k=="video"){h.createVideo()}}if(c==h.showing){h.slideWidth=g.slideWidth;h.slideHeight=g.slideHeight;h.updateLayout()}});f.on("error",function(s){a.log("Loading ["+c+"]bimage fail: "+s.currentTarget.get("src"))});f.set("src",g.slink);var p=a.Node.create('<img alt="">');if(h.kpiFirstImage&&window.MediaPerfTiming){window.MediaPerfTiming.startTimer("MediaPhotosLightbox","m7")}if(typeof h.kpiSelectThumbStart!="undefined"&&window.MediaPerfTiming){window.MediaPerfTiming.startTimer("MediaPhotosLightboxNavigation","m3")}p.on("load",function(w){g.imgStatus=1;if(g.type==="video"){var x=a.one(a.config.doc.createDocumentFragment());var u=x.appendChild(a.Node.create('<div class="video_wrap">'));var s=u.appendChild(a.Node.create('<button class="icon">'));u.appendChild(p);s.on("click",function(y){h.createVideo();y.stopPropagation()});o.appendChild(x);if(!YMedia.YepCAInlinePlayer){h.initVideoObj();var t=a.Photos.VideosYepCAInlinePlayer.getInstance();t.loadVideoJS()}h.linkTracking(h.thumbIndex[h.showing],"lgt-vid-thmb")}else{var x=a.one(a.config.doc.createDocumentFragment());var v=x.appendChild(a.Node.create('<div class="bimg">'));v.appendChild(p);o.appendChild(x)}o.one(" .tempimg").addClass("off");if(h.kpiFirstImage&&window.MediaPerfTiming){window.MediaPerfTiming.endTimer("MediaPhotosLightbox","m6");window.MediaPerfTiming.endTimer("MediaPhotosLightbox","m7");window.MediaPerfTiming.done("MediaPhotosLightbox");h.kpiFirstImage=false}if(typeof h.kpiSelectThumbStart!="undefined"&&window.MediaPerfTiming){window.MediaPerfTiming.startTimer("MediaPhotosLightboxNavigation","m2",h.kpiSelectThumbStart);window.MediaPerfTiming.endTimer("MediaPhotosLightboxNavigation","m2");window.MediaPerfTiming.endTimer("MediaPhotosLightboxNavigation","m3");window.MediaPerfTiming.done("MediaPhotosLightboxNavigation");delete h.kpiSelectThumbStart}if(h.isSlideshow&&!a.UA.ios&&!a.UA.android){p.on("click",function(y){h.selectThumb(h.lookupAvailableThumb(c,1).thumbkey,"next-hover");y.stopPropagation()})}if(h.itemPagingCount==1){if(h.isSlideshow&&h.openmode!="landing"&&h.openmode!="embed"){h.linkTracking("see","lgt-ss-see")}}});p.set("src",g.link)}}else{h.slideWidth=g.slideWidth||600;h.slideHeight=g.slideHeight||200;h.updateLayout()}}h.populateCaption(g);if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("MediaPhotosLightbox","m4")}if(typeof(h.relatedContentEvent)=="function"&&h.nodetree.relatedContent!=null&&h.nodetree.relatedContent.getContent()!=""){h.linkTracking(h.showing,"related_content_seen")}},eogToggle:function(c){var e=this,b=e.nodetree.eog,d=e.nodetree.imageContainer;if(c==="on"){e.eogShowing=true;e.selectedImgSwitch("off");if(!b){d.appendChild(e.eog);b=d.one(".gallery_end");b.removeClass("selected");e.nodetree.eog=d.one(" .gallery_end");if(typeof(e.eogEvent)=="function"){e.eogEvent()}}if(e.enable_comment==1){e.nodetree.lightboxCommentCtrl.addClass("hide")}b.addClass("selected");e.pvTracking("eog");e.linkTracking("eog","eog-see");setTimeout(function(){b.setStyle("opacity",1)},1);e.nodetree.desc.addClass("off");e.updatePermalink(e.allThumbLi)}else{var b=e.nodetree.imageContainer.one(".gallery_end");if(e.enable_comment==1){e.nodetree.lightboxCommentCtrl.removeClass("hide")}if(b){b.removeClass("selected")}e.nodetree.desc.removeClass("off");e.eogShowing=false;e.showing=0}},getSocialShortenedURL:function(h){var f=this;if(typeof(f.simages[f.thumbIndex[f.showing]])!=="undefined"){var d="http://"+document.domain+f.simages[f.thumbIndex[f.showing]].plink;d=d.replace("/lightbox/","/"+f.photo_alias+"/");var g=d.split("?");if(g[1]){var j=encodeURI(d+"&format=embed&sh="+h)}else{var j=encodeURI(d+"?format=embed&sh="+h)}if(h=="3"){f.simages[f.thumbIndex[f.showing]].social_photo_shortenedLink[h]=j;return}var c="/_xhr/photos/sharebutton-shortened-url/?url="+j;var b={on:{success:function(n,m,k){var l=m.responseText?a.JSON.parse(m.responseText):"";if(l&&l.url){f.simages[f.thumbIndex[f.showing]].social_photo_shortenedLink[h]=l.url}else{f.simages[f.thumbIndex[f.showing]].social_photo_shortenedLink[h]=j}},failure:function(){f.simages[f.thumbIndex[f.showing]].social_photo_shortenedLink[h]=j}}};var e=a.io(c,b)}},selectThumb:function(e,n){var d=this;var s=d.nodetree;if(d.showInterAds||d.InterAdsProcessing){d.showInterAds=false;d.unhideImageAndMeta()}var g=a.one(".sidebar ."+d.config.embed_ads_position);var q=a.Array.indexOf(d.availableThumbList,parseInt(e));var l=d.allThumbLi;var c=d.bimages_preload_size;d.itemPagingCount++;var e=parseInt(e);if(window.MediaPerfTiming){d.kpiSelectThumbStart=new Date().getTime()}if(e!==d.showing){var b=d.simages[d.thumbIndex[d.showing]];if(b){if("video"===b.type){if(d.LightboxInlineYep){d.LightboxInlineYep.vPlayerFullScreen=false}this.yepRenderingNow=null;var p=s.stage.one(".yep_inline_plyr");if(p){p.remove().destroy(true);s.mainSec.removeClass("play");if(d.cptnRequireRestore===1){d.toggle(s.caption)}}}}d.selectedImgSwitch("off")}d.refreshAds();d.linkTracking(e,n);if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement){d.linkTracking(d.showing,"fullscreen-pv")}if(e<0){e=lookupAvailableThumb(0,-1).thumbkey}else{if(e>l-1&&!d.eogFetched){e=0}else{if(d.eogFetched&&e==l){d.linkTracking("eog",n);d.eogToggle("on");d.showing=e;d.updateLayout()}else{if(d.eogShowing==true){d.eogToggle("off")}}}}d.selectedImgSwitch("on",q,e);if(n==="next-button"||n==="next-key"||n==="next-hover"){var m=e;var f=e+c}else{if(n==="pre-button"||n==="pre-key"){var m=e-c;var f=e}else{if(n==="Open-Button"&&e==0){var m=0;var f=c}else{var m=e-Math.floor(c/2);var f=e+Math.ceil(c/2)}}}var k=[];var j=[];for(var o=m;o<f;o++){if(o<0){var t=parseInt(d.lookupAvailableThumb(0,o).thumbkey)||0}else{var t=o}k.push(d.simages[d.thumbIndex[t]]);j.push(t)}d.preloadImages(k,j);if(q==-1&&!d.eogFetched){q=0}var h=d.current_thumbnail_page;if(q>d.current_thumbnail_page_total*(d.current_thumbnail_page+1)-1&&(n=="next-button"||n=="next-hover"||n=="next-key"||n=="next-row"||n=="prev-row")){d.current_thumbnail_page=Math.floor(q/d.current_thumbnail_page_total)}else{if(q==0&&d.current_thumbnail_page!=0){d.current_thumbnail_page=0}else{if(q>0&&(n=="pre-button"||n=="pre-key")){d.current_thumbnail_page=Math.floor(q/d.current_thumbnail_page_total);refreshThumb=true}else{if(q<d.current_thumbnail_page_total*d.current_thumbnail_page&&(n=="next-button"||n=="next-hover"||n=="next-key"||n=="next-row"||n=="prev-row")){d.current_thumbnail_page=Math.floor(q/d.current_thumbnail_page_total);refreshThumb=d}else{if(q<d.current_thumbnail_page_total*d.current_thumbnail_page&&(n=="pre-button"||n=="pre-key")){d.current_thumbnail_page=Math.floor(q/d.current_thumbnail_page_total);refreshThumb=d}}}}}if(h!=d.current_thumbnail_page){d.hideThumbs(d.current_thumbnail_page)}var r=d.simages[d.thumbIndex[e]];r=(typeof(r)!=="undefined"?r:{provider_p:"",provider_c:"",provider_b:"",revsp:"",p_title:"",uuid:""});d.broadcast("BOBA:itemChanged",{asset_type:"photo",asset_uuid:r.uuid,asset_title:r.p_title,asset_plink_vita:r.plink_vita,asset_srchtrm:r.srchtrm,asset_small_url:r.slink,asset_small_width:r.swidth,asset_small_height:r.sheight,gallery_title:d.config.ss_title,gallery_plink_vita:d.config.ss_plink_vita,is_first_photo:(d.openmode==="landing"?false:true)});if(d.enable_comment==1&&d.eogShowing==false){if(!d.nodetree.lightboxCommentBox.hasClass("hide")){d.comment_setting()}d.current_imgchange_times++;if(a.one(".sidebar #yom-comments")){d.nodetree.lightboxCommentBox.empty()}d.load_lightbox_comment()}},lookupAvailableThumb:function(d,e){var c=a.Array.indexOf(this.availableThumbList,d);var f=0;var b=this.availableThumbList.length-1;if(c>=0){f=c+e;if(f>b){if(e%5==0){f=f-b-1}else{return{index:f,thumbkey:this.simages.length}}}if(f<0){f=b+f+1}}else{if(e<0){f=b}}return{index:f,thumbkey:parseInt(this.availableThumbList[f])}},linkTracking:function(l,v,w,n,g,m){var k=this,n=k.config.spaceid!=""?k.config.spaceid:lightbox_default_spaceid;if(k.rapid_page_spaceid&&(YMedia.rapid.rapidConfig.spaceid!==n)){YMedia.rapid.rapidConfig.spaceid=n;YMedia.rapid.rapidConfig.s=n;YMedia.rapid.updateConfig(YMedia.rapid.rapidConfig)}if((!k.tracking||!k.tracking.pageView)&&k.openmode!=="testing"){if(typeof(YAHOO)!=="undefined"&&typeof(YAHOO.Media)!=="undefined"&&typeof(YAHOO.Media.Tracking)!=="undefined"){k.tracking=new YAHOO.Media.Tracking({conf:{spaceid:n}})}}if((!k.tracking||!k.tracking.pageView)&&k.openmode!=="testing"){if(!m||m<11){setTimeout(function(){k.linkTracking(l,v,w,n,g,m?(m+1):1)},5000)}else{if(m==11){a.log("log: linktrack not sent this time")}}return}try{var D=k.simages[k.thumbIndex[k.showing]];D=(typeof(D)!="undefined"?D:'{"provider_p":"","provider_c":"","provider_b":"","rev":"","p_title":"","uuid":""}');var z=YMedia.lightboxBucketTestName?YMedia.lightboxBucketTestName.substr(8,5)+"-":"";var c,s,u,d,x;if(k.isSlideshow&&l=="eog"){c=s=u=d=x="eog"}else{if(l=="open"){c=s=u=d=x="open"}else{if(l=="see"){c=s=u=d=x="see"}else{if(l=="mon"){c=s=u=d=x="mon"}else{var r=k.simages[k.thumbIndex[l]];if(!r){return}c=r.provider_p,s=r.uuid;u=d=(typeof(g)!=="undefined"?g:parseInt(l)+1);x=k.simages[k.thumbIndex[l]].uuid}}}}var t=(typeof(k.config.ult_pt)==="undefined"?(k.isSlideshow?"ss-lightbox":"1-lightbox"):k.config.ult_pt);var q=z+t,h=q,B=q,p=lightbox_ult_region,y=lightbox_ult_lang,j=lightbox_ult_site,C=0;ult_mit=lightbox_ult_mit,ult_o="",ult_tar="",ult_test="",ult_tmp="",ult_slk=v,ult_mid=lightbox_ult_mid,ult_ccode="",ult_ct=D.type,ult_lt="i",ult_ot="string",ult_ptopic=D.provider_b,ult_ver=D.rev;var o=("next-button"==v||"pre-button"==v||"Thumb-Photo"==v||"Open-Button"==v||"pre-key"==v||"next-key"==v)?"0":"1";var f={itc:o,version:"lego",pt:q,intl:p,lang:y,pstaid:(k.config.ss_uuid||k.config.pt_uuid),pstth:encodeURIComponent(C),test:ult_test,tmp:ult_tmp,sec:h,pkg:(typeof(w)!=="undefined"?w:s),cp:encodeURIComponent(c),mit:ult_mit,o:ult_o,tar:ult_tar,slk:ult_slk,mid:ult_mid,pos:u,lpos:d,ccode:ult_ccode,act:v,ver:ult_ver,ct:ult_ct,lt:ult_lt};var b=k.ywaActionMap(v);if(k.openmode==="testing"){return f}else{k.tracking.beacon(f);if(b){k.ywaTracking(YMedia.BOBA.ywaSettings,"action",b,x,k.config.ss_uuid,t,YMedia.lightboxBucketTestName)}}}catch(A){if(k.openmode!="testing"){a.log(A.stack,"warn")}else{return A.stack}}},ywaActionMap:function(b){var c="";switch(b){case"lgt-ss-see":c="LIGHTBOX_VISIBLE";break;case"Close-Key":c="LIGHTBOX_CLOSE,keyboard";break;case"Close-area":c="LIGHTBOX_CLOSE,area";break;case"Close-Button":c="LIGHTBOX_CLOSE,button";break;case"Close-Eog":c="LIGHTBOX_CLOSE,eog";break;case"pre-key":c="PHOTO_PREV,keyboard";break;case"pre-button":c="PHOTO_PREV,button";break;case"next-key":c="PHOTO_NEXT,keyboard";break;case"next-button":c="PHOTO_NEXT,button";break;case"next-hover":c="PHOTO_NEXT,mainimage";break;case"Thumb-Photo":c="PHOTO_THUMB_SELECT";break;case"lgt-vid-thmb":c="PHOTO_VIDEO_THUMB_VISIBLE";break;case"Thumb-next":c="PHOTO_THUMB_NEXT";break;case"Thumb-pre":c="PHOTO_THUMB_PREV";break;case"lgt-vid-clk":c="PHOTO_VIDEO_CLICK";break;case"lgt-vid-play":c="PHOTO_VIDEO_PLAY";break;case"caption-on":c="PHOTO_CAPTION_EVENT,on";break;case"caption-hide":c="PHOTO_CAPTION_EVENT,off";break;case"caption-more":c="PHOTO_CAPTION_EVENT,more";break;case"caption-less":c="PHOTO_CAPTION_EVENT,less";break;case"caption-scroll":c="PHOTO_CAPTION_EVENT,scroll";break;case"ss_info_on":c="PHOTO_SSINFO_EVENT,on";break;case"ss_info_off":c="PHOTO_SSINFO_EVENT,off";break;case"mon-see":c="PHOTO_MON_VISIBLE";break;case"eog-see":c="PHOTO_EOG_VISIBLE";break;case"eog-more":c="PHOTO_EOG_MORE";break;case"fbshare":c="SOCIAL_SHARING, facebook";break;case"fb-return":c="SOCIAL_SHARING, facebook-return";break;case"pintshare":c="SOCIAL_SHARING, pinterest";break;case"pint-return":c="SOCIAL_SHARING, pinterest-return";break;case"twitshare":c="SOCIAL_SHARING, twitter";break;case"twit-return":c="SOCIAL_SHARING, twitter-return";break;case"comment-open":c="LIGHTBOX_COMMENT, open";break;case"comment-post":c="LIGHTBOX_COMMENT, post";break;case"comment-more":c="LIGHTBOX_COMMENT, more";break;case"related_content_seen":c="LIGHTBOX_RELATED_CONTENT,seen";break;case"related_content_click":c="LIGHTBOX_RELATED_CONTENT,click";break;case"fullscreen-enter":c="LIGHTBOX_FULLSCREEN, enter";break;case"fullscreen-exit":c="LIGHTBOX_FULLSCREEN, exit";break;case"fullscreen-pv":c="LIGHTBOX_FULLSCREEN, pv";break}return c},pvTracking:function(h,j){var g=this;if((!g.tracking||!g.tracking.pageView)&&g.openmode!=="testing"){if(typeof(YAHOO)!=="undefined"&&typeof(YAHOO.Media)!=="undefined"&&typeof(YAHOO.Media.Tracking)!=="undefined"){g.tracking=new YAHOO.Media.Tracking({conf:{spaceid:(g.config.spaceid!=""?g.config.spaceid:lightbox_default_spaceid)}})}}if((!g.tracking||!g.tracking.pageView)&&g.openmode!=="testing"){if(!j||j<11){setTimeout(function(){g.pvTracking(h,j?(j+1):1)},5000)}else{if(j==11){a.log("log: pageview not sent this time")}}return}var z=g.simages[g.thumbIndex[h]];z=(typeof(z)!=="undefined"?z:{provider_p:"",provider_c:"",provider_b:"",revsp:"",p_title:"",uuid:""});var u=YMedia.lightboxBucketTestName?YMedia.lightboxBucketTestName.substr(8,5)+"-":"";try{if(g.isSlideshow&&h=="eog"){var r=(typeof(g.config.ult_pt)==="undefined"?"ss-lightbox":g.config.ult_pt);var m=u+r,y="eog",l=lightbox_ult_region,t=lightbox_ult_lang,k=lightbox_ult_site,q="eog",A="eog",c="",s="",p="",f="",o="lego",d=""}else{var r=(typeof(g.config.ult_pt)==="undefined"?(g.isSlideshow?"ss-lightbox":"1-lightbox"):g.config.ult_pt);var m=u+r,y=m,l=lightbox_ult_region,t=lightbox_ult_lang,k=lightbox_ult_site,q=z.provider_p,A=(g.isSlideshow?z.p_title:g.simages[g.thumbIndex[g.showing]].p_title),c=z.provider_b,s=z.revsp,p="",f="",o="lego",d=z.srchtrm||""}var w=/['|&#39;]/g;spaceid=g.config.spaceid!=""?g.config.spaceid:lightbox_default_spaceid;m=m.replace(w,"");q=q.replace(w,"");s=s.replace(w,"");d=d.replace(w,"");url="/pageview/?type=photo&q="+encodeURIComponent(d)+"&id="+encodeURIComponent(z.uuid)+"&spaceid="+encodeURIComponent(spaceid)+"&pt="+encodeURIComponent(m)+"&pcp="+encodeURIComponent(q)+"&revsp="+encodeURIComponent(s);var b="";if(h=="eog"){b="eog"}else{if(z){b=z.uuid}}if(g.openmode!="testing"){var n=!(g.is_ext_lightbox==="1"&&g.itemPagingCount===0);if(g.openmode!="embed"){if(YMedia.rapid&&YMedia.rapid.beaconPageview){var x={pt:encodeURIComponent(m),spaceid:spaceid,revsp:encodeURIComponent(s),pcp:encodeURIComponent(q),q:encodeURIComponent(d)};if(n){if(g.rapid_page_spaceid&&(YMedia.rapid.rapidConfig.spaceid!==spaceid)){YMedia.rapid.rapidConfig.spaceid=spaceid;YMedia.rapid.rapidConfig.s=spaceid;YMedia.rapid.updateConfig(YMedia.rapid.rapidConfig)}YMedia.rapid.beaconPageview(x)}if(YAHOO.i13n&&YAHOO.i13n.sendComscoreEvent){a.log("Send Comscore Beacon!");YAHOO.i13n.sendComscoreEvent()}}else{g.tracking.pageView(url,n)}}g.ywaTracking(YMedia.BOBA.ywaSettings,"pageview","PHOTO_CLICK",b,g.config.ss_uuid,r,YMedia.lightboxBucketTestName);if(typeof(_eStat_Whap_loaded_func)=="function"){_eStat_Whap_loaded_func()}}else{return[z,url]}}catch(v){if(g.openmode!="testing"){a.log(v.stack,"warn")}else{return v.stack}}},toggleInfo:function(f,d){var c=this,b=c.nodetree;if(c.ss_info===1){b.ss_info.removeClass("on");c.ss_info=0;if(b.ss_info.one(" .hd .short")){c.ss_info_height_hd=b.ss_info.one(" .hd .short").get("offsetHeight")+3}if(c.ss_info_height_hd!==0){b.ss_info.setStyle("height",c.ss_info_height_hd)}else{b.ss_info.setStyle("height",Math.min(59,c.ss_info_height))}if(f===false){c.linkTracking(c.thumbIndex[c.showing],"ss_info_off")}}else{if(d==1&&c.ss_info!=1){return}else{b.ss_info.addClass("on");c.ss_info=1;if(b.ss_info.one(" .hd .full")){var e=b.ss_info.one(" .hd .full").get("offsetHeight")}else{var e=b.ss_info.one(" .hd .short").get("offsetHeight")}c.ss_info_height=e+b.ss_info.one(" .bd").get("offsetHeight")+6;if(f===false){c.linkTracking(c.thumbIndex[c.showing],"ss_info_on")}}}setTimeout(function(){c.hideThumbs(c.current_thumbnail_page)},300)},loadInfo:function(){if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("MediaPhotosLightbox","m5")}var e=this,d=e.nodetree;var c=function(h){if(!d.ss_info.hasClass("static")){if(h.button==1||h.keyCode==37||h.keyCode==39){e.toggleInfo(true,1);d.controlArrowRight.detach("click",c);d.controlArrowLeft.detach("click",c);d.RRThumbnailList.all(" .thumb_a").detach("click",c);a.one("body").detach("arrow",c);e.hideThumbs(e.current_thumbnail_page);if(d.selectedImg!==""){d.selectedImg.detach("click",c);d.selectedImg=""}}}};d.ss_info.one(" .hd").appendChild(e.ss_info_value[0]);d.ss_info.one(" .bd").appendChild(e.ss_info_value[1]);d.ss_info.replaceClass("disable","on");var g=setInterval(function(){d.selectedImg=d.bimgs.one(".selected img")||"";if(d.selectedImg!==""){d.selectedImg.on("click",c);clearInterval(g)}},200);var f=setTimeout(function(){clearInterval(g)},8000);a.one("body").on("arrow",c);d.controlArrowRight.on("click",c);d.controlArrowLeft.on("click",c);d.RRThumbnailList.all(" .thumb_a").on("click",c);var b=d.ss_info.one(" .bd").get("offsetHeight");if(!d.ss_info.one(" .hd .full")){if(d.ss_info.one(" .hd .short")){d.ss_info.addClass("uni");e.ss_info_height_hd=d.ss_info.one(".hd .short").get("offsetHeight")+3;e.ss_info_height=e.ss_info_height_hd+b+2;if(b===0){d.ss_info.addClass("static");d.ss_info.setStyle("height",e.ss_info_height_hd+2)}}else{if(!d.ss_info.one(" .hd .short")){e.ss_info_height_hd=0;e.ss_info_height=b;d.ss_info.addClass("no-hd");if(b<=59){d.ss_info.replaceClass("on","static")}}}}else{e.ss_info_height_hd=d.ss_info.one(".hd .full").get("offsetHeight");e.ss_info_height=e.ss_info_height_hd+b+8}e.toggleInfo(true,0);e.ss_info=1;if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("MediaPhotosLightbox","m5")}},paginate:function(j){var g=this;var m=g.nodetree.RRThumbnailList;var b=g.rowsToShow;var f=g.loadedThumbs;var o=g.YBOBA_TEMPLATE.ROW_HEIGHT;var d=m.getStyle("top");var h=parseInt(d.substring(0,d.indexOf("px")))||0;g.current_thumbnail_page_total=b*g.YBOBA_TEMPLATE.PHOTOS_PER_ROW;if(typeof(j)==="undefined"){if(g.showing==0){j=0}else{j=Math.floor(g.showing/g.current_thumbnail_page_total)}}if(j==-1){}else{var e=-(Math.ceil(f/g.YBOBA_TEMPLATE.PHOTOS_PER_ROW))*o;var n=-(j*b*o);if(n<h){h=-(j*b*o);if(h<=e){h=0;j=0}}else{h=(j*b*o);if(h>0){h=-h}}m.setStyle("top",h);g.current_thumbnail_page=j;if(g.nodetree.RRThumbCtrl){var c=g.loadedThumbs;var k=g.nodetree.visableThumbFrom;var l=g.nodetree.visableThumbTo;if(g.current_thumbnail_page_total<c){c=(g.current_thumbnail_page+1)*g.current_thumbnail_page_total>g.loadedThumbs?g.loadedThumbs:(g.current_thumbnail_page+1)*g.current_thumbnail_page_total}if(b<=0){k._node.innerHTML=0}else{k._node.innerHTML=g.current_thumbnail_page*g.current_thumbnail_page_total+1}if(k._node.innerHTML<0){k._node.innerHTML=""}l._node.innerHTML=c||""}}},renderAds:function(h,f){var m=this;var j;if(YUI.PhotoAdsDarla&&!YUI.PhotoAdsDarla[m.moduleId]){var l={spaceid:m.config.spaceid,content_id:lightbox_ult_region,region:lightbox_ult_region};if(typeof(YUI.PhotoAdsDarla)==="function"){YUI.PhotoAdsDarla=YUI.PhotoAdsDarla(l);YUI.PhotoAdsDarla[m.moduleId]={fetch:(a.bind(YUI.PhotoAdsDarla.event,YUI.PhotoAdsDarla,m.moduleId))};YUI.PhotoAdsDarla.fetch=YUI.PhotoAdsDarla[m.moduleId].fetch}}if(YUI.PhotoAdsDarla&&YUI.PhotoAdsDarla[m.moduleId]){f=(typeof(f)==="undefined"?m.config.embed_ads_position:f);var n=("undefined"===typeof(f))?"LREC":f;f=n.split(",");n=f.length;if(m.openmode!=="landing"&&n==1&&f[0]=="LREC"){n=3;f[1]="LREC2";f[2]="LREC3"}if(m.openmode!=="landing"&&n==1&&f[0]=="LREC2"){n=3;f[1]="LREC";f[2]="LREC3"}if(m.openmode!=="landing"&&n==1&&f[0]=="LREC3"){n=3;f[1]="LREC";f[2]="LREC2"}for(i=0;i<n;i++){var g=YUI.PhotoAdsDarla[m.moduleId].getNodes;var q="yom-ad-"+f[i];if(h=="add"&&f[i]==m.config.interAds){var k=m.nodetree.stage;if(typeof(k)!="undefined"){k.appendChild('<div class="'+f[i]+'" style="display:none;"></div>');m.nodetree[f[i]]=a.one(m.me+" ."+f[i])}}var e=a.all(".yom-ad"),d=m.nodetree[f[i]],c=false,b="",j="";if(m.config.darla_version==="1"){j="<center>"+g[q]+"</center>"}else{j='<center><div id="'+q+'-tgt" class="yom-ad"><center></center></div></center>'}j=j.replace("none;","block;");e.each(function(t,s,u){if(t.get("id")==q||t.get("id")==q+"hidden"){if(m.config.darla_version==="1"){j=("undefined"===typeof(g[q]))?"":(g[q]);g[q]=j;j="<center>"+j+"</center>"}else{j=t._node.innerHTML}j=j.replace("none","block");c=true;b=t}});if(m.openmode==="default-lightbox"||m.openmode==="module-lightbox"){if(m.config.darla_version==="1"){var p=q+"-iframe";var o=a.all(".yom-ad-iframe");o.each(function(t,s,u){if(t._node.id.match(p)||t._node.id.match(p+("hidden"))){if(t._node.id.match("hidden")!==null){t._node.id=t._node.id.replace("hidden","")}else{t._node.id=t._node.id+"hidden"}}})}else{var r=q+"-tgt";var o=a.all(".darla");o.each(function(t,s,u){if(typeof(t._node.children[0])!=="undefined"){if(t._node.children[0].id.match(r)||t._node.children[0].id.match(r+("hidden"))){if(t._node.children[0].id.match("hidden")!==null){t._node.childNodes[0].id=t._node.childNodes[0].id.replace("hidden","");t._node.id=t._node.id.replace("hidden","")}else{t._node.childNodes[0].id=t._node.childNodes[0].id+"hidden";t._node.id=t._node.id+"hidden"}}}})}}switch(h){case"add":if(c&&b.get("id").match("hidden")===null){b.set("id",q+"hidden");if(!(m.openmode==="embed")){b._node.style.display="none"}}if(d!=null){d._node.innerHTML=j}break;case"remove":if(d!=null){d._node.innerHTML=""}if(e!=null&&b!=""&&(!a.one(".photos_ld")||a.one(".photos_ld.template_boba_embed_lightbox"))){b.set("id",q);b._node.style.display=""}break}}}},resetCaptionAndVideo:function(){var d=this,c=d.nodetree;c.desc.removeClass("off");c.mainSec.removeClass("play");var b=c.stage.one(".yep_inline_plyr");if(b){b.remove().destroy(true)}},unhideImageAndMeta:function(){var g=this,j=g.nodetree,k=g.nodetree.imageContainer,e=a.one(g.me+" .header"),f=g.nodetree.desc,h=g.nodetree.imgMeta,b=g.nodetree.slideshow.one(" .thumb_"+g.showing);g.showInterAds=false;g.ignoreInterAds=true;if(g.InterAdsProcessing){g.resetInterAdsLayout("off");g.InterAdsProcessing=false}if(e!=null){e.removeClass("hidden")}var c=g.nodetree[g.config.interAds];if(c!=null&&typeof(c)=="object"){var d=g.nodetree.stage;if(c.ancestor(".mainSec")){if(typeof(DARLA)!="undefined"&&YMedia.DarlaVersion=="2"){if(g.config.enable_video_interAds=="1"){DARLA.render.RenderMgr.nuke(g.config.interAds)}else{DARLA.render.RenderMgr.hide(g.config.interAds)}c.setStyle("display","none")}else{d.removeChild(c);g.nodetree[g.config.interAds]=null}}}k.removeClass("hidden");if(false===g.eogShowing){f.removeClass("hidden");h.removeClass("hidden")}if(b!==null){b.addClass("selected")}if(g.enable_comment==1){g.nodetree.lightboxCommentCtrl.removeClass("hide")}g.updateLayout()},clearPhotos:function(){var e=this;var h=e.nodetree;var g=h.stage;var p=h.bimgs;var o=a.one(a.config.doc.createDocumentFragment());p._node.innerHTML="";h.imageContainer._node.innerHTML="";o.appendChild(p);h.imageContainer.appendChild(o);var c=h.imgDesc.one(" .cptn");if(c&&"undefined"!=typeof(c._node)){c._node.innerHTML=""}var q=h.imgDesc.one(" .cptn-full");if(q&&"undefined"!=typeof(q._node)){q._node.innerHTML=""}var d=g.one(" .video_title");if(d&&"undefined"!=typeof(d._node)){d._node.innerHTML=""}var f=g.one(" .video_duration");if(f&&"undefined"!=typeof(f._node)){f._node.innerHTML=""}var n=h.imgDesc.one(".related");if(n&&"undefined"!=typeof(n._node)){n._node.innerHTML=""}if(h.RRThumbnailList&&"undefined"!=typeof(h.RRThumbnailList._node)){h.RRThumbnailList._node.innerHTML=""}if(h.ss_info){h.ss_info.removeClass("static");h.ss_info.set("className","ss_info disable");var j=h.ss_info.one(" .hd"),m=h.ss_info.one(" .bd");h.ss_info.setStyle("height",0);if(j&&"undefined"!=typeof(j._node)){j._node.innerHTML=""}if(m&&"undefined"!=typeof(m._node)){m._node.innerHTML=""}e.ss_info=2}var b=e.nodetree[e.config.interAds];if(b!=null&&typeof(b)=="object"){if(b.ancestor(".mainSec")){g.removeChild(b)}e.nodetree[e.config.interAds]==null}if(e.openmode=="default-lightbox"){e.simages=new Array();e.showing=0;e.rowsToShow=0;e.slideWidth=0;e.slideHeight=0;e.scrWidth=0;e.scrHeight=0;e.thumbHeightAdj=0;e.imgMARTopAdj=0;e.total_images=NaN;e.isSlideshow=true;e.item_to_list=false;e.eog=NaN;e.eogFetched=false;e.eogShowing=false;var l=e.nodetree.imageContainer.one(".gallery_end");if(l){l.removeClass("selected");l.remove()}e.nodetree.slideshow.removeClass("loading");e.imgLoading=0;var k=e.nodetree.imageContainer.one(".replay");if(k){k.remove()}e.capShowMore=false;e.showcap=true;e.loadedThumbs=0;e.allThumbLi=0;e.thumbsLeft=NaN;e.thumbStart=0;e.nextBatch=0;e.thumbIndex=[];e.availableThumbList=[];e.ss_info=NaN;e.ss_info_height=0;e.ss_info_height_hd=NaN;e.ss_info_value=[]}},fetchGalleryEndContent:function(){if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("MediaPhotosLightboxEOG","m1")}var e=this;if(e.eogFetched||typeof(e.config.ss_uuid)=="undefined"){return}var f={complete:function(k,j,g){if(j&&j.responseText&&j.responseText!=""){try{e.eog=j.responseText;if(e.eog&&e.eog.search("gallery_end")>=0){e.eogFetched=true}if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("MediaPhotosLightboxEOG","m1");window.MediaPerfTiming.done("MediaPhotosLightboxEOG")}}catch(h){a.log(h.stack,"warn")}}},failure:function(j,h,g){a.log("Failure xhr call; tranID: "+j+", http status: "+h.status,"info","example")}};var c="/_xhr/photos/lightbox-end-gallery/?slideshow_id="+this.config.ss_uuid+"&spaceid=P%23"+this.config.spaceid;var b={on:{complete:f.complete,failure:f.failure},context:f};var d=a.io(c,b)},initHistory:function(){if(a.UA.android&&a.UA.android<2.4){a.History=a.HistoryHash}this.history=new a.History();this.historyinitialURL=location.href;if(this.historyInitialized!=null){return}try{this.historyInitialized=true;if(this.enable_redirect_lightbox==="1"&&this.is_ext_lightbox==="1"){var b=this.translateLightboxUrl();this.history.replaceValue(this.historyKey,b,{url:b})}}catch(c){this.historyInitialized=false}},restoreHistoryState:function(){var d=this.showing,b=this.history.get(this.historyKey)||null,c,e;if(b==null){return""}return b},translateLightboxUrl:function(b){if(!b){b=location.pathname+location.search}if(!this.photo_alias){return b}b=b.replace("/"+this.photo_alias+"/","/lightbox/");b=b.replace(/\?format=embed\&/,"?");b=b.replace(/\?format=embed/,"");b=b.replace(/\&format=embed/,"");return b},getStateForItem:function(c){var e,b,d;if(typeof(c.plink)=="undefined"){return false}e=c.plink.indexOf(location.host);b=(e>0)?c.plink.substr(e+location.host.length):c.plink;if(this.enable_redirect_lightbox=="1"){b=this.translateLightboxUrl(b)}d=encodeURIComponent(b);this.stateToIdMap[d]=c.uuid;return d},historyStateChangeHandle:function(b){},getHistoryEnabled:function(){return this.historyEnabled},updatePermalink:function(b){if(this.historyInitialized){if(!this.getHistoryEnabled()){return}var d=this.eogFetched&&b===this.allThumbLi?"end":this.simages[b],c=this.history.get(this.historyKey),e=this.getStateForItem(d);if(false===e){return}if(c!==e&&(!(a.UA.ie>0)||this.openmode==="landing")){this.history.replaceValue(this.historyKey,e,{url:decodeURIComponent(e)})}}},broadcast:function(c,d){var b=d||{};a.Global.fire(c,b)},ywaTracking:function(g,k,p,c,f,s,l,j){try{var h=this;if(!g||!YMedia.BOBA||!YMedia.BOBA.YWA){if(YMedia.BOBA&&YMedia.BOBA.ywaSettings){g=a.BOBA.ywaSettings}else{if(YMedia.BOBA&&!YMedia.BOBA.ywaSettings&&a.Media&&a.Media.ywaSettings){YMedia.BOBA.ywaSettings=a.Media.ywaSettings;g=a.Media.ywaSettings}}if(YMedia.BOBA&&!YMedia.BOBA.YWA&&a.Media&&a.Media.YWA){YMedia.BOBA.YWA=a.Media.YWA}if(YMedia.BOBA&&YMedia.BOBA.ywaSettings&&YMedia.BOBA.YWA&&YMedia.photoYwaProjectId){}else{if(!j||j<11){setTimeout(function(){h.ywaTracking(g,k,p,c,f,s,l,j?(j+1):1)},5000);return}else{a.log("log: ywa tracking not sent this time");return}}}var v={};var t=g;var q=function(e){if(h.openmode==="testing"){v[e.projectId]=JSON.parse(JSON.stringify(e))}else{if(k==="pageview"){YMedia.BOBA.YWA.submit(e)}else{YMedia.BOBA.YWA.submit_action(e)}}};if(typeof YWA=="object"){h.ywaTracking.backup_YWA=YWA}else{if(typeof YWA=="string"&&h.ywaTracking.backup_YWA){YWA=h.ywaTracking.backup_YWA}}if(typeof t=="string"){t="{"+t+"}";t=a.JSON.parse(t)}var d=t.projectId;var m=YMedia.photoYwaProjectId;if(!t.customFields){t.customFields={}}t.documentGroup=s;var n,b;if(typeof p=="string"){var o=p.split(",");n=o[0];if(o.length>1){b=o[1]}t.action=h.ywaActions[n]}else{t.action=p}switch(n){case"LIGHTBOX_VISIBLE":case"LIGHTBOX_CLOSE":case"PHOTO_EOG_VISIBLE":case"PHOTO_EOG_MORE":case"PHOTO_THUMB_NEXT":case"PHOTO_THUMB_PREV":case"PHOTO_SSINFO_EVENT":case"PHOTO_MON_VISIBLE":t.url="http://"+document.domain+"/"+h.config.ss_alias+"/";break;default:var u=h.simages[h.showing];t.url="http://"+document.domain+decodeURIComponent(h.getStateForItem(u));break}if(d&&k==="pageview"&&h.openmode!="embed"){if(h.openmode=="landing"&&!h.ywaTracking.itemPagingCount){}else{t.projectId=d;q(t)}}if(!l&&YMedia.lightboxBucketTestName){l=YMedia.lightboxBucketTestName}if(k==="pageview"){if(s){t.customFields[h.ywaFields.PHOTO_MODULE_NAME_P]=s}if(f){t.customFields[h.ywaFields.PHOTO_SLIDESHOW_ID_P]=f}if(c){t.customFields[h.ywaFields.PHOTO_PHOTO_ID_P]=c}if(l){t.customFields[h.ywaFields.PHOTO_BUCKET_P]=l}if(c=="eog"){t.customFields[h.ywaFields.PHOTO_SEEM_SEQ_P]="eog"}else{if(h.ywaTracking.itemPagingCount){h.ywaTracking.itemPagingCount++}else{h.ywaTracking.itemPagingCount=1}t.customFields[h.ywaFields.PHOTO_SEEM_SEQ_P]=h.ywaTracking.itemPagingCount}}else{if(s){t.customFields[h.ywaFields.PHOTO_MODULE_NAME_A]=s}if(f){t.customFields[h.ywaFields.PHOTO_SLIDESHOW_ID_A]=f}if(c){t.customFields[h.ywaFields.PHOTO_PHOTO_ID_A]=c}if(n){t.customFields[h.ywaFields.PHOTO_ACTION_A]=n}if(b){t.customFields[h.ywaFields.PHOTO_ACTION_DETAIL_A]=b}if(l){t.customFields[h.ywaFields.PHOTO_BUCKET_A]=l}}if(m){t.projectId=m;q(t)}if(this.openmode==="testing"){return v}}catch(r){if(r){a.log(r.stack,"warn");return r.stack}}},initVideoObj:function(){var c=this;var b=(function(){function e(){}e.prototype={loadVideoJS:function(){var g=a.Get.js(c.video_js,{onSuccess:function(){YUI({modules:{videoplayer:{fullpath:c.video_player_js,requires:["arraylist","arraylist-add","arraylist-filter","array-extras","jsonp","base","substitute","io-xdr","io-base","json-parse","swf","event-mouseenter","event-key","event-hover","event-custom","node","json-stringify","classnamemanager","event-touch","cookie","escape","yepswf","videoadplugin"]},"media-yepcainlineplayer":{fullpath:c.video_js,requires:["node","event","lang","videoplayer"]}}}).use(["videoplayer","media-yepcainlineplayer"],function(h){if(h.Media&&h.Media.YepCAInlinePlayer&&!YMedia.YepCAInlinePlayer){YMedia.YepCAInlinePlayer=h.Media.YepCAInlinePlayer}})}});var f=a.Get.js(c.video_player_js,{onSuccess:function(){g.execute()}});f.execute()}};var d;return{getInstance:function(){if(d==null){d=new e();d.constructor=null}return d}}})();a.namespace("Photos").VideosYepCAInlinePlayer=b},createVideo:function(){var g=this;var k=g.nodetree;var e=g.simages[g.thumbIndex[g.showing]];var j=a.JSON.parse(e.videoPlayerData);var f="videoInlinePlayer";var o=(typeof(a.Media)!="undefined"?a.Media:YMedia);var c=g.nodetree.imageContainer;var h=k.stage;var l=c.one(".bimg_"+g.showing);l.removeClass("selected");var d=function(){var q=a.Node.create('<div id="videoInlinePlayer" class="yep_inline_plyr">');k.mainSec.addClass("play");if(k.caption!==undefined){if(k.caption.hasClass("on")){g.toggle(k.caption);g.cptnRequireRestore=1}}if(typeof(g.LightboxInlineYep)=="undefined"){if(typeof(o.LightboxInlineYep)!="undefined"){g.LightboxInlineYep=o.LightboxInlineYep}else{if(typeof(YMedia.YepCAInlinePlayer)!="undefined"&&typeof(g.config.videoconf)!="undefined"){var r=g.config.videoconf;r.autoplay=true;g.LightboxInlineYep=new YMedia.YepCAInlinePlayer(r)}}}h.appendChild(q);setTimeout(function(){q.setStyle("opacity",1)},100);if(typeof(g.LightboxInlineYep)!="undefined"){inlinePlayer=g.LightboxInlineYep;inlinePlayer.vPlayerFullScreen=false;var s=g,p=false;g.updateLayout();if(true!==g.yepRendered){var u=function(){inlinePlayer.vPlayerFullScreen=inlinePlayer.vPlayerFullScreen?false:true;inlinePlayer.fullScrEvent=true;setTimeout(function(){inlinePlayer.fullScrEvent=false},1000)};inlinePlayer.setPlayerEventsListeners({PLAYER_FULLSCREEN_CHANGE:u});var v=function(w){if(p){p=false}else{s.linkTracking(s.showing,"lgt-vid-play")}};inlinePlayer.setPlayerEventsListeners({PLAYBACK_START:v});var t=function(w){p=true};inlinePlayer.setPlayerEventsListeners({PLAYBACK_PAUSE:t})}j[0].description="";inlinePlayer.render(f,j);g.yepRendered=true;g.yepRenderingNow=g.showing}g.linkTracking(g.showing,"lgt-vid-clk")};if(!YMedia.YepCAInlinePlayer&&(!a.Media||!a.Media.YepCAInlinePlayer)){g.initVideoObj();var b=a.Photos.VideosYepCAInlinePlayer.getInstance();b.loadVideoJS();var m=0;var n=function(){if(m>100){a.log("Failed to init Video Obj!!");return}if(!YMedia.YepCAInlinePlayer){m++;setTimeout(function(){n()},100)}else{d();return}};n()}else{if(!YMedia.YepCAInlinePlayer&&a.Media&&a.Media.YepCAInlinePlayer){YMedia.YepCAInlinePlayer=a.Media.YepCAInlinePlayer}d()}},resetLightboxConfig:function(){var b=this;b.sshow_load=false;b.uiInit(b.mode,"off");b.allThumbLi=0;b.eogShowing=false;b.renderAds("remove");if(b.enable_comment==1){b.unhideExternalComment()}b.resetCaptionAndVideo();b.unhideImageAndMeta();b.clearPhotos();b.unsetBtnAction();var c=a.one("#adx_al");if(c){if(c.get("parentNode")){c.get("parentNode").setStyle("display","block")}}if(("2"===b.config.darla_version)&&window.DARLA&&window.DARLA_CONFIG){window.DARLA.config(window.DARLA_CONFIG)}YMedia.lightboxobj=null;if((!(a.UA.ie>0)||b.openmode==="landing")&&b.historyInitialized&&b.origUrl){this.history.replaceValue(this.historyKey,this.origUrl,{url:this.origUrl})}if(b.enable_comment==1){if(a.one(".sidebar #yom-comments")){b.nodetree.lightboxCommentBox.empty()}}if(b.rapid_page_spaceid){YMedia.rapid.rapidConfig.spaceid=b.rapid_page_spaceid;if(YMedia.rapid.rapidConfig.s){YMedia.rapid.rapidConfig.s=b.rapid_page_spaceid}YMedia.rapid.updateConfig(YMedia.rapid.rapidConfig);b.rapid_page_spaceid=null}},eogEvent:function(){var c=this,b=c.nodetree;a.delegate("click",function(g){var f=g._currentTarget.parentNode.parentNode.parentNode.parentNode.className;if(c.openmode=="default-lightbox"){g.preventDefault();g.stopPropagation();c.resetLightboxConfig();var d=g.currentTarget.getAttribute("href");if(YMedia.Lightbox_init.isPhotoUrl(d)){c.linkTracking("eog","eog-more");c.linkTracking("eog","Close-Eog");var h=YMedia.Lightbox_init.matchPhotoUrl(d);YMedia.Lightbox_init.initLightbox(h,g)}}else{}},c.nodetree.eog,".gallery a")},relatedContentEvent:function(c){var b=c.target._node.getAttribute("href");c.preventDefault();c.stopPropagation();window.open(b,"_blank")},resetInterAdsLayout:function(c){var h=this;if(c==="on"){h.nodetree.bimgs.addClass("hidden");h.nodetree.desc.addClass("hidden");if(h.openmode=="landing"){var g=a.Node.create('<div class="photos_ld_init">');g.appendChild(a.Node.create('<div class="loading">'));h.nodetree.imageContainer.appendChild(g);a.one(".imageContainer .photos_ld_init").addClass("inter_ads_loading")}else{var d=a.one(".imageContainer .photos_ss_init");var f=a.one(".imageContainer .photos_ss_init .photos_ss_init_img");if(d){var e=h.simages[h.thumbIndex[h.showing]];if(e){h.illusionResize(e,d)}d.addClass("inter_ads_loading");if(f){f.setStyle("display","none")}}}}else{h.nodetree.bimgs.removeClass("hidden");h.nodetree.desc.removeClass("hidden");if(h.openmode=="landing"){var g=a.one(".imageContainer .photos_ld_init");if(g){h.nodetree.imageContainer.removeChild(g)}}else{var d=a.one(".imageContainer .photos_ss_init");var b=a.one(".imageContainer .photos_ss_init .photos_ss_init_img");if(d){d.removeClass("inter_ads_loading");if(b){b.setStyle("display","inline")}}}}},repositionStage:function(d,b){var c=this;if(d>b){var e=Math.max(0,Math.round((d-b-25+c.imgMARTopAdj)/2)-10);c.nodetree.stage.setStyle("top",e+"px")}else{c.nodetree.stage.setStyle("top","0")}}}},"1.0",{requires:["substitute","event-custom","event-delegate","json-parse","get","resize","history","yql","media-rmp","anim","node-event-simulate","jsonp","jsonp-url"]});
/* boba_mediator.js 1094583 */ YUI.add("media-boba_mediator",function(a){a.Global.on("BOBA:itemChanged",function(h){var g=[h.asset_uuid,h.asset_srchtrm];a.Global.fire("media-search-news:setQuery",g,0);var f={context_id:h.asset_uuid,asset_title:h.asset_title,context_url:h.asset_plink_vita,ugccmt_vita_type:h.asset_type,ugccmt_vita_img_url:h.asset_small_url,ugccmt_vita_img_width:h.asset_small_width,ugccmt_vita_img_height:h.asset_small_height,ugccmt_vita_img_rights:"anywhere",ugccmt_vita_photo_album:h.gallery_title,ugccmt_vita_photo_album_url:h.gallery_plink_vita};if(YAHOO.Media&&YAHOO.Media.ugccmt&&YAHOO.Media.ugccmt.comments.viewCommentsOnContextHandler&&!h.is_first_photo){YAHOO.Media.ugccmt.comments.viewCommentsOnContextHandler(f)}if(YUI.Media.YsmCMs&&!h.is_first_photo){var c={};c.ctxurl=("undefined"!=typeof(h.asset_plink_vita))?h.asset_plink_vita:h.gallery_plink_vita;if(0===c.ctxurl.indexOf("http:///")||0===c.ctxurl.indexOf("/")){var j=0;j=window.location.href.indexOf("/","https://".length);c.ctxurl=window.location.href.substr(0,j)+c.ctxurl.replace("http://","")}for(var d=0,b=YUI.Media.YsmCMs.length;d<b;++d){YUI.Media.YsmCMs[d].refresh(c)}}})},"1.0",{requires:["event-custom"]});
/* lightbox-darla.js 1635245 */ YUI.add("media-lightbox-darla",function(f){if(typeof YUI.PhotoAdsDarla==="undefined"){YUI.PhotoAdsDarla={}}if("2"===YMedia.DarlaVersion&&window.DARLA){var b=new Array(),g;function e(i){var h;try{h=f.one("#"+LIGHTBOX_DARLA_CONFIG.positions[i].dest);if(h){h.setStyle("display","none")}if(h.ancestor(".darla")){h.ancestor(".darla").setStyle("display","none")}if(i=="MON"){if(f&&f.Photos&&f.Photos.Lightbox){YMedia.lightboxobj.unhideImageAndMeta.call(YMedia.lightboxobj)}if(f&&f.Photos&&f.Photos.Spotlight){YMedia.spotlightobj.unhideImageAndMeta.call(YMedia.spotlightobj)}}}catch(j){}}function d(m,k){var o,j=true,h,i;for(adposidx in g){i=g[adposidx];try{o=k.item(i);if(o.hasErr||!o.html||o.html.indexOf("noad")!=-1){j=false}}catch(l){j=false}if(!j){b[adposidx]=false;setTimeout(function(){e(i)},50)}else{if(b[adposidx]){h=f.one("#"+LIGHTBOX_DARLA_CONFIG.positions[i].dest);if(h){h.setStyle("display","block")}if(h.ancestor(".darla")){h.ancestor(".darla").setStyle("display","block")}}}}}function a(i,h){for(adposidx in g){adpos=g[adposidx];setTimeout(function(){e(adpos)},50)}}function c(m,k){var h=false;if(f&&f.Array){if(f.Array.indexOf(k,"MON")!=-1){h=true}}else{var j=k.length;for(var i=0;i<j;i++){if(k[i]=="MON"){h=true;break}}}if(h){try{if(f&&f.Photos){YMedia.LightboxRenderMonAds=true}}catch(l){}}}YUI.PhotoAdsDarla=function(i){var h={"yom-ad-LREC":{node:"<div id='yom-ad-LREC-tgt'></div>",id:"yom-ad-LREC-wrapper"},"yom-ad-LREC2":{node:"<div id='yom-ad-LREC2-tgt'></div>",id:"yom-ad-LREC2-wrapper"},"yom-ad-LREC3":{node:"<div id='yom-ad-LREC3-tgt'></div>",id:"yom-ad-LREC3-wrapper"},"yom-ad-MON":{node:"<div id='yom-ad-MON-tgt'></div>",id:"yom-ad-MON-wrapper"}},k=function(){var l,o,m;for(o in h){m=h[o];l=f.one("#"+o+" > center");if(l&&!f.one("#"+m.id)){l.set("innerHTML",m.node)}}},j=window.DARLA;LIGHTBOX_DARLA_CONFIG.positions={LREC:{w:"300",h:"266",dest:"yom-ad-LREC-tgt",clean:"yom-ad-LREC",supports:false},LREC2:{w:"300",h:"266",dest:"yom-ad-LREC2-tgt",clean:"yom-ad-LREC2",supports:false},LREC3:{w:"300",h:"266",dest:"yom-ad-LREC3-tgt",clean:"yom-ad-LREC3",supports:false},MON:{w:"425",h:"616",dest:"yom-ad-MON-tgt",clean:"yom-ad-MON",bg:"transparent",supports:false}};LIGHTBOX_DARLA_CONFIG.events={photoslightboxdarla:{lvl:"2",sp:i.spaceid,ps:"LREC,LREC2,LREC3,MON",npv:1,sa:'page_type="slideshow container_id='+i.content_id+'" ADSSA',filter:"no_expandable;ajax_cert_expandable;exp_ifr_expandable",locale:i.region,ssl:i.ssl}};LIGHTBOX_DARLA_CONFIG.onFinishParse=d;LIGHTBOX_DARLA_CONFIG.onFailure=a;LIGHTBOX_DARLA_CONFIG.onTimeout=a;LIGHTBOX_DARLA_CONFIG.onSuccess=c;if(j){j.config(LIGHTBOX_DARLA_CONFIG)}return{event:function(o,s,m,r){var q={},p,l;if(j&&o){p=j.evtSettings(o);if(p){k();if(!isNaN(s)){q.sp=s}if(r){q.ps=r;g=r.split(",")}else{g=["LREC","LREC2","LREC3","MON"]}for(n in g){b[n]=true}m=m||"";l=p.sa;if(m&&l){m=l.replace("ADSSA",m);q.sa=m}YMedia.LightboxRenderMonAds=false;j.event(o,q)}}},nodes:h}}}else{YUI.PhotoAdsDarla.photoslightboxdarla=function(l){var m={callFrame:"yom-ad-darla-callframe-photoslightboxdarla",callScript:"/darla/fc.php",rotation:5000,autoRotation:false,beaconsDisabled:false,property:l.property,destinationMap:{LREC:"yom-ad-LREC-iframe",LREC2:"yom-ad-LREC2-iframe",LREC3:"yom-ad-LREC3-iframe",MON:"yom-ad-MON-iframe"},nodeIds:["yom-ad-LREC","yom-ad-LREC2","yom-ad-LREC3","yom-ad-MON"],nodes:{"yom-ad-LREC":'<iframe id="yom-ad-LREC-iframe" class="yom-ad-iframe" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no" style="display:none;width:300px;height:266px;"></iframe>',"yom-ad-LREC2":'<iframe id="yom-ad-LREC2-iframe" class="yom-ad-iframe" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no" style="display:none;width:300px;height:266px;"></iframe>',"yom-ad-LREC3":'<iframe id="yom-ad-LREC3-iframe" class="yom-ad-iframe" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no" style="display:none;width:300px;height:266px;"></iframe>',"yom-ad-MON":'<iframe id="yom-ad-MON-iframe" class="yom-ad-iframe" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no" style="display:none;width:425px;height:616px;"></iframe>'},templates:{LREC:'<html><head><!--ENCODING--><base target="_blank" /><!--STYLE--></head><body style="overflow:hidden;padding:0;margin:0;"><center><!--LREC--></center></body></html>',LREC2:'<html><head><!--ENCODING--><base target="_blank" /><!--STYLE--></head><body style="overflow:hidden;padding:0;margin:0;"><center><!--LREC2--></center></body></html>',LREC3:'<html><head><!--ENCODING--><base target="_blank" /><!--STYLE--></head><body style="overflow:hidden;padding:0;margin:0;"><center><!--LREC3--></center></body></html>',MON:'<html><head><!--ENCODING--><base target="_blank" /><!--STYLE--></head><body style="overflow:hidden;padding:0;margin:0;"><center><!--MON--></center></body></html>'},otherParams:{t_e:1,".intl":l.intl},events:{fetch:{lv:2,sp:l.spaceid,ps:"LREC,LREC2,LREC3,MON",npv:true,bg:"#000000",em:escape('{"site-attribute":"content=\'no_expandable;ajax_cert_expandable;\' ADSSA"}'),em_orig:escape('{"site-attribute":"content=\'no_expandable;ajax_cert_expandable;\' ADSSA"}'),ssl:l.ssl}}};if(l.fc_domain){m.domain=l.fc_domain}var h=function(){var t=m.nodeIds;for(var u in t){var s=t[u];var x=m.destinationMap[t[u].replace("yom-","")];n=f.one("#"+s);if(n){var r=n.one("center")}var v=f.one("#"+x);var w;if(r&&!v){w=m.nodes[s];r.insert(w)}}};var p=function(){var t=m.nodeIds;for(var u in t){var s=t[u];var w=m.destinationMap[t[u].replace("yom-ad-","")];n=f.one("#"+s);if(n){var r=n.one("center")}var v=f.one("#"+w);if(r&&v){r.set("innerHTML","");r.insert(v);v.setStyle("display","block")}}};var j;var q=function(){if(YAHOO.ads&&YAHOO.ads.darla){j=YAHOO.ads.darla;h()}};var k=function(r,t,s){if(typeof r!="undefined"){m.events.fetch.sp=r}t=(typeof t!="undefined"&&t!=null)?escape(t.replace(/\"/g,"'")):"";if(typeof(s)!="undefined"){m.events.fetch.ps=s}m.events.fetch.em=m.events.fetch.em_orig.replace("ADSSA",t);if(j){p();j.setConfig(m);j.event("fetch")}};f.on("domready",function(){q()});var i=function(){if(j!==undefined&&j!==null){return true}return false};var o={fetch:k,getNodes:m.nodes,isDarlaReady:i};return o}}},"0.1",{requires:[]});
/* boba_spotlight-desktop.js 1642300 */ YUI.add("media-boba_spotlight-desktop",function(a){a.Photos.Spotlight=function(l,p,f,o){a.Photos.Spotlight.superclass.constructor.call(this,l,p,f,o);this.imgMARTopAdj=-56;this.embedAdsViewed=0;this.embed_ads_position=this.config.embed_ads_position;this.embed_ads_freq=this.config.embed_ads_freq;this.extAdsSetting=(typeof(this.config.ext_ads_refresh_settings)!=="undefined")?this.config.ext_ads_refresh_settings:[];this.rowsToShow=this.YBOBA_TEMPLATE.MAX_THUMB_ROWS;this.ctrlHgt=this.YBOBA_TEMPLATE.THUMB_CONTROL_HEIGHT;this.current_thumbnail_page_total=25;this.firstNavClick=true;this.sshow_load=true;this.config.spaceid=f.spaceid||0;this.config.photoBy=f.photoby||"";this.config.ss_title=f.slideshow_title||"";this.config.ss_plink_vita=f.slideshow_plink_vita;var k=this;var n;var c=typeof(f.photos);if(f.xhrtype==="photo"){n=["photo",this.simages,this.simages_batch_size,false,false,true];this.total_images=(c=="object"&&c!=="undefined"&&f.photos[0].url!="")?1:0;this.thumbsLeft=0}else{n=[this.view,this.simages,this.simages_batch_size,false,false,true];if(c=="object"&&c!=="undefined"){this.thumbsLeft=f.total-this.simages_batch_size;if(this.thumbsLeft>0){this.thumbStart=this.simages_batch_size;this.nextBatch=Math.min(this.simages_batch_size,this.thumbsLeft)}}}if(c=="object"&&c!=="undefined"&&f.photos.length>0){var m=this.insertImages(f.photos,n)}if((typeof(this.config.pt_uuid)!=="undefined"||typeof(this.config.pt_alias)!=="undefined")&&f.xhrtype==="photo"){this.isSlideshow=false}else{if(this.openmode!="landing"&&this.simages.length>0){var e=[];var d=[];for(var j=1;j<this.simages.length;j++){e[j]=k.simages[j];d[j]=j}this.preloadImages(e,d)}var j=(typeof(this.simages)==="object"?this.simages.length:0);if(this.openmode!=="testing"){var k=this;var h=false;var g=function(){if(!h){h=true;if(k.thumbsLeft>0){k.loadImages(k.view,k.thumbStart,k.nextBatch,false,false,true)}}};setTimeout(function(){g()},4000);a.on("load",function(){g()})}this.fetchGalleryEndContent()}if(c=="object"&&c!=="undefined"&&f.photos.length>0){n[1]=m[0];n[2]=m[1];this.total_images=this.simages.length;if(this.sshow_load){this.attachThumbEvent(n[1],n[2],true)}this.simages[0]["imgStatus"]=true}if(isNaN(this.ss_info)){if((f.slideshow_title_baked_html&&f.slideshow_title_baked_html!==undefined&&f.slideshow_title_baked_html!=="")||(f.slideshow_desc&&f.slideshow_desc!==""&&f.slideshow_desc!==undefined)){this.ss_info_value[0]=f.slideshow_title_baked_html||"";this.ss_info_value[1]=f.slideshow_desc||"";this.ss_info=1}else{this.ss_info=-1}}if(k.config.social_return_type){switch(k.config.social_return_type){case"1":k.linkTracking(k.showing,"fb-return");break;case"2":k.linkTracking(k.showing,"twit-return");break;case"3":k.linkTracking(k.showing,"pint-return");break}}var b=(typeof(k.config.ult_pt)==="undefined"?(k.isSlideshow?"ss-lightbox":"1-lightbox"):k.config.ult_pt);var q=k.simages[k.thumbIndex[k.showing]]?k.simages[k.thumbIndex[k.showing]].uuid:"";if(k.is_ext_lightbox==="1"){k.pvTracking(1)}else{if(k.openmode=="landing"){k.ywaTracking(YMedia.BOBA.ywaSettings,"pageview","PHOTO_CLICK",q,k.config.ss_uuid,b,YMedia.lightboxBucketTestName)}}this.scrWidth=this.nodetree.slideshow._node.offsetWidth;this.scrHeight=this.nodetree.imageContainer._node.offsetHeight;this.initAdsCount();a.on("domready",function(){k.broadcast("BOBA:itemChanged",{asset_type:"photo",asset_uuid:k.simages[0].uuid,asset_title:k.simages[0].p_title,asset_plink_vita:k.simages[0].plink_vita,asset_srchtrm:k.simages[0].srchtrm,asset_small_url:k.simages[0].slink,asset_small_width:k.simages[0].swidth,asset_small_height:k.simages[0].sheight,gallery_title:k.config.ss_title,gallery_plink_vita:k.config.ss_plink_vita,is_first_photo:true});var u=[];var v=[];for(var t=1;t<6;t++){u[t]=k.simages[t];v[t]=t}k.preloadImages(u,v);if(("2"===k.config.darla_version)&&window.DARLA&&window.LIGHTBOX_DARLA_CONFIG){if(YUI.PhotoAdsDarla&&!YUI.PhotoAdsDarla[k.moduleId]){var r={spaceid:k.config.spaceid,content_id:k.config.ss_uuid||k.config.pt_uuid,region:lightbox_ult_region,ssl:k.config.ssl};if(typeof(YUI.PhotoAdsDarla)=="function"){YUI.PhotoAdsDarla=YUI.PhotoAdsDarla(r);k.initDarla()}}if(k.openmode!=="embed"){k.renderAds("add");k.refreshAds(false)}}else{if(YUI.PhotoAdsDarla){k.renderAds("add");setTimeout(function(){k.refreshAds(false)},100)}}var s=k.nodetree.imageContainer.one(".selected");if(s){s.on("click",function(i){k.selectThumb(k.lookupAvailableThumb(0,1).thumbkey,"next-hover")})}})};a.extend(a.Photos.Spotlight,a.Photos.Boba);a.Photos.Spotlight.prototype.unsetBtnAction=function(){this.nodetree.caption.detach();this.nodetree.relatedContent.detach();this.nodetree.fbshare.detach();this.nodetree.pintshare.detach();this.nodetree.controlArrowLeft.detach();this.nodetree.controlArrowRight.detach();this.nodetree.RRThumbCtrlArrowLeft.detach();this.nodetree.RRThumbCtrlArrowRight.detach();this.nodetree.imageContainer.all(" .selected").detach();this.nodetree.ss_info.one(" .btn").detach();if(typeof(this.keyupHandler)!=="undefined"){this.keyupHandler.detach()}if(typeof(this.windowresizeHandler)!=="undefined"){this.windowresizeHandler.detach()}if(!a.UA.ie){document.releaseEvents(Event.MOUSEMOVE)}};a.Photos.Spotlight.prototype.animImg=function(b,c){if(c=="init"){if(a.UA.webkit){b.setStyle("webkitTransform","scale(0.98)")}else{if(a.UA.gecko){b.setStyle("MozTransform","scale(0.98)")}else{b.setStyle("transform","scale(0.98)")}}}else{if(c=="anim"){setTimeout(function(){if(a.UA.webkit){b.setStyles({opacity:1,webkitTransform:"scale(1)"})}else{if(a.UA.gecko){b.setStyles({opacity:1,MozTransform:"scale(1)"})}else{b.setStyles({opacity:1,transform:"scale(1)"})}}},10)}}};a.Photos.Spotlight.prototype.selectedImgSwitch=function(b,f,e){var g=this;var h=parseInt(e);if(b==="on"){if(f==-1&&e==0&&!g.eogFetched){f=0;g.showing=0}else{g.showing=h}var d=g.nodetree.slideshow.one(".thumb_"+g.showing);if(d!==null&&!g.showInterAds){d.addClass("selected")}var i=g.nodetree.imgMeta;if(g.eogShowing){g.nodetree.slideshow.removeClass("loading");g.imgLoading=0;g.nodetree.currentSlide._node.innerHTML="-";if(i){i.addClass("hidden")}}else{g.nodetree.currentSlide._node.innerHTML=f+1;if(i){i.removeClass("hidden")}}g.showMedia(g.simages[g.thumbIndex[g.showing]],g.showing);g.updatePermalink(g.showing)}else{var c=g.nodetree.imageContainer.all(" .selected");if(c!==null){c.removeClass("selected")}var d=g.nodetree.slideshow.one("#slideshow_thumb_"+g.showing)||g.nodetree.RRThumbnailList.one(" li.selected");if(d!==null){d.removeClass("selected")}}};a.Photos.Spotlight.prototype.uiInit=function(f,b,d){var e=this,c=e.nodetree;c.RRThumbCtrl.removeClass("disable");if(!e.isSlideshow){c.control.addClass("disable");c.RRThumbCtrl.addClass("disable")}if(a.UA.ie){c.control.setStyle("display","block");setTimeout(function(){c.control.setStyle("display","none")},5000);c.control.on("mouseover",function(){c.control.setStyle("display","block")});c.desc.on("mouseover",function(){c.control.setStyle("display","block")});c.mainSec.on("mouseover",function(){c.control.setStyle("display","block")});c.mainSec.on("mouseout",function(){c.control.setStyle("display","none")})}else{c.control.setStyle("opacity","1");setTimeout(function(){c.control.setStyle("opacity","")},5000)}c.controlArrowLeft.removeAttribute("href");c.controlArrowRight.removeAttribute("href");if(e.is_ext_lightbox==="1"){e.scrWidth=a.config.win.innerWidth||a.config.doc.documentElement.clientWidth;e.scrHeight=a.config.win.innerHeight||a.config.doc.documentElement.clientHeight}e.updateLayout()};a.Photos.Spotlight.prototype.slideShow=function(){var b=this;b.sshow_load=true;b.uiInit(b.mode,"on");b.setBtnAction();if(!isNaN(b.ss_info)&&b.ss_info!==-1){b.loadInfo();b.nodetree.ss_info.addClass("on");b.hideThumbs()}else{if(b.ss_info==-1){b.ss_info_height_hd=0}}b.setTriggerShortenUrlArea();YMedia.spotlightobj=b};a.Photos.Spotlight.prototype.hideThumbs=function(i){var k=this;var c=this.nodetree.RRThumbnail;var o=this.nodetree.RRThumbCtrl;var e=this.nodetree.RRThumbnailList;var f=this.nodetree.ss_info;var p=c.get("offsetTop");var q=o.get("offsetTop");var l=f.get("offsetTop");var n=q-p;var d=k.YBOBA_TEMPLATE.ROW_HEIGHT;if(isNaN(k.ss_info_height)||isNaN(k.ss_info_height_hd)){return}if(k.ss_info==1&&!f.hasClass("static")){var s=q-l;var j=Math.max(Math.min(k.ss_info_height,s-73),k.ss_info_height_hd);k.nodetree.ss_info.setStyle("height",j);if(s-73>k.ss_info_height){k.nodetree.ss_info.one(".ss_info_wrap").setStyle("overflowY","hidden")}}else{var j=k.ss_info_height_hd}f.setStyle("height",j);p=c.get("offsetTop");if(k.is_ext_lightbox==="1"){var h=k.scrHeight-p-40;var b=Math.min(Math.floor(h/d),k.YBOBA_TEMPLATE.MAX_THUMB_ROWS)}else{var b=k.YBOBA_TEMPLATE.MAX_THUMB_ROWS,g=k.YBOBA_TEMPLATE.THUMBS_HEIGHT}k.rowsToShow=Math.max(b,1);if(k.is_ext_lightbox!=="1"&&k.ss_info==1){var r=k.ss_info_height_hd+k.ss_info_height;if(r>290){k.rowsToShow=1}else{k.rowsToShow=(k.ctrlHgt-r)>0?Math.ceil((k.ctrlHgt-r)/d,1):1;k.rowsToShow=(k.rowsToShow==0?1:(k.rowsToShow>5?5:k.rowsToShow))}}if(k.ss_info==-1&&this.view==="embedshort|thumbs"){k.rowsToShow=Math.ceil((k.ctrlHgt/d,1))}g=d*k.rowsToShow;var m=a.Node.create('<div class="opacityRow" style="top: '+(d*k.rowsToShow)+'px">');c.appendChild(m);setTimeout(function(){m.addClass("on")},1);setTimeout(function(){c.setStyle("height",g);m.remove()},200);k.paginate((i?i:k.current_thumbnail_page))};a.Photos.Spotlight.prototype.updateLayout=function(){var g=this;if(g.sshow_load==true){var r=g.nodetree.slideshow;var l=g.nodetree.imageContainer;var n=g.nodetree.stage;var k=g.nodetree.mainSec;var o=g.nodetree.sidebar;var q=630;var v=(g.is_ext_lightbox==="1");if(g.showInterAds){if(g.config.darla_version==="2"){g.slideWidth=window.LIGHTBOX_DARLA_CONFIG.positions[g.config.interAds].w;g.slideHeight=window.LIGHTBOX_DARLA_CONFIG.positions[g.config.interAds].h}else{g.slideWidth=g.nodetree.slideshow.one("#"+YAHOO.ads.darla._config.destinationMap[g.config.interAds]).getStyle("width").replace("px","");g.slideHeight=g.nodetree.slideshow.one("#"+YAHOO.ads.darla._config.destinationMap[g.config.interAds]).getStyle("height").replace("px","")}}else{if(g.eogFetched==false||g.eogShowing==false){var b=g.nodetree.imageContainer.one(" .bimg_"+g.showing);var e=g.simages[g.thumbIndex[g.showing]];if(b){if(e){g.slideWidth=e.slideWidth,g.slideHeight=e.slideHeight;if(e.imgStatus===2){g.illusionResize(e,b.one(" .frame"))}}else{g.slideWidth=b.get("clientWidth")||b.get("naturalWidth")||0;g.slideHeight=b.get("clientHeight")||b.get("naturalHeight")||0}}}else{g.slideWidth=g.YBOBA_TEMPLATE.EOG_WIDTH;g.slideHeight=g.YBOBA_TEMPLATE.EOG_HEIGHT}}var i=g.scrWidth;var t=g.scrHeight;var h=parseInt(g.slideWidth,10);var p=parseInt(g.slideHeight,10);var c=h/p;var m=n.one("#videoInlinePlayer");var u=n.one("#videoInlinePlayerBtn");if(m){h=v?Math.min(i,g.YBOBA_TEMPLATE.VIDEO_MAX_WIDTH):g.YBOBA_TEMPLATE.VIDEO_MAX_WIDTH;p=v?Math.min(t,g.YBOBA_TEMPLATE.VIDEO_MAX_HEIGHT):g.YBOBA_TEMPLATE.VIDEO_MAX_HEIGHT;c=(16/9)}g.hideThumbs(g.current_thumbnail_page);var d=v?(i-g.YBOBA_TEMPLATE.SIDEBAR_WIDTH):g.YBOBA_TEMPLATE.VIDEO_MAX_WIDTH;var j=Math.min((d/c),p);if(m){var s=Math.min((j*c),d);if(v){var f=i-s-g.YBOBA_TEMPLATE.SIDEBAR_WIDTH;if(f>0){f=parseInt(f/2)}else{f=0}m.setStyles({width:s+"px",height:(j-25)+"px",marginLeft:f+"px"})}else{m.setStyles({width:s+"px",height:(j-25)+"px"})}}if(u){u.setStyle("width",h+"px");u.setStyle("height",p+"px")}if(v){g.repositionStage(t,j)}else{if(t>j){var w=Math.round((t-j)/2)-25;if(w>0){if(a.UA.ie===6&&h>(i-10)){if(l.one(".selected")){l.one(".selected").setStyles({marginTop:w+"px",width:"100%"})}if(u){u.setStyles({marginTop:w+"px",width:"100%"})}}else{if(l.one(".selected")){l.one(".selected").setStyle("marginTop",w+"px")}if(u){u.setStyle("marginTop",w+"px")}}if(m){m.setStyle("marginTop",w+"px")}}}}g.setTriggerShortenUrlArea()}};a.Photos.Spotlight.prototype.initAdsCount=function(){if(this.extAdsSetting){for(var c=0,b=this.extAdsSetting.length;c<b;c++){this.extAdsSetting[c].ext_ads_refresh_frequency=parseInt(this.extAdsSetting[c].ext_ads_refresh_frequency,10);this.extAdsSetting[c].counter=this.extAdsSetting[c].ext_ads_refresh_frequency;this.extAdsSetting[c].counter--}}this.config.interAdsCount--};a.Photos.Spotlight.prototype.refreshAds=function(c){if(!window.DARLA||window.DARLA.inProgress()!==""){return}var k=this;if(k.config.darla_version==="2"){if(k.YBOBA_TEMPLATE.TEMPLATE_ID!="template_boba_embed_white_wo_rRail"){k.refreshSecureAds(c)}}else{var d="";var g="";if((k.openmode!=="embed")||(k.openmode==="embed"&&k.nodetree.sidebar.hasClass("reveal"))){d=k.embed_ads_position;g=k.embed_ads_position;if("undefined"==typeof(d)){d="LREC";g="LREC"}}var e=0;var h=0;if(YUI.PhotoAdsDarla&&("1"===k.config.darla_version)&&!window.DARLA&&!window.LIGHTBOX_DARLA_CONFIG){YUI.PhotoAdsDarla[k.moduleId].getConf.nodeIds=new Array();YUI.PhotoAdsDarla[k.moduleId].getConf.nodeIds.push("yom-ad-"+d)}if(YUI.PhotoAdsDarla&&YUI.PhotoAdsDarla[k.moduleId]){var m=function(i){if(e>30){if(i==k.config.interAds){k.unhideImageAndMeta()}if(i=="LREC"&&null!=k.nodetree.LREC){k.nodetree.LREC.addClass("hide");k.hideThumbs(k.current_thumbnail_page)}if(i=="LREC2"&&null!=k.nodetree.LREC2){k.nodetree.LREC2.addClass("hide");k.hideThumbs(k.current_thumbnail_page)}if(i=="LREC3"&&null!=k.nodetree.LREC3){k.nodetree.LREC3.addClass("hide");k.hideThumbs(k.current_thumbnail_page)}return}if((YAHOO&&YAHOO.ads&&YAHOO.ads.darla&&YAHOO.ads.darla._renderStore&&YAHOO.ads.darla._renderStore[YAHOO.ads.darla._config.destinationMap[i]])||(window.DARLA&&window.DARLA.hasPos(i))){h=0;l(i)}else{e++;setTimeout(function(){m(i)},100)}};var l=function(o){if(h>30){if(o==k.config.interAds){k.unhideImageAndMeta()}if(o=="LREC"&&null!=k.nodetree.LREC){k.nodetree.LREC.addClass("hide");k.hideThumbs(k.current_thumbnail_page)}if(o=="LREC2"&&null!=k.nodetree.LREC2){k.nodetree.LREC2.addClass("hide");k.hideThumbs(k.current_thumbnail_page)}if(o=="LREC3"&&null!=k.nodetree.LREC3){k.nodetree.LREC3.addClass("hide");k.hideThumbs(k.current_thumbnail_page)}return}var z=false;if(k.config.darla_version==="2"){z=true}else{if(YAHOO.ads&&YAHOO.ads.darla){var s=k.nodetree.slideshow.one("#"+YAHOO.ads.darla._config.destinationMap[o]),p=document.getElementById(YAHOO.ads.darla._config.destinationMap[o]);if(s&&typeof(s)!="undefined"&&s.hasChildNodes()){z=true}else{if(p&&p.contentWindow&&p.contentWindow.document&&p.contentWindow.document.body&&p.contentWindow.document.body.innerHTML!=""){z=true}}}}if(z){if(o==k.config.interAds){var y=k.nodetree.imageContainer,x=k.nodetree.mainSec,t=k.nodetree.slideshow.one(".header"),u=k.nodetree.desc,w=k.nodetree.imgMeta,v=x.one(".imageloading"),q=k.nodetree[o];if(o=="MON"){k.linkTracking("mon","mon-see")}if(v){v.remove()}y.addClass("hidden");q.setStyle("display","block");if(t){t.addClass("hidden")}u.addClass("hidden");w.addClass("hidden");if(k.simages[k.thumbIndex[k.showing]]&&k.simages[k.thumbIndex[k.showing]].type==="video"&&k.nodetree.slideshow.one("#videoInlinePlayerBtn")){var r=k.nodetree.slideshow.one("#videoInlinePlayerBtn");if(r){r.removeClass("on")}}var i=k.nodetree.slideshow.one("#slideshow_thumb_"+k.showing)||k.nodetree.RRThumbnailList.one(" li.selected");if(i){i.removeClass("selected")}if(x&&x.hasClass("loading")){x.removeClass("loading")}k.showInterAds=true;k.updateLayout()}else{if(o=="LREC"&&k.nodetree.LREC&&k.nodetree.LREC.hasClass("hide")){k.nodetree.LREC.removeClass("hide")}else{if(o=="LREC2"&&k.nodetree.LREC2&&k.nodetree.LREC2.hasClass("hide")){k.nodetree.LREC2.removeClass("hide")}else{if(o=="LREC3"&&k.nodetree.LREC3&&k.nodetree.LREC3.hasClass("hide")){k.nodetree.LREC3.removeClass("hide")}}}}}else{h++;setTimeout(function(){l(o)},100)}};var n=(k.config.interAdsEnable==true&&k.config.interAdsCount==0);if(n){var b=k.nodetree.slideshow.one("."+k.config.interAds);if(b==null){k.renderAds("add",k.config.interAds)}d+=","+k.config.interAds;if(("1"===k.config.darla_version)&&!window.DARLA&&!window.LIGHTBOX_DARLA_CONFIG){YUI.PhotoAdsDarla[k.moduleId].getConf.nodeIds.push("yom-ad-"+k.config.interAds)}k.config.interAdsCount=k.config.interAdsViewed-1}else{if(typeof(c)==="undefined"||c===true){k.config.interAdsCount--}}if(k.extAdsSetting){for(var f=0,j=k.extAdsSetting.length;f<j;f++){if(typeof(c)==="undefined"||c===true){k.extAdsSetting[f].counter--}if(k.extAdsSetting[f].counter===0){k.extAdsSetting[f].counter=k.extAdsSetting[f].ext_ads_refresh_frequency;d+=","+k.extAdsSetting[f].ext_ads_position;if(("1"===k.config.darla_version)&&!window.DARLA&&!window.LIGHTBOX_DARLA_CONFIG){YUI.PhotoAdsDarla[k.moduleId].getConf.nodeIds.push("yom-ad-"+k.extAdsSetting[f].ext_ads_position)}}}}YUI.PhotoAdsDarla[k.moduleId].fetch(k.config.spaceid,"",d);if(g=="LREC"||g=="LREC2"||g=="LREC3"){e=0;m(g)}if(n){e=0;m(k.config.interAds)}}}};a.Photos.Spotlight.prototype.refreshSecureAds=function(e){var l=this;var f="";var j="";var c;if(typeof(YUI.PhotoAdsDarla)=="undefined"||typeof(YUI.PhotoAdsDarla.event)=="undefined"){return}if(!YUI.PhotoAdsDarla[l.moduleId]){l.initDarla()}if(window.DARLA.hasPos(l.embed_ads_position)&&(l.openmode!=="embed"||(l.openmode==="embed"&&l.nodetree.sidebar.hasClass("reveal")))&&l.embedAdsViewed>-1){if(typeof(e)==="undefined"||e===true){l.embedAdsViewed--}c=YUI.PhotoAdsDarla.nodes["yom-ad-"+l.embed_ads_position];delete YUI.PhotoAdsDarla.nodes["yom-ad-"+l.embed_ads_position];if(l.embedAdsViewed===0){l.embedAdsViewed=l.config.embed_ads_freq;YUI.PhotoAdsDarla.nodes["yom-ad-"+l.embed_ads_position]=c;f=l.embed_ads_position}}var g=0;var n=window.DARLA.evtSettings("photoslightboxdarla");var q={};var d={};if(YUI.PhotoAdsDarla&&YUI.PhotoAdsDarla[l.moduleId]){var o=function(i){if(window.DARLA&&window.DARLA.hasPos(i)&&i===l.config.interAds&&l.InterAdsShown&&l.config.enable_video_interAds===0){m(i);return}if(g>30){if(i==l.config.interAds){l.unhideImageAndMeta()}return}if(window.DARLA&&window.DARLA.hasPos(i)&&i===l.config.interAds&&YMedia.LightboxRenderMonAds===true&&!l.ignoreInterAds){m(i)}else{if(g==0&&i===l.config.interAds&&(!l.InterAdsShown||l.config.enable_video_interAds===1)){l.ignoreInterAds=false;l.InterAdsProcessing=true;l.resetInterAdsLayout("on")}g++;setTimeout(function(){o(i)},100)}};var m=function(r){var z=l.nodetree.imageContainer,y=l.nodetree.mainSec,u=l.nodetree.slideshow.one(".header"),v=l.nodetree.desc,x=l.nodetree.imgMeta,w=y.one(".imageloading"),s=l.nodetree[r];if(l.InterAdsProcessing){l.resetInterAdsLayout("off");l.InterAdsProcessing=false}if(l.nodetree[l.config.interAds].getStyle("display")=="none"){l.nodetree[l.config.interAds].setStyle("display","block");if(typeof(DARLA)!="undefined"&&YMedia.DarlaVersion=="2"){DARLA.render.RenderMgr.show(l.config.interAds);l.InterAdsShown=true}}if(w&&w!=null){w.remove()}z.addClass("hidden");if(u&&u!=null){u.addClass("hidden")}v.addClass("hidden");x.addClass("hidden");s.setStyle("display","block");if(typeof(l.simages[l.thumbIndex[l.showing]])!="undefined"&&l.simages[l.thumbIndex[l.showing]].type==="video"&&l.nodetree.slideshow.one("#videoInlinePlayerBtn")){var t=l.nodetree.slideshow.one("#videoInlinePlayerBtn");if(t){t.removeClass("on")}}var i=l.nodetree.slideshow.one("#slideshow_thumb_"+l.showing)||l.nodetree.RRThumbnailList.one(" li.selected");if(i&&i!=null){i.removeClass("selected")}if(y&&y.hasClass("loading")){y.removeClass("loading")}l.showInterAds=true;l.updateLayout()};var p=(l.config.interAdsEnable==true&&l.config.interAdsCount==0);if(p){var b=l.nodetree.slideshow.one("."+l.config.interAds);if(b==null){l.renderAds("add",l.config.interAds)}f=(f==="")?l.config.interAds:f+","+l.config.interAds;l.config.interAdsCount=l.config.interAdsViewed-1}else{if(typeof(e)==="undefined"||e===true){l.config.interAdsCount--}}if(l.extAdsSetting&&typeof(YUI.PhotoAdsDarla.nodes)!=="undefined"){for(var h=0,k=l.extAdsSetting.length;h<k;h++){if(typeof(e)==="undefined"||e===true){l.extAdsSetting[h].counter--}q[h]=YUI.PhotoAdsDarla.nodes["yom-ad-"+l.extAdsSetting[h].ext_ads_position];if(q[h]&&q[h]!==null){delete YUI.PhotoAdsDarla.nodes["yom-ad-"+l.extAdsSetting[h].ext_ads_position]}if(l.extAdsSetting[h].counter===0){l.extAdsSetting[h].counter=l.extAdsSetting[h].ext_ads_refresh_frequency;f=(f==="")?l.extAdsSetting[h].ext_ads_position:f+","+l.extAdsSetting[h].ext_ads_position}}}d.ps=f;d.ml=f;d=window.DARLA.evtSettings("photoslightboxdarla",d);window.DARLA.del("photoslightboxdarla");window.DARLA.add(d);if(YUI.PhotoAdsDarla&&YUI.PhotoAdsDarla[l.moduleId]){YUI.PhotoAdsDarla[l.moduleId].fetch(l.config.spaceid,"",f)}window.DARLA.del("photoslightboxdarla");window.DARLA.add(n);if(l.extAdsSetting&&typeof(YUI.PhotoAdsDarla.nodes)!=="undefined"){for(var h=0,k=l.extAdsSetting.length;h<k;h++){if(q[h]&&q[h]!==null){YUI.PhotoAdsDarla.nodes["yom-ad-"+l.extAdsSetting[h].ext_ads_position]=q[h]}}}YUI.PhotoAdsDarla.nodes["yom-ad-"+l.embed_ads_position]=c;if(p){g=0;o(l.config.interAds)}}};a.Photos.Spotlight.prototype.initDarla=function(){var d=this;window.DARLA.config(window.LIGHTBOX_DARLA_CONFIG);YUI.PhotoAdsDarla[d.moduleId]={fetch:(a.bind(YUI.PhotoAdsDarla.event,YUI.PhotoAdsDarla,"photoslightboxdarla"))};YUI.PhotoAdsDarla.fetch=YUI.PhotoAdsDarla[d.moduleId].fetch;if(d.extAdsSetting){for(var c=0,b=d.extAdsSetting.length;c<b;c++){window.DARLA.PosConfig.del(d.extAdsSetting[c].ext_ads_position);window.DARLA.PosConfig.add(d.extAdsSetting[c].ext_ads_config)}}};a.Photos.Spotlight.prototype.setCaptionVisibility=function(b,f){var e=this,g=e.nodetree.imgDesc,d=g.one(".cptn"),c=g.one(".cptn-full");if(b){this.linkTracking(this.showing,"caption-more");g.addClass("showmore");this.capShowMore=true}else{this.linkTracking(this.showing,"caption-less");g.removeClass("showmore");this.capShowMore=false}};a.Photos.Spotlight.prototype.toggleProvider=function(){var g=this.nodetree.provider;var d=this.nodetree.provider_wrap;var f=false;var e=new a.Anim({node:d});d.on("mouseenter",function(i){var h=d.get("clientWidth")-g.get("clientWidth");if(h<=0){f=false;return}f=true;e.set("to",{left:-h});e.set("duration",h/50);b()},this);d.on("mouseleave",function(h){if(!f){return}f=false;e.stop(false)},this);function b(){if(!f){return}e.run()}function c(){d.setStyle("opacity",0);setTimeout(function(){d.setStyle("left",0);d.setStyle("opacity",1)},300);if(f){setTimeout(function(){b()},2300)}}e.on("end",function(){if(f){setTimeout(function(){c()},3000)}else{c()}})};a.Photos.Spotlight.prototype.getWindowWidthHeight=function(){return[630,680]};a.Photos.Spotlight.prototype.populateCaption=function(f){var e=this,c=e.nodetree;try{c.imgDesc._node.innerHTML="";var b=a.Node.create(f.desc);c.imgDesc.appendChild(b);if(e.capShowMore&&c.imgDesc.one(".cptn-full")){c.imgDesc.addClass("showmore")}else{c.imgDesc.removeClass("showmore")}c.provider._node.innerHTML=f.provider;c.imgDate._node.innerHTML=f.imgDate;if(e.openmode!=="embed"){c.relatedContent._node.innerHTML=f.relatedContents}}catch(d){c.imgDesc._node.innerHTML="";c.provider._node.innerHTML="";c.imgDate._node.innerHTML="";c.relatedContent._node.innerHTML=""}}},"1.0",{requires:["media-boba"]});
/* boba_embed-desktop.js 1474230 */ YUI.add("media-boba_embed-desktop",function(a){a.Photos.SpotlightEmbed=function(c,b,f,e){a.Photos.Spotlight.call(this,c,b,f,e);var d=this;this.historyEnabled=false;this.scrWidth=this.nodetree.slideshow._node.offsetWidth;this.scrHeight=this.nodetree.imageContainer._node.offsetHeight;this.embedAdsViewed=1;d.renderAdsExec=0;this.sidebarEvents=function(){YUI().use("event-hover","transition",function(i){function h(){d.nodetree.slideshow.one(".sidebar").transition("fadeIn");d.nodetree.slideshow.setStyle("width",d.YBOBA_TEMPLATE.MODULE_WIDTH_LONG+"px");setTimeout(function(){d.nodetree.slideshow.one(".sidebar").addClass("reveal");if(!isNaN(d.ss_info)&&d.ss_info!==-1&&d.nodetree.ss_info.one(".hd").getHTML()==""){d.loadInfo();d.nodetree.ss_info.addClass("on");d.hideThumbs()}if(d.renderAdsExec==0){d.renderAds("add");d.renderAdsExec=1}d.config.interAdsCount=parseInt(d.config.interAdsViewed)+1;d.refreshAds()},500)}function g(){d.nodetree.slideshow.one(".sidebar").transition("fadeOut");d.nodetree.slideshow.setStyle("width",d.YBOBA_TEMPLATE.MODULE_WIDTH_SHORT+"px");d.nodetree.ss_info.one(".hd").setHTML("");d.nodetree.ss_info.one(".bd").setHTML("");setTimeout(function(){d.nodetree.slideshow.one(".sidebar").removeClass("reveal")},500)}d.nodetree.slideshow.on("hover",h,g)})};if(this.openmode!=="testing"&&this.YBOBA_TEMPLATE.TEMPLATE_ID!=="template_boba_embed_white_wo_rRail"&&this.YBOBA_TEMPLATE.TEMPLATE_ID!=="template_boba_embed_lightbox"){this.sidebarEvents()}else{if(this.openmode!=="testing"&&(this.YBOBA_TEMPLATE.TEMPLATE_ID==="template_boba_embed_white_wo_rRail"||this.YBOBA_TEMPLATE.TEMPLATE_ID==="template_boba_embed_lightbox")){if(!isNaN(d.ss_info)&&d.ss_info!==-1&&d.nodetree.ss_info.one(".hd").getHTML()==""){d.loadInfo()}}}this.showInitImg=0;this.scrWidth=this.nodetree.imageContainer._node.offsetWidth+d.YBOBA_TEMPLATE.SIDEBAR_WIDTH;if(this.YBOBA_TEMPLATE.TEMPLATE_ID==="template_boba_embed_lightbox"){a.Photos.SpotlightEmbed.prototype.selectThumb=function(){};a.Photos.SpotlightEmbed.prototype.preloadImages=function(){};a.Photos.SpotlightEmbed.prototype.loadImages=function(){}}};a.extend(a.Photos.SpotlightEmbed,a.Photos.Spotlight);a.Photos.SpotlightEmbed.prototype.slideShow=function(){var b=this;b.sshow_load=true;b.uiInit(b.mode,"on");b.setBtnAction()}},"1.0",{requires:["media-boba","media-boba_spotlight-desktop","event-hover","transition","anim"]});
/* article-embed-video.js 1240819 */ YUI.add("media-article-embed-video",function(a){a.namespace("Media.ArticleEmbedVideo");a.Media.ArticleEmbedVideo.checkFirstVideo=function(){var c=a.one("div.video-wrap");if(c&&!c.hasClass("on")&&!a.one(".yom-art-lead .video")){var d=c.cloneNode(true);if(d.hasChildNodes()){var g=d.get("children").item(0);var f=g.getAttribute("src").split("?");var b=f[0];if(1<f.length){var e=f[1];if(e.indexOf("player_autoplay")!==-1){e=e.replace("player_autoplay=false","player_autoplay=true")}else{if(e.indexOf("autoplay")!==-1){e=e.replace("autoplay=0","autoplay=1").replace("autoplay=false","autoplay=true")}else{if(b.indexOf("www.youtube.com")!==-1){e=e+"&autoplay=1"}else{if((g.getAttribute("id").indexOf("iframeArticle")!==-1)||(e.indexOf("format=embed")!==-1)){e=e+"&player_autoplay=true"}}}}}else{var e="";if(b.indexOf("www.youtube.com")!==-1){e="autoplay=1"}else{if(g.getAttribute("id").indexOf("iframeArticle")!==-1){e="player_autoplay=true"}}}g.setAttribute("src",b+"?"+e)}d.removeAttribute("style");d.addClass("on");c.get("parentNode").replaceChild(d,c)}};a.Media.ArticleEmbedVideo.loadFirstVideoInIndex=function(){var b=a.one("div.yom-blog-index .bd li.first .yom-art-content div.video-wrap");if(b&&!b.hasClass("show")){b.setHTML(b.getHTML().replace("<!--","").replace("-->",""));b.removeAttribute("style");b.addClass("show")}};a.Media.ArticleEmbedVideo.loadEmbedVideo=function(){var b=a.all("div.video-wrap:not(.show)");if(b.size()>0){b.each(function(c){c.setHTML(c.getHTML().replace("<!--","").replace("-->",""));c.removeAttribute("style");c.addClass("show")})}}},"1.0.0",{requires:["node"]});
/* bcarousel-scrollview-base.js 1479047 */ YUI.add("media-bcarousel-scrollview-base",function(a,y){var b=a.config.doc,i=a.config.win,j=a.UA.ie,M=(a.UA.chrome>26)?false:a.Transition.useNative,g="scrollview",o={vertical:"yui3-scrollview-vert",horizontal:"yui3-scrollview-horiz"},F="scrollEnd",L="flick",l="drag",r="mousewheel",n="ui",z="top",K="right",u="bottom",m="left",N="px",D="axis",E="scrollY",G="scrollX",B="bounce",w="disabled",d="deceleration",q="x",p="y",J="boundingBox",s="contentBox",t="gesturemove",v="start",H="end",c="",h="0s",e="snapDuration",I="snapEasing",f="easing",k="frameDuration",A="bounceRange",x=function(Q,P,O){return Math.min(Math.max(Q,P),O)};function C(){C.superclass.constructor.apply(this,arguments)}a.BCarouselScrollView=a.extend(C,a.Widget,{_forceHWTransforms:a.UA.webkit?true:false,_prevent:{start:false,move:true,end:false},lastScrolledAmt:0,initializer:function(P){var O=this;O._bb=O.get(J);O._cb=O.get(s);O._cAxis=O.get(D);O._cBounce=O.get(B);O._cBounceRange=O.get(A);O._cDeceleration=O.get(d);O._cFrameDuration=O.get(k)},_fixIESelect:function(P,O){this._cbDoc=O.get("ownerDocument");this._nativeBody=a.Node.getDOMNode(a.one("body",this._cbDoc));O.on("mousedown",function(){this._selectstart=this._nativeBody.onselectstart;this._nativeBody.onselectstart=this._iePreventSelect;this._cbDoc.once("mouseup",this._ieRestoreSelect,this)},this)},_iePreventSelect:function(){return false},_ieRestoreSelect:function(){this._nativeBody.onselectstart=this._selectstart},bindUI:function(){var O=this;O._bindFlick(O.get(L));O._bindDrag(O.get(l));O._bindMousewheel(true);O._bindAttrs();if(j){O._fixIESelect(O._bb,O._cb)}if(C.SNAP_DURATION){O.set(e,C.SNAP_DURATION)}if(C.SNAP_EASING){O.set(I,C.SNAP_EASING)}if(C.EASING){O.set(f,C.EASING)}if(C.FRAME_STEP){O.set(k,C.FRAME_STEP)}if(C.BOUNCE_RANGE){O.set(A,C.BOUNCE_RANGE)}},_bindAttrs:function(){var O=this,Q=O._afterScrollChange,P=O._afterDimChange;O.after({scrollEnd:O._afterScrollEnd,disabledChange:O._afterDisabledChange,flickChange:O._afterFlickChange,dragChange:O._afterDragChange,axisChange:O._afterAxisChange,scrollYChange:Q,scrollXChange:Q,heightChange:P,widthChange:P})},_bindDrag:function(P){var O=this,Q=O._bb;Q.detach(l+"|*");if(P){Q.on(l+"|"+t+v,a.bind(O._onGestureMoveStart,O))}},_bindFlick:function(P){var O=this,Q=O._bb;Q.detach(L+"|*");if(P){Q.on(L+"|"+L,a.bind(O._flick,O),P);O._bindDrag(O.get(l))}},_bindMousewheel:function(O){var P=this,Q=P._bb;Q.detach(r+"|*");if(O){a.one(b).on(r,a.bind(P._mousewheel,P))}},syncUI:function(){var P=this,T=P._getScrollDims(),S=T.offsetWidth,O=T.offsetHeight,Q=T.scrollWidth,R=T.scrollHeight;if(P._cAxis===undefined){P._cAxis={x:(Q>S),y:(R>O)};P._set(D,P._cAxis)}P.rtl=(P._cb.getComputedStyle("direction")==="rtl");P._cDisabled=P.get(w);P._uiDimensionsChange();if(P._isOutOfBounds()){P._snapBack()}},_getScrollDims:function(){var P=this,O=P._cb,U=P._bb,R=C._TRANSITION,V=P.get(G),T=P.get(E),Q,S;if(M){O.setStyle(R.DURATION,h);O.setStyle(R.PROPERTY,c)}Q=P._forceHWTransforms;P._forceHWTransforms=false;P._moveTo(O,0,0);S={offsetWidth:U.get("offsetWidth"),offsetHeight:U.get("offsetHeight"),scrollWidth:U.get("scrollWidth"),scrollHeight:U.get("scrollHeight")};P._moveTo(O,-(V),-(T));P._forceHWTransforms=Q;return S},_uiDimensionsChange:function(){var U=this,R=U._bb,T=U._getScrollDims(),O=T.offsetWidth,V=T.offsetHeight,P=T.scrollWidth,W=T.scrollHeight,S=U.rtl,Q=U._cAxis;if(Q&&Q.x){R.addClass(o.horizontal)}if(Q&&Q.y){R.addClass(o.vertical)}U._minScrollX=(S)?Math.min(0,-(P-O)):0;U._maxScrollX=(S)?0:Math.max(0,P-O);U._minScrollY=0;U._maxScrollY=Math.max(0,W-V)},scrollTo:function(X,W,S,U,Q){if(this._cDisabled){return}var Y=this,R=Y._cb,V=C._TRANSITION,Z=a.bind(Y._onTransEnd,Y),O=0,aa=0,T={},P;S=S||0;U=U||Y.get(f);Q=Q||R;if(X!==null){Y.set(G,X,{src:n});O=-(X)}if(W!==null){Y.set(E,W,{src:n});aa=-(W)}P=Y._transform(O,aa);if(M){Q.setStyle(V.DURATION,h).setStyle(V.PROPERTY,c)}if(S===0){if(M){Q.setStyle("transform",P)}else{if(X!==null){Q.setStyle(m,O+N)}if(W!==null){Q.setStyle(z,aa+N)}}}else{T.easing=U;T.duration=S/1000;if(M){T.transform=P}else{T.left=O+N;T.top=aa+N}Q.transition(T,Z)}},_transform:function(O,Q){var P="translate("+O+"px, "+Q+"px)";if(this._forceHWTransforms){P+=" translateZ(0)"}return P},_moveTo:function(P,O,Q){if(M){P.setStyle("transform",this._transform(O,Q))}else{P.setStyle(m,O+N);P.setStyle(z,Q+N)}},_onTransEnd:function(P){var O=this;O.fire(F)},_onGestureMoveStart:function(T){if(this._cDisabled){return false}var P=this,U=P._bb,Q=P.get(G),O=P.get(E),S=T.clientX,R=T.clientY;if(P._prevent.start){T.preventDefault()}if(P._flickAnim){P._flickAnim.cancel();delete P._flickAnim;P._onTransEnd()}T.stopPropagation();P.lastScrolledAmt=0;P._gesture={axis:null,startX:Q,startY:O,startClientX:S,startClientY:R,endClientX:null,endClientY:null,deltaX:null,deltaY:null,flick:null,onGestureMove:U.on(l+"|"+t,a.bind(P._onGestureMove,P)),onGestureMoveEnd:U.on(l+"|"+t+H,a.bind(P._onGestureMoveEnd,P))}},_onGestureMove:function(U){var Z=this,Y=Z._gesture,V=Z._cAxis,X=V.x,W=V.y,R=Y.startX,Q=Y.startY,T=Y.startClientX,S=Y.startClientY,P=U.clientX,O=U.clientY;if(Z._prevent.move){U.preventDefault()}Y.deltaX=T-P;Y.deltaY=S-O;if(Y.axis===null){Y.axis=(Math.abs(Y.deltaX)>Math.abs(Y.deltaY))?q:p}if(Y.axis===q&&X){Z.set(G,R+Y.deltaX)}else{if(Y.axis===p&&W){Z.set(E,Q+Y.deltaY)}}},_onGestureMoveEnd:function(T){var O=this,Q=O._gesture,P=Q.flick,S=T.clientX,R=T.clientY;if(O._prevent.end){T.preventDefault()}Q.endClientX=S;Q.endClientY=R;Q.onGestureMove.detach();Q.onGestureMoveEnd.detach();if(!P){if(Q.deltaX!==null&&Q.deltaY!==null){if(O._isOutOfBounds()){O._snapBack()}else{if(O.pages&&!O.pages.get(D)[Q.axis]){O._onTransEnd()}}}}},_flick:function(V){if(this._cDisabled){return false}var P=this,R=P._cAxis,Q=V.flick,U=Q.axis,O=Q.velocity,T=U===q?G:E,S=P.get(T);if(P._gesture){P._gesture.flick=Q}if(R[U]){P._flickFrame(O,U,S)}},_flickFrame:function(W,R,X){var ad=this,ak=R===q?G:E,T=ad._cBounce,U=ad._cBounceRange,ah=ad._cDeceleration,P=ad._cFrameDuration,O=W*ah,S=X-(P*O),af=R===q?ad._minScrollX:ad._minScrollY,ag=R===q?ad._maxScrollX:ad._maxScrollY,V=(S<af),Y=(S<ag),ab=(S>af),ae=(S>ag),ac=(S<(af-U)),aj=(S<(ag+U)),aa=(V&&(S>(af-U))),ai=(ae&&(S<(ag+U))),Q=(S>(af-U)),Z=(S>(ag+U)),al;if(aa||ai){O*=T}al=(Math.abs(O).toFixed(4)<0.015);if(al||ac||Z){if(ad._flickAnim){ad._flickAnim.cancel();delete ad._flickAnim}if(ab&&Y){ad._onTransEnd()}else{ad._snapBack()}}else{ad._flickAnim=a.later(P,ad,"_flickFrame",[O,R,S]);ad.set(ak,S)}},_mousewheel:function(S){var O=this,R=O.get(E),U=O._bb,P=10,Q=(S.wheelDelta>0),T=R-((Q?1:-1)*P);T=x(T,O._minScrollY,O._maxScrollY);if(U.contains(S.target)&&O._cAxis[p]){O.lastScrolledAmt=0;O.set(E,T);if(O.scrollbars){O.scrollbars._update();O.scrollbars.flash()}O._onTransEnd();S.preventDefault()}},_isOutOfBounds:function(Y,W){var Z=this,U=Z._cAxis,X=U.x,V=U.y,R=Y||Z.get(G),Q=W||Z.get(E),T=Z._minScrollX,S=Z._minScrollY,P=Z._maxScrollX,O=Z._maxScrollY;return(X&&(R<T||R>P))||(V&&(Q<S||Q>O))},_snapBack:function(){var X=this,S=X.get(G),R=X.get(E),U=X._minScrollX,T=X._minScrollY,Q=X._maxScrollX,P=X._maxScrollY,Y=x(R,T,P),O=x(S,U,Q),V=X.get(e),W=X.get(I);if(O!==S){X.set(G,O,{duration:V,easing:W})}else{if(Y!==R){X.set(E,Y,{duration:V,easing:W})}else{X._onTransEnd()}}},_afterScrollChange:function(R){if(R.src===C.UI_SRC){return false}var O=this,Q=R.duration,T=R.easing,S=R.newVal,P=[];O.lastScrolledAmt=O.lastScrolledAmt+(R.newVal-R.prevVal);if(R.attrName===G){P.push(S);P.push(O.get(E))}else{P.push(O.get(G));P.push(S)}P.push(Q);P.push(T);O.scrollTo.apply(O,P)},_afterFlickChange:function(O){this._bindFlick(O.newVal)},_afterDisabledChange:function(O){this._cDisabled=O.newVal},_afterAxisChange:function(O){this._cAxis=O.newVal},_afterDragChange:function(O){this._bindDrag(O.newVal)},_afterDimChange:function(){this._uiDimensionsChange()},_afterScrollEnd:function(P){var O=this;if(O._flickAnim){O._flickAnim.cancel();delete O._flickAnim}if(O._isOutOfBounds()){O._snapBack()}},_axisSetter:function(P,O){if(a.Lang.isString(P)){return{x:P.match(/x/i)?true:false,y:P.match(/y/i)?true:false}}},_setScroll:function(P,O){if(this._cDisabled){P=a.Attribute.INVALID_VALUE}return P},_setScrollX:function(O){return this._setScroll(O,q)},_setScrollY:function(O){return this._setScroll(O,p)}},{NAME:"scrollview",ATTRS:{axis:{setter:"_axisSetter",writeOnce:"initOnly"},scrollX:{value:0,setter:"_setScrollX"},scrollY:{value:0,setter:"_setScrollY"},deceleration:{value:0.93},bounce:{value:0.1},flick:{value:{minDistance:10,minVelocity:0.3}},drag:{value:true},snapDuration:{value:400},snapEasing:{value:"ease-out"},easing:{value:"cubic-bezier(0, 0.1, 0, 1.0)"},frameDuration:{value:15},bounceRange:{value:150}},CLASS_NAMES:o,UI_SRC:n,_TRANSITION:{DURATION:a.Transition._VENDOR_PREFIX+"TransitionDuration",PROPERTY:a.Transition._VENDOR_PREFIX+"TransitionProperty"},BOUNCE_RANGE:false,FRAME_STEP:false,EASING:false,SNAP_EASING:false,SNAP_DURATION:false})},"3.7.0pr1",{requires:["widget","event-gestures","event-mousewheel","transition"],skinnable:true});
/* bcarousel-scrollview-paginator.js 950292 */ YUI.add("media-bcarousel-scrollview-paginator",function(c){var f=c.ClassNameManager.getClassName,s="scrollview",n=f(s,"hidden"),d=f(s,"paged"),g=(c.ScrollView)?c.ScrollView.UI_SRC:"ui",r="index",m="scrollX",l="scrollY",k="total",q="host",t="boundingBox",j="contentBox",e="selector",a="flick",b="drag",i="axis",p="x",o="y";function h(){h.superclass.constructor.apply(this,arguments)}c.extend(h,c.Plugin.Base,{initializer:function(u){var w=this,v=w.get(q);w._pageDims=[];w._pageBuffer=1;w._optimizeMemory=false;w._host=v;w._bb=v._bb;w._cb=v._cb;w._cIndex=w.get(r);w._cAxis=w.get(i);if(u._optimizeMemory){w._optimizeMemory=u._optimizeMemory}if(u._pageBuffer){w._pageBuffer=u._pageBuffer}w._bindAttrs()},_bindAttrs:function(){var u=this;u.after({indexChange:u._afterIndexChange,axisChange:u._afterAxisChange});u.beforeHostMethod("scrollTo",u._beforeHostScrollTo);u.beforeHostMethod("_mousewheel",u._beforeHostMousewheel);u.beforeHostMethod("_flick",u._beforeHostFlick);u.afterHostMethod("_onGestureMoveEnd",u._afterHostGestureMoveEnd);u.afterHostMethod("_uiDimensionsChange",u._afterHostUIDimensionsChange);u.afterHostMethod("syncUI",u._afterHostSyncUI);u.afterHostEvent("render",u._afterHostRender);u.afterHostEvent("scrollEnd",u._afterHostScrollEnded)},_afterHostRender:function(w){var B=this,x=B._bb,C=B._host,v=B._cIndex,u=B._cAxis,z=B._getPageNodes(),D=z.size(),A=B._pageDims[v].maxScrollX,y=B._pageDims[v].maxScrollY;if(u[o]){C._maxScrollX=A}else{if(u[p]){C._maxScrollY=y}}B.set(k,D);if(v!==0){B.scrollToIndex(v,0)}x.addClass(d);B._optimize()},_afterHostSyncUI:function(x){var A=this,v=A._host,w=v.get(a),z=A._getPageNodes(),u=z.size(),y;A.set(k,u);if(A._cAxis===undefined){A._set(i,v.get(i))}},_afterHostUIDimensionsChange:function(x){var A=this,v=A._host,y=v._getScrollDims(),w=y.offsetWidth,u=y.offsetHeight,z=A._getPageNodes();z.each(function(F,C){var B=F.get("scrollWidth"),D=F.get("scrollHeight"),G=Math.max(0,B-w),E=Math.max(0,D-u);if(!A._pageDims[C]){A._pageDims[C]={scrollX:0,scrollY:0,_minScrollX:0,_minScrollY:0,maxScrollX:G,maxScrollY:E}}else{A._pageDims[C].maxScrollX=G;A._pageDims[C].maxScrollY=E}})},_beforeHostScrollTo:function(E,C,v,B,u){var G=this,H=G._host,F=H._gesture,z=G._cIndex,w=G._cAxis,D=this._getPageNodes(),A;if(F){A=F.axis;if(A===o){E=null}else{C=null}if(w[A]===false){u=D.item(z)}}return new c.Do.AlterArgs("new args",[E,C,v,B,u])},_afterHostGestureMoveEnd:function(x){var z=this,v=z._host,u=v._gesture,y=z._cAxis,w=u&&u.axis;if(y[w]){if(u[(w===p?"deltaX":"deltaY")]>0){z[v.rtl?"prev":"next"]()}else{z[v.rtl?"next":"prev"]()}}},_beforeHostMousewheel:function(w){var z=this,u=z._host,x=u._bb,v=w.wheelDelta<0,y=z._cAxis;if(x.contains(w.target)&&y[o]){if(v){z.next()}else{z.prev()}w.preventDefault();return new c.Do.Prevent()}},_beforeHostFlick:function(v){var x=this,w=x.get(i),u=v.flick.axis||false;if(w[u]){return new c.Do.Prevent()}},_afterHostScrollEnded:function(x){var A=this,v=A._host,u=A._cIndex,y=v.get(m),w=v.get(l),z=A._cAxis;if(z[o]){A._pageDims[u].scrollX=y}else{A._pageDims[u].scrollY=w}A._optimize()},_afterIndexChange:function(A){var B=this,x=this._host,u=A.newVal,z=B._pageDims[u].maxScrollX,w=B._pageDims[u].maxScrollY,v=x._gesture,y=v&&v.axis;B._cIndex=u;if(y===o){x._maxScrollX=z;x.set(m,B._pageDims[u].scrollX,{src:g})}else{if(y===p){x._maxScrollY=w;x.set(l,B._pageDims[u].scrollY,{src:g})}}if(A.src!==g){B.scrollToIndex(u)}},_optimize:function(){if(!this._optimizeMemory){return false}var w=this,u=w._cIndex,v=w._getStage(u);w._showNodes(v.visible);w._hideNodes(v.hidden)},_getStage:function(x){var w=this._pageBuffer,v=this.get(k),z=this._getPageNodes(),y=Math.max(0,x-w),u=Math.min(v,x+1+w);return{visible:z.splice(y,u-y),hidden:z}},_showNodes:function(u){if(u){u.removeClass(n).setStyle("visibility","")}},_hideNodes:function(u){if(u){u.addClass(n).setStyle("visibility","hidden")}},_getPageNodes:function(){var y=this,v=y._host,u=v._cb,w=y.get(e),x=w?u.all(w):u.get("children");return x},next:function(){var x=this,u=x._cIndex,w=u+1,v=this.get(k);if(w>=v){return}x.set(r,w)},prev:function(){var w=this,u=w._cIndex,v=u-1;if(v<0){return}w.set(r,v)},scrollTo:function(){return this.scrollToIndex.apply(this,arguments)},scrollToIndex:function(w,z,B){var A=this,y=A._host,v=A._getPageNodes().item(w),x=(A._cAxis[p]?m:l),u=v.get(x===m?"offsetLeft":"offsetTop");z=(z!==undefined)?z:h.TRANSITION.duration;B=(B!==undefined)?z:h.TRANSITION.easing;A.set(r,w,{src:g});A._showNodes(v);y.set(x,u,{duration:z,easing:B})},_axisSetter:function(v,u){if(c.Lang.isString(v)){return{x:v.match(/x/i)?true:false,y:v.match(/y/i)?true:false}}},_afterAxisChange:function(u){this._cAxis=u.newVal}},{NAME:"pluginScrollViewPaginator",NS:"pages",ATTRS:{axis:{setter:"_axisSetter",writeOnce:"initOnly"},selector:{value:null},index:{value:0,validator:function(u){return true}},total:{value:0}},TRANSITION:{duration:300,easing:"ease-out"}});c.namespace("Plugin").BCarouselScrollViewPaginator=h},"@VERSION@",{requires:["plugin"]});
/* bcarousel.js 1447403 */ YUI.add("media-bcarousel",function(g){var c="NotLoaded",d="Loading",b="Loaded",f="Failed";var a=10;function e(i,h){this._modId=i.modId;this._isDebug=i.isDebug;this._mod=g.one("#"+i.modId);if(this._mod===null){return}this._hd=this._mod.one(".hd");this._pages=this._mod.one(".bcarousel-pages");this._pagination=this._mod.one(".pagination");this._desktopNav=this._mod.one(".ymg-carousel-nav-wrap");this._nextButton=this._mod.one(".next-page");this._prevButton=this._mod.one(".prev-page");this._mobileNav=this._mod.one(".yom-scrollview-paginator-control");if(!this._desktopNav&&!this._mobileNav){return}this.pageTemplate=this._pages.get("children").item(0).cloneNode(true);this.pageTemplate.one(".bcarousel-items").empty();this.strings=i.strings||{};this.chrome=(typeof h!="undefined")?h:null;i.boundingBox=this._mod.one(".yui3-bcarousel");i.srcNode=this._mod.one(".yui3-bcarousel-content");i.axis="x";i.flick={axis:"x"};e.superclass.constructor.apply(this,arguments)}e.NAME="bcarousel";e.ATTRS={uuid:{},startInitial:{value:1},numRows:{},numCols:{},pagesPerBatch:{},totalItems:{},maxItems:{},numItems:{getter:function(j,i){var h=(this.get("maxItems")?this.get("maxItems"):Number.MAX_VALUE);return Math.min(h,this.get("totalItems")-(this.get("startInitial")-1))}},xhrUrl:{},paginationTemplate:{},placeholderTemplate:{},ywaActions:{value:{swipe:"38"}},placeholderClass:{value:"bcarousel-placeholder bcarousel-item"},pageClass:{value:"bcarousel-page"},batchSize:{getter:function(i,h){return this.get("numRows")*this.get("numCols")*this.get("pagesPerBatch")}},numPerPage:{getter:function(i,h){return this.get("numRows")*this.get("numCols")}},numPages:{getter:function(i,h){return Math.ceil(this.get("numItems")/this.get("numPerPage"))}},items:{validator:function(k){var m,l,h=["status"];if(!g.Lang.isArray(k)){this.log("BCarousel items validation failed: value is not an array.");return false}for(m=0;m<k.length;m++){for(l=0;l<h.length;l++){if(k[m]&&!(k[m].hasOwnProperty(h[l]))){this.log('BCarousel item validation failed: missing required property, "',h[l],'". Item = ',k[m]);return false}}}return true}}};e.HTML_PARSER={items:function(j){var i=this,h=[];j.all(".bcarousel-item").each(function(){h.push({status:b})});return h}};g.extend(e,g.BCarouselScrollView,{initializer:function(h){this.logDebug("bcarousel::initializer() Enter");this.plug(g.Plugin.BCarouselScrollViewPaginator,{axis:"x",index:0,total:this.get("numPages"),selector:"."+this.get("pageClass")});this.publish("rendered",{broadcast:2,fireOnce:true});this.publish("initialized",{broadcast:2,fireOnce:true});g.publish("bcarousel:rendered",{broadcast:2,fireOnce:true});g.publish("bcarousel:initialized",{broadcast:2,fireOnce:true});g.Global.publish("bcarousel:rendered",{broadcast:2,fireOnce:true});g.Global.publish("bcarousel:initialized",{broadcast:2,fireOnce:true});this.publish("contentUpdate",{broadcast:2});this.fetchQueue=new g.AsyncQueue();this.pageTime=new Date().getTime();this.fire("initialized",{bcarousel:this});this.logDebug("bcarousel::initializer() Exit")},render:function(){this.logDebug("bcarousel::render() Enter");e.superclass.render.apply(this,arguments);this.fire("rendered",{bcarousel:this});this.logDebug("bcarousel::render() Exit")},renderUI:function(){this.logDebug("bcarousel::renderUI() Enter");e.superclass.renderUI.apply(this,arguments);if(this.get("numPages")>1){this._addPlaceholders(this.get("numPerPage"),false)}},bindUI:function(){this.logDebug("bcarousel::bindUI() Enter");e.superclass.bindUI.apply(this,arguments);if(this.get("numPages")<=1){if(this._hd){if(!this._hd.one(".heading")){this._hd.addClass("hidden")}}return}var i=this.get("boundingBox");var h=this;this.preventClickWhileDragging();this.disableDragDrop();this.applyWiggleFix();this.pages.on("indexChange",this._onPageIndexChange,this);if(this._desktopNav){this._nextButton.on("click",function(j){this.logDebug("next clicked");j.preventDefault();this.pages.next()},this);this._prevButton.on("click",function(j){this.logDebug("prev clicked");j.preventDefault();this.pages.prev()},this);this._desktopNav.removeClass("hidden")}else{this._prevent.move=false;this.syncUIOnOrientationChange(a);this._mobileNav.on("click",function(l){var j=this.pages.get("index");var k=this._mobileNav.all("li").item(j).get("offsetLeft");if(l.clientX<k){this.pages.prev()}else{if(l.clientX>(k+10)){this.pages.next()}}},this)}this.get("boundingBox").after("scrollWidthChange",function(j){h.logDebug("scrollWidth changed")});this.logDebug("bcarousel::bindUI() Exit")},syncUIOnOrientationChange:function(i){var h=this;g.on("ymedia:orientationchange",function(j){g.later(10,this,function(){var l=h._pages.ancestor(".yui3-scrollview").setStyle("width","100%");var k=parseInt(h._pages.getComputedStyle("width"));h.set("width",k+i/2);h.pages.scrollToIndex(h.pages.get("index"))})})},preventClickWhileDragging:function(){var i=this.get("boundingBox");var h=this;i.delegate("click",function(j){if(Math.abs(h.lastScrolledAmt)>2){}},"a")},disableDragDrop:function(){this.get("boundingBox").delegate("mousedown",function(h){h.preventDefault()},"a",this);this.get("boundingBox").delegate("mousedown",function(h){h.preventDefault()},"img",this)},applyWiggleFix:function(){this._prevent.move=false;var h=this.get("boundingBox");h.on("gesturemovestart",function(j){var i=[j.pageX,j.pageY];h.once("gesturemove",function(o){var m=[o.pageX,o.pageY],l=m[0]-i[0],k=m[1]-i[1],n=Math.abs(k)>Math.abs(l)?"y":"x";if(n==="x"){o.preventDefault()}})})},_onPageIndexChange:function(k){var h=k.newVal,j=new Date().getTime(),i=this.get("numPerPage"),l=h*i;this.logDebug("_onPageIndexChange:: about to transition to page ",h,", start: ",l,"after",((j-this.pageTime)/1000)," sec.");this.pageTime=j;this._updatePagination(l);if(this.chrome){this.chrome.ywaTrack(this.get("ywaActions")["swipe"])}this._queueRequest(l,true);if(l+i<this.get("numItems")){this._addPlaceholders(l+i);this._queueRequest(l+i,false)}},_addPlaceholders:function(j,r){var o=this.get("items"),q=this.get("numPerPage"),p=Math.min(this.get("numItems"),j+this.get("batchSize")),s,n,m,k,r=typeof r!=="undefined"?r:true;if(!g.Lang.isUndefined(o[j])){return}this.logDebug("inside of _addPlaceholders for items ",j," to ",p,". old scrollWidth: ",this.get("boundingBox").get("scrollWidth"));var l=false;for(m=j;m<p;m++){l=true;if(m%q===0){s=this.pageTemplate.cloneNode(true);this._pages.appendChild(s);n=s.one(".bcarousel-items")}k=this._renderPlaceholder(c);n.append(k);o[m]={status:c}}this.set("items",o);if(l&&r){this.logDebug("Added place holders for items ",j," to ",p,". new scrollWidth: ",this.get("boundingBox").get("scrollWidth"));var h=this._maxScrollX;this.syncUI();this._maxScrollX=(this.rtl&&!isNaN(h))?0:Math.max(0,h+this.get("boundingBox").get("offsetWidth"))}},_renderPlaceholder:function(h){var k=this.get("placeholderTemplate"),m=this.get("placeholderClass"),l="",j="",i;if(h==c){l=this.strings.loading;j="ratio-content loading"}if(h==f){l=this.strings.error;j="icon icon-small icon-alert-small"}i=g.substitute(k,{"class":m,message:l,icon:j});return i},_queueRequest:function(p,o){var m,h=this.fetchQueue,n=this._getRequestId(p),j=this.get("items"),l=this.get("batchSize"),k=Math.min(this.get("numItems"),p-(p%l)+l);if(!j[p]){this._addPlaceholders(p)}if(h.indexOf(n)!==-1){if(o){h.promote(n).run();this.logDebug("Promoted queued request for pages ",this._getPageNumber(p)," to ",this._getPageNumber(k-1))}return}if(j[p].status!=c){return}h.add({id:n,fn:function(){this._fetchItems(p)},context:this,timeout:500});if(o){h.promote(n)}h.run();for(m=p;m<k;m++){j[m].status=d}},_xhrSuccessHandler:function(k,m,r){var s=this.get("items"),q=this.get("batchSize"),w=this.get("numPerPage"),t=this.get("numItems"),u=g.Node.create(m.responseText);this.fire("contentUpdate",{newContent:u});var o=u.all(".bcarousel-page"),j=r.start,v=Math.min(t,j+q),p=Math.floor(j/w),h=o?o.size():0,x=Math.ceil((v-j)/w),n,y;this.logDebug("XHR success: pages ",(p+1)," to ",(p+h),", items ",(j+1)," to ",v,", batch ",Math.floor(j/q));for(n=0;n<h;n++){this._pages.get("children").item(p+n).replace(o.item(n))}for(n=x;n>h;n--){y=this._renderPlaceholder(f);this._pages.get("children").item(p+n-1).one(".bcarousel-items").get("children").each(function(i){i.replace(y)})}for(n=j;n<v;n++){s[n]={status:b}}this.set("items",s);var l=YMedia.rapid;if(l&&l.refreshModule&&l.isModuleTracked(this._modId)){l.refreshModule(this._modId,false)}this.logDebug("Loaded pages ",(p+1)," to ",(p+h))},_xhrFailureHandler:function(h,k,o){var p=this.get("items"),n=this.get("batchSize"),s=this.get("numPerPage"),q=this.get("numItems"),j=o.start,r=Math.min(q,j+n),m=Math.floor(j/s),t=Math.ceil((r-j)/s),l;this.log("XHR failure: pages ",this._getPageNumber(j)," to ",this._getPageNumber(r-1),", items ",(j+1)," to ",r,", batch ",Math.floor(j/n));for(l=t;l>=1;l--){var u=this._renderPlaceholder(f);this._pages.get("children").item(m+l-1).one(".bcarousel-items").get("children").each(function(i){i.replace(u)})}for(l=j;l<r;l++){p[l]={status:"Failed"}}this.set("items",p)},_fetchItems:function(m){var j=this._xhrSuccessHandler,k=this._xhrFailureHandler,i,h,l;h=this.get("xhrUrl")+"&start="+encodeURIComponent(m+(this.get("startInitial")-1));i={on:{success:j,failure:k},"arguments":{start:m},context:this};l=g.io(h,i)},_updatePagination:function(k){var i=this.get("paginationTemplate"),h=this.get("numItems"),j=Math.min(h,k+this.get("numPerPage"));if(this._desktopNav){if(!this._pagination||!i){return}this._pagination.set("innerHTML",g.substitute(i,{first:k+1,last:j,total:h}));if(k==0){this._prevButton.addClass("yui-carousel-first-button-disabled")}else{this._prevButton.removeClass("yui-carousel-first-button-disabled")}if(j==h){this._nextButton.addClass("yui-carousel-button-disabled")}else{this._nextButton.removeClass("yui-carousel-button-disabled")}}if(this._mobileNav){this.once("scrollEnd",function(){this._mobileNav.all(".selected").removeClass("selected");var l=this.pages.get("index");this._mobileNav.all("li").item(l).addClass("selected")},this)}},_getRequestId:function(h){return"request-"+h},_getPageNumber:function(h){return Math.floor(h/this.get("numPerPage"))+1},log:function(){if(typeof console=="object"&&typeof console.log=="function"){var h=Array.prototype.slice.call(arguments);h.unshift(this._modId+": ");console.log.apply(console,h)}},logDebug:function(){if(this._isDebug){this.log.apply(this,arguments)}},getOuterHTML:function(i){var h=g.Node.create("<ul>");h.appendChild(i.cloneNode(true));return h.get("innerHTML")}});g.namespace("Media").BCarousel=e},"1.0",{requires:["media-bcarousel-scrollview-base","media-bcarousel-scrollview-paginator","io-base","async-queue","substitute","media-orientation","event-custom"]});