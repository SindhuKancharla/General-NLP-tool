;YAHOO = window.YAHOO || {};YAHOO.VideoPlatform = YAHOO.VideoPlatform || {};YUI.add("yepswf",function(a){var j=a.SWF||{},l=j.prototype||{},o=j._instances||{},e=j.eventHandler||{},n=a.Event,p=a.Escape,h=a.SWFDetect,i=a.Lang,g=a.UA,k=a.Node,f="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",d="application/x-shockwave-flash",c="10.0.22",b="SWF.eventHandler",m={align:"",allowFullScreen:"",allowNetworking:"",allowScriptAccess:"",base:"",bgcolor:"",menu:"",name:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};a.YEPSWF=function(q,H,C,y){var r={};if(!a.SWF||typeof a.SWF.prototype!=="object"){a.augment(this,a.EventTarget);r.type="yuiIntegrationError";this.publish("yuiIntegrationError",{fireOnce:true});this.fire("yuiIntegrationError",r);return;}this._id=a.guid("yuiswf");var E=this._id;var u=k.one(q);var C=C||{};var s=C.version||c;var v=(s+"").split(".");var B=h.isFlashVersionAtLeast(parseInt(v[0]),parseInt(v[1]),parseInt(v[2]));var A="<object ";var F,z;var G="yId="+a.id+"&YUISwfId="+E+"&YUIBridgeCallback="+b+"&allowedDomain="+document.location.hostname;a.YEPSWF._instances[E]=this;if(!u||!H){return;}if(B){A+='id="'+E+'" ';if(g.ie&&g.ie<11){A+='classid="'+f+'" ';}else{A+='type="'+d+'" data="'+p.html(H)+'" ';}F="100%";z="100%";A+='width="'+F+'" height="'+z+'">';if(g.ie&&g.ie<11){A+='<param name="movie" value="'+p.html(H)+'"/>';}for(var t in C.fixedAttributes){if(m.hasOwnProperty(t)){A+='<param name="'+(p.html(t)).toLowerCase()+'" value="'+p.html(C.fixedAttributes[t])+'"/>';}}for(var D in C.flashVars){var x=C.flashVars[D];if(i.isString(x)){G+="&"+p.html(D)+"="+p.html(encodeURIComponent(x));}}if(G){A+='<param name="flashVars" value="'+G+'"/>';}A+="</object>";u.set("innerHTML",A);this._swf=k.one("#"+E);}else{if(h.getFlashVersion()!=="undefined.undefined.undefined"||y===true){var r={};r.type="wrongflashversion";this.publish("wrongflashversion",{fireOnce:true});this.fire("wrongflashversion",r);}}};a.YEPSWF.prototype=l;a.YEPSWF._instances=o;a.YEPSWF.eventHandler=e;},"",{requires:["swf","escape","node"]});YUI.add("PlayerData",function(a){a.namespace("VideoAds");PlayerData=function(){this._nicobarHost=null;this.setMASHost("http://static.vap.yahoo.net/");this._nicobarQueryHost=null;this.setMASQueryHost("http://query.vap.yahoo.net/nicobarMan/ads/");this._nicobarAcct=null;this._nicobarRulesetId=null;this._clipId=null;this._clipDuration=null;this._clipTitle=null;this._playlistId=null;this._playlistTitle=null;this._playerId=null;this._playerTitle=null;this._clipCats=[];this._isLive=true;this._customParams={};this._queryRules=null;this._processAdData=function(){var d=this._adData;if(d){var g=d.adRules;try{if(g){if(typeof g.ManModel==="undefined"||g.ManModel===null){}else{var f=convertJSONToXML("ManModel",g.ManModel);this.setQueryRules(f);}}}catch(h){}var b=d.ad_targeting;var c="";try{if(b&&(typeof b==="string")&&(b.indexOf("<adData")>-1)){c="<adTargeting>"+b+"</adTargeting>";this.addCustomParameter("ad-extra:adTargeting",c);}else{c=b;this.addCustomParameter("ad-extra:adTargeting",c);}}catch(h){}try{var i=d.category;if(i){this.addCustomParameter("ad-extra:adTargetingCategory",i);}}catch(h){}}};};PlayerData.PLAYER_READY_EVENT="ready";PlayerData.CATEGORY_CHANGE_EVENT="categoryChange";PlayerData.CLIP_CHANGE_EVENT="clipChange";PlayerData.AD_BREAK_EVENT="adBreak";PlayerData.prototype.setMASHost=function(b){this._nicobarHost=b;};PlayerData.prototype.getMASHost=function(){return this._nicobarHost;};PlayerData.prototype.setMASQueryHost=function(b){this._nicobarQueryHost=b;};PlayerData.prototype.getMASQueryHost=function(){return this._nicobarQueryHost;};PlayerData.prototype.setMASAcctId=function(b){this._nicobarAcct=b;};PlayerData.prototype.getMASAcctId=function(){return this._nicobarAcct;};PlayerData.prototype.setMASRulesetId=function(b){this._nicobarRulesetId=b;};PlayerData.prototype.getMASRulesetId=function(){return this._nicobarRulesetId;};PlayerData.prototype.setClipId=function(b){this._clipId=b;};PlayerData.prototype.getClipId=function(){return this._clipId;};PlayerData.prototype.setClipDuration=function(b){this._clipDuration=b;};PlayerData.prototype.getClipDuration=function(){return this._clipDuration;};PlayerData.prototype.setClipTitle=function(b){this._clipTitle=b;};PlayerData.prototype.getClipTitle=function(){return this._clipTitle;};PlayerData.prototype.setPlaylistId=function(b){this._playlistId=b;};PlayerData.prototype.getPlaylistId=function(){return this._playlistId;};PlayerData.prototype.setPlaylistTitle=function(b){this._playlistTitle=b;};PlayerData.prototype.getPlaylistTitle=function(){return this._playlistTitle;};PlayerData.prototype.setPlayerId=function(b){this._playerId=b;};PlayerData.prototype.getPlayerId=function(){return this._playerId;};PlayerData.prototype.setPlayerTitle=function(b){this._playerTitle=b;};PlayerData.prototype.getPlayerTitle=function(){return this._playerTitle;};PlayerData.prototype.setClipCategories=function(b){this._clipCats=b;};PlayerData.prototype.getClipCategories=function(){return this._clipCats;};PlayerData.prototype.setIsLive=function(b){this._isLive=b;};PlayerData.prototype.getIsLive=function(){return this._isLive;};PlayerData.prototype.addCustomParameter=function(b,c){this._customParams[b]=c;};PlayerData.prototype.getCustomParameters=function(){return this._customParams;};PlayerData.prototype.getCustomParameter=function(b){return this._customParams[b];};PlayerData.prototype.toString=function(){return"MASHost = "+this.getMASHost()+", MASQueryHost = "+this.getMASQueryHost();};PlayerData.prototype.setQueryRules=function(b){this._queryRules=b;};PlayerData.prototype.getQueryRules=function(){return this._queryRules;};PlayerData.prototype.setAdData=function(b){this._adData=b;this._processAdData();};PlayerData.prototype.getAdData=function(){return this._adData;};jsonToXML=function(g,c){var e="";var f="";var b="";var j=null;for(j in c){var h=c[j];if(j==="content"){b=b+"<![CDATA["+h+"]]>";continue;}if(h instanceof Array){for(var d=0;d<h.length;d++){var k=h[d];b+=jsonToXML(j,k);}}else{if(h instanceof Object){b+=jsonToXML(j,h);}else{f=f+" "+j+"="+'"'+h+'"';}}}e="<"+g+f+">"+b+"</"+g+">";
return e;};convertJSONToXML=function(e,d){var b="<?xml version='1.0' encoding='UTF-8'?>";var c=b+jsonToXML(e,d);return c;};a.VideoAds.PlayerData=PlayerData;},"1.0.0",{});YUI.add("VideoAdPlugin",function(a){a.namespace("VideoAds");VideoAdPlugin=function(b){Version="7.0.0.2353";PROPERTY_ID_KEY="ad-biz:propertyid";this.configObj=b;_CONSTANTS=a.com.yahoo.ads.common.Constants;this._playerContext=null;this.adPosition=0;this.vidPosition=0;this.playerTimeout=3;this.isCurrAdLinear=false;this.adReadyQueue=[];this.rendererType=_CONSTANTS.FLASH;this.adsStatus=new a.com.yahoo.ads.common.AdsStatus();this.adExp=false;this.adExpInterrupted=false;var y=null;var m=null;var t=null;var u=null;var h=null;var l=null;var q=null;var j=null;var o=null;var v=null;var s={};var c=[];var x=null;var k=false;var p=false;var g=null;var d=null;var n=false;var e=1;var w={x:0,y:0,width:"320px",height:"240px",bitrate:400,volume:0.7};this.handleSubscriptions=function(){var A=this.configObj.on;var z=this.configObj.context;try{for(var B in A){this.on(B,A[B],z);}}catch(C){}};this.RenderManager=function(){if(typeof y==="undefined"||y===null){if(this.configObj.rendererType==_CONSTANTS.HTML){y=new a.com.yahoo.ads.renderer.RenderManager(this.EventBus());}else{if(this.configObj.rendererType==_CONSTANTS.FLASH){y=new a.com.yahoo.ads.flash.FlashRenderManager(this.EventBus());}else{var z={};z.message=_CONSTANTS.UNKNOWN_RENDERER_EVENT;this.notifyPluginError(z);}}}return y;};this.StreamAdManager=function(){if((typeof u==="undefined"||u===null)&&this.configObj.streamAd){u=new a.com.yahoo.ads.StreamAdManager(this,this.configObj);}return u;};this.RuleCache=function(){if(typeof h==="undefined"||h===null){h=new a.com.yahoo.ads.cache.RuleCache();a.ruleCache=h;}return h;};this.CacheManager=function(){if(typeof t==="undefined"||t===null){t=new a.com.yahoo.ads.cache.CacheManager(this.EventBus(),this.rendererType,_CONSTANTS.AD_PREFETCH_TIME);t.on(_CONSTANTS.AD_ASSET_PREFTECH,this.onAdAssetPrefetch,this);t.on(_CONSTANTS.AD_CACHE_REFRESH,this.onAdCacheRefresh,this);a.cacheManager=t;}return t;};this.MonitorBeaconer=function(){if(typeof v==="undefined"||v===null){v=new a.com.yahoo.ads.plugin.MonitorBeaconer(this.EventBus());v.on(MonitoringBeaconEvent.EVENT_NAME,this.onProfilerMetricEvent,this);a.monitorBeaconer=v;}return v;};this.AllocationManager=function(){if(typeof m==="undefined"||m===null){var z=(this.playerTimeout-_CONSTANTS.AD_FB_RENDER_TIME);m=new a.com.yahoo.ads.communicator.AllocationManager(this.EventBus(),this.CacheManager(),z);m.on(this.AllocationManager().getManagedConfigLoadedEvent(),this.onManagedConfigUpdated,this);m.on(m.getComponentLoadedEvent(),this.componentInitComplete,this);m.on(m.getLoadErrorEvent(),this.onInitError,this);m.on(m.getPropertyIdReadyEvent(),this.propertyIdReady,this);m.on(m.getFallbackCommunicatorLoadedEvent(),this.handleFallback,this);a.allocManager=m;}return m;};this.AdEngine=function(){if(typeof q==="undefined"||q===null){q=new a.com.yahoo.ads.engine.AdEngine();q.init();q.addTimer(this.VideoTimeline());q.on(q.getAdEngineReadyEvent(),this.onAdEngineReady,this);q.on(q.getAdEngineAdEvent(),this.onEngineAction,this);q.on(q.getAdEngineErrorEvent(),this.onEngineError,this);a.adEngine=q;}return q;};this.ParseJSON=function(){if(typeof l==="undefined"||l===null){l=new a.com.yahoo.ads.man.ParseJSON();l.init();a.parseJSON=l;}return l;};this.EventBus=function(){if(typeof j==="undefined"||j===null){if(this.StreamAdManager()){j=this.StreamAdManager();}else{j=new a.com.yahoo.ads.plugin.EventBusSwitch();}j.setSink(this);a.eventBus=j;}return j;};this.VideoTimeline=function(){if(typeof o==="undefined"||o===null){o=new a.com.yahoo.ads.plugin.YEPVideoTimeline();o.on("complete",this.onContentVideoComplete,this);a.videoTimeline=o;}return o;};this.onConfigUpdate=function(z){this.AllocationManager().updateAllocation(z.getAllocation());this.AllocationManager().updateContext(this._playerContext);this.AdEngine().updateRules(z.getRules());};this.updateVolume=function(z){e=z;if(!this.RenderManager()){return;}this.RenderManager().setVolume(e);};this.updateClientInfo=function(z){if(typeof z!==_CONSTANTS.UNDEFINED&&z!==null){w=z;}this.updateVolume(w.volume);this.resize(w.x,w.y,this.ConvertCssPxToInt(w.width),this.ConvertCssPxToInt(w.height),w.bitrate);};this.resize=function(A,D,C,z,B){if(!this.RenderManager()){return;}this.RenderManager().resizeAd(A,D,C,z,B);};this.onClipChange=function(D){this.vidPosition=0;var B=this.CacheManager().RuleCache.getRule(D.getClipId());if(B&&B.playerData){this._playerContext=B.playerData;this.onConfigUpdate(B.parsedRules);}else{this.CacheManager().updateCache([D]);this._playerContext=D;if(!this._playerContext.getAdData()){var C={};C.message=_CONSTANTS.NO_ADDATA_EVENT;this.notifyPluginError(C);return;}this.ParseJSON().parseItems(D.getAdData().adRules.result);this.onConfigUpdate(this.ParseJSON());}if(typeof this.cookie==="undefined"||this.cookie===null){this.cookie=new a.com.yahoo.ads.common.Cookie("yvap",this._playerContext.getMASAcctId());}var z={};z.clipId=this._playerContext.getClipId();this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_CLIPCHANGE,z));if(this.cookie&&this.cookie.cookieEnabled()){this.cookie.setCookieParam(_CONSTANTS.COOKIE_CLIP_COUNT,parseInt(this.cookie.getCookieParam(_CONSTANTS.COOKIE_CLIP_COUNT),10)+1);this.cookie.setCookieParam(_CONSTANTS.COOKIE_REC_CLIP_COUNT,parseInt(this.cookie.getCookieParam(_CONSTANTS.COOKIE_REC_CLIP_COUNT),10)+1);this.AdEngine().setClipData(this.cookie,this._playerContext.getClipDuration());}var A={};A.type="adEvent";A.action={};A.action.type=_CONSTANTS.NOTIFICATION_CLIP_CHANGE;A.action.obj={};A.action.obj.assetId=this._playerContext.getClipId();this.AdEngine().onAdEvent(A);};this.processEngineReadyQueue=function(){if(x){while(x.length>0){var B=x.shift();var A=B.method;var z=B.args;if(z&&z.length>0){A.apply(this,z);}else{A.call();}}}};this.onAdEngineReady=function(A,z){this.AdEngine().setActiveGroupId((this._playerContext.MASRulesetId=="-1")?"none":this._playerContext.MASRulesetId);
this.AdEngine().runEngine();this.processEngineReadyQueue();this.componentInitComplete();};this.onEngineAction=function(z){if(this.AllocationManager().ready()||z.getEventId()=="no-op"){this.processEngineAction(z);}else{this.queueEngineAction(z);}};this.onEngineError=function(A,z){this.notifyPluginError(A);};this.componentInitComplete=function(){if(this.isComponentInitComplete()){this.notifyPluginReady();this.processEngineActionQueue();}};this.onInitError=function(A,z){this.notifyPluginError(A);};this.propertyIdReady=function(){this._playerContext.addCustomParameter(PROPERTY_ID_KEY,this.AllocationManager().getPropertyId());};this.engineAdEvent=function(z){this.AdEngine().onAdEvent(z);};this.queueEngineAction=function(z){c.push(z);};this.processEngineActionQueue=function(){while(c.length!==0){this.processEngineAction(c.shift());}};this.processEngineAction=function(A){var z=A.getEventId();var B=A.getAction();if(B&&B.mType==_CONSTANTS.TRIGGER_PLAYLIST_GATEWAY){g=B;return;}B.retryCount=0;this.fireAdOpportunity(A);switch(z){case"InsertAd":if(k){return;}this.cancelAllAds();this.playVideoAd(B);break;case"no-op":if(n){this.triggerPreroll();}else{this.renderNoOp();}break;case"ShowOverlay":if(k){k=false;}if(this.rendererType!==null&&this.rendererType===_CONSTANTS.FLASH){this.playVideoAd(B);}break;case"HideOverlay":this.dismissOverlay(B);break;default:break;}};this.cancelAllAds=function(){if(!this.RenderManager()){return;}this.RenderManager().cancelAds();};this.renderNoOp=function(){if(!this.RenderManager()){return;}this.RenderManager().renderAd(null,this.cloneClientInfo(w),e,s,s[d]);};this.playVideoAd=function(A){var z=this.AllocationManager().pickCommunicator(A);if(!z){this.renderNoOp();return;}A.initialCommunicatorId=z.getNetworkId();z.detach(MonitoringBeaconEvent.EVENT_NAME,this.MonitorBeaconer().handleAction,this.MonitorBeaconer());z.on(MonitoringBeaconEvent.EVENT_NAME,this.MonitorBeaconer().handleAction,this.MonitorBeaconer());z.getAd(A);this.adsStatus.add(MonitoringBeaconEvent.EVENT_ADCALL,true);this.adsStatus.addAll(this.adsStatus.getStatusMonitoringData(this.MonitorBeaconer().getMonitoringData()));};this.handleFallback=function(B){var z=B.communicator;var A=B.adSpec;z.getAd(A);};this.isComponentInitComplete=function(){return this.AllocationManager().ready()&&this.AdEngine().ready();};this.triggerBumper=function(){n=true;if(g){this.playVideoAd(g);return;}var z={};z.type="adEvent";z.action={};z.action.type=_CONSTANTS.TRIGGER_CLIP_GATEWAY;z.action.obj={};this.AdEngine().onAdEvent(z);};this.triggerPreroll=function(){var z={};z.type="adEvent";z.action={};z.action.type=_CONSTANTS.TRIGGER_CLIP_PREROLL;z.action.obj={};n=false;this.AdEngine().onAdEvent(z);};this.triggerPostroll=function(){if(k){k=false;}var z={};z.type="adEvent";z.action={};z.action.type="postroll";z.action.obj=null;this.AdEngine().onAdEvent(z);};this.cloneClientInfo=function(A){var z={};z.x=A.x;z.y=A.y;z.width=this.ConvertCssPxToInt(A.width);z.height=this.ConvertCssPxToInt(A.height);z.bitrate=A.bitrate;return z;};this.ConvertCssPxToInt=function(C){var z="0123456789.";var A=0;for(var B=0;B<C.length;B++){if(z.indexOf(C.charAt(B))==-1){if(B>0){return parseInt(C.substring(0,B),10);}}}return parseInt(A,10);};this.beginVideoExperience=function(){if(k){k=false;}if(this.isComponentInitComplete()){this.triggerBumper();}};this.registerAdSlot=function(D,C,B,A){if(A){d=D;}var z={};z.slot=C;z.width=C.style.width;z.height=C.style.height;z.id=D;if(!B){B=document.getElementsByTagName("video")[0];}z.videoSlot=B;s[D]=z;};this.updateTimeline=function(z){this.VideoTimeline().setTotalDuration(z.duration);this.VideoTimeline().setPlayheadPosition(z.position);};this.notifyPlayer=function(z,A){if(z===_CONSTANTS.EVENT_NOAD){this.adExp=false;}this.fire(z,A);};this.notifyPluginReady=function(){if(!p){p=true;this.notifyPlayer(_CONSTANTS.EVENT_PLUGIN_READY);}};this.notifyVideoAdStart=function(z){if(!z){z={};}this.notifyPlayer(_CONSTANTS.EVENT_VIDEO_AD_START,z);this.adPosition=0;this.isCurrAdLinear=z.linear;if(z.blocked){if(this.isCurrAdLinear&&this.cookie&&this.cookie.cookieEnabled()){this.cookie.setCookieParam(_CONSTANTS.COOKIE_AD_COUNT,parseInt(this.cookie.getCookieParam(_CONSTANTS.COOKIE_AD_COUNT),10)+1);this.cookie.setCookieParam(_CONSTANTS.COOKIE_REC_VIDEO_LENGTH,0);this.cookie.setCookieParam(_CONSTANTS.COOKIE_REC_CLIP_COUNT,0);}}this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADSTART,null));this.CacheManager().refreshCache();};this.notifyAdPlayback=function(z){this.notifyPlayer(_CONSTANTS.EVENT_AD_START_MEDIA_PLAYBACK,z);};this.notifyAdMediaFirstByte=function(A){var z=A.mediaUrl||"";this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADDELIVERED,{"mediaUrl":z}));this.notifyPlayer(_CONSTANTS.EVENT_AD_MEDIA_FIRST_BYTE,A);};this.notifyVideoAdEnd=function(){if(n){if(g){g=null;this.triggerBumper();}else{this.triggerPreroll();}}else{if(this.adExpInterrupted){this.notifyPlayer(_CONSTANTS.EVENT_VIDEO_AD_INTERRUPTED);this.adExpInterrupted=false;}else{this.notifyPlayer(_CONSTANTS.EVENT_VIDEO_AD_END);this.adExp=false;}}};this.notifyNoAd=function(z){if(k||typeof z==="undefined"||z===null){return;}z.retryCount+=1;if(this.AllocationManager().isFallback(z)&&this.AllocationManager().pickFallbackCommunicator(z)){}else{if(z.getType()===_CONSTANTS.TRIGGER_CLIP_POSTROLL||z.getType()===_CONSTANTS.TRIGGER_CLIP_PREROLL||z.getType()===_CONSTANTS.TRIGGER_CLIP_GATEWAY||z.getType()===_CONSTANTS.TRIGGER_PLAYLIST_GATEWAY||z.getSubType()===_CONSTANTS.TRIGGER_CLIP_GATEWAY||z.getSubType()===_CONSTANTS.TRIGGER_CLIP_PREROLL||z.getSubType()===_CONSTANTS.TRIGGER_CLIP_POSTROLL){if(n){if(g){g=null;this.triggerBumper();}else{this.triggerPreroll();}}else{this.notifyPlayer(_CONSTANTS.EVENT_NOAD);this.adsStatus.add(MonitoringBeaconEvent.EVENT_NOAD,true);}}}};this.notifyNullAd=function(z){this.notifyPlayer(_CONSTANTS.EVENT_NOAD);};this.notifyOverlayStart=function(){this.notifyPlayer(_CONSTANTS.EVENT_OVERLAY_START);};this.notifyOverlayEnd=function(){this.notifyPlayer(_CONSTANTS.EVENT_OVERLAY_END);
};this.notifyAdProgress=function(B){if(this.isCurrAdLinear){var A=parseInt(B.position,10);var z=A-this.adPosition;this.adPosition=A;if(this.cookie&&this.cookie.cookieEnabled()){this.cookie.setCookieParam(_CONSTANTS.COOKIE_AD_LENGTH,parseInt(this.cookie.getCookieParam(_CONSTANTS.COOKIE_AD_LENGTH),10)+z);}}this.notifyPlayer(_CONSTANTS.EVENT_AD_PROGRESS,B);};this.notifyPluginError=function(z){this.notifyPlayer(_CONSTANTS.EVENT_PLUGIN_ERROR,z);this.adsStatus.add(_CONSTANTS.EVENT_PLUGIN_ERROR+": "+z.type,z.message);};this.notifyAdStartError=function(z){this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_AD_START_ERROR,z));this.notifyPlayer(_CONSTANTS.EVENT_NOAD);};this.notifyAdDeliveryError=function(z){this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_AD_DELIVERY_ERROR,z));this.notifyPlayer(_CONSTANTS.EVENT_NOAD);};this.notifyMetricsEvent=function(A){var z=A.data;if(typeof z!=="undefined"&&z!==null){if(typeof z.eventId!=="undefined"&&z.eventId!==null&&z.eventId.toLowerCase().indexOf("vpaid")>-1){this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(z.eventId,null));}}};this.notifyAdMetricsEvent=function(A){var z=this.AllocationManager().pickCommunicator();z.onAdEvent(A);};this.notifyAdReady=function(z){if(k||!this.RenderManager()){return;}if(!this.RenderManager().getRenderer()){this.adReadyQueue.push(z);}else{this.onClientInfoChanged(w);this.RenderManager().renderAd(z,this.cloneClientInfo(w),e);}};this.fireAdOpportunity=function(B){var D={};D.rulesetId=q.getActiveGroupId();D.playContext=this._playerContext.getPlaylistId();var C=B.getAction();var A=C.getType();if(A==_CONSTANTS.TRIGGER_CLIP_GATEWAY){D.oppPosition="BMPR";}else{if(A==_CONSTANTS.TRIGGER_CLIP_PREROLL||A==_CONSTANTS.TRIGGER_CLIP_POSTROLL){D.oppPosition="VID";}else{D.oppPosition="";}}var z=B.getEventId();if(z=="InsertAd"){D.taken=true;D.type=C.getSubType();D.networkName=this.AllocationManager().pickCommunicator(C).getNetworkName();}else{if(z=="no-op"){D.taken=false;D.type=A;}}D.action=C;D.eventId=z;this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADOPPORTUNITY,D));this.adsStatus.add(MonitoringBeaconEvent.EVENT_ADOPPORTUNITY,true);};this.setAdExperience=function(){if(!this.adExp){this.adExp=true;this.adExpInterrupted=false;}else{this.adExpInterrupted=true;}};this.timeout=function(){var A,z=null;this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_PLAYER_TIMEOUT));this.AllocationManager().notifyTimeout();A=this.RenderManager()?this.RenderManager()._ad:null;if(_CONSTANTS.COUNTTOSUPPLY_ON&&A){z=new a.com.yahoo.ads.event.AdMetricsEvent(_CONSTANTS.IMPRESSION,_CONSTANTS.REDIRECT_NOAD,A.getUrl(),{"type":_CONSTANTS.REDIRECT_NOAD},A.getJson());A.onAdEvent(z);}k=true;this.cancelAllAds();this.notifyPlayer(_CONSTANTS.EVENT_PLUGIN_TIMEOUT);};this.onMonitoringAction=function(z){this.MonitorBeaconer().handleAction(z);};this.onProfilerMetricEvent=function(z){var A=z.getBeaconData();this.fire(MonitoringBeaconEvent.EVENT_METRIC,A);};this.onAdAssetPrefetch=function(z){this.RenderManager().addVPAIDAdToCache(z,this.cloneClientInfo(w),e);};this.onAdCacheRefresh=function(z){this.RenderManager().removeVPAIDAdFromCache(z);};this.setPlayerData=function(z){this.CacheManager().updateCache(z);};if(this.configObj.on){this.handleSubscriptions();}if(this.configObj.rendererType){this.rendererType=this.configObj.rendererType;}if(this.configObj.timeout){this.playerTimeout=this.configObj.timeout;}if(this.configObj.playerData){this.updatePlayerData(this.configObj.playerData);}if(this.configObj.clientInfo){this.updateClientInfo(this.configObj.clientInfo);}if(this.configObj.playerContainer){var r={};r.playerContainer=this.configObj.playerContainer;this.updateRenderer(r);}if(!this.StreamAdManager()){var f=0;var i=this.configObj.playerData;if(typeof i!=="undefined"&&i!==null){if(i instanceof Array){if(i.length>0){f=i[0].getMASAcctId();}}else{f=i.getMASAcctId();}}this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_PLUGIN_INIT,{account_id:f,version:Version}));}this.notifyPluginReady();};a.augment(VideoAdPlugin,a.EventTarget);VideoAdPlugin.prototype._postRollSwitch=true;VideoAdPlugin.prototype.beginAdExperience=function(c){this.setAdExperience();this.cancelAllAds();this.adsStatus.reset();if(typeof c!=="undefined"&&c!==null&&c instanceof a.VideoAds.PlayerData){this.onClipChange(c);this.beginVideoExperience();}else{var b={};b.message=_CONSTANTS.INVALID_PLAYER_DATA;this.notifyPluginError(b);}};VideoAdPlugin.prototype.detachAll=function(){var c=this.configObj.on;var b=this.configObj.context;try{for(var d in c){this.detach(d,c[d],b);}}catch(f){}};VideoAdPlugin.prototype.onContentVideoComplete=function(){this.setAdExperience();var b={};b.clipId=this._playerContext.getClipId();if(!a.com.yahoo.ads.utils.Utils.isIPhoneSupported()&&this._postRollSwitch){this.notifyPlayer(_CONSTANTS.EVENT_NOAD);return;}this.MonitorBeaconer().handleAction(new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_CLIPCHANGE,b));this.triggerPostroll();};VideoAdPlugin.prototype.onContentVideoPaused=function(){};VideoAdPlugin.prototype.onContentVideoPlaying=function(){};VideoAdPlugin.prototype.onContentVideoProgress=function(c){this.updateTimeline(c);if(this.cookie&&this.cookie.cookieEnabled()){var b=parseInt(c.position,10);if(b>0){var d=b-this.vidPosition;this.vidPosition=b;this.cookie.setCookieParam(_CONSTANTS.COOKIE_VIDEO_LENGTH,parseInt(this.cookie.getCookieParam(_CONSTANTS.COOKIE_VIDEO_LENGTH),10)+d);this.cookie.setCookieParam(_CONSTANTS.COOKIE_REC_VIDEO_LENGTH,parseInt(this.cookie.getCookieParam(_CONSTANTS.COOKIE_REC_VIDEO_LENGTH),10)+d);}}};VideoAdPlugin.prototype.onVolumeChange=function(b){this.updateVolume(b);};VideoAdPlugin.prototype.onClientInfoChanged=function(b){this.updateClientInfo(b);};VideoAdPlugin.prototype.updatePlayerData=function(c){if(c instanceof Array){this.setPlayerData(c);}else{var b=[];b.push(c);
this.setPlayerData(b);}};VideoAdPlugin.prototype.fireStandaloneAdOpportunity=function(){if(this.StreamAdManager()){this.StreamAdManager().beginAd();}};VideoAdPlugin.prototype.updateRenderer=function(c){if(c.playerContainer){if(!this.RenderManager()){return;}if(!this.RenderManager().getRenderer()){this.RenderManager().setRenderer(c.playerContainer);var b=this.adReadyQueue.pop();if(b){this.notifyAdReady(b);}}else{this.RenderManager().setRenderer(c.playerContainer);}}if(c.adContainer){}};VideoAdPlugin.prototype.destroy=function(){var b={};this.fire(_CONSTANTS.EVENT_PLUGIN_DESTROY,b);};VideoAdPlugin.prototype.timeout=function(){this.timeout();};a.VideoAds.VideoAdPlugin=VideoAdPlugin;},"1.0.0",{requires:["Timer","AllocationManager","ScopeLogger","EventBusSwitch","Constants","AbstractCommunicator","Loader","NetworkModule","RuleGroup","ParseJSON","AllocationManager","AdRenderer","NullRenderer","RenderManager","ActionRule","AdEngine","Cookie","ActionEventResolver","TriggerEventBasis","TimerEventBasis","RuleRuntime","EngineActionEvent","AdEvents","AdCache","BeaconEventData","AdPluginMetricsEvent","YahooParser","MonitorBeaconer","AdRequest","Ad","CacheManager","AdComponentSettings","VASTParser","FlashRenderManager","node","swf","event","event-custom","RuleCache","YEPVideoTimeline","SessionTimer","PlayerData","AdsStatus","StreamAdManager"]});YUI.add("AdCache",function(b){b.namespace("com.yahoo.ads.cache");var a=b.com.yahoo.ads.common.Constants;AdCache=function(){this.map={};this.size=0;this.hasExpired=function(i){var d,j,c,f,g=true;try{d=i.timestamp;j=new Date().getTime();c=(j-d)/1000;f=c/60;g=f>=a.AD_CACHE_EXPTIME;}catch(h){}return g;};this.deleteOldest=function(){var g,d,c,e,h=null;for(var f in this.map){if(!this.map.hasOwnProperty(f)){continue;}g=this.map[f];if(!g||g.length<=0){continue;}if(!h){h=f;}else{d=g[0];c=this.map[h];if(c&&c.length>0){e=c[0];if(d.timeStamp<e.timeStamp){h=f;}}}}c=h!==null?this.map[h]:null;if(c&&c.length>0){c.splice(0,1);this.size--;}};this.processVPAID=function(c){if(c&&c.ad.getType()===b.com.yahoo.ads.communicator.Ad.TYPE.VPAID){c.ad.setVpaidId(parseInt(Math.random()*100000000,10).toString());this.fire(a.AD_ASSET_PREFTECH,c.ad);}};};AdCache.prototype.getAd=function(d){var g,f=null,e=this.map[d];if(!e){e=[];}for(var c=0;c<e.length;c++){g=e[c];if(typeof g!=="undefined"&&g!==null&&!this.hasExpired(g)){e.splice(c,1);f=g.ad;this.size--;break;}}return f;};AdCache.prototype.addAd=function(c,e,g,h){var d=this.map[c],f={};if(this.isAdPresent(c,h)){return;}if(typeof d==="undefined"||d===null){d=[];this.map[c]=d;}if(this.size>=a.AD_CACHE_LIMIT){this.deleteOldest();}f.timestamp=new Date().getTime();f.ad=e;f.ad.setAsCached(true);f.clipId=g;f.tId=h;d.push(f);this.size++;this.processVPAID(f);};AdCache.prototype.updateAd=function(d,f,h,j){var g,e=this.map[d];if(!e){return;}for(var c=0;c<e.length;c++){g=e[c];if(typeof g!=="undefined"&&g!==null&&g.tId===j){g.timestamp=new Date().getTime();g.ad=f;this.processVPAID(g);}}};AdCache.prototype.reset=function(){this.map={};};AdCache.prototype.getExpiredAds=function(){var e,g,f=[];for(var d in this.map){e=this.map[d];for(var c=0;c<e.length;c++){g=e[c];if(typeof g!=="undefined"&&g!==null&&this.hasExpired(g)){e.splice(c,1);f.push({id:g.clipId,ad:g.ad.getJson()});this.size--;}}}return f;};AdCache.prototype.isAdPresent=function(d,g){var f,e=this.map[d];if(!e){return false;}for(var c=0;c<e.length;c++){f=e[c];if(typeof f!=="undefined"&&f!==null&&f.tId===g){return true;}}return false;};b.augment(AdCache,b.EventTarget);b.com.yahoo.ads.cache.AdCache=AdCache;},"1.0.0",{requires:["node"]});YUI.add("CacheManager",function(a){a.namespace("com.yahoo.ads.cache");CacheManager=function(b,e,f){var d=a.com.yahoo.ads.common.Constants;var c=b;this.rendererType=e;this.AdCache=new a.com.yahoo.ads.cache.AdCache();this.RuleCache=new a.com.yahoo.ads.cache.RuleCache();this.communicator={};this.timeout=f;this.fetcher=window.YMedia&&window.YMedia.playerManager?window.YMedia.playerManager.getPlaylistObject():null;this.onAdAssetPrefetch=function(g){this.fire(d.AD_ASSET_PREFTECH,g);};this.processKey=function(h){var i={},g=h.split("$");if(g!==null&&g.length>0){i.key=g[0];i.tId=g[1];}return i;};this.processAd=function(z,g,y,h,j){var o,n,m,p,w,s,u,k,r,q=false,x=null,l=null,t=null;if(typeof z==="undefined"||z===null){return;}o=this.processKey(z);if(this.AdCache.isAdPresent(o.key,o.tId)){return;}n=new a.com.yahoo.ads.communicator.AbstractCommunicator(c,this,d.AD_PREFETCH_TIME);m=h.getAllocation();p=m.getNetworkModules();w=m.getSettings();s=z.split("_")[0];for(var v in p){if(p.hasOwnProperty(v)){l=p[v];if(l.getName().indexOf(s)===0){q=true;x=l;break;}}}if(q===true&&x!==null){t=new a.com.yahoo.ads.man.AdComponentSettings();t.init(w,x.getId(),null);n.setNetworkModule(x);n.setNetworkSettings(t);}n.init(y);n.key=o.key;n.tId=o.tId;n.clipId=j;n.on(d.AD_PREFETCH_EVENT,function(A){try{u=A.adObject.getCommunicator().key;k=A.adObject.getCommunicator().clipId;r=A.adObject.getCommunicator().tId;if(A.update){this.AdCache.updateAd(u,A.adObject,k,r);}else{this.AdCache.addAd(u,A.adObject,k,r);}}catch(i){}},this);n.prefetchAd(g);};this.update=function(n){var l,k,q,o,r,g,m,h;for(var j=0;j<n.length;j++){l=n[j];q=l.getAdData();if(typeof q!=="undefined"&&q!==null){r=q.adRules.result;g=l.getClipId();m=this.RuleCache.getRule(g);if(m){h=m.parsedRules;}else{h=new a.com.yahoo.ads.man.ParseJSON();h.parseItems(r);k={};k.playerData=l;k.parsedRules=h;this.RuleCache.addRule(g,k);}o=r.ads;for(var p in o){if(o.hasOwnProperty(p)){this.processAd(p,o[p],l,h,g);}}}}};this.AdCache.on(d.AD_ASSET_PREFTECH,this.onAdAssetPrefetch,this);};CacheManager.prototype.updateCache=function(b){if(typeof b==="undefined"||b===null){return;}this.update(b);this.refreshCache();};CacheManager.prototype.refreshCache=function(){var e,c,f,b=this,d=this.AdCache.getExpiredAds();if(typeof d==="undefined"||d===null||d.length===0){return;}this.fire(_CONSTANTS.AD_CACHE_REFRESH,d);if(typeof this.fetcher!=="undefined"&&this.fetcher!==null){this.fetcher.fetchMetaData(d,{success:function(h){c=[];
f=null;for(var g=0;g<h.length;g++){try{e=h[g];f=new a.VideoAds.PlayerData();f.setClipId(e.get("id"));f.setClipDuration(e.get("duration"));f.setMASAcctId("");f.setPlaylistId("");f.setAdData(e.get("adData"));f.addCustomParameter("ad-biz:spaceID",e.get("metrics").pspid);f.addCustomParameter("ad-biz:licenseID",e.get("licenseId"));f.setIsLive(e.get("isLive"));c.push(f);}catch(j){}}b.update(c);},failure:function(g){}});}};a.augment(CacheManager,a.EventTarget);a.com.yahoo.ads.cache.CacheManager=CacheManager;},"1.0.0",{requires:["node"]});YUI.add("RuleCache",function(a){a.namespace("com.yahoo.ads.cache");RuleCache=function(){this.rules={};};RuleCache.prototype.addRule=function(c,b){this.rules[c]=b;};RuleCache.prototype.getRule=function(b){return this.rules[b];};RuleCache.prototype.reset=function(){this.rules={};};a.com.yahoo.ads.cache.RuleCache=RuleCache;},"1.0.0",{});YUI.add("AdCacheStatistics",function(b){b.namespace("com.yahoo.ads.common");function a(){var d=0,e=0,f=0,c=0;return{addVast:function(){d+=1;},addNonVast:function(){e+=1;},addRedirect:function(){f+=1;},addVpaid:function(){c+=1;},toString:function(){var g=d+e+f;return"Total Ads: "+g+", VAST Ads: "+d+" NonVAST Ads: "+e+" Redirects: "+f+" VPAID ads: "+c;}};}b.com.yahoo.ads.common.AdCacheStatistics=a;},"1.0.0",{});YUI.add("AdsStatus",function(b){b.namespace("com.yahoo.ads.common");function a(){a.AD_OPPORTUNITY_TAKEN="Ad Opportunity Taken";a.AD_CALL_LATENCY="Ad Call Latency / ms";a.IS_CACHE_HIT="isCacheHit";a.IS_FALLBACK="isFallback";a.IS_3PAS="is3PAS";a.THREE_PAS_DOMAIN="3PAS domain";a.THREE_PAS="3PAS";a.HOSTED="hosted";a.HIT="hit";a.MISS="miss";a.AD_CALL_RESPONSE_CODE="Ad Call Response Code";a.AD_CALL_RESPONSE_TYPE="Ad Call Response Type";a.AD="AD";var k={},i=b.com.yahoo.ads.common.Constants,g=b.com.yahoo.ads.common.HtmlTable,c=b.com.yahoo.ads.communicator.Ad,e=b.com.yahoo.ads.plugin.MonitoringBeaconEvent,m=b.com.yahoo.ads.plugin.MonitorBeaconer,l=b.com.yahoo.ads.plugin.YWACode;k[e.EVENT_ADCALL]=false;k[e.EVENT_ADOPPORTUNITY]=false;function n(r){var q,s,p;q=r.match(/^(?:http[s]?:\/\/)?([^:\/\s]+)/i);q=q&&q[1]||"";s=q.match(/([^\.]+\.[^\.]+)$/);p=s&&s[1]||i.NOT_AVAILABLE;return p;}function o(p){if(b.Lang.isObject(p)){var q=p.AdCache;if(b.Lang.isObject(q)){return q.map||{};}}return{};}function h(p){if(b.Lang.isObject(p)){var q=p.RuleCache;if(b.Lang.isObject(q)){return q.rules||{};}}return{};}function f(p,q){if(p._redirectURL!==""){q.addRedirect();}else{if(p._isVAST===true){q.addVast();}else{q.addNonVast();}}if(p._type==="vpaid"){q.addVpaid();}}function d(q){var p=0;b.each(q,function(){p+=1;});return p;}function j(t,p){var v=0,s=0,q={},u=o(p),w=h(p),r={};b.each(u,function(x,y){v+=x.length;s+=1;b.each(x,function(C){var A=false,z=y.split("_")[0],B=q[z];if(!b.Lang.isObject(B)){B=new b.com.yahoo.ads.common.AdCacheStatistics();A=true;}f(C.ad,B);if(A){q[z]=B;}});});r["Current clip count"]=b.Lang.isValue(t)?t:i.NOT_AVAILABLE;r["Total Cached Ads"]=v;r["Total Keys"]=s;r["Total Clips"]=d(w);b.each(q,function(y,x){r["AdsCache Network: "+x]=y.toString();});return r;}return{getStatusMonitoringData:function(s){var q=s[l.AD_OPP_TAKEN]===m.YVAP_AD_OPPORTUNITY_TAKEN,p=s[l.REDIRECT_HOP],t=q&&b.Lang.isValue(p)&&p>0,r={};r[a.AD_CALL_RESPONSE_CODE]=s[l.AD_RESPONSE_CODE]||i.NONBREAKING_SPACE;r[a.AD_CALL_RESPONSE_TYPE]=s[l.AD_RESPONSE_TYPE]||i.NONBREAKING_SPACE;r[a.AD_CALL_LATENCY]=s[l.AD_CALL_LATENCY]||i.NONBREAKING_SPACE;r[a.AD_OPPORTUNITY_TAKEN]=q;r[a.IS_CACHE_HIT]=s[l.AD_CACHE_HIT]===l.CACHEHIT.TRUE?a.HIT:a.MISS;r[a.IS_FALLBACK]=s[l.AD_FALLBACK]===l.FALLBACK.TRUE;r[a.IS_3PAS]=t;if(t){r[a.THREE_PAS_DOMAIN]=n(s[l.AD_REDIRECT]);}return r;},toTable:function(){var p=window._cacheManager,r=o(p),v=h(p),t,u,q,s;r.toTableRows=function(){var y="",x=0,w=this;b.each(w,function(A,z){b.each(A,function(D){var C=D.ad,B=C.redirectUrlList&&C.redirectUrlList[0]||"";y+="<tr><td>"+x+"</td><td>"+z+"</td><td>"+D.tId+"</td><td>"+D.clipId+"</td><td>"+D.timestamp+"</td><td>"+(C.getType()===c.TYPE.NOAD?c.TYPE.NOAD:a.AD)+"</td><td>"+(B?a.THREE_PAS:a.HOSTED)+"</td><td>"+(B?n(B):i.NONBREAKING_SPACE)+"</td></tr>";x+=1;});});return y;};v.toTableRows=function(){var y="",x=0,w=this;b.each(w,function(A,z){if(z!=="toTableRows"){y+="<tr><td>"+x+"</td><td>"+z+"</td></tr>";x+=1;}});return y;};t=new g(k,"Clip Status",[]);u=new g(j(window._clipCount,p),"AdCache Stats",[]);q=new g(r,"AdCache Status",["#","key","txnId","clipId","timestamp","Ad/NoAd","3PAS/hosted","3PAS Domain"]);s=new g(v,"RuleCache ClipIds",[]);return t.toString()+"<br>"+u.toString()+"<br>"+q.toString()+"<br>"+s.toString();},add:function(p,q){k[p]=q;},addAll:function(q){var p=this;b.each(q,function(s,r){p.add(r,s);});},remove:function(p){delete k[p];},reset:function(){k={};k[e.EVENT_ADCALL]=false;k[e.EVENT_ADOPPORTUNITY]=false;}};}b.com.yahoo.ads.common.AdsStatus=a;},"1.0.0",{requires:["ScopeLogger","CacheManager","MonitoringBeaconEvent","AdCacheStatistics","HtmlTable","Ad","MonitorBeaconer","YWACode"]});YUI.add("Constants",function(a){a.namespace("com.yahoo.ads.common");prefix="";Constants={};Constants.FLASH_PLUGIN_URL="http://d.yimg.com/ks/plugin/AdPlugin.swf";Constants.EVENT_PLUGIN_ERROR="AdPluginError";Constants.EVENT_PLUGIN_LOADED="PluginLoaded";Constants.EVENT_PLUGIN_READY="PluginReady";Constants.EVENT_PLUGIN_DESTROY="AdPluginDestroy";Constants.EVENT_PLUGIN_TIMEOUT="AdPluginTimeout";Constants.EVENT_AD_PLAYBACK_NONE="AdPlaybackNone";Constants.EVENT_AD_PLAYBACK_START="AdPlaybackStart";Constants.EVENT_AD_PLAYBACK_STOP="AdPlaybackStop";Constants.EVENT_VIDEO_AD_START="VideoAdStart";Constants.EVENT_AD_START_MEDIA_PLAYBACK="AdStartMediaPlayback";Constants.EVENT_AD_MEDIA_FIRST_BYTE="AdStartMediaFirstByte";Constants.EVENT_VIDEO_AD_DISPLAY="VideoAdDisplay";Constants.EVENT_VIDEO_AD_END="VideoAdEnd";Constants.EVENT_VIDEO_AD_INTERRUPTED="VideoAdInterrupted";Constants.EVENT_RICH_AD_START="RichAdStart";Constants.EVENT_RICH_AD_END="RichAdEnd";Constants.EVENT_OVERLAY_START="OverlayStart";Constants.EVENT_OVERLAY_END="OverlayEnd";Constants.EVENT_EXPERIENCE_COMPLETE="ExperienceComplete";
Constants.EVENT_PREPARE_VIDEO="PrepareVideo";Constants.EVENT_AD_PROGRESS="blockingAdProgress";Constants.EVENT_NOAD="PluginNoAd";Constants.EVENT_PROFILER="AdPluginProfiler";Constants.EVENT_METRIC="metricsEvent";Constants.AD_START_ERROR="AD_START_ERROR";Constants.AD_DELIVERY_ERROR="AD_DELIVERY_ERROR";Constants.MANAGED_CONFIG_LOADED_EVENT="MANAGED_CONFIG_LOADED_EVENT";Constants.COMPONENT_LOADED_EVENT="COMPONENT_LOADED_EVENT";Constants.PROPERTY_ID_READY_EVENT="PROPERTY_ID_READY_EVENT";Constants.LOADED_FALLBACK_COMMUNICATOR="LOADED_FALLBACK_COMMUNICATOR";Constants.LOAD_ERROR_EVENT="errorLoading";Constants.AD_ENGINE_READY_EVENT="AD_ENGINE_READY_EVENT";Constants.AD_ENGINE_ERROR_EVENT="AD_ENGINE_ERROR_EVENT";Constants.AD_ENGINE_AD_EVENT="AD_ENGINE_AD_EVENT";Constants.NO_RENDERER_EVENT="NO_RENDERER_EVENT";Constants.NO_ADDATA_EVENT="NO_ADDATA_EVENT";Constants.UNKNOWN_RENDERER_EVENT="UNKNOWN_RENDERER_EVENT";Constants.PLAYER_READY_EVENT="PLAYER_READY_EVENT";Constants.CATEGORY_CHANGE_EVENT="CATEGORY_CHANGE_EVENT";Constants.CLIP_CHANGE_EVENT="CLIP_CHANGE_EVENT";Constants.HTML="html";Constants.FLASH="flash";Constants.ALLOCATION="Allocation";Constants.RULEGROUP="RuleGroup";Constants.LICENSOR_TYPE_ID="licensorTypeId";Constants.SHARED_OBJECTS_NOT_ALLOWED="SharedObjectsNotAllowed";Constants.MME="MME";Constants.AD_READY_EVENT="AdReady";Constants.NOAD_EVENT="NoAd";Constants.NULL_AD_EVENT="NullAd";Constants.ADCALL_ERROR_EVENT="AdCallError";Constants.AD_REDIRECT_EVENT="AdRedirect";Constants.AD_REQUEST_EVENT="AdRequest";Constants.AD_PREFETCH_EVENT="AdPrefetch";Constants.AD_ASSET_PREFTECH="AdAssetPrefetch";Constants.AD_CACHE_REFRESH="AdCacheRefresh";Constants.INVALID_PLAYER_DATA="INVALID_PLAYER_DATA";Constants.TRIGGER_PLAYER_GATEWAY="playerGateway";Constants.TRIGGER_PLAYLIST_GATEWAY="playlistGateway";Constants.TRIGGER_CLIP_GATEWAY="clipGateway";Constants.TRIGGER_CLIP_PREROLL="preroll";Constants.TRIGGER_CLIP_POSTROLL="postroll";Constants.NOTIFICATION_CLIP_CHANGE="clipChange";Constants.EVENT_SKIN_PLAYER="skinPlayer";Constants.EVENT_UNLOCK_PLAYINST="unlockPlaylist";Constants.EVENT_SCALE_VIDEO="scaleVideo";Constants.EVENT_AD_PROGRESS="blockingAdProgress";Constants.EVENT_AD_METRICS="adMetricsEvent";Constants.AD_EVENT="adEvent";Constants.EVENT_CONTENT_COMPLETE="ContentVideoComplete";Constants.ControlTweenEvent="ControlTweenEvent";Constants.ClientInfoChangedEvent="ClientInfoChanged";Constants.RenderCompleteEvent="AD_COMPLETE";Constants.VolumeChangedEvent="volumechanged";Constants.linearTemplateUrl="http://d.yimg.com/ks/templates/clickable_bumper_renderer.js";Constants.linearTemplateInitFn="getVPAIDAd";Constants.AD_CACHE_LIMIT=50;Constants.AD_CACHE_EXPTIME=20;Constants.AD_PREFETCH_TIME=2.9;Constants.AD_FB_RENDER_TIME=0.15;Constants.COOKIE_AD_COUNT="ac";Constants.COOKIE_CLIP_COUNT="cc";Constants.COOKIE_VIDEO_LENGTH="vl";Constants.COOKIE_REC_VIDEO_LENGTH="rvl";Constants.COOKIE_REC_CLIP_COUNT="rcc";Constants.COOKIE_AD_LENGTH="al";Constants.UNDEFINED="undefined";Constants.IMPRESSION="impression";Constants.BITRATE="bitrate";Constants.REDIRECT_NOAD="redirectNoAd";Constants.NOT_AVAILABLE="N/A";Constants.NONBREAKING_SPACE="&nbsp;";Constants.ADXML_ENABLE_SKIP_AD=2;Constants.ADXML_DISABLE_SKIP_AD=1;Constants.AD_ENABLE_SKIP=1;Constants.AD_DISABLE_SKIP=0;Constants.VMAP_BREAK_START_EVENT="vmap_breakstart";Constants.CDATA_SECTION_NODE=4;Constants.TEXT_NODE=3;Constants.AD_START_ERROR_CODES={FLASH_SECURITY_ERROR:"FLASH_SECURITY_ERROR",FLASH_IO_ERROR:"FLASH_IO_ERROR",FLASH_ASYNC_ERROR:"FLASH_ASYNC_ERROR",FLASH_GENERIC_ERROR:"FLASH_GENERIC_ERROR",FLASH_VPAID_ERROR:"FLASH_VPAID_ERROR",INCOMPATIBLE_MEDIA:"INCOMPATIBLE_MEDIA"};Constants.SSL_NOT_SUPPORTED="SSL_NOT_SUPPORTED";Constants.LOCATION_PROTOCOL={"HTTP":"http:","HTTPS":"https:"};Constants.SSL_ON=true;Constants.COUNTTOSUPPLY_ON=true;Constants.TECHNOTARGET_ON=false;Constants.TYPEOF={"NUMBER":"number","STRING":"string","UNDEFINED":"undefined","OBJECT":"object","BOOLEAN":"boolean","FUNCTION":"function","XML":"xml"};Constants.BOOKINGID="bookingId";Constants.CREATIVEID="creativeId";a.com.yahoo.ads.common.Constants=Constants;},"1.0.0",{requires:["node"]});YUI.add("Cookie",function(a){a.namespace("com.yahoo.ads.common");Cookie=function(c,d){var b=a.com.yahoo.ads.common.Constants;this._cookieEnabled=!!(navigator.cookieEnabled);this._cookieData=null;this._name=c;this._acc=d;this.readCookie=function(){var e="yvap"+"=";var g=document.cookie.split(";");for(var k=0;k<g.length;k++){var l=g[k];while(l.charAt(0)===" "){l=l.substring(1,l.length);}if(l.indexOf(e)===0){var f=l.substring(0,l.length);var n=f.split("@");this._cookieData=[];for(var h=0;h<n.length;h++){var o=n[h];var m=o.split("=");this._cookieData[m[0]]=m[1];}}}};this.getCookie=function(){var e="";for(var f in this._cookieData){e=e+"@"+f+"="+this._cookieData[f];}return e;};this.writeCookie=function(){var f=document.domain;var h="";var g=this._acc;if(f.indexOf(".yahoo.com")!==-1){h=f.substring(f.indexOf(".yahoo.com"));}else{if(f.indexOf(".yahoo.net")!==-1){h=f.substring(f.indexOf(".yahoo.net"));}}var e=this.getCookie();if(h){document.cookie="yvap"+"="+g+e+";domain="+h+";path=/;";}else{document.cookie="yvap"+"="+g+e+";";}};if(this._cookieEnabled){this.readCookie();if(!this._cookieData){this._cookieData=[];this.setCookieParam(b.COOKIE_CLIP_COUNT,0);this.setCookieParam(b.COOKIE_AD_LENGTH,0);this.setCookieParam(b.COOKIE_VIDEO_LENGTH,0);this.setCookieParam(b.COOKIE_REC_VIDEO_LENGTH,0);this.setCookieParam(b.COOKIE_AD_COUNT,0);}}};Cookie.prototype.cookieEnabled=function(){return this._cookieEnabled;};Cookie.prototype.cookieData=function(){return this._cookieData;};Cookie.prototype.setCookieParam=function(b,c){this._cookieData[b]=c;this.writeCookie();};Cookie.prototype.getCookieParam=function(b){this.readCookie();if(!this._cookieData[b]){this.setCookieParam(b,0);}return this._cookieData[b];};a.com.yahoo.ads.common.Cookie=Cookie;},"1.0.0",{requires:["node"]});YUI.add("HtmlTable",function(b){b.namespace("com.yahoo.ads.common");function a(d,h,e){var k=d||{},p=k.toTableRows?k.toTableRows():i(),o=h||"",g=e||[],c=g.length,l=b.com.yahoo.ads.common.Constants,n=j();
function i(){var q="";b.each(k,function(s,r){q+="<tr><td>"+r+"</td><td>"+s+"</td></tr>";});return q;}function j(){if(!p){return 0;}var q=p.match(/^.*?<\/tr>/)[0]||"";return q.match(/<td\b/g).length;}function f(){var q,v=n?Math.min(c,n):c,u=Math.max(n-c,0),t,s,r;if(!v){return"";}r="<tr>";for(q=0;q<v;q++){t=g[q]||l.NONBREAKING_SPACE;r+="<td>"+t+"</td>";}if(u){s="<td>"+l.NONBREAKING_SPACE+"</td>";for(q=0;q<u;q++){r+=s;}}return r+"</tr>";}function m(){return o?"<tr><td colspan='"+Math.max(1,n,g.length)+"'>"+o+"</td></tr>":"";}return{toString:function(){return"<table border='1'>"+m()+f()+p+"</table>";}};}b.com.yahoo.ads.common.HtmlTable=a;},"1.0.0",{});YUI.add("AbstractCommunicator",function(a){a.namespace("com.yahoo.ads.communicator");AbstractCommunicator=function(B,k,G){var F=a.com.yahoo.ads.common.Constants,z=a.com.yahoo.ads.communicator.Ad,C=a.com.yahoo.ads.communicator.parser.ParserManager,c=a.com.yahoo.ads.logging.ScopeLogger,i=a.com.yahoo.ads.communicator.parser.VASTParser;var u="http://";var r=".adserver.yahoo.com/a";var o="http://ads.yimg.com/a/a/vdo/a/1x1.gif";var I="FreeWheel 393";var g=null;var e=null;var t=null;var p=0;var E=0;var L=k;var s=null;var x=null;var f=G;var A=null;var M=0;var D=[];var n=null;var d=null;var m=null;var h=B;var y=this;var b=false;var j=false;var w=0;var K=new a.com.yahoo.ads.communicator.adrequests.AdRequestManager();var l=function(O,P){if(typeof t===F.UNDEFINED||t===null){t=new a.com.yahoo.ads.plugin.Timer(O*1000,0);}else{t.reset();}t.addFunctionOnComplete(y,y._handleTimeOut,P);t.start();};var H=function(P){n=P;var O=null;if(typeof L!==F.UNDEFINED&&L!==null){O=L.rendererType;}K.setRendererType(O);x=new a.com.yahoo.ads.communicator.UrlLoader(O);s=new a.com.yahoo.ads.communicator.parser.ParserManager();};var J=function(P){var O,Q;if(P){O=P.split("://");if(O.length>=2){Q=O[1].split("/");if(Q.length>=1){return"3PAS-"+Q[0];}}}return null;};this.notifyTimeout=function(){if(typeof x!==F.UNDEFINED&&x!==null){x.abort();}};this._getAd=function(V,S){D=[];M=0;var ab=d.getName(),O=d.getId(),T=null,Z="VID",R=true,ac,Q=S.mActionParams,X,P,U;if(Q&&Q.id){var Y=Q.id.split(",");Z=AbstractCommunicator.MME_AT_POS_MAP[Y[0]];}if(ab.indexOf(AbstractCommunicator.NAME.PREVIEW)===0){if(window.getAdXmlForPreview){var W=window.getAdXmlForPreview();T=new a.com.yahoo.ads.communicator.AdResponse(W,null,S);this._processAd(T,S);return;}}ac=k.AdCache.getAd(ab+"_"+n.getCustomParameter("ad-biz:spaceID")+"_"+Z);if(ac){this._processAdFromCache(ac,S);}else{X=(Z==="VIDO")?AbstractCommunicator.DEFAULT_AD_REQUEST_TIMEOUT:f;l(X,[S]);if(ab.indexOf(AbstractCommunicator.NAME.MME)===0){P={"adComponentSettings":m,"context":n,"adSpec":S};try{U=K.getRequest(P,d.getName());}catch(aa){this.onAdCallError(S);return;}N(U,S);}else{if(ab.indexOf(AbstractCommunicator.NAME.FWV)===0){T=new a.com.yahoo.ads.communicator.AdResponse(AbstractCommunicator.FW_TEMPLATE,null,S);}else{if(ab.indexOf(AbstractCommunicator.NAME.CBS)===0){T=new a.com.yahoo.ads.communicator.AdResponse(AbstractCommunicator.CBS_TEMPLATE,null,S);}else{if(ab===I){T=new a.com.yahoo.ads.communicator.AdResponse(AbstractCommunicator.FW_TEMPLATE,null,S);}else{throw {message:"[CommunicatorError] Unknown ad network "+ab,loc:"class: AbstractCommunicator, method: getAd"};}}}if(T){M=-1;this._processAd(T,S);}else{throw {message:"[CommunicatorError] Response template not available.",loc:"class: AbstractCommunicator, method: getAd"};}}}};var N=function(P,T){var S=function(){x.detach(a.com.yahoo.ads.communicator.UrlLoader.AD_RESPONSE,O,y);x.detach(a.com.yahoo.ads.communicator.UrlLoader.ADCALL_ERROR,Q,y);x.detach(a.com.yahoo.ads.communicator.UrlLoader.ADCALL_TIMEOUT,R,y);};var O=function(U){S();y.adReadyCallback(U,T);};var Q=function(){S();if(t){t.reset();}y._notifyParseError(T);};var R=function(){S();y._handleTimeout(T);};x.on(a.com.yahoo.ads.communicator.UrlLoader.AD_RESPONSE,O,y);x.on(a.com.yahoo.ads.communicator.UrlLoader.ADCALL_ERROR,Q,y);x.on(a.com.yahoo.ads.communicator.UrlLoader.ADCALL_TIMEOUT,R,y);x.query(P);};this._setRedirect=function(R,S){var O,Q,P;if(S){S.getRedirect().count=M;}P={"adComponentSettings":m,"context":n,"serverUrl":R,"adSpec":S};try{O=K.getRequest(P,d.getName());}catch(T){this.onAdCallError(S,T.code);return;}Q=J(O);if(typeof Q!=="undefined"&&Q!==null){if(M===1&&typeof S!=="undefined"&&S!==null){S.getRedirect().targetTag=Q;}D.push(Q);}else{this.onAdCallError(S);return;}N(O,S);};this._processAdFromCache=function(O,P){if(typeof O.redirectCount!==F.UNDEFINED&&O.redirectCount!==null&&typeof O.redirectUrlList!==F.UNDEFINED&&O.redirectUrlList!==null&&O.redirectUrlList.length>0){P.getRedirect().count=O.redirectCount;P.getRedirect().targetTag=O.redirectUrlList[0];}O.setSpec(P);if(O.getType()===z.TYPE.REDIRECT){this._processCachedRedirect(O,P);}else{if(O.getType()===z.TYPE.NOAD){this._notifyNoAd(P,O);}else{this._notifyAdReady(O);}}};this._processCachedRedirect=function(O,P){g=O;this.handleAd(P);};this._processAd=function(V,U){var P=0,R,S,O,Q,T;T=V.getPayload();if(T.indexOf("adResults")>-1){T=T.replace(/&(?!amp;)/g,"&amp;");}S=m.getSetting("allowSkipAds");j=(typeof S!==F.UNDEFINED&&S!==null&&S==="true");if(j){if(m.getSetting("skipCountdownDuration")){w=parseInt(m.getSetting("skipCountdownDuration"),10);}}Q=function(){y._notifyParseError(U);};s.detach(C.PARSE_ERROR,Q,this);s.on(C.PARSE_ERROR,Q,this);R=s.parseAd(T,g);if(R instanceof Array){for(P=0;P<R.length;P++){O=R[P];O.setSkip_directive_publisher(j);O.setSkip_countdown_timer(w);O.setSpec(U);O.setCommunicator(this);}g=R[0];if(typeof g!==F.UNDEFINED&&g!==null){e=g.getFallbackAd();if(e===F.UNDEFINED||e===null){e=new z();e.setType(z.TYPE.NOAD);}this.handleAd(U);}else{Q();return;}}else{Q();}};var v=function(O,R){var P=/\{(\w)+\}/g,Q=R.getParams(),T;var S=function(W){var Z=/(\w)+/g,U=W.match(Z),Y=U[0],aa="",X;if(Y.toLowerCase()==="beap_client_event"){for(var V in Q){aa+=V+"$"+Q[V]+",";}aa=aa.substring(0,aa.length-1);return aa;}else{if(Y.toLowerCase()==="1x1pixel"){return o;}}X=Q[Y];return(typeof X!==F.UNDEFINED&&X!==null)?X:W;
};T=O.replace(P,S);return T;};var q=function(O){var P=F.VMAP_BREAK_START_EVENT;if(O&&O.isVmap()){y.sendBeacon(O.getBeacons(P)[0].url);O.getBeacons(P).splice(0,1);}};this.on(F.AD_READY_EVENT,h.notifyAdReady,h);this.on(F.NOAD_EVENT,h.notifyNoAd,h);this.on(F.AD_REDIRECT_EVENT,h.notifyRedirect,h);this.on(F.NULL_AD_EVENT,h.notifyNullAd,h);this.on(F.AD_REQUEST_EVENT,h.notifyAdRequest,h);this.setNetworkModule=function(O){d=O;};this.setNetworkSettings=function(O){m=O;};this.setEventBus=function(O){h=O;};this._getFinalAdServerUrl=function(P){var O=P.getSetting("adBaseUrl");if(O&&O.length>0){return u+O+r;}else{return u+"us"+r;}};this.prefetchAd=function(P){l(f,[]);g=null;var O=function(Q){y.adReadyCallback(Q,null);};if(P){O(new a.com.yahoo.ads.communicator.AdResponse(P,null));}};this.getRevShareString=function(){var O=null,P=n.getCustomParameter("ad-biz:licenseID");if(typeof P!==F.UNDEFINED&&P!==null&&P.length>0){O="lmsid:"+P;}return O;};this.getPosition=function(P,O){if(O&&O>1){return"n"+O+P;}return P;};this._notifyAdReady=function(O){O.setCommunicator(this);this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_VALID_AD,{ad:O}));this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADCALLEND,this.getNetworkName()));this.fire(F.AD_READY_EVENT,O);q(O);};this._notifyNullAd=function(O){if(E===1){this.fire(F.NULL_AD_EVENT,O);}};this._notifyParseError=function(O){this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ERR_PARSING,O));this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADCALLEND,this.getNetworkName()));this._notifyNullAd(O);};this._notifyNoAd=function(S,R){var P,Q,O;if(R){P=R.redirectCount;if(P>0){O=R.getBeacons(i.REDIRECT_NOAD);}else{O=R.getBeacons(i.IMPRESSION);}if(typeof O!==F.UNDEFINED&&O!==null){for(Q=0;Q<O.length;Q++){var T=O[Q].url;this.sendBeacon(T);}}}if(S&&R){this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_NOAD,{adSpec:S,ad:R}));this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADCALLEND,this.getNetworkName()));S.communicatorId=this.getNetworkId();q(R);}if(E===1){this.fire(F.NOAD_EVENT,S);}};this.sendBeacon=function(O){if(O){var P=document.createElement("img");P.src=O;P.style.display="none";}};this.onAdCallError=function(P,O){if(t){t.reset();}if(typeof O!==F.UNDEFINED&&O!==null){if(O===F.SSL_NOT_SUPPORTED){this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ERR_SSL_NOT_SUPPORTED,P));}}else{this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ERR_ADCALL,P));}this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADCALLEND,this.getNetworkName()));this.fire(F.NOAD_EVENT,P);};this.adReadyCallback=function(O,P){spec=P;if(!O.getPayload()||(O.getPayload().length===0)){this._notifyNoAd(P);}else{this._processAd(O,P);}};this.onAdEvent=function(P,V){var W,R,S,Q="",Y=P.getAd(),O=P.getEventId(),U=P.getEventData(),X=(O.toLowerCase()==="impression")?U:O;if(X==="bitrate"&&b){return;}if(typeof Y.beacons!==F.UNDEFINED&&Y.beacons!==null){W=Y.beacons[X];if(typeof W!==F.UNDEFINED&&W!==null){Q="";for(var T=0;T<W.length;T++){R=W[T];S=R.url;Q=v(S,P);this.sendBeacon(Q);}}}if(X==="bitrate"){b=true;}};this.getAd=function(P){var Q={};E=1;Q.spec=P;Q.retryCount=P.retryCount;Q.communicatorName=this.getNetworkName();this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADCALL,P));g=null;try{this._getAd(m,P);}catch(O){this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ERR_ADCALL,P));this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADCALLEND,this.getNetworkName()));this._notifyNullAd(P);}};this.init=function(O){H(O);};this.getNetworkName=function(){return(typeof d!==F.UNDEFINED&&d!==null)?d.getName():"";};this.getNetworkId=function(){return(typeof d!==F.UNDEFINED&&d!==null)?d.getId():"";};this.handleAd=function(O){var P=g.getRedirectURL();g.setSpec(O);g.setCommunicator(this);if(g.getType()===z.TYPE.REDIRECT){M+=1;if(!E){this._notifyPrefetch();}g=g.clone();this._setRedirect(P,O);}else{if(t){t.reset();}p=1;g.redirectUrlList=D;g.redirectCount=M;if(E){if(g.getType()===z.TYPE.NOAD){this._notifyNoAd(O,g);}else{this._notifyAdReady(g);}}else{this._notifyPrefetch();}}};this._notifyPrefetch=function(){var O=g.isCached();this.fire(F.AD_PREFETCH_EVENT,{adObject:g,update:O});};this._handleTimeOut=function(O){x.abort();t.reset();if(e&&(p===0)){g=e;g.setAsCached(true);g.setAsFallback(true);g.setSpec(O);g.setCommunicator(this);if(E){if(g.getType()===z.TYPE.NOAD){this._notifyNoAd(O,g);}else{this._notifyAdReady(g);}}else{this._notifyPrefetch();}}else{this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ERR_AD_TIMEOUT,O));this.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_ADCALLEND,this.getNetworkName()));this._notifyNullAd(O);}};};AbstractCommunicator.canService=function(l,d,j){var b,h,c,g,f=d["NETWORK."+j+".adTypes"],e;if(typeof f===_CONSTANTS.UNDEFINED||f===null){return true;}c=f.split(",");g={};for(e=0;e<c.length;e++){h=c[e].toLowerCase();g[h]=true;}var k=l.mActionParams.id.split(",");for(e=0;e<k.length;e++){b=k[e].toLowerCase();if(g[b]){return true;}}return false;};AbstractCommunicator.MME_AT_VERSION_MAP={overlayC2V:"v4",overlayC2S:"v5",clickable:"v1%3Bv7%3Bv8",interactive:"v2",asq:"v6"};AbstractCommunicator.MME_AT_POS_MAP={bumper:"BMPR",overlayC2V:"VIDO",overlayC2S:"VIDO",clickable:"VID",interactive:"VID",asq:"VID"};AbstractCommunicator.PARAM={SPACEID:"ad-biz:spaceID",PROPERTYID:"ad-biz:propertyid",PARTNERID:"partnerId"};AbstractCommunicator.NAME={MME:"MME",FWV:"Freewheel_VAST",CBS:"CBS",PREVIEW:"PREVIEW"};AbstractCommunicator.XML_TYPE={VAST:"VAST",VMAP:"vmap:VMAP",YAHOO:"adResults"};
AbstractCommunicator.MME_AT_CONSTANT="flv_as3%3Bxml_ver_2.0%3Bxml_ver_2.0vast";AbstractCommunicator.FW_TEMPLATE='<VAST version="2.0"> <Ad id="840902551"> <Wrapper> <AdSystem>Yahoo</AdSystem> <VASTAdTagURI> <![CDATA[${vid_ap_fw_server_url}?nw=${vid_ap_fwnw}&metr=${vid_ap_fwmetr}&resp=${vid_ap_fwresp}&sfid=${vid_ap_fwsfid}&ssnw=${vid_ap_fwssnw}&pvrn=${vid_ap_fwpvrn}&caid=${vid_cl_fwcaid}&csid=${vid_cl_fwcsid}&crtp=${vid_ap_fwcrtp}&vprn=${vid_ap_fwvprn}&afid=${vid_ap_fwafid}&flag=${vid_ap_fwflag}&asnw=${vid_ap_fwasnw}&prof=${vid_ap_fwprof};;tpcl=${vid_ap_fwtpcl}&slau=${vid_ap_fwslau}&slid=${vid_ap_fwslid}&ptgt=${vid_ap_fwptgt}&tpos=${vid_ap_fwtpos}&flag=${vid_ap_fwflag1};slid=${vid_ap_fwslid2}&ptgt=${vid_ap_fwptgt2}&tpos=${vid_ap_fwtpos2}&flag=${vid_ap_fwflag2}&w=${vid_ap_fww2}&h=${vid_ap_fwh2};${vid_ap_addlslot}]]> </VASTAdTagURI> </Wrapper> </Ad> </VAST>';AbstractCommunicator.CBS_TEMPLATE='<VAST version="2.0"> <Ad id="840902551"> <Wrapper> <AdSystem>Yahoo</AdSystem> <VASTAdTagURI> <![CDATA[${vid_cl_cbsurl}]]> </VASTAdTagURI> </Wrapper> </Ad> </VAST>';AbstractCommunicator.MME_TEMPLATE="?pn=${vid_ap_mmepn}&f=${vid_cl_mmef}&p=${vid_cl_mmep}&c=${vid_cl_mmec}&l=${vid_cl_mmel}&at=${vid_cl_mmeat}vf=1&rs=${vid_cl_mmers}&rand=${vid_cl_mmerand}";AbstractCommunicator.DEFAULT_AD_REQUEST_TIMEOUT=2.9;a.augment(AbstractCommunicator,a.EventTarget);a.com.yahoo.ads.communicator.AbstractCommunicator=AbstractCommunicator;},"1.0.0",{requires:["node","UrlLoader","AdResponse","VASTParser","Constants","datatype-xml-parse","AdRequestManager","ParserManager"]});YUI.add("Ad",function(b){b.namespace("com.yahoo.ads.communicator");var a=function(){var r=b.com.yahoo.ads.common.Constants,s=b.com.yahoo.ads.communicator.AbstractCommunicator,g=b.com.yahoo.ads.utils.Utils;var q={},k={},m="",v="",p=null,x=null,w=null,j="",l=false,u=r.AD_DISABLE_SKIP,y=5,f=false,n=false,c={},h=null,e=null,t=null,o=null,d="",i="";this.setAdId=function(z){if(typeof z==="string"){e=z;}};this.getAdId=function(){return e;};this.setVpaidId=function(z){if(typeof z==="string"){t=z;}};this.setCreativeAndBookingId=function(z){if(z){i=z[r.BOOKINGID]||"";d=z[r.CREATIVEID]||"";}};this.getVpaidId=function(){return t;};this.getCreativeId=function(){return d;};this.getBookingId=function(){return i;};this.setFallbackAd=function(z){if(z instanceof a){o=z;}};this.getFallbackAd=function(){return o;};this.isVast=function(){return h===a.FORMAT.VAST;};this.isVmap=function(){return h===a.FORMAT.VMAP;};this.isYahoo=function(){return h===a.FORMAT.YAHOO;};this.setAsCached=function(z){if(typeof(z)==="boolean"){f=z;}};this.isCached=function(){return f;};this.setAsFallback=function(z){if(typeof(z)==="boolean"){n=z;}};this.isFallback=function(){return n;};this.getSkip_directive_publisher=function(){return l;};this.setSkip_directive_publisher=function(z){if(typeof(z)==="boolean"){l=z;u=l?u:r.AD_DISABLE_SKIP;}};this.getSkip_directive=function(){return u;};this.setSkip_directive=function(z){if(z===r.ADXML_DISABLE_SKIP_AD){u=r.AD_DISABLE_SKIP;}else{if(z===r.ADXML_ENABLE_SKIP_AD){u=r.AD_ENABLE_SKIP;}}};this.getSkip_countdown_timer=function(){return y;};this.setSkip_countdown_timer=function(z){if(!isNaN(z)&&z>0){y=z;}};this.getRedirectURL=function(){return j;};this.setRedirectURL=function(z){j=z;};this.getUrl=function(){return m;};this.setUrl=function(z){if(typeof z==="string"){m=z;}};this.getType=function(){return v;};this.setType=function(z){if(z===a.TYPE.NOAD||z===a.TYPE.OVERLAY||z===a.TYPE.REDIRECT||z===a.TYPE.VPAID){v=z;}};this.getPos=function(){return p;};this.setPos=function(z){if(z===a.POSITION.BUMPER||z===a.POSITION.CLICKABLE||z===a.POSITION.OVERLAY){p=z;}};this.getSpec=function(){return x;};this.setSpec=function(z){x=z;};this.getCommunicator=function(){return w;};this.setCommunicator=function(z){if(z instanceof s){w=z;}};this.addBeacon=function(B,A){var z=q[B];if(typeof z===r.UNDEFINED||z===null){z=[];q[B]=z;}z.push(A);if(A.url.indexOf("csc.beap.bc.yahoo.com")>0){this.setCreativeAndBookingId(g.getCreativeAndBookingId(A.url));}};this.addBeaconsFromAd=function(D){var C=null,A,z,B;if(D instanceof a){A=D.getAllBeacons();for(C in A){z=D.getBeacons(C);for(B=0;B<z.length;B++){this.addBeacon(C,z[B]);}}}};this.addMediaFile=function(A,C,B){var z=c[C];if(!z){z={};c[C]=z;}if(!z[B]){z[B]=[];}z[B].push(A);};this.getBeacons=function(A){var z=q[A];if(!z){z=[];}return z;};this.getAllBeacons=function(){return q;};this.getMediaFiles=function(z){if(c[z]){return c[z];}return null;};this.getMediaUrl=function(A,z){var B=null;if(c[A]){B=c[A];if(B[z]){return B[z];}}return null;};this.onAdEvent=function(z){if(w){w.onAdEvent(z,this);}};this.getParams=function(){return k;};this.addParam=function(z,A){k[z]=A;};this.setParams=function(z){if(typeof z==="object"){k=z;}};this.getJson=function(){var z={},A;z.url=m;z.type=v;z.skip_directive=u;z.skip_countdown_timer=y;z.skip_directive_publisher=l;z.params=k;z.beacons=q;z.vpaidId=t;if(x){A=(x.mActionParams&&x.mActionParams.placement)?x.mActionParams.placement.toUpperCase():"";z.spec={name:x.mName,basis:x.mBasis,duration:x._duration,placement:A};}else{z.spec={};}return z;};this.setFormat=function(z){if(!h&&a.FORMAT.hasOwnProperty(z)){h=z;}};this.getFormat=function(){return h;};this.clone=function(){var C,A,z,H,B,F,D,I,E,G=new b.com.yahoo.ads.communicator.Ad();G.setUrl(m);G.setType(v);G.setPos(p);G.setSpec(x);G.setCommunicator(w);G.setRedirectURL(j);G.setSkip_directive_publisher(l);G.setSkip_directive(u);G.setAsCached(f);G.setAsFallback(n);G.setFallbackAd(o);G.setFormat(h);G.setAdId(e);G.setVpaidId(t);for(z in q){C=q[z];if(typeof C!==r.UNDEFINED&&C!==null){for(B=0;B<C.length;B++){E=C[B];A={};A.id=E.id;A.type=E.type;A.url=E.url;A.tokenized=E.tokenized;G.addBeacon(A.id,A);}}}for(H in k){G.addParam(H,k[H]);}for(F in c){I=c[F];for(D in I){G.addMediaFile(I[D],F,D);}}return G;};};a.TYPE={"REDIRECT":"redirect","NOAD":"noad","VPAID":"vpaid","OVERLAY":"overlay"};a.POSITION={"BUMPER":"BMPR","CLICKABLE":"VID","OVERLAY":"VIDO"};a.FORMAT={"VAST":"VAST","YAHOO":"YAHOO","VMAP":"VMAP"};
a.MEDIA_TYPE_SUPPORT={"video/mp4":true,"video/m4v":true,"video/x-flv":true,"video/webm":true,"application/x-shockwave-flash":true};b.com.yahoo.ads.communicator.Ad=a;},"1.0.0",{requires:["node"]});YUI.add("AdRequest",function(a){a.namespace("com.yahoo.ads.communicator");AdRequest=function(i,b){var h="";var g=b||{};var c=i||"";var j={};var f=true;var e=function(l,m){var k=/\$\{(\w)+\}/g;var n=function(p){var r=/(\w)+/g;var o=p.match(r);var q=o[0];if(typeof m[q]!=="undefined"){return m[q];}else{return"";}};l=l.replace(k,n);return l;};var d=function(l){var n=/(\w)+=&/g;while(l.match(n)){l=l.replace(n,"");}var m=/(\w)+=($|;|;;)/;while(l.match(m)){l=l.replace(m,"$2");}var k=/(;|;;|&)$/;while(l.match(k)){l=l.replace(k,"");}return l;};this.setaddParameters=function(k){f=k;};this.setParameter=function(k,l){if(k&&l){j[k]=l;}};this.buildQuery=function(){h=e(c,g);return d(h);};this.addParameters=function(k,l){g[k]=l;};};a.com.yahoo.ads.communicator.AdRequest=AdRequest;},"1.0.0",{requires:["node"]});YUI.add("AdResponse",function(a){a.namespace("com.yahoo.ads.communicator");function b(h,g,d){var f=h;var e=g;var c=d;return{getPayload:function(){return f;},getRequest:function(){return e;},getSpec:function(){return c;},toString:function(){return"[AdResponse(request:"+e+")(payload: "+f+")]";}};}a.com.yahoo.ads.communicator.AdResponse=b;},"1.0.0",{requires:["node"]});YUI.add("AllocationManager",function(a){a.namespace("com.yahoo.ads.communicator");AllocationManager=function(c,b,d){_CONSTANTS=a.com.yahoo.ads.common.Constants;communicators=[];_eventBus=c;_cacheManager=b;this._allocation=null;this.communicator=null;this.timeout=d;_propertyId=null;_allocationReady=false;this._playerContext=null;this._algorithm=null;this.communicatorsReady=function(){return(typeof this.communicator!=="undefined");};};a.augment(AllocationManager,a.EventTarget);AllocationManager.prototype.updateContext=function(c){try{this.communicator.init(c);}catch(b){}};AllocationManager.prototype.getPropertyId=function(){return _propertyId;};AllocationManager.prototype.ready=function(){return _allocationReady&&this.communicatorsReady();};AllocationManager.prototype.getManagedConfigLoadedEvent=function(){return _CONSTANTS.MANAGED_CONFIG_LOADED_EVENT;};AllocationManager.prototype.getComponentLoadedEvent=function(){return _CONSTANTS.COMPONENT_LOADED_EVENT;};AllocationManager.prototype.getLoadErrorEvent=function(){return _CONSTANTS.LOAD_ERROR_EVENT;};AllocationManager.prototype.getPropertyIdReadyEvent=function(){return _CONSTANTS.PROPERTY_ID_READY_EVENT;};AllocationManager.prototype.getFallbackCommunicatorLoadedEvent=function(){return _CONSTANTS.LOADED_FALLBACK_COMMUNICATOR;};AllocationManager.prototype.pickCommunicator=function(b){if(b){var f=this._algorithm.pickCommunicator(b);this.communicator.setNetworkModule(f);var e=this._allocation;var c=e.getSettings();var d=new a.com.yahoo.ads.man.AdComponentSettings();d.init(c,f.getId(),null);this.communicator.setNetworkSettings(d);}return this.communicator;};AllocationManager.prototype.updateAllocation=function(b){this._allocation=b;this.loadCommunicators();};AllocationManager.prototype.loadCommunicator=function(d,b){if(!this.communicator){this.communicator=new a.com.yahoo.ads.communicator.AbstractCommunicator(_eventBus,_cacheManager,this.timeout);}this.communicator.setNetworkModule(d);var c=new a.com.yahoo.ads.man.AdComponentSettings();c.init(b,d.getId(),null);this.communicator.setNetworkSettings(c);_allocationReady=true;};AllocationManager.prototype.notifyTimeout=function(){this.communicator.notifyTimeout();};AllocationManager.prototype.loadCommunicators=function(){var f=this._allocation;var c=f.getSettings();var d=f.getAllocationModuleUri();if(d==="class:net.maven.plugin.allocation.PercentageAllocationManager"){this._algorithm=new a.com.yahoo.ads.communicator.allocation.PercentageAllocationAlgorithm();this._algorithm.init(null,f,c);var g=this._algorithm.selectCommunicator();this.loadCommunicator(g,c);}else{this._algorithm=null;var b=f.getNetworkModules();for(var e in b){this.loadCommunicator(b[e],c);}}if(typeof this.communicator!=="undefined"){_propertyId=c["SYSTEM.PID"];if(typeof _propertyId==="undefined"||_propertyId===null){_propertyId="";}this.fire(this.getPropertyIdReadyEvent());this.notifyComponentLoaded();}else{this.notifyComponentLoadFailed();}};AllocationManager.prototype.isFallback=function(b){return this._algorithm.isFallback(b.communicatorId,b);};AllocationManager.prototype.pickFallbackCommunicator=function(b){var f=this._algorithm.pickFallbackCommunicator(b.communicatorId,b);if(typeof f!=="undefined"&&f!==null){this.communicator.setNetworkModule(f);var e=this._allocation;var c=e.getSettings();var d=new a.com.yahoo.ads.man.AdComponentSettings();d.init(c,f.getId(),null);this.communicator.setNetworkSettings(d);this.fire(this.getFallbackCommunicatorLoadedEvent(),{communicator:this.communicator,adSpec:b});return true;}return false;};AllocationManager.prototype.notifyComponentLoaded=function(){this.fire(this.getComponentLoadedEvent());};AllocationManager.prototype.notifyComponentLoadFailed=function(){this.fire(this.getLoadErrorEvent());};a.com.yahoo.ads.communicator.AllocationManager=AllocationManager;},"1.0.0",{requires:["node","ParseJSON","ScopeLogger","PercentageAllocationAlgorithm"]});YUI.add("UrlLoader",function(a){a.namespace("com.yahoo.ads.communicator");UrlLoader=function(f){var b=a.com.yahoo.ads.common.Constants;var i=this;var d=f===b.HTML;var h=false;var e=null;var g=function(j){if(!j){return"";}var k=j.match(i.domainRegex),l=k&&k[0]||"";return l;};var c=function(j){if(!j){return false;}var k=i.whiteList[j];return typeof k!==b.UNDEFINED?k:false;};this.abort=function(){h=true;};this.query=function(m){a.CurrentCommClientInstance=this;var j=m,l,r=false,q,p;var o=this;var k=function(v,u,s){if(h===true){return;}var t=u.responseText;if(typeof t!=="undefined"&&t!==null&&t.length>0){t=t.replace(/>\s+</g,"><");o.onAdServerResponse(t,m);}else{o.onAdCallError();}};var n=function(v,u,s){var t=u.statusText;
if(t==="timeout"){if(h===true){return;}o.onAdCallTimeout();}else{o.onAdCallError();}};l=g(j);r=(l==="yahoo.com");q=c(l);p={method:"GET",xdr:{use:"native",credentials:q},on:{success:k,failure:n},sync:d};a.io.header("X-Requested-With");h=false;e=a.io(j,p);};this.onAdServerResponse=function(k,l){var j=new a.com.yahoo.ads.communicator.AdResponse(k,l);this.fire(UrlLoader.AD_RESPONSE,j);};this.onAdCallTimeout=function(){this.fire(UrlLoader.ADCALL_TIMEOUT,null);};this.onAdCallError=function(){this.fire(UrlLoader.ADCALL_ERROR,null);};};UrlLoader.prototype.whiteList={"amgdgt.com":true,"adap.tv":true,"videohub.tv":true,"doubleclick.net":true,"undertone.com":true,"jivox.com":true,"adform.net":true,"flashtalking.com":true,"telemetryverification.net":true,"fwmrm.net":true,"eyereturn.com":true,"zedo.com":true,"tubemogul.com":true,"tidaltv.com":true,"yahoo.com":true,"cbs.com":true,"innovid.com":true,"moatads.com":true};UrlLoader.prototype.domainRegex=/[\w-]+\.(?:com|net|tv)/;UrlLoader.AD_RESPONSE="AD_RESPONSE";UrlLoader.ADCALL_TIMEOUT="ADCALL_TIMEOUT";UrlLoader.ADCALL_ERROR="ADCALL_ERROR";a.augment(UrlLoader,a.EventTarget);a.com.yahoo.ads.communicator.UrlLoader=UrlLoader;},"1.0.0",{requires:["node","jsonp","ScopeLogger","AdResponse","Utils"]});YUI.add("AdRequestGeneratorFactory",function(c){c.namespace("com.yahoo.ads.communicator.adrequests");var a=c.com.yahoo.ads.common.Constants;var b=function(){};b.PREVIEW="PREVIEW";b.MME="MME";b.FREEWHEEL_VAST="FREEWHEEL_VAST";b.CBS="CBS";b.SSL_SUPPORT={"MME":true,"FREEWHEEL_VAST":false,"CBS":false};b.getRequestGenerator=function(e,g){var f,h=window.location.protocol,d="";if(e.indexOf(b.PREVIEW)===0){f=new c.com.yahoo.ads.communicator.adrequests.impl.PreviewRequestGenerator(g);}else{if(e.indexOf(b.MME)===0){d=b.MME;f=new c.com.yahoo.ads.communicator.adrequests.impl.MMERequestGenerator(g);}else{if(e.indexOf(b.FREEWHEEL_VAST)===0){d=b.FREEWHEEL_VAST;f=new c.com.yahoo.ads.communicator.adrequests.impl.FreewheelRequestGenerator(g);}else{if(e.indexOf(b.CBS)===0){d=b.CBS;f=new c.com.yahoo.ads.communicator.adrequests.impl.CBSRequestGenerator(g);}else{throw {message:"[RequestGenerationError] Unknown network name : "+e,loc:"class: AdRequestGeneratorFactory, method: getRequestGenerator"};}}}}if(a.SSL_ON&&h===a.LOCATION_PROTOCOL.HTTPS&&!b.SSL_SUPPORT[d]){throw {message:"[RequestGenerationError] SSL Support missing for : "+e,loc:"class: AdRequestGeneratorFactory, method: getRequestGenerator",code:a.SSL_NOT_SUPPORTED};}return f;};c.com.yahoo.ads.communicator.adrequests.AdRequestGeneratorFactory=b;},"1.0.0",{requires:["CBSRequestGenerator","FreewheelRequestGenerator","MMERequestGenerator","PreviewRequestGenerator","Constants"]});YUI.add("AdRequestManager",function(b){b.namespace("com.yahoo.ads.communicator.adrequests");var a=function(){var c="";this.getRequest=function(e,d){if(!e){throw {message:"[RequestGenerationError] config is undefined or null.",loc:"class: AdRequestManager, method: getRequest"};}if(!d){throw {message:"[RequestGenerationError] network name is undefined or null.",loc:"class: AdRequestManager, method: getRequest"};}var f=b.com.yahoo.ads.communicator.adrequests.AdRequestGeneratorFactory.getRequestGenerator(d,c);return f.generateRequest(e);};this.setRendererType=function(d){c=d;};};b.com.yahoo.ads.communicator.adrequests.AdRequestManager=a;},"1.0.0",{requires:["AdRequestGeneratorFactory"]});YUI.add("RequestGenerationUtils",function(c){c.namespace("com.yahoo.ads.communicator.adrequests");var a=c.com.yahoo.ads.common.Constants;var b={};b.HTTP="http://";b.HTTPS="https://";b.SSL="https:";b.ADSERVER=".adserver.yahoo.com/a";b.getFinalAdServerUrl=function(f){var e=f.getSetting("adBaseUrl");var d=(e&&e.length>0)?e:"us";return b.HTTP+d+b.ADSERVER;};b.getAdTargetingInfo=function(e){var d=c.DataType.XML.parse(e.getCustomParameter("ad-extra:adTargeting"));if(d){return d.getElementsByTagName("adData")[0];}else{throw {message:"[RequestGenerationError] missing adTargeting in configuration.",loc:"class: RequestGenerationUtils, method: getAdTargetingInfo"};}};b.expandMacro=function(e,f){var d=/\$\{(\w)+\}/g;var g=function(i){var k=/(\w)+/g;var h=i.match(k);var j=h[0];return f[j]?f[j]:"";};e=e.replace(d,g);e=b.cleanUpUrl(e);return this.updateProtocol(e);};b.cleanUpUrl=function(e){var g=/(\w)+=&/g;while(e.match(g)){e=e.replace(g,"");}var f=/(\w)+=($|;|;;)/;while(e.match(f)){e=e.replace(f,"$2");}var d=/(;|;;|&)$/;while(e.match(d)){e=e.replace(d,"");}return e;};b.getPosition=function(e,d){if(d&&d>1){return"n"+d+e;}return e;};b.updateProtocol=function(d){var e=window.location.protocol;if(a.SSL_ON&&e===b.SSL){d=d.replace(b.HTTP,b.HTTPS);}return d;};c.com.yahoo.ads.communicator.adrequests.RequestGenerationUtils=b;},"1.0.0",{requires:["datatype-xml-parse"]});YUI.add("CBSRequestGenerator",function(b){b.namespace("com.yahoo.ads.communicator.adrequests.impl");var a=function(e){var d=e;var c=b.com.yahoo.ads.communicator.adrequests.RequestGenerationUtils;this.generateRequest=function(g){var h=f(g);return c.expandMacro(g.serverUrl,h);};var f=function(l){var i={},h,g,j;try{h=c.getAdTargetingInfo(l.context);}catch(k){throw k;}if(h){g=h.getAttribute("id");j="";if(g==="ad_url"){j=h.getAttribute("value");if(j.indexOf("xml=vast")>=0){j+=";pos=1";}else{j+=";pos=1;xml=yahoo";}}else{throw {message:"[RequestGenerationError] id is not 'ad_url' in adTargeting.",loc:"class: CBSRequestGenerator, method: populateCBSMacro"};}i.vid_cl_cbsurl=j;}else{throw {message:"[RequestGenerationError] missing adData tag in adTargeting.",loc:"class: CBSRequestGenerator, method: populateCBSMacro"};}return i;};};b.com.yahoo.ads.communicator.adrequests.impl.CBSRequestGenerator=a;},"1.0.0",{requires:["RequestGenerationUtils"]});YUI.add("FreewheelRequestGenerator",function(b){b.namespace("com.yahoo.ads.communicator.adrequests.impl");var a=function(e){var d=e;var c=b.com.yahoo.ads.communicator.adrequests.RequestGenerationUtils;this.generateRequest=function(g){var h=f(g);return c.expandMacro(g.serverUrl,h);};var f=function(l){var k={},g,j,i;
try{g=c.getAdTargetingInfo(l.context);}catch(h){throw h;}if(g){j=g.getAttribute("id");i="";if(j==="TurnerVideoID"||j==="YahooPartnerVideoID"){i=g.getAttribute("value");}k.vid_cl_fwcaid=i;}else{throw {message:"[RequestGenerationError] missing adData tag in adTargeting.",loc:"class: FreewheelRequestGenerator, method: populateFWMacros"};}k.vid_ap_fw_server_url=l.adComponentSettings.getSetting("AdServerUrl");k.vid_ap_fwnw=l.adComponentSettings.getSetting("YahooNetworkId");k.vid_ap_fwmetr=l.adComponentSettings.getSetting("CapabilitySupportFlags");k.vid_ap_fwsfid=l.adComponentSettings.getSetting("SiteSectionFallbackId");k.vid_ap_fwresp=l.adComponentSettings.getSetting("ResponseType");k.vid_ap_fwssnw=l.adComponentSettings.getSetting("SiteSectionNetworkId");if(l.adComponentSettings.getSetting("OverrideSAPI")==="true"){k.vid_cl_fwcsid=l.adComponentSettings.getSetting("SiteSectionMapping");}else{k.vid_cl_fwcsid=l.context.getCustomParameter("ad-extra:adTargetingCategory");}k.vid_ap_fwcrtp=l.adComponentSettings.getSetting("CustomResponseType");k.vid_ap_fwafid=l.adComponentSettings.getSetting("VideoAssetFallbackId");k.vid_ap_fwflag=l.adComponentSettings.getSetting("ImpressionFlags");k.vid_ap_fwasnw=l.adComponentSettings.getSetting("VideoAssetNetworkId");k.vid_ap_fwprof=l.adComponentSettings.getSetting("PlayerProfile");k.vid_ap_fwtpcl=l.adComponentSettings.getSetting("SlotTimePositionClass");k.vid_ap_fwslau=l.adComponentSettings.getSetting("CustomAdUnitName");k.vid_ap_fwslid=l.adComponentSettings.getSetting("SlotCustomId");k.vid_ap_fwptgt=l.adComponentSettings.getSetting("SlotType");k.vid_ap_fwflag1=l.adComponentSettings.getSetting("SlotFlags");k.vid_ap_fwh=l.adComponentSettings.getSetting("SlotHeight");k.vid_ap_fww=l.adComponentSettings.getSetting("SlotWidth");k.vid_ap_fwtpos=l.adComponentSettings.getSetting("SlotTimePosition");k.vid_ap_fwflag2=l.adComponentSettings.getSetting("SlotFlags2");k.vid_ap_fwh2=l.adComponentSettings.getSetting("SlotHeight2");k.vid_ap_fww2=l.adComponentSettings.getSetting("SlotWidth2");k.vid_ap_fwtpcl2=l.adComponentSettings.getSetting("SlotTimePositionClass2");k.vid_ap_fwslau2=l.adComponentSettings.getSetting("CustomAdUnitName2");k.vid_ap_fwslid2=l.adComponentSettings.getSetting("SlotCustomId2");k.vid_ap_fwptgt2=l.adComponentSettings.getSetting("SlotType2");k.vid_ap_fwtpos2=l.adComponentSettings.getSetting("SlotTimePosition2");k.vid_ap_addlslot=l.adComponentSettings.getSetting("AdditionalSlotParams");k.vid_ap_fwvprn=Math.round(Math.random()*100000000).toString();k.vid_ap_fwpvrn=Math.round(Math.random()*100000000).toString();return k;};};b.com.yahoo.ads.communicator.adrequests.impl.FreewheelRequestGenerator=a;},"1.0.0",{requires:["RequestGenerationUtils"]});YUI.add("MMERequestGenerator",function(c){c.namespace("com.yahoo.ads.communicator.adrequests.impl");var a=c.com.yahoo.ads.common.Constants;var b=function(l){var n=l;var f={"overlayC2V":"v4","overlayC2S":"v5","clickable":"v1%3Bv7%3Bv8","interactive":"v2","asq":"v6"};var e={"bumper":"BMPR","overlayC2V":"VIDO","overlayC2S":"VIDO","clickable":"VID","interactive":"VID","asq":"VID"};var h="flv_as3%3Bxml_ver_2.0%3Bxml_ver_2.0vast";var i="%3Bvpaidt_none%3Bvpaidt_swf%3Bvpaidv_v1%3Bfm_flv%3Bfm_mp4%3Bfm_webm";var m="%3Bvpaidt_none%3Bfm_mp4%3Bfm_webm";var j="?pn=${vid_ap_mmepn}&f=${vid_cl_mmef}&p=${vid_cl_mmep}&c=${vid_cl_mmec}&l=${vid_cl_mmel}&at=${vid_cl_mmeat}vf=1&rs=${vid_cl_mmers}&rand=${vid_cl_mmerand}";var d=c.com.yahoo.ads.communicator.adrequests.RequestGenerationUtils;var p=1;this.generateRequest=function(r){if(r.serverUrl){r.serverUrl=d.updateProtocol(r.serverUrl);return r.serverUrl;}var s=o(r),q=d.getFinalAdServerUrl(r.adComponentSettings);return d.expandMacro(q+j,s);};var o=function(t){var r={},q,s;r.vid_ap_mmepn=t.adComponentSettings.getSetting("partnerId");r.vid_cl_mmef=t.context.getCustomParameter("ad-biz:spaceID");r.vid_cl_mmep=t.context.getCustomParameter("ad-biz:propertyid");r.vid_cl_mmec="x";r.vid_cl_mmerand=Math.round(Math.random()*10000000000000);q=t.adComponentSettings.getSetting("sendRsParam");if(q&&q==="true"){r.vid_cl_mmers=g(t.context);}s=k(t.adSpec,"POS");r.vid_cl_mmel=d.getPosition(s,p);r.vid_cl_mmeat="content%3D%22"+k(t.adSpec,"VERSION")+h;if(a.TECHNOTARGET_ON){if(n===a.HTML){r.vid_cl_mmeat+=m;}else{if(n===a.FLASH){r.vid_cl_mmeat+=i;}}}r.vid_cl_mmeat+="%22";return r;};var k=function(v,u){var t=v.mActionParams,w=t.id.split(","),q="",r,s;if(t.id){if(u==="POS"){return e[w[0]];}else{if(u==="VERSION"){q="";for(r=0;r<w.length;r++){s=w[r];if(f[s]){q=q+f[s];q=q+"%3B";}}return q;}else{throw {message:"[RequestGenerationError] Unknown action param request : "+u,loc:"class: MMERequestGenerator, method: getActionParam"};}}}else{throw {message:"[RequestGenerationError] Missing actionParams.id.",loc:"class: MMERequestGenerator, method: getActionParam"};}};var g=function(s){var q,r=s.getCustomParameter("ad-biz:licenseID");if(r){q="lmsid:"+r;}return q;};};c.com.yahoo.ads.communicator.adrequests.impl.MMERequestGenerator=b;},"1.0.0",{requires:["RequestGenerationUtils"]});YUI.add("PreviewRequestGenerator",function(b){b.namespace("com.yahoo.ads.communicator.adrequests.impl");var a=function(d){var c=d;this.generateRequest=function(e){return e.serverUrl;};};b.com.yahoo.ads.communicator.adrequests.impl.PreviewRequestGenerator=a;},"1.0.0",{requires:[]});YUI.add("PercentageAllocationAlgorithm",function(a){a.namespace("com.yahoo.ads.communicator.allocation");PercentageAllocationAlgorithm=function(){var e=null;var f=null;var d=null;var b=false;var c=null;this.init=function(l,n,m){d=n;f=[];e={};if(m["SELECTOR.1.disablePriorityFallback"]==="true"){b=true;}c=m["SELECTOR.ID"];var g=d.getNetworkModules();for(var k=0;k<g.length;k++){var j=g[k];var o=j.getId();var h=m["SELECTOR."+c+".NETWORK."+o+".priority"];if(typeof h!=="undefined"&&h!==null){f[h]=o;e[o]=parseInt(h,10);}else{}}};this.pickCommunicator=function(v){var w=null;var o=[];var s=0;var j=d.getNetworkModules();var n=d.getSettings();for(var q=0;q<j.length;q++){var h=j[q];var g=h.getId();
var r=n["SELECTOR."+c+".NETWORK."+g];if(!a.com.yahoo.ads.communicator.AbstractCommunicator.canService(v,n,g)){continue;}var l={};l.nS=s;s+=parseInt(r,10);l.nE=s;l.id=g;l.module=j[q];o.push(l);}var t=Math.random()*s;var u=null;for(var p=0;p<o.length;p++){u=o[p];if(u.nS<=t&&u.nE>=t){break;}}if(typeof u!=="undefined"&&u!==null){w=u.module;return w;}return null;};this.selectCommunicator=function(){var v=null;var o=[];var s=0;var u=null;var j=d.getNetworkModules();var n=d.getSettings();for(var q=0;q<j.length;q++){var h=j[q];var g=h.getId();var r=n["SELECTOR."+c+".NETWORK."+g];var l={};l.nS=s;s+=parseInt(r,10);l.nE=s;l.module=j[q];o.push(l);}var t=Math.random()*s;for(var p=0;p<o.length;p++){u=o[p];if(u.nS<=t&&u.nE>=t){break;}}if(typeof u!=="undefined"&&u!==null){v=u.module;}return v;};this.pickFallbackCommunicator=function(v,w){var q=e[w.initialCommunicatorId];var u=e[v];if(typeof u==="undefined"||u===null){return null;}var g=u+1;var r=false;var o=0;var k=d.getNetworkModules();while(!r&&g<d.getNetworkModules().length){if(g!==q){var t=g;for(var m in k){if(k.hasOwnProperty(m)){var p=k[m];var s=e[p.getId()];if(s===t){o=m;r=true;}}}}g++;}var h=k[o];var n=h.getId();var l=d.getSettings();if(typeof e[n]!=="undefined"&&e[n]!==null){if(a.com.yahoo.ads.communicator.AbstractCommunicator.canService(w,l,n)){return h;}}return null;};this.isFallback=function(h,g){return !(b||g===null||h===null||g.retryCount>=d.getNetworkModules().length);};};a.com.yahoo.ads.communicator.allocation.PercentageAllocationAlgorithm=PercentageAllocationAlgorithm;},"1.0.0",{requires:["ManAllocation"]});YUI.add("ParserFactory",function(b){b.namespace("com.yahoo.ads.communicator.parser");var a=function(){};a.getParser=function(c){if(c==="VAST"){return new b.com.yahoo.ads.communicator.parser.VASTParser();}else{if(c==="adResults"){return new b.com.yahoo.ads.communicator.parser.YahooParser();}else{if(c==="vmap:VMAP"){return new b.com.yahoo.ads.communicator.parser.VMAP1Parser();}}}return null;};b.com.yahoo.ads.communicator.parser.ParserFactory=a;},"1.0.0",{requires:["VMAP1Parser","YahooParser","VASTParser"]});YUI.add("ParserManager",function(c){c.namespace("com.yahoo.ads.communicator.parser");var b=c.com.yahoo.ads.common.Constants;var a=function(){this.parserFactory=null;this.parser=null;};a.prototype.parseAd=function(i,h){var g=null,f,d;if(typeof i!==b.UNDEFINED&&i!==null&&i.length>0){try{i=i.replace(/>\s+</g,"><");i=i.replace(/<\!--.*?-->/g,"");f=c.DataType.XML.parse(i);d=f.documentElement.nodeName;this.parserFactory=c.com.yahoo.ads.communicator.parser.ParserFactory;this.parser=this.parserFactory.getParser(d);if(this.parser){g=this.parser.parseAd(f.documentElement,h);}else{this.fire(a.PARSE_ERROR);}}catch(j){this.fire(a.PARSE_ERROR);}}return g;};a.PARSE_ERROR="ParseError";c.augment(a,c.EventTarget);c.com.yahoo.ads.communicator.parser.ParserManager=a;},"1.0.0",{requires:["datatype-xml-parse","Ad","ParserFactory"]});YUI.add("VASTParser",function(b){b.namespace("com.yahoo.ads.communicator.parser");var a=function(){var H=b.com.yahoo.ads.common.Constants,z=b.com.yahoo.ads.communicator.Ad,e=b.com.yahoo.ads.logging.ScopeLogger,B=b.com.yahoo.ads.utils.Utils;var G=null,q=false,r=false,o=false,l=false,L=false,f=false;var m=function(P){var N,M,O="",S,R="";try{if(typeof P!==H.UNDEFINED&&P!==null){O=P.getAttribute("apiFramework");N=O&&(O.toLowerCase()===z.TYPE.VPAID);S=P.getElementsByTagName("StaticResource");if(S.length>0){R=S[0].getAttribute("creativeType");if(R){R=R.toLowerCase();}}M=(R==="application/x-shockwave-flash");o=(R==="image/jpeg"||R==="image/png"||R==="image/gif");r=N&&M;}}catch(Q){}};var K=function(Y){var R=[],V=[],O,U,Q,P,N,X,W,T,M;if(typeof Y===H.UNDEFINED||Y===null||Y.length===0){return"";}l=true;try{U='<rss version="2.0" xmlns="http://backend.userland.com/rss2" xmlns:media="http://search.yahoo.com/mrss/">'+"<channel><item><media:group>";for(Q=0;Q<Y.length;Q++){W=Y[Q];T=W.getAttribute("type").toLowerCase();if(!z.MEDIA_TYPE_SUPPORT[T]){continue;}N=B.getTextFromNode(W);if(N.substr(0,4)!=="http"){continue;}X=W.getAttribute("bitrate")||"0";if(T==="application/x-shockwave-flash"){q=true;X="0";}if(W.getAttribute("id")==="atlas"||N.toLowerCase().indexOf("atlas")!==-1){R.push({"url":N,"type":T,"br":X});}else{V.push({"url":N,"type":T,"br":X});}}O=R.concat(V);for(P=0;P<O.length;P++){M=O[P];G.addMediaFile(M.url,M.type,M.br);if(M.type!=="video/webm"){U+='<media:content bitrate="'+M.br+'" duration="0" expression="full" fileSize="0" type="video/flv" url="'+M.url+'"/>';}}U+="<media:rating>nonadult</media:rating></media:group></item></channel></rss>";return U;}catch(S){return"";}};var k=function(S,T,P){var R,Q,M,O;if(typeof S===H.UNDEFINED||S===null||S.length===0){return;}for(var N=0;N<S.length;N++){Q=S[N];M={};M.url=B.getTextFromNode(Q);if(!T||!P){R=Q.getAttribute("event");if(typeof R===H.UNDEFINED||R===null){M.id="";M.type="";}else{R=R.toLowerCase();O=a.EVENT_TYPE[R];if(typeof O!==H.UNDEFINED&&O!==null){M.id=O.id;M.type=O.type;}else{M.id=R;M.type=a.INTERACTION;}}}else{M.id=T;M.type=P;}M.tokenized=false;if(M.id.indexOf("playback")===0){F(M,M.url);M.tokenized=true;}G.addBeacon(M.id,M);}};var s=function(P){var S,R,T,M,V,Q,W,O,N;try{if(P.childNodes&&P.childNodes.length>0){S=P.childNodes;O={"IFrameResource":function(X,Y){G.addParam("companionBannerType"+X,"IFRAME");G.addParam("companionBannerSrc"+X,B.getTextFromNode(Y));},"HTMLResource":function(X,Y){G.addParam("companionBannerType"+X,"HTML");G.addParam("companionBannerSrc"+X,B.getTextFromNode(Y));},"StaticResource":function(X,Y){G.addParam("companionBannerType"+X,"STATIC");G.addParam("companionMimeType"+X,Y.getAttribute("creativeType"));G.addParam("companionBannerSrc"+X,B.getTextFromNode(Y));},"TrackingEvents":function(Y,aa){var ab=aa.childNodes,X,Z;if(ab.length&&ab.length>0){for(X=0;X<ab.length;X++){Z=ab[X];if(Z.nodeName==="Tracking"){if(Z.getAttribute("event")==="creativeView"){G.addParam("companionImpression"+Y,B.getTextFromNode(Z));}}}}},"CompanionClickThrough":function(X,Y){G.addParam("companionClickThrough"+X,B.getTextFromNode(Y));
}};for(R=0;R<S.length;R++){T=S[R];if(T.nodeName!=="Companion"){continue;}M=null;M=parseInt(T.getAttribute("width"),10);if(isNaN(M)){continue;}G.addParam("companionWidth"+R,T.getAttribute("width"));G.addParam("companionHeight"+R,T.getAttribute("height"));try{V=T.childNodes;if(V){for(Q=0;Q<V.length;Q++){N=V[Q];W=O[N.nodeName];if(!W){}else{W.call(undefined,R,N);}}}}catch(U){}}}}catch(U){}};var h=function(P){var N,O,M,Q;if(typeof P===H.UNDEFINED||P===null){return;}for(N=0;N<P.length;N++){O=P[N];if(B.hasAttribute(O,"name")){M=O.getAttribute("name");if(M){G.addParam(M,B.getTextFromNode(O));}}else{if(B.hasAttribute(O,"id")){Q=O.getAttribute("id");if(Q==="interaction"){k([O],a.INTERACTION,a.INTERACTION);}else{if(Q==="bitrate"){k([O],a.BITRATE,a.IMPRESSION);}}}}}};var C=function(Q){if(typeof Q===H.UNDEFINED||Q===null){return;}try{var O=Q.getElementsByTagName("Extension");for(var M=0;M<O.length;M++){var N=O[M];if(typeof N===H.UNDEFINED||N===null){continue;}if(B.hasAttribute(N,"type")){switch(N.getAttribute("type")){case a.EXTENSION_SKIP_AD:j(N);break;case a.EXTENSION_CPCV:E(N);break;case a.EXTENSION_CUSTOM_TRACKING:p(N);break;default:}}}}catch(P){}};var p=function(N){var O=N.getElementsByTagName(a.EXTENSION_NOADIMPRESSION),M;for(M=0;M<O.length;M++){J(O[M]);}};var J=function(O){var N,M;if(typeof O!==H.UNDEFINED&&O!==null){M=B.getTextFromNode(O);N={};N.id=a.REDIRECT_NOAD;N.type=a.IMPRESSION;N.url=M;N.tokenized=false;G.addBeacon(N.id,N);}};var j=function(P){var M=P.childNodes;if(M.length===0){return;}for(var O=0;O<M.length;O++){var N=M[O];if(typeof N===H.UNDEFINED||N===null||N.nodeType!==1){continue;}switch(N.nodeName){case"SkipDirective":I(N);break;case"SkipBeacon":i(N);break;default:}}};var I=function(M){var N=parseInt(B.getTextFromNode(M),10);if(isNaN(N)){}else{G.setSkip_directive(N);}};var i=function(M){var N=B.getTextFromNode(M);if(G.getSkip_directive()!==H.AD_ENABLE_SKIP){return;}if(typeof N===H.UNDEFINED||N===null){return;}var O={};O.id="skip";O.type="skip";O.url=N;O.tokenized=false;G.addBeacon(O.id,O);};var E=function(P){var M=P.childNodes;if(M.length===0){return;}for(var O=0;O<M.length;O++){var R=M[O];if(R.nodeType!==1){continue;}switch(R.nodeName){case"Progress30SecBeacon":var N={};N.id="cpcv";N.type="cpcv";var Q=B.getTextFromNode(R);F(N,Q);N.tokenized=false;G.addBeacon(N.id,N);break;default:}}};var F=function(O,P){if(P.indexOf(a.BEAP_SERVER)===0){var N=P.lastIndexOf("))");if(N>=0){var M=P.substring(0,N)+a.CPCV_SUFFIX;O.url=M;}else{O.url=P;}}else{O.url=P;}};var u=function(){try{L=L&&l;f=f&&l||!L;if(f){if(q===true){return z.TYPE.VPAID;}y();return"ybt";}else{if(L){t();return"yct";}}}catch(M){}return"";};var g=function(S){var Y=S.childNodes,X="",V="",U=null,W=null,Q=null,P=null,O=null,N,R,M,Z;N={"VideoClicks":function(ab){var aa,ac,ad;ac=ab.childNodes;for(aa=0;aa<ac.length;aa++){ad=ac[aa];if(ad.nodeName==="ClickThrough"){U=B.getTextFromNode(ad);}else{if(ad.nodeName==="ClickTracking"){k([ad],a.CLICKTHROUGH,a.CLICKTHROUGH);}}}},"TrackingEvents":function(aa){k(aa.childNodes,null,null);},"Duration":function(aa){O=B.getTextFromNode(aa);W=O.split(":")[2];},"MediaFiles":function(aa){if(aa.childNodes){l=aa.childNodes.length>0;V=K(aa.childNodes);G.setType(z.TYPE.OVERLAY);}},"AdParameters":function(ab){var ad=ab.childNodes,aa,ac;if(ad.length>0){aa=ad[0].nodeType;if(aa===H.CDATA_SECTION_NODE||aa===H.TEXT_NODE){ac=B.getTextFromNode(ab);if(ac){G.addParam("params",ac);}}}Q=ab.getElementsByTagName("yahoo_video_ad_item");L=Q.length>0;f=Q.length===0;P=ab.getElementsByTagName("yahoo_video_ad_beacon");}};for(R=0;R<Y.length;R++){M=Y[R];Z=N[M.nodeName];if(!Z){}else{Z.call(undefined,M);}}X=u();if(X===z.TYPE.VPAID){G.setType(z.TYPE.VPAID);d();}else{if(X!==""){try{G.addParam(X+"_video",V);if(!isNaN(parseInt(W,10))){G.addParam(X+"_duration",W);}if(U){G.addParam(X+"_click_url",U);}if(Q){h(Q);}if(P){h(P);}}catch(T){}}}};var w=function(M){m(M);if(r===true){G.setType(z.TYPE.VPAID);c(M);}else{if(o===true){G.setType(z.TYPE.OVERLAY);v(M);}}};var A=function(Q){var M,N,R,O,P;M={"NonLinear":w,"NonLinearClickThrough":function(S){var T=B.getTextFromNode(S);G.addParam("yocts_click_url",T);},"TrackingEvents":function(S){k(S.childNodes,null,null);}};R=Q.childNodes;for(N=0;N<R.length;N++){O=R[N];P=M[O.nodeName];if(!P){}else{P.call(undefined,O);}}};var y=function(){G.addParam("ybt_video","");G.addParam("ybt_asset_type","VIDEO");G.addParam("ybt_asset_url","");G.addParam("ybt_duration","120");G.addParam("ybt_click_url","");G.setPos(z.POSITION.BUMPER);G.setUrl("http://d.yimg.com/ks/templates/BumperAd.swf");};var t=function(){G.addParam("yct_video","");G.addParam("yct_product_message","");G.addParam("yct_product_message_type","");G.addParam("yct_invitation_message","");G.addParam("yct_duration","120");G.addParam("ybt_click_url","");G.setPos(z.POSITION.BUMPER);G.setUrl("http://d.yimg.com/ks/templates/ClickableAd.swf");};var d=function(){var M=G.getMediaUrl("application/x-shockwave-flash","0");G.setUrl(M[0]);};var v=function(R){var Q,T,S=R.childNodes,M,N,O,P;G.addParam("yocts_tooltip_text","AD");G.addParam("yocts_adslug_text","AD");G.addParam("yocts_act1_asset_type","");G.addParam("yocts_act1_text","");G.addParam("yocts_act1_asset_url","");G.addParam("yocts_act2_asset_type","EXTERNAL");G.addParam("yocts_act2_title_text","");G.addParam("yocts_act2_description_text","");G.setPos("BMPR");G.setUrl("http://d.yimg.com/ks/templates/OverlayC2SAd.swf");if(S.length===0){return;}M={"AdParameters":function(U){Q=U.getElementsByTagName("yahoo_video_ad_item");h(Q);},"StaticResource":function(U){G.addParam("yocts_act2_asset_url",B.getTextFromNode(U));},"NonLinearClickThrough":function(U){T=B.getTextFromNode(U);G.addParam("yocts_click_url",T);}};for(N=0;N<S.length;N++){O=S[N];P=M[O.nodeName];if(!P){}else{P.call(undefined,O);}}};var c=function(N){var M;G.setUrl(B.getTextFromNode(N.getElementsByTagName("StaticResource")[0]));try{M=N.getElementsByTagName("AdParameters");if(M.length>0){G.addParam("params",B.getTextFromNode(M[0]));}}catch(O){}};var D=function(Q){var M,N,O,P;
M={"Linear":g,"NonLinearAds":A,"CompanionAds":s};for(N=0;N<Q.length;N++){O=Q[N];P=M[O.nodeName];if(!P){}else{P.call(undefined,O);}}};var x=function(P){var Q,N,O,R,M=false;Q=P.childNodes;if(Q&&Q.length>0){for(N=0;N<Q.length;N++){O=Q[N];if(O.nodeName==="Creative"){R=O.childNodes;if(R.length>0){M=true;D(R);}}}if(!M){G.setType(z.TYPE.NOAD);}}else{G.setType(z.TYPE.NOAD);}};var n=function(Q){var M,S,N,O,P;M={"VASTAdTagURI":function(T){G.setRedirectURL(B.getTextFromNode(T));G.setType(z.TYPE.REDIRECT);},"Impression":function(T){k([T],a.IMPRESSION,a.IMPRESSION);},"Creatives":x,"Extensions":C};try{S=Q.childNodes;if(S&&S.length>0){for(N=0;N<S.length;N++){O=S[N];P=M[O.nodeName];if(!P){}else{P.call(undefined,O);}}}}catch(R){}};this.parseAd=function(R,Z){var S=0,aa,X=[],N,M,Y,P=0,U={},W,Q,V,O,ab;if(typeof R===H.UNDEFINED||R===null||R.nodeName!=="VAST"){return X;}try{G=new z();G.setType(z.TYPE.NOAD);N=R.getElementsByTagName("Ad");O={"Wrapper":n,"InLine":n};do{aa=N[S];try{W=aa.getAttribute("id");if(typeof W!==H.UNDEFINED&&W!==null){G.setAdId(W);U[W]=G;}Q=aa.getAttribute("fallbackfor");if(typeof Q!==H.UNDEFINED&&Q!==null){V=U[Q];if(typeof V!==H.UNDEFINED&&V!==null){V.setFallbackAd(G);}}Y=aa.childNodes;if(Y.length===0){G.setType(z.TYPE.NOAD);}for(P=0;P<Y.length;P++){M=Y[P];ab=O[M.nodeName];if(!ab){}else{ab.call(undefined,M);}}}catch(T){G.setType(z.TYPE.NOAD);}finally{if(typeof Z===H.UNDEFINED||Z===null){G.setFormat(z.FORMAT.VAST);}else{G.addBeaconsFromAd(Z);G.setFormat(Z.getFormat());G.setAsCached(Z.isCached());}}X.push(G);G=new z();S++;}while(S<N.length);}catch(T){}return X;};};a.VID="VID";a.IMPRESSION="impression";a.ERROR="error";a.CLICKTHROUGH="clickthrough";a.INTERACTION="interaction";a.BITRATE="bitrate";a.INLINE="InLine";a.WRAPPER="Wrapper";a.EXTENSION_SKIP_AD="SkipAd";a.EXTENSION_CPCV="CPCV";a.EXTENSION_NOADIMPRESSION="NoAdImpression";a.EXTENSION_CUSTOM_TRACKING="CustomTracking";a.REDIRECT_NOAD="redirectNoAd";a.CPCV_SUFFIX=",ad_dur${ad_duration_value},s${skippable_value}))";a.BEAP_SERVER="http://ci.beap.ad.yieldmanager.net/reg_ci";a.EVENT_TYPE={"start":{id:"playback0",type:a.IMPRESSION},"firstquartile":{id:"playback25",type:a.IMPRESSION},"thirdquartile":{id:"playback75",type:a.IMPRESSION},"midpoint":{id:"playback50",type:a.IMPRESSION},"complete":{id:"playback100",type:a.IMPRESSION},"acceptinvitation":{id:a.CLICKTHROUGH,type:a.CLICKTHROUGH},"creativeview":{id:a.IMPRESSION,type:a.IMPRESSION}};b.com.yahoo.ads.communicator.parser.VASTParser=a;},"1.0.0",{requires:["node","Ad","ScopeLogger","datatype-xml-parse","Utils"]});YUI.add("VMAP1Object",function(e){e.namespace("com.yahoo.ads.communicator.parser");VMAP1Object=function(){var i=[];var h="";this.getAdBreaks=function(){return i;};this.getVersion=function(){return h;};this.setVersion=function(j){h=j;};};var d=function(){var n=null;var i=null;var h="";var m=[];var l="";var k="";var j=null;this.getAdSource=function(){return n;};this.setAdSource=function(o){n=o;};this.getTrackingEvents=function(){return i;};this.setTrackingEvents=function(o){i=o;};this.getTimeOffset=function(){return h;};this.setTimeOffset=function(o){h=o;};this.getBreakType=function(){return m;};this.getBreakId=function(){return l;};this.setBreakId=function(o){l=o;};this.getRepeatAfter=function(){return k;};this.setRepeatAfter=function(o){k=o;};this.getExtensions=function(){return j;};this.setExtensions=function(o){j=o;};};var a=function(){var m="";var j=0;var l=0;var i="";var h="";var k="";this.getId=function(){return m;};this.setId=function(n){m=n;};this.getAllowMultipleAds=function(){return j;};this.setAllowMultipleAds=function(n){j=n;};this.getFollowRedirects=function(){return l;};this.setFollowRedirects=function(n){l=n;};this.getAdTagURI=function(){return i;};this.setAdTagURI=function(n){i=n;};this.getCustomAdData=function(){return h;};this.setCustomAdData=function(n){h=n;};this.getVastAdData=function(){return k;};this.setVastAdData=function(n){k=n;};};var c=function(){var h=[];this.getTrackings=function(){return h;};};var g=function(){var i="";var h="";this.getEvent=function(){return i;};this.setEvent=function(j){i=j;};this.getUrl=function(){return h;};this.setUrl=function(j){h=j;};};var b=function(){var h=[];this.getExtensions=function(){return h;};};var f=function(){var h="";var i="";this.getXml=function(){return h;};this.setXml=function(j){h=j;};this.getType=function(){return i;};this.setType=function(j){i=j;};};e.com.yahoo.ads.communicator.parser.VMAP1Object=VMAP1Object;e.com.yahoo.ads.communicator.parser.AdBreak=d;e.com.yahoo.ads.communicator.parser.AdSource=a;e.com.yahoo.ads.communicator.parser.TrackingEvents=c;e.com.yahoo.ads.communicator.parser.Tracking=g;e.com.yahoo.ads.communicator.parser.Extensions=b;e.com.yahoo.ads.communicator.parser.Extension=f;},"1.0.0",{});YUI.add("VMAP1Parser",function(a){a.namespace("com.yahoo.ads.communicator.parser");VMAP1Parser=function(){var g=a.com.yahoo.ads.utils.Utils,e=a.com.yahoo.ads.common.Constants,b=a.com.yahoo.ads.communicator.Ad,h=a.com.yahoo.ads.logging.ScopeLogger;var d="http://www.iab.net/vmap-1.0";this.parseAd=function(p){var m=new a.com.yahoo.ads.communicator.parser.VMAP1Object(),l=null,s=[],v=null,o,u=e.VMAP_BREAK_START_EVENT;var w=p;var r=w.getAttribute("version");if(r){m.setVersion(r);}else{}var q=g.getElementsByTagNameNS(p,d,"AdBreak",VMAP1Parser.NS);for(o=0;o<q.length;o++){m.getAdBreaks().push(f(q[o]));}if(q.length===0){throw"[VMAPParseError]: VMAP should have 1 or more AdBreaks.";}var n=m.getAdBreaks()[0];l=n.getAdSource().getVastAdData();if(l){v=new b();v.setFormat(b.FORMAT.VMAP);if(n.getTrackingEvents()){var t=n.getTrackingEvents().getTrackings();for(o=0;o<t.length;o++){if(t[o].getEvent()==="breakStart"){v.addBeacon(u,{"id":u,"type":u,"url":t[o].getUrl(),"tokenized":false});}}}else{}s=a.com.yahoo.ads.communicator.parser.ParserFactory.getParser("VAST").parseAd(l,v);}return s;};var f=function(m){var n=new a.com.yahoo.ads.communicator.parser.AdBreak();n.setBreakId(m.getAttribute("breakId"));var t=m.getAttribute("breakType");var s=t.split(",");
for(var o=0;o<s.length;o++){n.getBreakType().push(s[o]);}if(n.getBreakType().length===0){}var q=m.getAttribute("timeOffset");if(q){n.setTimeOffset(q);}else{}n.setRepeatAfter(m.getAttribute("repeatAfter"));var p=g.getElementsByTagNameNS(m,d,"TrackingEvents",VMAP1Parser.NS);var l=g.getElementsByTagNameNS(m,d,"AdSource",VMAP1Parser.NS);var r=g.getElementsByTagNameNS(m,d,"Extensions",VMAP1Parser.NS);if(p[0]){n.setTrackingEvents(i(p[0]));}if(l[0]){n.setAdSource(k(l[0]));}if(r[0]){n.setExtensions(j(r[0]));}return n;};var i=function(l){var o=new a.com.yahoo.ads.communicator.parser.TrackingEvents();var n=g.getElementsByTagNameNS(l,d,"Tracking",VMAP1Parser.NS);for(var m=0;m<n.length;m++){o.getTrackings().push(c(n[m]));}return o;};var c=function(m){var n=new a.com.yahoo.ads.communicator.parser.Tracking();var l=m.getAttribute("event");if(l){n.setEvent(l);}else{throw"[VMAPParseError]: Tracking event type is required in Tracking.";}n.setUrl(g.getTextFromNode(m));return n;};var k=function(l){var m=new a.com.yahoo.ads.communicator.parser.AdSource();m.setId(l.getAttribute("id"));m.setAllowMultipleAds((l.getAttribute("allowMultipleAds")==="true")?1:0);m.setFollowRedirects((l.getAttribute("followRedirects")==="true")?1:0);if(g.getElementsByTagNameNS(l,d,"VASTAdData",VMAP1Parser.NS)[0]){m.setVastAdData(g.getElementsByTagNameNS(l,d,"VASTAdData",VMAP1Parser.NS)[0].childNodes[0]);}else{if(g.getElementsByTagNameNS(l,d,"AdTagURI",VMAP1Parser.NS)[0]){m.setAdTagURI(g.getElementsByTagNameNS(l,d,"AdTagURI",VMAP1Parser.NS)[0].childNodes[0]);}else{if(g.getElementsByTagNameNS(l,d,"CustomAdData",VMAP1Parser.NS)[0]){m.setCustomAdData(g.getElementsByTagNameNS(l,d,"CustomAdData",VMAP1Parser.NS)[0].childNodes[0]);}else{throw"[VMAPParseError]: No valid AdSource found.";}}}return m;};var j=function(p){var n=new a.com.yahoo.ads.communicator.parser.Extensions();var o=g.getElementsByTagNameNS(p,d,"Extension",VMAP1Parser.NS);for(var m=0;m<o.length;m++){var l=new a.com.yahoo.ads.communicator.parser.Extension();l.setType(o[m].getAttribute("type"));l.setXml(g.getTextFromNode(o[m]));n.getExtensions().push(l);}return n;};};VMAP1Parser.NS="vmap";a.com.yahoo.ads.communicator.parser.VMAP1Parser=VMAP1Parser;},"1.0.0",{requires:["datatype-xml","VMAP1Object","Utils","ScopeLogger"]});YUI.add("YahooParser",function(a){a.namespace("com.yahoo.ads.communicator.parser");YahooParser=function(){var f=a.com.yahoo.ads.common.Constants,b=a.com.yahoo.ads.communicator.Ad,j=a.com.yahoo.ads.utils.Utils;var k=null;var l=this;var i=function(q){for(var o=0;o<q.length;o++){var p=q[o];var n={};n.url=p.getAttribute("url");n.url=n.url.replace(/&(?=amp;)/g,"&");n.id=p.getAttribute("bid");n.type=p.getAttribute("type").toLowerCase();n.tokenized=p.getAttribute("tokenized");k.addBeacon(n.id,n);}};var g=function(q){for(var o=0;o<q.length;o++){var p=q[o];if(j.hasAttribute(p,"name")){var n=p.getAttribute("name");k.addParam(n,j.getTextFromNode(p));}}};var h=function(n,p){try{var o=j.getElementsByTagNameNS(n,p,"beacons",YahooParser.NS)[0];var r=j.getElementsByTagNameNS(o,p,"beacon",YahooParser.NS);i(r);}catch(q){}};var m=function(o){try{var n={};n.url=o.getAttribute("csc");n.id=YahooParser.IMPRESSION;n.type=YahooParser.IMPRESSION;n.tokenized=true;k.addBeacon(n.id,n);}catch(p){}};var e=function(n,p){var o,q;k.setType(b.TYPE.REDIRECT);k.setPos(b.POSITION.CLICKABLE);o=j.getElementsByTagNameNS(n,p,"adtag",YahooParser.NS);q="";if(o&&o.length>0){q=j.getTextFromNode(o[0]);}k.setRedirectURL(q);h(n,p);};var d=function(n){k.setType(b.TYPE.NOAD);k.setPos(b.POSITION.CLICKABLE);};var c=function(n,r){var q,p,o,t;k.setType(b.TYPE.OVERLAY);k.setPos(b.POSITION.OVERLAY);h(n,r);try{q=j.getElementsByTagNameNS(n,r,"creatives",YahooParser.NS)[0];p=j.getElementsByTagNameNS(q,r,"creative",YahooParser.NS)[0].getAttribute("url");k.setUrl(p);}catch(s){}try{o=j.getElementsByTagNameNS(n,r,"creativeData",YahooParser.NS)[0];t=j.getElementsByTagNameNS(o,r,"item",YahooParser.NS);g(t);}catch(s){}};this.parseAd=function(u,p){var v=0,z,x=[],s,t,n,q,y,r,A,o;if(typeof u===f.UNDEFINED||u===null){return x;}k=new b();s=u.getElementsByTagName("position");t=(typeof s!=="undefined"&&s!==null)?s[0]:null;n=(typeof t!=="undefined"&&t!==null)?t.getElementsByTagName("addata"):null;if(!n||n.length<1){return;}do{z=n[v];try{m(z);q=z.getElementsByTagName("ads");if(q&&q.length>0){o=q[0].getAttribute("xmlns:video-ad");A=q[0].getElementsByTagName("ad");y=(typeof A!=="undefined"&&A!==null)?A[0]:null;r=(typeof y!=="undefined"&&y!==null)?j.getElementsByTagNameNS(y,o,"adtag",YahooParser.NS):null;if(r&&r.length>0){e(y,o);}else{c(y,o);}}else{d();}}catch(w){d();}finally{if(typeof p===f.UNDEFINED||p===null){k.setFormat(b.FORMAT.YAHOO);}else{k.addBeaconsFromAd(p);k.setFormat(p.getFormat());}}x.push(k);v++;k=new b();}while(v<n.length);return x;};};YahooParser.NS="video-ad";YahooParser.IMPRESSION="impression";a.com.yahoo.ads.communicator.parser.YahooParser=YahooParser;},"1.0.0",{requires:["node","Ad","ScopeLogger","datatype-xml-parse","Utils"]});YUI.add("ActionEventResolver",function(a){a.namespace("com.yahoo.ads.engine");ActionEventResolver=function(){var b=a.com.yahoo.ads.common.Constants;function c(e){var d=false;if(!e){return d;}if(e.type===b.TRIGGER_CLIP_PREROLL||e.type===b.TRIGGER_CLIP_POSTROLL||e.type===b.TRIGGER_CLIP_GATEWAY){d=true;}return d;}return{resolveBlockingEvent:function(l,k){var f=Array();var e=false;for(var g=0;g<l.length;g++){var h=l[g];if(this.isCountableAction(h)){if(!e){if(h.getEventId()!=="no-op"){if(h.getEventId()==="skip-ad"){h.setEventId("no-op");}e=true;f.push(h);}}}else{f.push(h);}}if(!e&&this.isBlockingAction(k)){var d=new a.com.yahoo.ads.rules.ActionRule();d.setType(k.type);var j=new a.com.yahoo.ads.engine.EngineActionEvent(a.com.yahoo.ads.engine.EngineActionEvent.NOOP_EVENT,d);f.push(j);}return f;},needToFireFor:function(f,e){var d=true;var g=c(e);if(!g&&f.getEventId()==="no-op"){d=false;}return d;},isBlockingAction:function(d){return c(d);},isCountableAction:function(e){var d=true;if(e.getEventId()==="skin-op"){d=false;
}return d;}};};a.com.yahoo.ads.engine.ActionEventResolver=ActionEventResolver;},"1.0.0",{requires:["node","EngineActionEvent","ScopeLogger"]});YUI.add("AdEngine",function(a){a.namespace("com.yahoo.ads.engine");AdEngine=function(){_CONSTANTS=a.com.yahoo.ads.common.Constants;_MODE_XML=0;STATE_RAW=0;STATE_READY=1;STATE_RUNNING=2;STATE_LOADING_CONFIG=3;DEFAULT_EVAL_INTERVAL=100;TRIGGER_BASIS_ID="triggers";SESSION_BASIS_ID="session";VIDEO_TIMELINE_BASIS_ID="videoTimeline";_defaultGroup=null;_mRuleGroupsMap=null;_lastSetId=null;_mActiveGroupId=null;this.evalInterval=null;this.timersMap=null;this.mLastSecondExecuted=0;this._mState=null;_actionEventResolver=new a.com.yahoo.ads.engine.ActionEventResolver();_adsInClipCount=0;_clipCount=0;_categoryCount=0;_adLength=0;_vidLength=0;_rcvidLength=0;_rcclipCount=0;_adCount=0;_clipDuration=0;this.setClipData=function(b,c){_clipCount=parseInt(b.getCookieParam(_CONSTANTS.COOKIE_CLIP_COUNT),10);_adLength=parseInt(b.getCookieParam(_CONSTANTS.COOKIE_AD_LENGTH),10);_vidLength=parseInt(b.getCookieParam(_CONSTANTS.COOKIE_VIDEO_LENGTH),10);_rcvidLength=parseInt(b.getCookieParam(_CONSTANTS.COOKIE_REC_VIDEO_LENGTH),10);_rcclipCount=parseInt(b.getCookieParam(_CONSTANTS.COOKIE_REC_CLIP_COUNT),10);_adCount=parseInt(b.getCookieParam(_CONSTANTS.COOKIE_AD_COUNT),10);_clipDuration=parseInt(c,10);};this.setState=function(b){if(((typeof this._mState==="undefined"||this._mState===null)&&b===STATE_RAW)||(this._mState===STATE_RAW&&b===STATE_READY)||(this._mState===STATE_READY&&b===STATE_LOADING_CONFIG)||(this._mState===STATE_LOADING_CONFIG&&b===STATE_READY)||(this._mState===STATE_RUNNING&&b===STATE_LOADING_CONFIG)||(this._mState===STATE_LOADING_CONFIG&&b===STATE_RUNNING)||(this._mState===STATE_READY&&b===STATE_RUNNING)){this._mState=b;if(this._mState===STATE_READY){this._fireAdEngineReadyEvent();}}};this.compileRules=function(c){for(var d in c){var b=c[d];if(typeof _defaultGroup==="undefined"||_defaultGroup===null){_defaultGroup=b;}_mRuleGroupsMap[b.getid()]=b;if(b.getisDefault()){_defaultGroup=b;_lastSetId=_mActiveGroupId=_defaultGroup.getid();}}this.setState(STATE_READY);};this._invalidateConfig=function(){this.setState(STATE_LOADING_CONFIG);this.mContextDataMap={};};this.buildEngineRuntime=function(){return new a.com.yahoo.ads.engine.RuleRuntime(this.getRuntimeParam);};this.getRuntimeParam=function(b){if(b==="userSession"){return getUserSession();}else{if(b==="videoDuration"){var d=0;try{d=Number(mContextDataMap["tech:duration"]);}catch(c){alert("got an exception"+c);}if(d===0){try{d=this.timersMap[VIDEO_TIMELINE_BASIS_ID].totalTime;}catch(c){alert("got an exception"+c);}}return d;}else{if(b==="videoAveragePlaytime"){return mContextDataMap["extra-biz:averagePlaytime"];}else{return mContextDataMap[b];}}}};this._fireAdEngineReadyEvent=function(){this.fire(_CONSTANTS.AD_ENGINE_READY_EVENT);};this._fireAdEngineErrorEvent=function(){this.fire(_CONSTANTS.AD_ENGINE_ERROR_EVENT);};this._fireAdEngineAdEvent=function(){this.fire(_CONSTANTS.AD_ENGINE_AD_EVENT);};this.evaluateRuleByPosition=function(b,c){};this.evaluateRuleGroup=function(d,b){if(d==="-1"){return;}this.mActiveGroupId=d;this._lastSetId=d;var c=_mRuleGroupsMap[d];if(c===undefined){c=_defaultGroup;}if(c===undefined){return;}c.evaluate(b);};this.executionTimerCallbackAttached=function(e){if(!(this.timelineRulesPresent(_mActiveGroupId))&&this._mState!==STATE_RUNNING){return;}var c=this.timersMap[VIDEO_TIMELINE_BASIS_ID].getElapsed();var g=this.buildEngineRuntime();g.addBasis(new TimerEventBasis(VIDEO_TIMELINE_BASIS_ID,this.timersMap[VIDEO_TIMELINE_BASIS_ID],_clipCount));var h=Math.abs(c-this.mLastSecondExecuted);if(h>=2){this.fire(a.com.yahoo.ads.engine.EngineActionEvent.RESET_EVENT);this.mLastSecondExecuted=c;return;}this.mLastSecondExecuted=c;this.qCount=0;this.evaluateRuleGroup(_mActiveGroupId,g);var b=[];b=_actionEventResolver.resolveBlockingEvent(g.getActions(),null);for(var d=0;d<b.length;d++){var f=new a.com.yahoo.ads.engine.EngineActionEvent();f=b[d];if(f.getAction()){f.getAction().mActionParams.AdPosition=_adsInClipCount++;}this.fire(f.EVENT_NAME,f);}};this.timelineRulesPresent=function(b){var c=_mRuleGroupsMap[b];if(typeof c==="undefined"||c===null){c=_defaultGroup;return false;}else{return c.getisTimelineDriven();}};};a.augment(AdEngine,a.EventTarget);AdEngine.prototype.getAdEngineReadyEvent=function(){return _CONSTANTS.AD_ENGINE_READY_EVENT;};AdEngine.prototype.getAdEngineErrorEvent=function(){return _CONSTANTS.AD_ENGINE_ERROR_EVENT;};AdEngine.prototype.getAdEngineAdEvent=function(){return _CONSTANTS.AD_ENGINE_AD_EVENT;};AdEngine.prototype.fireAdEngineReadyEvent=function(){this._fireAdEngineReadyEvent();};AdEngine.prototype.fireAdEngineErrorEvent=function(){this._fireAdEngineErrorEvent();};AdEngine.prototype.fireAdEngineAdEvent=function(){this._fireAdEngineAdEvent();};AdEngine.prototype.runEngine=function(){if(this._mState===STATE_READY){this.setState(STATE_RUNNING);this.timersMap[VIDEO_TIMELINE_BASIS_ID].on("advanced",this.executionTimerCallbackAttached,this);}};AdEngine.prototype.invalidateConfig=function(){this._invalidateConfig();};AdEngine.prototype.ready=function(){return(this._mState===STATE_READY||this._mState===STATE_RUNNING);};AdEngine.prototype.init=function(){var b=""+Math.round(Math.random()*100000);this.setState(STATE_RAW);this.evalInterval=DEFAULT_EVAL_INTERVAL;this.timersMap={};_mRuleGroupsMap={};this.mContextDataMap={};};AdEngine.prototype.updateRules=function(b){this.compileRules(b.getData());};AdEngine.prototype.addTimer=function(c){var b=c.getId();this.timersMap[b]=c;};AdEngine.prototype.setActiveGroupId=function(c){if(typeof c==="undefined"||c===null){c=_lastSetId;}_lastSetId=c;try{if(_mRuleGroupsMap[c]||Number(c)===-1){_mActiveGroupId=c;}else{_mActiveGroupId=_defaultGroup.id;}}catch(b){}};AdEngine.prototype.getActiveGroupId=function(){return _mActiveGroupId;};AdEngine.prototype.addContextParam=function(b,c){if(b==="videoAveragePlaytime"){c=Math.round(c/1000);}this.mContextDataMap[b]=c;};AdEngine.prototype.resetClipRules=function(){var b,c;
for(b in _mRuleGroupsMap){if(_mRuleGroupsMap.hasOwnProperty(b)){c=_mRuleGroupsMap[b];if(typeof c!=="undefined"&&c!==null){c.resetClipRules();}}}};AdEngine.prototype.onAdEvent=function(d){var g=d.action;var h=new a.com.yahoo.ads.engine.TriggerEventBasis(TRIGGER_BASIS_ID,g.type,d.action);if(g.type===_CONSTANTS.NOTIFICATION_CLIP_CHANGE){_adsInClipCount=0;this.resetClipRules();return;}else{h.setCount(_clipCount);h.setAdLength(_adLength);h.setVidLength(_vidLength);h.setRecentVidLength(_rcvidLength);h.setRecentClipCount(_rcclipCount);h.setAdCount(_adCount);h.setClipDuration(_clipDuration);}var f=this.buildEngineRuntime();f.addBasis(h);var b=[];this.evaluateRuleGroup(_mActiveGroupId,f);b=_actionEventResolver.resolveBlockingEvent(f.getActions(),g);for(var c=0;c<b.length;c++){var e=new a.com.yahoo.ads.engine.EngineActionEvent();e=b[c];if(_actionEventResolver.needToFireFor(e,g)){if(e.action&&_actionEventResolver.isCountableAction(e)){e.action.actionParams.AdPosition=_adsInClipCount++;}this.fire(e.EVENT_NAME,e);}else{}}};a.com.yahoo.ads.engine.AdEngine=AdEngine;},"1.0.0",{requires:["node","event-custom","TriggerEventBasis","ActionEventResolver","RuleRuntime","event-custom-complex","ScopeLogger","Constants"]});YUI.add("EngineActionEvent",function(b){b.namespace("com.yahoo.ads.engine");function a(f,g){var d;var c;var e=b.com.yahoo.ads.common.Constants;if(!f){d="no-op";}else{d=f;c=g;}return{EVENT_NAME:e.AD_ENGINE_AD_EVENT,setEventId:function(h){d=h;},getEventId:function(){return d;},setAction:function(h){c=h;},getAction:function(){return c;},toString:function(){return"[EngineActionEvent(eventId:"+d+")(action:"+c+")]";}};}a.RESET_EVENT="reset";a.NOOP_EVENT="no-op";a.SKIP_EVENT="skip-ad";b.com.yahoo.ads.engine.EngineActionEvent=a;},"1.0.0",{requires:["node"]});YUI.add("RuleRuntime",function(a){a.namespace("com.yahoo.ads.engine");RuleRuntime=function(){var b=a.com.yahoo.ads.logging.ScopeLogger("RuleRuntime");var c=function(){};var e={};var d=[];function f(g){c=g;e={};d=[];}return{addBasis:function(g){e[g.getName()]=g;},getParam:function(g){return c(g);},getBasis:function(g){return e[g];},propagateActionEvent:function(g){d.push(g);},getActions:function(){return d;}};};a.com.yahoo.ads.engine.RuleRuntime=RuleRuntime;},"1.0.0",{requires:["node","ScopeLogger"]});YUI.add("TimerEventBasis",function(a){a.namespace("com.yahoo.ads.engine");TimerEventBasis=function(e,g,d){var f=g;var c=d;var b=e;return{getName:function(){return b;},getTimer:function(){return f;},getClipCount:function(){return c;},getType:function(){return TimerEventBasis.TIMER_BASIS;}};};TimerEventBasis.TIMER_BASIS="timer";a.com.yahoo.ads.engine.TimerEventBasis=TimerEventBasis;},"1.0.0",{requires:["node"]});YUI.add("TriggerEventBasis",function(a){a.namespace("com.yahoo.ads.engine");TriggerEventBasis=function(c,i,e){var j=0;var n=0;var d=0;var k=0;var h=0;var b=0;var f=0;var l=c;var m=i;var g=e;return{getCount:function(){return j;},setCount:function(o){j=o;},getClipDuration:function(){return n;},setClipDuration:function(o){n=o;},getAdLength:function(){return d;},setAdLength:function(o){d=o;},getVidLength:function(){return k;},setVidLength:function(o){k=o;},getRecentVidLength:function(){return h;},setRecentVidLength:function(o){h=o;},getRecentClipCount:function(){return b;},setRecentClipCount:function(o){b=o;},getAdCount:function(){return f;},setAdCount:function(o){f=o;},getName:function(){return l;},getTriggerName:function(){return m;},getTrigger:function(){return g;},getType:function(){return TriggerEventBasis.TRIGGER_BASIS;}};};TriggerEventBasis.TRIGGER_BASIS="trigger";a.com.yahoo.ads.engine.TriggerEventBasis=TriggerEventBasis;},"1.0.0",{requires:["node"]});YUI.add("AdEvents",function(a){a.namespace("com.yahoo.ads.event");AdEvents=function(){};AdEvents.AdLoaded="AdLoaded";AdEvents.AdStarted="AdStarted";AdEvents.AdStopped="AdStopped";AdEvents.AdLinearChange="AdLinearChange";AdEvents.AdExpandedChange="AdExpandedChange";AdEvents.AdRemainingTimeChange="AdRemainingTimeChange";AdEvents.AdVolumeChange="AdVolumeChange";AdEvents.AdImpression="AdImpression";AdEvents.AdClickThru="AdClickThru";AdEvents.AdClick="AdClick";AdEvents.AdMouseOver="AdMouseOver";AdEvents.AdMouseOut="AdMouseOut";AdEvents.AdVideoStart="AdVideoStart";AdEvents.AdVideoFirstQuartile="AdVideoFirstQuartile";AdEvents.AdVideoMidpoint="AdVideoMidpoint";AdEvents.AdVideoThirdQuartile="AdVideoThirdQuartile";AdEvents.AdVideoComplete="AdVideoComplete";AdEvents.AdUserAcceptInvitation="AdUserAcceptInvitation";AdEvents.AdUserMinimize="AdUserMinimize";AdEvents.AdUserClose="AdUserClose";AdEvents.AdPaused="AdPaused";AdEvents.AdPlaying="AdPlaying";AdEvents.AdError="AdError";AdEvents.AdLog="AdLog";AdEvents.AdProgress="AdProgress";AdEvents.AdPlayback="AdPlayback";AdEvents.AdMediaFirstByte="AdMediaFirstByte";AdEvents.AdMediaPlaybackError="AdMediaPlaybackError";a.com.yahoo.ads.event.AdEvents=AdEvents;},"1.0.0",{requires:["node"]});YUI.add("AdMetricsEvent",function(a){a.namespace("com.yahoo.ads.event");AdMetricsEvent=function(b,k,c,d,m){var n=b;var j=k;var h=null;var g=c;var e=null;var l=null;var i=d;var f=m;this.getEventId=function(){return n;};this.setEventId=function(o){n=o;};this.getEventData=function(){return j;};this.setEventData=function(o){j=o;};this.getAdType=function(){return h;};this.setAdType=function(o){h=o;};this.getCreativeId=function(){return g;};this.setCreativeId=function(o){g=o;};this.getAdPos=function(){return e;};this.setAdPos=function(o){e=o;};this.getRuleName=function(){return l;};this.setRuleName=function(o){l=o;};this.getParams=function(){return i;};this.setParams=function(o){i=o;};this.getAd=function(){return f;};this.setAd=function(o){f=o;};};AdMetricsEvent.prototype.EVENT_NAME="AdCommunicatorMetrics";a.com.yahoo.ads.event.AdMetricsEvent=AdMetricsEvent;},"1.0.0",{requires:["node"]});YUI.add("AdPluginMetricsEvent",function(b){b.namespace("com.yahoo.ads.event");function a(c,d,e){this._eventId=null;this._eventData=null;this._creativeId=null;this._adType=null;this._adPos=null;this._ruleName=null;
this._params=null;this._eventId=c;this._eventData=d;this._creativeId=e;}a.prototype.getParams=function(){return this._params;};a.prototype.setParams=function(c){this._params=c;};a.prototype.setEventId=function(c){this._eventId=c;};a.prototype.getEventId=function(){return this._eventId;};a.prototype.setData=function(c){this._eventData=c;};a.prototype.getData=function(){return this._eventData;};a.prototype.setCreativeId=function(c){this._creativeId=c;};a.prototype.getCreativeId=function(){return this._creativeId;};a.prototype.setCreativeType=function(c){this._adType=c;};a.prototype.getCreativeType=function(){return this._adType;};a.prototype.setCreativePos=function(c){this._adPos=c;};a.prototype.getCreativePos=function(){return this._adPos;};a.prototype.setRuleName=function(c){this._ruleName=c;};a.prototype.getRuleName=function(){return this._ruleName;};a.prototype.toString=function(){return"[EVENT (type: EventMetrics)("+"id:"+this._eventId+")("+"data:"+this._eventData+")("+"cid:"+this._creativeId+")("+"type:"+this._adType+")("+"pos:"+this._adPos+")("+"rule:"+this._ruleName+")]";};b.com.yahoo.ads.event.AdPluginMetricsEvent=a;},"1.0.0",{requires:["node"]});YUI.add("BeaconEventData",function(b){b.namespace("com.yahoo.ads.event");function a(){this._clickCount=0;this._mouseOverCount=0;this._mouseOutCount=0;this._closeCount=0;this._idleExpDuration=0;this._idleStartTime=0;this._act3ReportedDuration=null;this._adLoadTime=null;this._act1StartTime=null;this._act2StartTime=null;this._act3StartTime=null;this._bumperStartTime=null;this._rollInTime=null;}a.PLAYBACK="playback";a.PLAYBACK0="playback0";a.PLAYBACK25="playback25";a.PLAYBACK50="playback50";a.PLAYBACK75="playback75";a.PLAYBACK100="playback100";a.MOUSE_OVER="mouseover";a.MOUSE_OUT="mouseout";a.CLICK="click";a.SKIP="skip";a.CPCV="cpcv";a.BITRATE="bitrate";a.IMPRESSION="impression";a.INTERACTION="interaction";a.CLICKTHROUGH="clickthrough";a.OVERLAY="OVERLAY";a.CLOSE="close";a.availableBitrate=null;a.prototype.setBaseData=function(d){var c=new Date();switch(d){case"AdLoadTime":this._adLoadTime=c.valueOf();break;case"Act1StartTime":this._act1StartTime=c.valueOf();break;case"Act2StartTime":this._act2StartTime=c.valueOf();break;case"Act3StartTime":this._act3StartTime=c.valueOf();break;case"BumperStartTime":this._bumperStartTime=c.valueOf();break;case"RollInTime":this._rollInTime=c.valueOf();break;case"IdleTimeStart":this._idleStartTime=c.valueOf();break;case"IdleEndTime":this._idleExpDuration+=(c.valueOf()-this._idleStartTime);break;}};a.prototype.getBaseData=function(c){var d;switch(c){case"AdLoadTime":d=this._adLoadTime;break;case"Act1StartTime":d=this._act1StartTime;break;case"Act2StartTime":d=this._act2StartTime;break;case"Act3StartTime":d=this._act3StartTime;break;case"BumperStartTime":d=this._bumperStartTime;break;case"RollInTime":d=this._rollInTime;break;}return d;};a.prototype.elapsedTimeFromLastAction=function(d){var c=new Date();return c.valueOf()-getBaseData(d);};a.prototype.setAct3ReportedDuration=function(c){this._act3ReportedDuration=c*1000;};a.prototype.generateEventData=function(e){var d=new Date();var c;switch(e){case"t:ct_OVERLAY":case"t:ir_OVERLAY":case"t:ro_OVERLAY":case"t:ac":case"t:ct_ACT_1":case"t:ct_ACT_3":c=e+":"+(d.valueOf()-this._adLoadTime);break;case"t:ir_ACT_1":c=e+":"+(d.valueOf()-this._act1StartTime);break;case"t:ir_ACT_2":c=e+":"+(d.valueOf()-this._act2StartTime);break;case"t:ir_ACT_3":case"t:et_ACT_3":c=e+":"+(d.valueOf()-this._act3StartTime);break;case"t:et_ACT_1":c=e+":"+(d.valueOf()-this._bumperStartTime);break;case"t:et_ACT_2":c=e+":"+(d.valueOf()-this._rollInTime);break;case"t:ed_ACT_3;0":case"t:ed_ACT_3;100":case"t:ed_ACT_3;50":c=e+";"+this._act3ReportedDuration+":"+this._act3ReportedDuration;break;case"RollInTime":this._rollInTime=d.valueOf();break;}return c;};a.prototype.getUpdatedClickCount=function(){this._clickCount++;return this._clickCount;};a.prototype.getUpdatedMouseOverCount=function(){this._mouseOverCount++;return this._mouseOverCount;};a.prototype.getUpdatedMouseOutCount=function(){this._mouseOutCount++;return this._mouseOutCount;};a.prototype.getUpdatedCloseCount=function(){this._closeCount++;return this._closeCount;};a.prototype.getElapsedTimeFromAdLoad=function(){var d=new Date();var c=d.valueOf()-this._adLoadTime;return c;};a.prototype.getActualExperienceDuration=function(){return(getElapsedTimeFromAdLoad()-this._idleExpDuration);};b.com.yahoo.ads.event.BeaconEventData=a;},"1.0.0",{requires:["node"]});YUI.add("FlashRenderManager",function(a){a.namespace("com.yahoo.ads.flash");FlashRenderManager=function(b){this._eventBus=b;this.renderer=null;this.nullRenderer=null;this._ad=null;_CONSTANTS=a.com.yahoo.ads.common.Constants;window.SWF=a.SWF;var c=this;this.subscribeEvents=function(){if(!this.renderer){return;}this.renderer.on(_CONSTANTS.EVENT_VIDEO_AD_END,function(d){c._ad=null;c._eventBus.notifyVideoAdEnd();});this.renderer.on(_CONSTANTS.EVENT_VIDEO_AD_START,function(d){c._eventBus.notifyVideoAdStart(d.capabilities);});this.renderer.on(_CONSTANTS.EVENT_AD_START_MEDIA_PLAYBACK,function(d){c._eventBus.notifyAdPlayback(d.capabilities);});this.renderer.on(_CONSTANTS.EVENT_AD_MEDIA_FIRST_BYTE,function(d){c._eventBus.notifyAdMediaFirstByte(d);});this.renderer.on(_CONSTANTS.EVENT_NOAD,function(d){});this.renderer.on(_CONSTANTS.EVENT_AD_PROGRESS,function(d){c._eventBus.notifyAdProgress(d);});this.renderer.on(_CONSTANTS.EVENT_PROFILER,function(d){});this.renderer.on(_CONSTANTS.EVENT_METRIC,function(d){c._eventBus.notifyMetricsEvent(d);});this.renderer.on(_CONSTANTS.EVENT_AD_METRICS,function(g){var f=g.data;var d=new a.com.yahoo.ads.event.AdMetricsEvent(f.eventId,f.data,f.creativeId,f.params,f.ad);if(this._ad){this._ad.onAdEvent(d);}else{c._eventBus.notifyAdMetricsEvent(d);}});this.renderer.on(_CONSTANTS.AD_DELIVERY_ERROR,function(d){c._eventBus.notifyAdDeliveryError(d);});this.renderer.on(_CONSTANTS.AD_START_ERROR,function(d){c._eventBus.notifyAdStartError(d);});};};FlashRenderManager.prototype.cancelAds=function(){if(!this.renderer){return;
}this.renderer.callSWF("cancelAllAds");};FlashRenderManager.prototype.setRenderer=function(b){this.renderer=b;this.subscribeEvents();};FlashRenderManager.prototype.getRenderer=function(){return this.renderer;};FlashRenderManager.prototype.renderAd=function(c,f,e){this._ad=c;if(c){var b=c.getJson();try{if(!this.renderer){return;}this.renderer.callSWF("renderAd",[b,f,e]);}catch(d){console.log(d);}}else{this.nullRenderer=new a.com.yahoo.ads.renderer.NullRenderer();this.nullRenderer.setEventBus(this._eventBus);this.nullRenderer.render(c,f,e);}};FlashRenderManager.prototype.addVPAIDAdToCache=function(c,f,e){this._ad=c;if(c){var b=c.getJson();try{if(!this.renderer){return;}this.renderer.callSWF("addVPAIDAdToCache",[b,f,e]);}catch(d){console.log(d);}}};FlashRenderManager.prototype.removeVPAIDAdFromCache=function(b){try{if(!this.renderer){return;}this.renderer.callSWF("removeVPAIDAdFromCache",[b]);}catch(c){console.log(c);}};FlashRenderManager.prototype.resizeAd=function(c,g,e,b,d){if(!this.renderer){return;}try{this.renderer.callSWF("onContentVideoResized",[c,g,e,b,d]);this.renderer.callSWF("onControlTween",[c,g,e,b]);}catch(f){}};FlashRenderManager.prototype.setVolume=function(b){if(!this.renderer){return;}this.renderer.callSWF("setVolume",[b]);};a.com.yahoo.ads.flash.FlashRenderManager=FlashRenderManager;},"1.0.0",{requires:["node","ScopeLogger","AdMetricsEvent"]});YUI.add("ScopeLogger",function(a){a.namespace("com.yahoo.ads.logging");ScopeLogger=function(c){var b=c;var d=function(){};return{trace:function(e){},message:function(e){a.message(b+"::"+e,"info","VideoAdPlugin");},warning:function(e){},error:function(e){}};};a.com.yahoo.ads.logging.ScopeLogger=ScopeLogger;},"1.0.0",{requires:["node"]});YUI.add("AdComponentSettings",function(a){a.namespace("com.yahoo.ads.man");AdComponentSettings=function(){var c;var d="";var b;return{initFromArray:function(i,e){var h=[];var g="NETWORK."+e+".";var k=g.length;for(var f in i){if(f.indexOf(g)===0){var j=f.substr(k);h[j]=i[f];}}return h;},init:function(g,f,e){if(g){c=this.initFromArray(g,f);}d=f;b=e;},getComponentSettings:function(e){return new AdComponentSettings(null,e,this);},storeSetting:function(e,f){if(b){b.storeSetting(d+"."+e,f);}else{c[e]=f;}},getSetting:function(e){if(b){return b.getSetting("NETWORK."+d+"."+e);}else{return c[e];}},toString:function(){var g="";var f=0;var e;for(e in c){if(c[e].length>0){if(f>0){g+=";"+e+"="+c[e];}else{g+=e+"="+c[e];}}f++;}return g;}};};a.com.yahoo.ads.man.AdComponentSettings=AdComponentSettings;},"1.0.0",{requires:["node","ScopeLogger"]});YUI.add("ManAllocation",function(a){a.namespace("com.yahoo.ads.man");ManAllocation=function(){var b=[],d=null,c=null;return{init:function(h){var g,e,f;this.parseNetworkModules(h.NetworkModules);this.parseSettings(h.Settings);g=d["SELECTOR.ID"];e=h.AllocationModule;for(f=0;f<e.length;f++){if(e[f]["@id"]===g){c=e[f]["@uri"];}}},parseNetworkModules:function(e){var g,f;if(e instanceof Array){for(f=0;f<e.length;f++){g=new a.com.yahoo.ads.man.NetworkModule();g.init(e[f]);b.push(g);}}else{if(typeof e!=="undefined"&&e!==null){g=new a.com.yahoo.ads.man.NetworkModule();g.init(e.NetworkModule);b.push(g);}}},parseSettings:function(f){d={};for(var e in f){d[f[e]["@name"]]=f[e]["@value"];}},getNetworkModules:function(){return b;},getSettings:function(){return d;},getIsManagedConfig:function(){return false;},getIsServable:function(){return true;},getId:function(){return"";},getIsSelector:function(){return false;},getAllocationModuleUri:function(){return c;},toString1:function(){return"[ManAllocation("+c+")]";}};};a.com.yahoo.ads.man.ManAllocation=ManAllocation;},"1.0.0",{requires:["node","NetworkModule"]});YUI.add("ManagedConfig",function(a){a.namespace("com.yahoo.ads.man");ManagedConfig=function(){var b;return{getIsRuleGroup:function(){return true;},setData:function(c){b=c;},getData:function(){return b;}};};a.com.yahoo.ads.man.ManagedConfig=ManagedConfig;},"1.0.0",{requires:["node"]});YUI.add("NetworkModule",function(a){a.namespace("com.yahoo.ads.man");NetworkModule=function(){var d=null;var e=null;var c=null;var b=null;return{init:function(f){d=f;e=d["@id"];c=d["@name"];b=d["@as3uri"];},getId:function(){return e;},getName:function(){return c;},getAS3Uri:function(){return b;},toString:function(){return"NetworkModule:: id: "+e+", name: "+c+", AS3Uri: "+b;}};};a.com.yahoo.ads.man.NetworkModule=NetworkModule;},"1.0.0",{requires:["node"]});YUI.add("ParseJSON",function(a){a.namespace("com.yahoo.ads.man");ParseJSON=function(){var c=null;var b=null;return{init:function(){},getRules:function(){return b;},getAllocation:function(){return c;},parseItems:function(e){var d=e.allocation;if(typeof d!=="undefined"&&d!==null){this.parseAllocationItem(d);}var f=e.ruleGroup;if(typeof f!=="undefined"&&f!==null){this.parseRuleGroup(f);}return true;},parseAllocationItem:function(d){if(typeof d!=="undefined"&&d!==null){c=new a.com.yahoo.ads.man.ManAllocation();c.init(d);}},parseRuleGroup:function(f){b=new ManagedConfig();tmp={};for(var e=0;e<f.ruleGroup.length;e++){if(f.ruleGroup[e]["@active"]==="true"){var d=new a.com.yahoo.ads.rules.RuleGroup();d.initFromJSON(f.ruleGroup[e]);tmp[d.getid()]=d;}}b.setData(tmp);}};};a.com.yahoo.ads.man.ParseJSON=ParseJSON;},"1.0.0",{requires:["node","ManagedConfig","ManAllocation","RuleGroup","Constants"]});YUI.namespace("com.yahoo.ads.plugin");YUI.com.yahoo.ads.plugin.AdPluginEvent=function(){AdPluginEvent.EVENT_PLUGIN_READY="PluginReady";AdPluginEvent.EVENT_PLUGIN_DESTROY="PluginDestroy";AdPluginEvent.EVENT_VIDEO_AD_START="VideoAdStart";AdPluginEvent.EVENT_VIDEO_AD_END="VideoAdEnd";AdPluginEvent.EVENT_RICH_AD_START="RichAdStart";AdPluginEvent.EVENT_RICH_AD_END="RichAdEnd";AdPluginEvent.EVENT_OVERLAY_START="OverlayStart";AdPluginEvent.EVENT_OVERLAY_END="OverlayEnd";AdPluginEvent.EVENT_EXPERIENCE_COMPLETE="ExperienceComplete";AdPluginEvent.EVENT_PREPARE_VIDEO="PrepareVideo";AdPluginEvent.EVENT_VIDEO_NOAD="PluginNoAd";AdPluginEvent.EVENT_SKIN_PLAYER="skinPlayer";AdPluginEvent.EVENT_UNLOCK_PLAYINST="unlockPlaylist";
AdPluginEvent.EVENT_SCALE_VIDEO="scaleVideo";AdPluginEvent.EVENT_AD_PROGRESS="blockingAdProgress";AdPluginEvent.EVENT_METRICS="metricsEvent";};YUI.add("ErrorCode",function(a){a.namespace("com.yahoo.ads.plugin");ErrorCode=function(){};ErrorCode[MonitoringBeaconEvent.EVENT_ERR_PlUGIN_INIT]="e.100.101";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_COMM_LOAD]="e.200.201";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_COMM_TIMEOUT]="e.200.202";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_COMM_INT]="e.200.203";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_ADCALL]="e.200.204";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_QUERY_LOAD]="e.300.301";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_QUERY_TIMEOUT]="e.300.302";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_QUERY_INT]="e.300.303";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_AD_LOAD]="e.400.401";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_AD_TIMEOUT]="e.400.402";ErrorCode[MonitoringBeaconEvent.EVENT_ERR_AD_INT]="e.400.403";a.com.yahoo.ads.plugin.ErrorCode=ErrorCode;},"1.0.0",{requires:["node","MonitoringBeaconEvent"]});YUI.add("EventBusSwitch",function(a){a.namespace("com.yahoo.ads.plugin");EventBusSwitch=function(){_CONSTANTS=a.com.yahoo.ads.common.Constants;this._sink=null;EventBusSwitch.prototype.setSink=function(c){this._sink=c;var b=this;this._sink.on(_CONSTANTS.VolumeChangedEvent,function(){b.redispatch(_CONSTANTS.VolumeChangedEvent,arguments);});this._sink.on(_CONSTANTS.ClientInfoChangedEvent,this.redispatch);this._sink.on(_CONSTANTS.ControlTweenEvent,this.redispatch);this._sink.on(_CONSTANTS.EVENT_CONTENT_COMPLETE,this.redispatch);};EventBusSwitch.prototype.getSink=function(b){return this._sink;};EventBusSwitch.prototype.redispatch=function(b){this.fire(b,arguments);};EventBusSwitch.prototype.notifyAdRendered=function(){this._sink.notifyAdRendered();};EventBusSwitch.prototype.notifyVideoAdStart=function(b){this._sink.notifyVideoAdStart(b);};EventBusSwitch.prototype.notifyVideoAdEnd=function(){this._sink.notifyVideoAdEnd();};EventBusSwitch.prototype.notifyOverlayStart=function(){this._sink.notifyOverlayStart();};EventBusSwitch.prototype.notifyOverlayEnd=function(){this._sink.notifyOverlayEnd();};EventBusSwitch.prototype.notifyPluginReady=function(){this._sink.notifyPluginReady();};EventBusSwitch.prototype.notifyMetricsEvent=function(b){this._sink.notifyMetricsEvent(b);};EventBusSwitch.prototype.notifyAdMetricsEvent=function(b){this._sink.notifyAdMetricsEvent(b);};EventBusSwitch.prototype.notifyUnlockPlaylist=function(b){this._sink.notifyUnlockPlaylist(b);};EventBusSwitch.prototype.notifyAdProgress=function(b){this._sink.notifyAdProgress(b);};EventBusSwitch.prototype.notifyAdPlayback=function(b){this._sink.notifyAdPlayback(b);};EventBusSwitch.prototype.notifyAdMediaFirstByte=function(b){this._sink.notifyAdMediaFirstByte(b);};EventBusSwitch.prototype.notifyAdReady=function(b){this._sink.notifyAdReady(b);};EventBusSwitch.prototype.notifyNoAd=function(b){this._sink.notifyNoAd(b);};EventBusSwitch.prototype.notifyNullAd=function(b){this._sink.notifyNullAd(b);};EventBusSwitch.prototype.notifyAdDeliveryError=function(b){this._sink.notifyAdDeliveryError(b);};EventBusSwitch.prototype.notifyAdStartError=function(b){this._sink.notifyAdStartError(b);};a.augment(EventBusSwitch,a.EventTarget);};a.com.yahoo.ads.plugin.EventBusSwitch=EventBusSwitch;},"1.0.0",{requires:["node"]});YUI.add("Loader",function(a){a.namespace("com.yahoo.ads.plugin");Loader=function(){var b=function(){};};a.augment(Loader,a.EventTarget);Loader.COMPLETE="COMPLETE";Loader.FAILURE="FAILURE";Loader.TIMEOUT="TIMEOUT";Loader.prototype.timeoutHandler=function(){this.fire(Loader.TIMEOUT);};Loader.prototype.failureHandler=function(){this.fire(Loader.FAILURE);};Loader.prototype.successHandler=function(c){var b=this.stringToFunction(this._className);this.instance=new b();this.fire(Loader.COMPLETE);};Loader.prototype.stringToFunction=function(f){var c=f.split(".");var e=(window||this);for(var d=0,b=c.length;d<b;d++){e=e[c[d]];}if(typeof e!=="function"){console.log("typeof "+f+" is "+typeof e);throw new Error("function not found");}return e;};Loader.prototype.getInstance=function(){return this.instance;};Loader.prototype.load=function(b,c){this._className=c;a.Get.script(b,{onSuccess:this.successHandler,onFailure:this.failureHandler,onTimeout:this.timeoutHandler,context:this});};Loader.prototype.unload=function(){};a.com.yahoo.ads.plugin.Loader=Loader;},"1.0.0",{requires:["node","ScopeLogger"]});YUI.add("MonitorBeaconer",function(a){a.namespace("com.yahoo.ads.plugin");MonitorBeaconer=function(){var X=a.com.yahoo.ads.communicator.Ad,ad=a.com.yahoo.ads.common.Constants;var e=null,B=null,al=null,aa=null,r=null;var j=null;var ak=null;var ag=null;var E=null;var Y=null;var af=null;var A=null;var H=null;var k=null;var ae=null;var b=null;var ab=null;var p=null;var ap=null;var y=null;var v=null;var J=null;var q=null;var I=null;var ao=null;var ac=null;var S=null;var P=null;var an=null;var D=null;var m=YWACode.CACHEHIT.FALSE;var O=YWACode.FALLBACK.FALSE;var C=null;var F=null;var g=null;var V=null;var f=null;var R="",M="",t="";var U=this;var u=false;var z=function(aq,au,at){var ar={};ar.profilerData=aq;ar.YWAData=au;ar.YAMASData=at;U.fire(MonitoringBeaconEvent.EVENT_NAME,new MonitoringBeaconEvent(MonitoringBeaconEvent.EVENT_METRIC,ar));};var am=function(ar,av,aw,at,aq){var au={};au.type=ar;au.message=av;au.timeDiff=aw;au.startTime=at;au.endTime=aq;return au;};var d=function(aq){if(!aq.isLoadingTime){aq.isLoadingTime=true;aq.startLoadingTime=(new Date()).getTime();}};var w=function(aq,ar){if(aq.isLoadingTime){aq.endLoadingTime=(new Date()).getTime();aq.diffLoadTime=aq.endLoadingTime-aq.startLoadingTime;if(ar){monitoringBeaconDict={};monitoringBeaconDict.env=MonitorBeaconer.OQS_ENV;monitoringBeaconDict[aq.metric]=aq.diffLoadTime;}aq.isLoadingTime=false;z(am(aq.profilerMetric,aq.msg,aq.diffLoadTime,aq.startLoadingTime,aq.endLoadingTime),null,null);}};var o=function(){var aq={};aq[YWACode.ADPLUGIN_VERSION]=ag;aq[YWACode.YVAP_ACCOUNT_ID]=E;
aq[YWACode.AD_OPP_TYPE]=S;aq[YWACode.AD_OPP_RULEID]=P;aq[YWACode.AD_OPP_TAKEN]=ao;aq[YWACode.AD_OPP_PLAYCN]=D;aq[YWACode.AD_POSITION]=an;aq[YWACode.AD_NETWORK_NAME]=ac;aq[YWACode.EVENT]=YWACode.AD_OPPORTUNITY;return aq;};var s=function(){var aq={};aq[YWACode.ADPLUGIN_VERSION]=ag;aq[YWACode.YVAP_ACCOUNT_ID]=E;aq[YWACode.AD_OPP_TYPE]=S;aq[YWACode.AD_OPP_RULEID]=P;aq[YWACode.AD_OPP_TAKEN]=ao;aq[YWACode.AD_OPP_PLAYCN]=D;aq[YWACode.AD_POSITION]=an;aq[YWACode.AD_NETWORK_NAME]=ac;aq.env=MonitorBeaconer.OQS_ENV;aq[YWACode.EVENT]=YWACode.AD_OPPORTUNITY;if(u===true){aq.timeout=1;}else{aq.timeout=2;}return aq;};var c=function(){var aq={};aq[YWACode.ADPLUGIN_VERSION]=ag;aq[YWACode.YVAP_ACCOUNT_ID]=E;aq[YWACode.EVENT]=YWACode.PLUGIN_INIT;return aq;};var Q=function(){var aq={};aq[YWACode.ADPLUGIN_VERSION]=ag;aq[YWACode.YVAP_ACCOUNT_ID]=E;aq[YWACode.AD_POSITION]=ae;aq[YWACode.AD_TEMPORAL_PLACEMENT]=b;aq[YWACode.AD_NETWORK_NAME]=k;aq[YWACode.AD_RESPONSE_TYPE]=A;aq[YWACode.AD_RESPONSE_CODE]=H;aq[YWACode.AD_REDIRECT]=q;aq[YWACode.REDIRECT_HOP]=I;aq[YWACode.AD_CALL_SEQUENCE]=ab;aq[YWACode.AD_CACHE_HIT]=m;aq[YWACode.EVENT]=YWACode.AD_CALL;aq[YWACode.YVAP_TIMEOUT_AT_ADCALL]=C;return aq;};var G=function(aq){var ar={};ar[YWACode.ADPLUGIN_VERSION]=ag;ar[YWACode.YVAP_ACCOUNT_ID]=E;ar[YWACode.AD_POSITION]=ae;ar[YWACode.AD_TEMPORAL_PLACEMENT]=b;ar[YWACode.AD_NETWORK_NAME]=k;ar[YWACode.AD_RESPONSE_TYPE]=A;ar[YWACode.AD_RESPONSE_CODE]=H;ar[aq.metric]=p;ar[YWACode.AD_REDIRECT]=q;ar[YWACode.REDIRECT_HOP]=I;ar[YWACode.AD_CALL_SEQUENCE]=ab;ar.adc=m;ar.env=MonitorBeaconer.OQS_ENV;ar[YWACode.EVENT]=YWACode.AD_CALL;ar.timeout=C;ar.cr=t;ar.bi=M;return ar;};var l=function(){var aq={};aq[YWACode.ADPLUGIN_VERSION]=ag;aq[YWACode.YVAP_ACCOUNT_ID]=E;aq[YWACode.AD_POSITION]=ae;aq[YWACode.AD_TEMPORAL_PLACEMENT]=b;aq[YWACode.AD_NETWORK_NAME]=k;aq[YWACode.AD_RESPONSE_TYPE]=A;aq[YWACode.AD_RESPONSE_CODE]=H;aq[YWACode.AD_REDIRECT]=q;aq[YWACode.REDIRECT_HOP]=I;aq[YWACode.AD_CALL_SEQUENCE]=ab;aq[YWACode.AD_MEDIA_START_LATENCY]=O;aq[YWACode.AD_CACHE_HIT]=m;aq[YWACode.EVENT]=YWACode.AD_START;aq[YWACode.YVAP_TIMEOUT_AT_ADSTART]=F;aq[YWACode.YVAP_TIMEOUT_AT_ADCALL]=C;return aq;};var W=function(aq){var ar={};ar[YWACode.ADPLUGIN_VERSION]=ag;ar[YWACode.YVAP_ACCOUNT_ID]=E;ar[YWACode.AD_POSITION]=ae;ar[YWACode.AD_TEMPORAL_PLACEMENT]=b;ar[YWACode.AD_NETWORK_NAME]=k;ar[YWACode.AD_RESPONSE_TYPE]=A;ar[YWACode.AD_RESPONSE_CODE]=H;ar[aq.metric]=v;ar[YWACode.AD_REDIRECT]=q;ar[YWACode.REDIRECT_HOP]=I;ar[YWACode.AD_CALL_SEQUENCE]=ab;ar.fb=O;ar.adc=m;ar.env=MonitorBeaconer.OQS_ENV;ar[YWACode.EVENT]=YWACode.AD_START;ar.timeout=F;if(u){ar.tta=ak.diffLoadTime;}ar.cr=t;ar.bi=M;return ar;};var i=function(){var aq={};aq[YWACode.ADPLUGIN_VERSION]=ag;aq[YWACode.YVAP_ACCOUNT_ID]=E;aq[YWACode.AD_POSITION]=ae;aq[YWACode.AD_TEMPORAL_PLACEMENT]=b;aq[YWACode.AD_NETWORK_NAME]=k;aq[YWACode.AD_RESPONSE_TYPE]=A;aq[YWACode.AD_RESPONSE_CODE]=H;aq[YWACode.AD_REDIRECT]=q;aq[YWACode.REDIRECT_HOP]=I;aq[YWACode.AD_CALL_SEQUENCE]=ab;aq.env=MonitorBeaconer.OQS_ENV;aq.fb=O;aq.adc=m;return aq;};var n=function(){var aq=i();aq[YWACode.EVENT]=YWACode.AD_START_ERROR;aq[YWACode.AD_START_ERROR_QOS]=V;return aq;};var x=function(){var aq=i();aq[YWACode.EVENT]=YWACode.AD_START_ERROR;aq[YWACode.AD_START_ERROR_YWA]=V;return aq;};var Z=function(){var aq=i();aq[YWACode.EVENT]=YWACode.AD_DELIVERY_ERROR;aq[YWACode.AD_DELIVERY_ERROR_YWA]=f;return aq;};var ah=function(){var aq=i();aq[YWACode.EVENT]=YWACode.AD_DELIVERY_ERROR;aq[YWACode.AD_DELIVERY_ERROR_QOS]=f;return aq;};var K=function(){var aq={};aq[YWACode.ADPLUGIN_VERSION]=ag;aq[YWACode.YVAP_ACCOUNT_ID]=E;aq[YWACode.AD_POSITION]=ae;aq[YWACode.AD_TEMPORAL_PLACEMENT]=b;aq[YWACode.AD_NETWORK_NAME]=k;aq[YWACode.AD_RESPONSE_TYPE]=A;aq[YWACode.AD_RESPONSE_CODE]=H;aq[YWACode.AD_REDIRECT]=q;aq[YWACode.REDIRECT_HOP]=I;aq[YWACode.AD_CALL_SEQUENCE]=ab;aq[YWACode.AD_MEDIA_START_LATENCY]=J;aq[YWACode.AD_MEDIA_START_LATENCY]=O;aq[YWACode.AD_CACHE_HIT]=m;aq[YWACode.EVENT]=YWACode.AD_MEDIA_START;return aq;};var T=function(aq){var ar={};ar[YWACode.ADPLUGIN_VERSION]=ag;ar[YWACode.YVAP_ACCOUNT_ID]=E;ar[YWACode.AD_POSITION]=ae;ar[YWACode.AD_TEMPORAL_PLACEMENT]=b;ar[YWACode.AD_NETWORK_NAME]=k;ar[YWACode.AD_RESPONSE_TYPE]=A;ar[YWACode.AD_RESPONSE_CODE]=H;ar[YWACode.AD_REDIRECT]=q;ar[YWACode.REDIRECT_HOP]=I;ar[YWACode.AD_CALL_SEQUENCE]=ab;ar[aq.metric]=J;ar.fb=O;ar.adc=m;ar.env=MonitorBeaconer.OQS_ENV;ar[YWACode.EVENT]=YWACode.AD_MEDIA_START;if(u===true){ar.timeout=1;}else{ar.timeout=2;}ar.ms=R;ar.cr=t;ar.bi=M;return ar;};var L=function(aq){var ar={};ar[YWACode.ADPLUGIN_VERSION]=ag;ar[YWACode.YVAP_ACCOUNT_ID]=E;ar[YWACode.AD_POSITION]=ae;ar[YWACode.AD_TEMPORAL_PLACEMENT]=b;ar[YWACode.AD_NETWORK_NAME]=k;ar[YWACode.AD_RESPONSE_TYPE]=A;ar[YWACode.AD_RESPONSE_CODE]=H;ar[YWACode.AD_REDIRECT]=q;ar[YWACode.REDIRECT_HOP]=I;ar[aq.metric]=aq.diffLoadTime;ar.fb=O;ar.adc=m;ar.env=MonitorBeaconer.OQS_ENV;ar[YWACode.AD_CALL_SEQUENCE]=ab;if(u===true){ar.timeout=1;}else{ar.timeout=2;}return ar;};var N=function(){A="";H="";k="";ae="";b="";p="";q="";I="";ab="";};var h=function(aq){if(aq.mActionParams.id=="bumper"){return"BMPR";}else{if(aq.mActionParams.id=="overlay"||aq.mActionParams.id.indexOf("overlayC2V")>-1||aq.mActionParams.id.indexOf("overlayC2S")>-1){return"VIDO";}else{if(aq.mActionParams.id.indexOf("clickable")>-1||aq.mActionParams.id.indexOf("interactive")>-1||aq.mActionParams.id.indexOf("asq")>-1||aq.mActionParams.id.indexOf("interavtive-4s")>-1){return"VID";}}}return null;};var aj=function(at){var ar=at.getType();var aq=at.getSubType();if(ar&&ar.length>0){return ar;}else{if(aq&&aq.length>0){return aq;}else{if(at.mActionParams.id=="overlay"||at.mActionParams.id.indexOf("overlayC2V")>-1||at.mActionParams.id.indexOf("overlayC2S")>-1){return"overlay";}else{return"midroll";}}}};var ai=function(at,ar){var aq=ErrorCode[at],aw,ax,av,au;if(aq){monitoringBeaconDict={};monitoringBeaconDict.env=MonitorBeaconer.OQS_ENV;monitoringBeaconDict[aq]="";z(null,null,monitoringBeaconDict);}if(at==MonitoringBeaconEvent.EVENT_ERR_ADCALL){if(!j){j={};
}j.code=YWACode.RESPONSE_CODE.AD_CALL_ERROR;j.type=YWACode.RESPONSE_TYPE.ERROR;if(ar){aw=ar;ax=aw.getRedirect();j.redirect=ax.targetTag;j.redirectCount=ax.count;}}else{if(at===MonitoringBeaconEvent.EVENT_ERR_SSL_NOT_SUPPORTED){if(!j){j={};}j.code=YWACode.RESPONSE_CODE.SSL_NOT_SUPPORTED;j.type=YWACode.RESPONSE_TYPE.ERROR;if(ar){aw=ar;ax=aw.getRedirect();j.redirect=ax.targetTag;j.redirectCount=ax.count;}}else{if(at==MonitoringBeaconEvent.EVENT_ERR_AD_TIMEOUT){if(!j){j={};}j.code=YWACode.RESPONSE_CODE.AD_CALL_TIMEOUT;j.type=YWACode.RESPONSE_TYPE.ERROR;if(ar){aw=ar;ax=aw.getRedirect();j.redirect=ax.targetTag;j.redirectCount=ax.count;}}else{if(at===MonitoringBeaconEvent.EVENT_ERR_VMAP_PARSING){if(!j){j={};}j.code=YWACode.RESPONSE_CODE.VMAP_PARSE_ERROR;j.type=YWACode.RESPONSE_TYPE.VAST;if(ar){aw=ar;ax=aw.getRedirect();j.redirect=ax.targetTag;j.redirectCount=ax.count;}}else{if(at===MonitoringBeaconEvent.EVENT_ERR_PARSING){if(!j){j={};}j.code=YWACode.RESPONSE_CODE.PARSE_ERROR;j.type=YWACode.RESPONSE_TYPE.ERROR;if(ar){aw=ar;ax=aw.getRedirect();j.redirect=ax.targetTag;j.redirectCount=ax.count;}}else{if(at===MonitoringBeaconEvent.EVENT_AD_START_ERROR){V=YWACode.AD_START_ERROR_CODES[ar.data];av=n();au=x();z(null,au,av);}else{if(at===MonitoringBeaconEvent.EVENT_AD_DELIVERY_ERROR){f=YWACode.AD_DELIVERY_ERROR_CODES[ar.data];av=ah();au=Z();z(null,au,av);}}}}}}}};this.handleAction=function(aB){var av=aB.getAction(),aw,aA,aq,aE,at,aD,au,aC,ax,ar,az,ay;aA=aB.getBeaconData();if(av==MonitoringBeaconEvent.EVENT_PLUGIN_INIT){E=aA.account_id;ag=aA.version;}else{if(av==MonitoringBeaconEvent.EVENT_ADCALL){u=false;e={};e.isLoadingTime=false;d(e);N();au=aA;b=aj(au);ae=h(au);k=aA.communicatorName;ab=(aA.retryCount+1);R="";}else{if(av==MonitoringBeaconEvent.EVENT_ADCALLEND){if(e&&e.isLoadingTime){e.metric="adl";e.profilerMetric=MonitorBeaconer.YVAP_ADCALL_LOAD_LATENCY;e.msg="Time taken to load ad from AD Network";w(e,true);p=e.diffLoadTime;A=j.type;H=j.code;q=j.redirect;I=j.redirectCount;m=j.cacheHit;O=j.fallback;k=aA;C=(u===true)?YWACode.TRUE:YWACode.FALSE;t=j.creativeId||"";M=j.bookingId||"";aE=Q();aq=G(e);z(null,aE,aq);}j=null;}else{if(av==MonitoringBeaconEvent.EVENT_ADOPPORTUNITY){ao=aA.taken?MonitorBeaconer.YVAP_AD_OPPORTUNITY_TAKEN:MonitorBeaconer.YVAP_AD_OPPORTUNITY_NOT_TAKEN;S=aA.type;P=aA.rulesetId;D=aA.playContext;an=aA.oppPosition;ac=aA.networkName;aE=o();aq=s();z(null,aE,aq);}else{if(av==MonitoringBeaconEvent.EVENT_CLIPCHANGE){B={};B.isLoadingTime=false;d(B);}else{if(av==MonitoringBeaconEvent.EVENT_ADSTART){B.metric="asl";B.profilerMetric=MonitorBeaconer.YVAP_ADSTART_LATENCY;B.msg="Time taken to start an Ad after beginAdExperience";at=B.isLoadingTime;w(B,true);if(u){ak.metric="tta";ak.msg="Time taken for Ad start after timeout.";ak.profilerMetric=MonitorBeaconer.YVAP_TIMEOUT_TO_ADSTART_LATENCY;w(ak,false);}if(at){v=B.diffLoadTime;F=(u===true)?YWACode.TRUE:YWACode.FALSE;aE=l();aq=W(B);z(null,aE,aq);al={};al.isLoadingTime=false;d(al);if(r&&!r.isLoadingTime){r.metric="avl";r.diffLoadTime=B.endLoadingTime-r.startLoadingTime;aw=L(r);z(null,null,aw);r=null;}}}else{if(av==MonitoringBeaconEvent.EVENT_ADDELIVERED){if(al){al.metric="aml";ar=al.isLoadingTime;w(al,true);if(ar){J=al.diffLoadTime;if(aA){ay=aA.mediaUrl;if(typeof ay===ad.TYPEOF.STRING){R=ay.toLowerCase().indexOf("atlas")!==-1?"A":"M";}}aE=K();aq=T(al);z(null,aE,aq);}}}else{if(av==MonitoringBeaconEvent.EVENT_VALID_AD){if(!j){j={};}if(!aA||!aA.ad){return;}aD=aA.ad;j.code=YWACode.RESPONSE_CODE.AD;j.type=YWACode.RESPONSE_TYPE.VAST;au=aD.getSpec();az=au.getRedirect();if(typeof az!=="undefined"&&az!==null){j.redirect=az.targetTag;j.redirectCount=az.count;}if(!aD.isVast()){j.type=YWACode.RESPONSE_TYPE.NON_VAST;}else{if(aD.getType()==X.TYPE.VPAID){j.type=YWACode.RESPONSE_TYPE.VPAID;}}ax=aD.isFallback();j.fallback=(ax===true)?YWACode.FALLBACK.TRUE:YWACode.FALLBACK.FALSE;aC=aD.isCached();j.cacheHit=(aC===true)?YWACode.CACHEHIT.TRUE:YWACode.CACHEHIT.FALSE;j.creativeId=aD.getCreativeId();j.bookingId=aD.getBookingId();}else{if(av==MonitoringBeaconEvent.EVENT_NOAD){if(!j){j={};}if(!aA||!aA.adSpec){return;}aD=aA.ad;j.code=YWACode.RESPONSE_CODE.NO_AD;j.type=YWACode.RESPONSE_TYPE.VAST;if(!aD.isVast()){j.type=YWACode.RESPONSE_TYPE.NON_VAST;}else{if(aD.getType()==X.TYPE.VPAID){j.type=YWACode.RESPONSE_TYPE.VPAID;}}au=aA.adSpec;az=au.getRedirect();if(typeof az!=="undefined"&&az!==null){j.redirect=az.targetTag;j.redirectCount=az.count;}if(!aA.ad){return;}aD=aA.ad;ax=aD.isFallback();j.fallback=(ax===true)?YWACode.FALLBACK.TRUE:YWACode.FALLBACK.FALSE;aC=aD.isCached();j.cacheHit=(aC===true)?YWACode.CACHEHIT.TRUE:YWACode.CACHEHIT.FALSE;}else{if(av==MonitoringBeaconEvent.EVENT_VPAID_SWFLOAD_START){r={};r.isLoadingTime=false;d(r);}else{if(av==MonitoringBeaconEvent.EVENT_VPAID_SWFLOAD_END){if(r&&r.isLoadingTime){r.metric="vsl";r.profilerMetric=MonitorBeaconer.YVAP_VPAIDSWF_LOAD_LATENCY;r.msg="Time taken to load vpaid swf from network";w(r,true);aw=L(r);z(null,null,aw);}}else{if(av===MonitoringBeaconEvent.EVENT_PLAYER_TIMEOUT){u=true;ak={};ak.isLoadingTime=false;d(ak);}else{ai(av,aA);}}}}}}}}}}}}};this.getMonitoringData=function(){var aq={};aq[YWACode.ADPLUGIN_VERSION]=ag;aq[YWACode.YVAP_ACCOUNT_ID]=E;aq[YWACode.AD_RESPONSE_TYPE]=A;aq[YWACode.AD_RESPONSE_CODE]=H;aq[YWACode.AD_NETWORK_NAME]=k;aq[YWACode.AD_POSITION]=ae;aq[YWACode.AD_TEMPORAL_PLACEMENT]=b;aq[YWACode.AD_CALL_SEQUENCE]=ab;aq[YWACode.AD_CALL_LATENCY]=p;aq[YWACode.AD_START_LATENCY]=v;aq[YWACode.AD_MEDIA_START_LATENCY]=J;aq[YWACode.AD_REDIRECT]=q;aq[YWACode.REDIRECT_HOP]=I;aq[YWACode.AD_OPP_TAKEN]=ao;aq[YWACode.AD_NETWORK_NAME]=ac;aq[YWACode.AD_OPP_TYPE]=S;aq[YWACode.AD_OPP_RULEID]=P;aq[YWACode.AD_POSITION]=an;aq[YWACode.AD_OPP_PLAYCN]=D;aq[YWACode.AD_CACHE_HIT]=m;aq[YWACode.AD_FALLBACK]=O;return aq;};};MonitorBeaconer.BUCKET_PATH="/3/qos";MonitorBeaconer.MANHATTAN_BASE_URL="http://qos.video.yimg.com";MonitorBeaconer.OQS_ENV="p";MonitorBeaconer.YVAP_PATH="/yvap";MonitorBeaconer.YWA_BASE_URL="http://z.analytics.yahoo.com/p.pl";
MonitorBeaconer.YWA_PROJECT_ID="1000115488662";MonitorBeaconer.YAMAS="YVAP_YAMAS";MonitorBeaconer.YWA="YVAP_YWA";MonitorBeaconer.YVAP_ADCALL_LOAD_LATENCY="YVAP_ADCALL_LOAD_LATENCY";MonitorBeaconer.YVAP_QUERY_LOAD_LATENCY="YVAP_QUERY_LOAD_LATENCY";MonitorBeaconer.YVAP_QUERY_PROCESS_LATENCY="YVAP_QUERY_PROCESS_LATENCY";MonitorBeaconer.YVAP_COMM_LOAD_LATENCY="YVAP_COMM_LOAD_LATENCY";MonitorBeaconer.YVAP_ADSTART_LATENCY="YVAP_ADSTART_LATENCY";MonitorBeaconer.YVAP_PLUGIN_READY_LATENCY="YVAP_PLUGIN_READY_LATENCY";MonitorBeaconer.YVAP_VPAIDSWF_LOAD_LATENCY="YVAP_VPAIDSWF_LOAD_LATENCY";MonitorBeaconer.YVAP_TIMEOUT_TO_ADSTART_LATENCY="YVAP_TIMEOUT_TO_ADSTART_LATENCY";MonitorBeaconer.YVAP_AD_OPPORTUNITY_TAKEN=1;MonitorBeaconer.YVAP_AD_OPPORTUNITY_NOT_TAKEN=2;a.augment(MonitorBeaconer,a.EventTarget);a.com.yahoo.ads.plugin.MonitorBeaconer=MonitorBeaconer;},"1.0.0",{requires:["node","io-base","ErrorCode","YWACode","MonitoringBeaconEvent","ScopeLogger","Constants"]});YUI.add("MonitoringBeaconEvent",function(a){a.namespace("com.yahoo.ads.plugin");MonitoringBeaconEvent=function(e,d){var c=d;var b=e;this.setBeaconData=function(f){c=f;};this.getBeaconData=function(){return c;};this.setAction=function(f){b=f;};this.getAction=function(){return b;};this.getName=function(){return MonitoringBeaconEvent.EVENT_NAME;};};MonitoringBeaconEvent.EVENT_NAME="MonitoringBeaconEvent";MonitoringBeaconEvent.EVENT_PLUGIN_INIT="PluginInit";MonitoringBeaconEvent.EVENT_PLUGINLOAD_START="PluginLoadStart";MonitoringBeaconEvent.EVENT_PLUGINLOAD_END="PluginLoadEnd";MonitoringBeaconEvent.EVENT_COMMLOAD_START="CommunicatorLoadStart";MonitoringBeaconEvent.EVENT_COMMLOAD_END="CommunicatorLoadEnd";MonitoringBeaconEvent.EVENT_ADCALLLOAD_START="AdCallLoadStart";MonitoringBeaconEvent.EVENT_ADCALLLOAD_END="AdCallLoadEnd";MonitoringBeaconEvent.EVENT_QUERYLOAD_START="QueryLoadStart";MonitoringBeaconEvent.EVENT_QUERYLOAD_END="QueryLoadEnd";MonitoringBeaconEvent.EVENT_QUERYPROCESS_START="QueryProcessStart";MonitoringBeaconEvent.EVENT_QUERYPROCESS_END="QueryProcessEnd";MonitoringBeaconEvent.EVENT_CONTENTCOMPLETE="ContentComplete";MonitoringBeaconEvent.EVENT_PODSTART="PodStart";MonitoringBeaconEvent.EVENT_CLIPCHANGE="ClipChange";MonitoringBeaconEvent.EVENT_ADSTART="AdStart";MonitoringBeaconEvent.EVENT_VALID_AD="ValidAd";MonitoringBeaconEvent.EVENT_NOAD="NoAd";MonitoringBeaconEvent.EVENT_NULLAD="NullAd";MonitoringBeaconEvent.EVENT_ADCALL="AdCall";MonitoringBeaconEvent.EVENT_ADCALLEND="AdCallEnd";MonitoringBeaconEvent.EVENT_ADOPPORTUNITY="AdOpportunity";MonitoringBeaconEvent.EVENT_ADDELIVERED="AdDelivered";MonitoringBeaconEvent.EVENT_VPAID_SWFLOAD_START="VPaidSwfLoadStart";MonitoringBeaconEvent.EVENT_VPAID_SWFLOAD_END="VPaidSwfLoadEnd";MonitoringBeaconEvent.EVENT_PLAYER_TIMEOUT="PlayerTimeOut";MonitoringBeaconEvent.EVENT_ERR_PlUGIN_INIT="PluginInitError";MonitoringBeaconEvent.EVENT_ERR_COMM_LOAD="CommunicatorLoadError";MonitoringBeaconEvent.EVENT_ERR_COMM_INT="CommunicatorInternalError";MonitoringBeaconEvent.EVENT_ERR_COMM_TIMEOUT="CommunicatorTimeoutError";MonitoringBeaconEvent.EVENT_ERR_VMAP_PARSING="VmapParsing";MonitoringBeaconEvent.EVENT_ERR_PARSING="ParsingError";MonitoringBeaconEvent.EVENT_ERR_QUERY_LOAD="QueryLoadError";MonitoringBeaconEvent.EVENT_ERR_QUERY_INT="QueryInternalError";MonitoringBeaconEvent.EVENT_ERR_QUERY_TIMEOUT="QueryTimeoutError";MonitoringBeaconEvent.EVENT_ERR_AD_INT="AdInternalError";MonitoringBeaconEvent.EVENT_ERR_AD_TIMEOUT="AdTimeoutError";MonitoringBeaconEvent.EVENT_ERR_AD_LOAD="AdLoadError";MonitoringBeaconEvent.EVENT_ERR_ADCALL="AdCallError";MonitoringBeaconEvent.EVENT_ERR_SSL_NOT_SUPPORTED="SSLNotSupported";MonitoringBeaconEvent.EVENT_PROFILER="AdPluginProfiler";MonitoringBeaconEvent.EVENT_METRIC="AdPluginMetric";MonitoringBeaconEvent.EVENT_AD_DELIVERY_ERROR="AdDeliveryError";MonitoringBeaconEvent.EVENT_AD_START_ERROR="AdStartError";a.com.yahoo.ads.plugin.MonitoringBeaconEvent=MonitoringBeaconEvent;},"1.0.0",{requires:["node"]});YUI.add("SessionTimer",function(a){a.namespace("com.yahoo.ads.plugin");SessionTimer=function(b,m){var e=0;var f=1;var g=10;var i=1000;var k=b;var j=0;var c=0;var l="";var d="";var h=[];if(m){d=getTimer();l=setInterval(intervalCallback,g);c=e;}else{c=f;}this._getId=function(){return k;};this._getElapsed=function(){return j;};this._getState=function(){return c;};this._getIntervalId=function(){return l;};this._getLastTimerPos=function(){return d;};this._getQuepoints=function(){return h;};this._setId=function(n){k=n;};this._setElapsed=function(n){j=n;};this._setState=function(n){c=n;};this._setIntervalId=function(){h=val;};this._setLastTimerPos=function(n){d=n;};this._setQuepoints=function(){h=val;};};SessionTimer.prototype.addQuepoint=function(c){var d=this._getQuepoints()[c.time];if(!d){d=[];this._getQuepoints()[c.time]=d;}d.push(c);for(var b in this._getQuepoints()){}};SessionTimer.prototype.getId=function(){return this._getId();};SessionTimer.prototype.pause=function(){if(this._getState()===STATE_RUNNING){clearInterval(this._getIntervalId());var b=getTimer();this._setElapsed(this._getElapsed+(b-mLastTimerPos)/1000);this._setLastTimerPos(0);this._setState(STATE_PAUSED);this.notifyPAUSED();}};SessionTimer.prototype.resume=function(){if(this._getState()===STATE_PAUSED){this._setState(STATE_RUNNING);this._setLastTimerPos(getTimer());this._setIntervalId(setInterval(this.intervalCallback,UPDATE_INTERVAL));this.notifyRESUMED();}};SessionTimer.prototype.getElapsed=function(){return Math.floor(this._getElapsed()*(1000/REFRESH_RESOLUTION))/(1000/REFRESH_RESOLUTION);};SessionTimer.prototype.reset=function(){this._setElapsed(0);this.notifyADVANCED();};SessionTimer.prototype.intervalCallback=function(){var e=getTimer();if(this._getLastTimerPos!==0){this._setElapsed(this._getElapsed()+(e-mLastTimerPos)/1000);}var f=false;if(Math.floor(e/REFRESH_RESOLUTION)-Math.floor(this._getLastTimerPos()/REFRESH_RESOLUTION)>0){f=true;}this._setLastTimerPos(e);if(f){this.notifyADVANCED();}var d=this._getQuepoints()[Math.floor(this._getElapsed())];
if(d){for(var c in d){var b=d[c];if(!b.fired||b.fired===false){b.fired=true;this.notifyCUEPOINT();}}}};SessionTimer.prototype.getTotalTime=function(){return null;};SessionTimer.prototype.notifyCOMPLETE=function(){this.fire("complete");};SessionTimer.prototype.notifyPAUSED=function(){this.fire("paused");};SessionTimer.prototype.notifyRESUMED=function(){this.fire("resumed");};SessionTimer.prototype.notifyADVANCED=function(){this.fire("advanced");};SessionTimer.prototype.notifyCUEPOINT=function(){this.fire("cuepoint");};a.augment(SessionTimer,a.EventTarget);a.com.yahoo.ads.plugin.SessionTimer=SessionTimer;},"1.0.0",{requires:["node","SessionTimer","ScopeLogger","event-custom"]});YUI.add("StreamAdManager",function(b){b.namespace("com.yahoo.ads");var a=function(d,c){this._bitrateSend=false;this.rules={};this._plugin=d;this.config=c;this.expandBeacon=function(e,h){var j,f=/\{(\w)+\}/g,g=h.getParams();var i=function(m){var o=/(\w)+/g,k=m.match(o),n=k[0],p="";if(n.toLowerCase()==="beap_client_event"){for(var l in g){p+=l+"$"+g[l]+",";}p=p.substring(0,p.length-1);return p;}else{if(n.toLowerCase()==="1x1pixel"){return PIXEL_URL;}else{if(typeof g[n]!=="undefined"&&g[n]!==null){return g[n];}else{isBeaconExpansionOk=false;return m;}}}};j=e.replace(f,i);return j;};this.sendBeacon=function(e){if(e){var f=document.createElement("img");f.src=e;f.style.display="none";}};};a.prototype.setSink=function(d){var c=this;this._sink=d;this._sink.on(_CONSTANTS.VolumeChangedEvent,function(){c.redispatch(_CONSTANTS.VolumeChangedEvent,arguments);});this._sink.on(_CONSTANTS.ClientInfoChangedEvent,this.redispatch);this._sink.on(_CONSTANTS.ControlTweenEvent,this.redispatch);this._sink.on(_CONSTANTS.EVENT_CONTENT_COMPLETE,this.redispatch);};a.prototype.getSink=function(c){return this._sink;};a.prototype.redispatch=function(c){this.fire(c,arguments);};a.prototype.notifyAdRendered=function(){this._sink.notifyAdRendered();};a.prototype.notifyVideoAdStart=function(c){this._sink.notifyVideoAdStart(c);};a.prototype.notifyVideoAdEnd=function(){this._sink.notifyVideoAdEnd();};a.prototype.notifyOverlayStart=function(){this._sink.notifyOverlayStart();};a.prototype.notifyOverlayEnd=function(){this._sink.notifyOverlayEnd();};a.prototype.notifyPluginReady=function(){this._sink.notifyPluginReady();};a.prototype.notifyMetricsEvent=function(c){this._sink.notifyMetricsEvent(c);};a.prototype.notifyAdMetricsEvent=function(d){var m,k,e,f,g,c=d.getEventId(),j=d.getEventData(),l=(c.toLowerCase()==="impression")?j:c;if(l==="bitrate"&&this._bitrateSend){return;}m=d.getAd();if(typeof m.beacons!=="undefined"&&m.beacons!==null){k=m.beacons[l];if(typeof k!=="undefined"&&k!==null){e="";for(var h=0;h<k.length;h++){f=k[h];g=f.url;e=this.expandBeacon(g,d);this.sendBeacon(e);}}}if(l==="bitrate"){this._bitrateSend=true;}};a.prototype.notifyUnlockPlaylist=function(c){this._sink.notifyUnlockPlaylist(c);};a.prototype.notifyAdProgress=function(c){this._sink.notifyAdProgress(c);};a.prototype.notifyAdPlayback=function(c){this._sink.notifyAdPlayback(c);};a.prototype.notifyAdMediaFirstByte=function(c){this._sink.notifyAdMediaFirstByte(c);};a.prototype.notifyAdReady=function(c){this._sink.notifyAdReady(c);};a.prototype.notifyNoAd=function(c){this._sink.notifyNoAd(c);};a.prototype.notifyNullAd=function(c){this._sink.notifyNullAd(c);};a.prototype.beginAd=function(){var e=this.config.streamAd.xml,d=new b.com.yahoo.ads.communicator.Ad(),f=new b.com.yahoo.ads.communicator.parser.ParserManager(),c=f.parseAd(e,d)[0];this._plugin.notifyAdReady(c);};b.augment(a,b.EventTarget);b.com.yahoo.ads.StreamAdManager=a;},"1.0.0",{});YUI.add("Timer",function(a){a.namespace("com.yahoo.ads.plugin");Timer=function(c,b){this._timer=null;this._count=0;this._tickQueue=[];this._completeQueue=[];this._running=false;this._repeatCount=b;this._delay=c;};Timer.prototype.getTimeout=function(){var b=1;if(this._count>1){b=this._count;}return this._delay*b;};Timer.prototype.processQueue=function(c){if(c&&c.length>0){for(var e=0;e<c.length;e++){var g=c[e];var b=g.context;var f=g.method;if(!f){return;}var d=g.args;if(d&&d.length>0){f.apply(b,d);}else{if(b){f.apply(b);}else{f.call();}}}}};Timer.prototype.processTickQueue=function(){this._count++;if(this._count>=this._repeatCount){this.processCompleteQueue();}else{this.processQueue(this._tickQueue);}};Timer.prototype.processCompleteQueue=function(){if(this._timer){this._timer.cancel();}this._running=false;this.processQueue(this._completeQueue);};Timer.prototype.running=function(){return this._running;};Timer.prototype.reset=function(){this._timer.cancel();this._count=0;};Timer.prototype.start=function(){this._running=true;var b=false;if(this._repeatCount>0){b=true;}this._timer=a.later(this._delay,this,this.processTickQueue,null,b);};Timer.prototype.stop=function(){this.processCompleteQueue();};Timer.prototype.addFunctionOnTick=function(b,d,c){this._tickQueue.push({context:b,method:d,args:c});};Timer.prototype.addFunctionOnComplete=function(b,d,c){this._completeQueue.push({context:b,method:d,args:c});};a.com.yahoo.ads.plugin.Timer=Timer;},"1.0.0",{requires:["node"]});YUI.add("YEPVideoTimeline",function(a){a.namespace("com.yahoo.ads.plugin");YEPVideoTimeline=function(){YEPVideoTimeline.superclass.constructor.call(this,"videoTimeline",false);var d=0;var b=0;var c=-1;this.setTotalDuration=function(e){d=e;};this.setPlayheadPosition=function(f){b=f;var e=Math.floor(b);if(Math.abs(e-c)>0){c=e;this.notifyADVANCED();}};this.getElapsed=function(){return c;};this.getTotalDuration=function(){return d;};this.pause=function(){this.notifyPAUSED();};this.resume=function(){this.notifyRESUMED();};};a.augment(YEPVideoTimeline,a.EventTarget);a.extend(YEPVideoTimeline,a.com.yahoo.ads.plugin.SessionTimer);a.com.yahoo.ads.plugin.YEPVideoTimeline=YEPVideoTimeline;},"1.0.0",{requires:["node","SessionTimer","ScopeLogger","event-custom"]});YUI.add("YWACode",function(a){a.namespace("com.yahoo.ads.plugin");YWACode=function(){};YWACode.EVENT="vx";YWACode.ADPLUGIN_VERSION="cf02";YWACode.YVAP_ACCOUNT_ID="cf03";
YWACode.AD_RESPONSE_CODE="cf47";YWACode.AD_RESPONSE_TYPE="cf48";YWACode.AD_NETWORK_NAME="cf60";YWACode.AD_POSITION="cf65";YWACode.AD_REDIRECT="cf66";YWACode.YVAP_TIMEOUT_AT_ADCALL="cf67";YWACode.AD_TEMPORAL_PLACEMENT="cf68";YWACode.YVAP_TIMEOUT_AT_ADSTART="cf69";YWACode.REDIRECT_HOP="cf70";YWACode.AD_OPP_TYPE="cf80";YWACode.AD_OPP_RULEID="cf81";YWACode.AD_OPP_TAKEN="cf82";YWACode.AD_OPP_PLAYCN="cf61";YWACode.AD_CALL_SEQUENCE="cf84";YWACode.AD_MEDIA_START_LATENCY="cf56";YWACode.AD_CACHE_HIT="cf250";YWACode.AD_START_ERROR_YWA="cf92";YWACode.AD_DELIVERY_ERROR_YWA="cf93";YWACode.AD_CALL="7";YWACode.PLUGIN_INIT="8";YWACode.AD_MEDIA_START="11";YWACode.AD_START="12";YWACode.AD_OPPORTUNITY="16";YWACode.AD_START_ERROR="17";YWACode.AD_DELIVERY_ERROR="18";YWACode.AD_FALLBACK="fb";YWACode.AD_CALL_LATENCY="adl";YWACode.AD_START_LATENCY="asl";YWACode.AD_START_ERROR_QOS="asec";YWACode.AD_DELIVERY_ERROR_QOS="adec";YWACode.AD_START_ERROR_CODES={FLASH_SECURITY_ERROR:109,FLASH_IO_ERROR:110,FLASH_ASYNC_ERROR:111,FLASH_GENERIC_ERROR:112,FLASH_VPAID_ERROR:113,INCOMPATIBLE_MEDIA:120};YWACode.AD_DELIVERY_ERROR_CODES={FLASH_MEDIA_PLAYBACK_ERROR:114,FLASH_SECURITY_ERROR:115,FLASH_IO_ERROR:116,FLASH_ASYNC_ERROR:117};YWACode.RESPONSE_CODE={NO_AD:1,AD:2,AD_CALL_TIMEOUT:102,AD_CALL_ERROR:104,SSL_NOT_SUPPORTED:121,ADPLUGIN_TIMEOUT:105,VMAP_PARSE_ERROR:107,PARSE_ERROR:108};YWACode.RESPONSE_TYPE={NON_VAST:1,VAST:2,NO_AD:3,VPAID:4,ERROR:106};YWACode.FALLBACK={TRUE:1,FALSE:2};YWACode.CACHEHIT={TRUE:1,FALSE:2};YWACode.TRUE=1;YWACode.FALSE=2;a.com.yahoo.ads.plugin.YWACode=YWACode;},"1.0.0",{requires:["node"]});YUI.add("AdRenderer",function(a){a.namespace("com.yahoo.ads.renderer");AdRenderer=function(){var g=null;this._container=null;var j=null;var o=null;var l=null;var p=0;var f=false;var d=false;var h=null;var k=null;var i=null;var n=null;AdEvent=a.com.yahoo.ads.event.AdEvents;BeaconEventData=a.com.yahoo.ads.event.BeaconEventData;_CONSTANTS=a.com.yahoo.ads.common.Constants;var c=null;var e=null;var m=this;this.configureEventBusListeners=function(){l.on(_CONSTANTS.ClientInfoChangedEvent,this.onClientInfoChanged,this);l.on(_CONSTANTS.EVENT_CONTENT_COMPLETE,this.onContentVideoComplete,this);l.on(_CONSTANTS.ControlTweenEvent,this.onClientInfoChanged,this);l.on(_CONSTANTS.VolumeChangedEvent,this.setCreativeVolume,this);};this.removeEventBusListeners=function(){l.detach(_CONSTANTS.ClientInfoChangedEvent,this.onClientInfoChanged);l.detach(_CONSTANTS.EVENT_CONTENT_COMPLETE,this.onContentVideoComplete);l.detach(_CONSTANTS.ControlTweenEvent,this.onClientInfoChanged);l.detach(_CONSTANTS.VolumeChangedEvent,this.setCreativeVolume);};this.configureTemplateListeners=function(q){q.on(AdEvent.AdStarted,this.onAdStarted,this);q.on(AdEvent.AdStopped,this.onAdStopped,this);q.on(AdEvent.AdProgress,this.onAdProgress,this);q.on(AdEvent.AdPlayback,this.onAdPlayback,this);q.on(AdEvent.AdMediaFirstByte,this.onAdMediaFirstByte,this);q.on(AdEvent.AdLinearChange,this.onAdLinearChange,this);q.on(AdEvent.AdExpandedChange,this.onAdExpandedChange,this);q.on(AdEvent.AdRemainingTimeChange,this.onAdRemainingTimeChange,this);q.on(AdEvent.AdVolumeChange,this.onAdVolumeChange,this);q.on(AdEvent.AdMouseOver,this.notifyMetrics,this);q.on(AdEvent.AdClick,this.notifyMetrics,this);q.on(AdEvent.AdImpression,this.notifyMetrics,this);q.on(AdEvent.AdClickThru,this.notifyMetrics,this);q.on(AdEvent.AdVideoStart,this.notifyMetrics,this);q.on(AdEvent.AdVideoFirstQuartile,this.notifyMetrics,this);q.on(AdEvent.AdVideoMidpoint,this.notifyMetrics,this);q.on(AdEvent.AdVideoThirdQuartile,this.notifyMetrics,this);q.on(AdEvent.AdVideoComplete,this.notifyMetrics,this);q.on(BeaconEventData.BITRATE,this.notifyMetrics,this);q.on(BeaconEventData.CPCV,this.notifyMetrics,this);q.on(AdEvent.AdUserAcceptInvitation,this.onAdUserAcceptInvitation,this);q.on(AdEvent.AdUserMinimize,this.onAdUserMinimize,this);q.on(AdEvent.AdUserClose,this.onAdUserClose,this);q.on(AdEvent.AdPaused,this.onAdPaused,this);q.on(AdEvent.AdPlaying,this.onAdPlaying,this);q.on(AdEvent.AdError,this.onAdError,this);q.on(AdEvent.AdLog,this.onAdLog,this);};this.removeTemplateListeners=function(q){q.detach(AdEvent.AdStarted);q.detach(AdEvent.AdStopped);q.detach(AdEvent.AdProgress);q.detach(AdEvent.AdPlayback);q.detach(AdEvent.AdMediaFirstByte);q.detach(AdEvent.AdLinearChange);q.detach(AdEvent.AdExpandedChange);q.detach(AdEvent.AdRemainingTimeChange);q.detach(AdEvent.AdVolumeChange);q.detach(AdEvent.AdMouseOver);q.detach(AdEvent.AdClick);q.detach(AdEvent.AdImpression);q.detach(AdEvent.AdClickThru);q.detach(AdEvent.AdVideoStart);q.detach(AdEvent.AdVideoFirstQuartile);q.detach(AdEvent.AdVideoMidpoint);q.detach(AdEvent.AdVideoThirdQuartile);q.detach(AdEvent.AdVideoComplete);q.detach(BeaconEventData.BITRATE);q.detach(BeaconEventData.CPCV);q.detach(AdEvent.AdUserAcceptInvitation);q.detach(AdEvent.AdUserMinimize);q.detach(AdEvent.AdUserClose);q.detach(AdEvent.AdPaused);q.detach(AdEvent.AdPlaying);q.detach(AdEvent.AdError);q.detach(AdEvent.AdLog);};this.onAdStarted=function(q){this.fire(_CONSTANTS.EVENT_VIDEO_AD_START,{type:_CONSTANTS.EVENT_VIDEO_AD_START});};this.onAdPlayback=function(q){this.fire(_CONSTANTS.EVENT_AD_START_MEDIA_PLAYBACK,{type:_CONSTANTS.EVENT_AD_START_MEDIA_PLAYBACK});};this.onAdMediaFirstByte=function(){this.fire(_CONSTANTS.EVENT_AD_MEDIA_FIRST_BYTE,{type:_CONSTANTS.EVENT_AD_MEDIA_FIRST_BYTE});};this.onAdProgress=function(q){this.fire(_CONSTANTS.EVENT_AD_PROGRESS,{type:_CONSTANTS.EVENT_AD_PROGRESS,position:q.position,totalDuration:q.totalDuration});};this.onAdStopped=function(r){try{this.unloadOverlay();}catch(q){}};this.onAdError=function(r){try{this.unloadOverlay();}catch(q){}};this.onAdLinearChange=function(r){if(typeof i==="undefined"||i===null){return;}var q=i.adLinear;if(q){if(!f){var s={adslug:true,timer:true,scale:true,volume:false};l.notifyVideoAdStart(s);f=true;d=true;}}else{if(!q){if(f){l.notifyVideoAdEnd();f=false;}}}};this.onAdExpandedChange=function(q){if(typeof i!=="undefined"&&i!==null){}};this.updateRemainingTime=function(){_lastRemainingTime=i.adRemainingTime;
if(_totalAdDuration<=0){_totalAdDuration=i.adRemainingTime;}if(isNaN(_totalAdDuration)){_totalAdDuration=-1;}if(this._adProgressTimer){this._adProgressTimer.stop();this._adProgressTimer=null;}this._adProgressTimer=new a.com.yahoo.ads.plugin.Timer(200);this._adProgressTimer.addFunctionOnTick(function(){var q=_totalAdDuration-i.adRemainingTime;if(_totalAdDuration>0||q>0){l.notifyAdProgress(q,_totalAdDuration);}});this._adProgressTimer.start();};this.onAdRemainingTimeChange=function(q){if(isNaN(_totalAdDuration)||_totalAdDuration<=0){_totalAdDuration=i.adRemainingTime;_lastRemainingTime=-1;}if(i.adRemainingTime===0||(_lastRemainingTime!==-1&&(_lastRemainingTime<i.adRemainingTime))){_totalAdDuration=0;_lastRemainingTime=-1;if(i.adRemainingTime>0){_totalAdDuration=i.adRemainingTime;}}if(this._adProgressTimer){this._adProgressTimer.stop();this._adProgressTimer=null;}this._adProgressTimer=new a.com.yahoo.ads.plugin.Timer(200);};this.onAdVolumeChange=function(q){if(typeof i!=="undefined"&&i!==null){}};this.onAdUserAcceptInvitation=function(q){};this.onAdUserMinimize=function(q){};this.onAdUserClose=function(q){this.unloadOverlay();};this.onAdPaused=function(q){};this.onAdPlaying=function(q){};this.onAdLog=function(q){};this.notifyMetrics=function(v){var q="";var t="";var u=null;var s=0;var w=0;if(v.ad_duration){s=v.ad_duration;}w=g.getSkip_directive();if(v.type===AdEvent.AdImpression){q=BeaconEventData.IMPRESSION;t=BeaconEventData.IMPRESSION;u="";}else{if(v.type===AdEvent.AdVideoStart){q=BeaconEventData.IMPRESSION;t=BeaconEventData.PLAYBACK0;u={"type":BeaconEventData.PLAYBACK,"value":0,"ad_duration_value":Math.floor(s),"skippable_value":w};}else{if(v.type===AdEvent.AdVideoFirstQuartile){q=BeaconEventData.IMPRESSION;t=BeaconEventData.PLAYBACK25;u={"type":BeaconEventData.PLAYBACK,"value":25,"ad_duration_value":Math.floor(s),"skippable_value":w};}else{if(v.type===AdEvent.AdVideoMidpoint){q=BeaconEventData.IMPRESSION;t=BeaconEventData.PLAYBACK50;u={"type":BeaconEventData.PLAYBACK,"value":50,"ad_duration_value":Math.floor(s),"skippable_value":w};}else{if(v.type===AdEvent.AdVideoThirdQuartile){q=BeaconEventData.IMPRESSION;t=BeaconEventData.PLAYBACK75;u={"type":BeaconEventData.PLAYBACK,"value":75,"ad_duration_value":Math.floor(s),"skippable_value":w};}else{if(v.type===AdEvent.AdVideoComplete){q=BeaconEventData.IMPRESSION;t=BeaconEventData.PLAYBACK100;u={"type":BeaconEventData.PLAYBACK,"value":100,"ad_duration_value":Math.floor(s),"skippable_value":w};}else{if(v.type===AdEvent.AdClickThru){q=BeaconEventData.CLICKTHROUGH;t=BeaconEventData.CLICKTHROUGH;if(typeof v.click_url!=="undefined"&&v.click_url!==null){u={"CLICKURL":v.click_url};}else{u={"CLICKURL":"http://ads.yimg.com/a/a/vdo/a/pixel.gif"};}}else{if(v.type===BeaconEventData.BITRATE){q=BeaconEventData.BITRATE;t=BeaconEventData.BITRATE;u={"type":BeaconEventData.BITRATE,"value":v.chosenBitrate};m.fire(_CONSTANTS.EVENT_VIDEO_AD_DISPLAY);}else{if(v.type===BeaconEventData.CPCV){q=BeaconEventData.CPCV;t=BeaconEventData.CPCV;u={"type":BeaconEventData.CPCV,"value":v.value,"ad_duration_value":Math.floor(s),"skippable_value":w};}else{if(v.type===AdEvent.AdMouseOver){q=BeaconEventData.INTERACTION;t=BeaconEventData.MOUSE_OVER;u={"type":BeaconEventData.MOUSE_OVER,"time":v.diff,"seq":v.mouseOverCount};}else{if(v.type===AdEvent.AdClick){q=BeaconEventData.INTERACTION;t=BeaconEventData.CLICK;u={"type":BeaconEventData.CLICK,"time":v.diff,"seq":v.mouseClickCount};}else{if(v.type===AdEvent.AdMediaPlaybackError){q=_CONSTANTS.IMPRESSION;t=_CONSTANTS.REDIRECT_NOAD;u={"type":_CONSTANTS.REDIRECT_NOAD};}}}}}}}}}}}}if(typeof u!=="undefined"&&u!==null){var r=new a.com.yahoo.ads.event.AdMetricsEvent(q,t,g.getUrl(),u,g.getJson());m.fire(q,{type:q,data:r});}};this.notifyPlugin=function(r){this.dispatchEvent(r);switch(r.type){case"displayReady":l.notifyAdRendered();break;case"pauseContentVideo":if(!f){var s=null;if(r.hasOwnProperty("playerData")){s=r.playerData;}if(r.message=="noCover"){if(typeof s==="undefined"||s===null){s={};}s.enableBlackScreen=false;}l.notifyVideoAdStart(s);d=true;f=true;}break;case"playContentVideo":if(f){l.notifyVideoAdEnd();f=false;}break;case"holdContentVideo":l.notifyRichAdStart();break;case"initiateCloseCreative":var q=f;cancel();if(q){if(f){l.notifyVideoAdEnd();l.notifyVamEnd();f=false;}}else{l.notifyAdClosing();}break;case"unlockPlaylist":l.notifyUnlockPlaylist(new AdUnlockPlaylistEvent(r.message));break;}};var b=function(s,r){var t=g.getMediaFiles(s);var v=0;var u=Number.MAX_VALUE;if(t){var q=v;for(q in t){if(q>v&&q<=r){v=q;}if(q<u){u=q;}}if(v>0){return v;}else{if(t[u]){return u;}}}return null;};this.cancel=function(){if(n!==null&&typeof n!=="undefined"){n.cancelAd();this.removeTemplateListeners(n);n=null;}};this.render=function(B,u,t,y,A){j=u;o=t;g=B;n=new a.com.yahoo.ads.renderer.templates.Template(this._container);this.configureTemplateListeners(n);var w=null;for(var v=0;v<AdRenderer.HTML5_VIDEO_FORMATS.length;v++){format=AdRenderer.HTML5_VIDEO_FORMATS[v];if(this._container.canPlayType(format)!==AdRenderer.HTML5_PLAY_CAPABILITY.NO_SUPPORT){p=b(format,j.bitrate);break;}}w=g.getMediaUrl(format,p);if(w){var z=g.getUrl();var s=g.getParams();var q=null;var C=null;var x=null;if(z==AdRenderer.TEMPLATE_TYPE.CLICKABLE){if(s){if(s.yct_click_url&&s.yct_click_url!==""){click_url=s.yct_click_url;}if(s.yct_product_message&&s.yct_product_message!==""){C=s.yct_product_message;}if(s.yct_invitation_message&&s.yct_invitation_message!==""){q=s.yct_invitation_message;}if(s.yct_product_message_type&&s.yct_product_message_type!==""){x=s.yct_product_message_type;}}}else{if(z==AdRenderer.TEMPLATE_TYPE.BUMPER){if(s){if(s.ybt_click_url&&s.ybt_click_url!==""){click_url=s.ybt_click_url;}}}}var r={"click_url":click_url,"chosenBitrate":p,"adParams":s,"invitation_message":q,"product_message":C,"product_message_type":x};n.initAd(w,r);}else{this.notifyMetrics({type:AdEvent.AdMediaPlaybackError});this.fire(_CONSTANTS.AD_START_ERROR,{data:_CONSTANTS.AD_START_ERROR_CODES.INCOMPATIBLE_MEDIA});
this.fire(_CONSTANTS.EVENT_AD_PLAYBACK_NONE);}};};a.augment(AdRenderer,a.EventTarget);AdRenderer.prototype.setContainer=function(b){this._container=b;};AdRenderer.prototype.getContainer=function(){return this._container;};AdRenderer.prototype.isRemovable=function(){return true;};AdRenderer.prototype.setEventBus=function(b){_eventBus=b;};AdRenderer.prototype.toString=function(){return"AdRenderer(ID: "+instanceId+")";};AdRenderer.prototype.unloadOverlay=function(){this.fire(_CONSTANTS.EVENT_VIDEO_AD_END);};AdRenderer.prototype.clear=function(b){if(typeof b!=="undefined"&&b!==null){b.innerHTML="";}};AdRenderer.prototype.initUnloadCreative=function(){if(typeof _creative==="undefined"||_creative===null){return;}try{_creative.stopAd();}catch(b){}};AdRenderer.prototype.onContentVideoComplete=function(b){_videoComplete=true;if(_creative){_creative.stopAd();}};AdRenderer.prototype.setVolume=function(b){if(_eventCreative){_eventCreative.setAdVolume(b);}};AdRenderer.prototype.init=function(){};AdRenderer.HTML5_VIDEO_READY_STATE={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};AdRenderer.HTML5_PLAY_CAPABILITY={BEST:"probably",LIKELY:"maybe",NO_SUPPORT:""};AdRenderer.HTML5_VIDEO_FORMATS=["video/mp4","video/webm","video/ogg"];AdRenderer.TEMPLATE_TYPE={BUMPER:"http://d.yimg.com/ks/templates/BumperAd.swf",CLICKABLE:"http://d.yimg.com/ks/templates/ClickableAd.swf"};a.com.yahoo.ads.renderer.AdRenderer=AdRenderer;},"1.0.0",{requires:["node","event-custom-complex","AdEvents","ScopeLogger","AdPluginMetricsEvent","BeaconEventData","Template"]});YUI.add("NullRenderer",function(a){a.namespace("com.yahoo.ads.renderer");NullRenderer=function(){this._eventBus=null;_CONSTANTS=a.com.yahoo.ads.common.Constants;};NullRenderer.prototype.setEventBus=function(b){this._eventBus=b;};NullRenderer.prototype.render=function(b,d,c){this._eventBus.notifyNullAd();this.fire(_CONSTANTS.RenderCompleteEvent);};NullRenderer.prototype.cancel=function(){};a.augment(NullRenderer,a.EventTarget);a.com.yahoo.ads.renderer.NullRenderer=NullRenderer;},"1.0.0",{requires:["node","event-custom-complex","ScopeLogger"]});YUI.add("RenderManager",function(a){a.namespace("com.yahoo.ads.renderer");RenderManager=function(b){this._container=null;this._eventBus=b;this.renderer=null;this._ad=null;_CONSTANTS=a.com.yahoo.ads.common.Constants;BeaconEventData=a.com.yahoo.ads.event.BeaconEventData;};RenderManager.prototype.getRenderer=function(){return this._container;};RenderManager.prototype.setRenderer=function(b){this._container=b;};RenderManager.prototype.cancelAds=function(){if(this.renderer){this.renderer.cancel();this.removeListeners(this.renderer);}};RenderManager.prototype.configureListeners=function(b){b.on(_CONSTANTS.EVENT_AD_PLAYBACK_NONE,this.onAdPlaybackNone,this);b.on(_CONSTANTS.EVENT_VIDEO_AD_END,this.onVideoAdEnd,this);b.on(_CONSTANTS.EVENT_VIDEO_AD_START,this.onVideoAdStart,this);b.on(_CONSTANTS.EVENT_AD_PROGRESS,this.onVideoAdProgress,this);b.on(_CONSTANTS.EVENT_AD_START_MEDIA_PLAYBACK,this.onVideoAdPlayback,this);b.on(BeaconEventData.IMPRESSION,this.onAdMetrics,this);b.on(BeaconEventData.CLICKTHROUGH,this.onAdMetrics,this);b.on(BeaconEventData.BITRATE,this.onAdMetrics,this);b.on(BeaconEventData.CPCV,this.onAdMetrics,this);b.on(BeaconEventData.INTERACTION,this.onAdMetrics,this);b.on(_CONSTANTS.EVENT_VIDEO_AD_DISPLAY,this.onAdDisplay,this);b.on(_CONSTANTS.EVENT_AD_MEDIA_FIRST_BYTE,this.onAdMediaFirstByte,this);b.on(_CONSTANTS.AD_START_ERROR,this.onAdStartError,this);b.on(_CONSTANTS.AD_DELIVERY_ERROR,this.onAdDeliveryError,this);};RenderManager.prototype.removeListeners=function(b){b.detach(_CONSTANTS.EVENT_AD_PLAYBACK_NONE);b.detach(_CONSTANTS.EVENT_VIDEO_AD_END);b.detach(_CONSTANTS.EVENT_VIDEO_AD_START);b.detach(_CONSTANTS.EVENT_AD_PROGRESS);b.detach(_CONSTANTS.EVENT_AD_START_MEDIA_PLAYBACK);b.detach(BeaconEventData.IMPRESSION);b.detach(BeaconEventData.CLICKTHROUGH);b.detach(BeaconEventData.BITRATE);b.detach(BeaconEventData.CPCV,this.onAdMetrics,this);b.detach(BeaconEventData.INTERACTION);b.detach(_CONSTANTS.EVENT_VIDEO_AD_DISPLAY);b.detach(_CONSTANTS.EVENT_AD_MEDIA_FIRST_BYTE);b.detach(_CONSTANTS.AD_START_ERROR);b.detach(_CONSTANTS.AD_DELIVERY_ERROR);};RenderManager.prototype.renderAd=function(b,e,c,d){this._ad=b;if(b){this.renderer=new a.com.yahoo.ads.renderer.AdRenderer();this.renderer.setContainer(this._container);}else{this.renderer=new a.com.yahoo.ads.renderer.NullRenderer();}if(this.renderer){this.renderer.setEventBus(this._eventBus);this.configureListeners(this.renderer);this.renderer.render(b,e,c);}};RenderManager.prototype.onAdMetrics=function(b){if(this._ad){this._ad.onAdEvent(b.data);}else{this._eventBus.notifyAdMetricsEvent(b.data);}};RenderManager.prototype.onVideoAdEnd=function(b){this._eventBus.notifyVideoAdEnd();};RenderManager.prototype.onVideoAdStart=function(b){this._eventBus.notifyVideoAdStart({adslug:true,timer:true,scale:true,volume:true,linear:true,blocked:true});this._eventBus.notifyMetricsEvent(b);};RenderManager.prototype.onVideoAdProgress=function(b){this._eventBus.notifyAdProgress(b);};RenderManager.prototype.onVideoAdPlayback=function(b){this._eventBus.notifyAdPlayback({adslug:true,timer:true,scale:true,volume:true,linear:true,blocked:true});};RenderManager.prototype.onAdDisplay=function(b){this._eventBus.notifyMetricsEvent({data:BeaconEventData.IMPRESSION});};RenderManager.prototype.onAdMediaFirstByte=function(b){this._eventBus.notifyAdMediaFirstByte(b);};RenderManager.prototype.onAdStartError=function(b){this._eventBus.notifyAdStartError(b);};RenderManager.prototype.onAdDeliveryError=function(b){this._eventBus.notifyAdDeliveryError(b);};RenderManager.prototype.onAdPlaybackNone=function(b){this._eventBus.notifyNullAd();};RenderManager.prototype.dismissAd=function(b){};RenderManager.prototype.resizeAd=function(b){};RenderManager.prototype.setVolume=function(b){};a.com.yahoo.ads.renderer.RenderManager=RenderManager;},"1.0.0",{requires:["node","ScopeLogger","AdRenderer","NullRenderer"]});
YUI.add("Template",function(a){a.namespace("com.yahoo.ads.renderer.templates");Template=function(G){var w=G;var S=a.com.yahoo.ads.common.Constants;var r=a.com.yahoo.ads.event.AdEvents;var C=false;var y=0;var n=this;var g=null;var J=Template.PLAYBACK_STATE.WAITING_FOR_METADATA;var z=a.com.yahoo.ads.event.AdEvents;var v=a.com.yahoo.ads.event.BeaconEventData;var O="";var I=null;var Q=false;var D=0;var f=0;var j=0;var T=0;var p=false;var B=100;var M=250;var R=null,c=null,E=null;var i=null;i=document.createElement("div");i.id="yvap_video";var t=document.createElement("div");t.id="yvap_overlay";t.style.width=w.clientWidth;t.style.height=w.clientHeight;t.style.zIndex="10000000000";t.style.position="absolute";t.style.opacity=0;i.appendChild(t);w.parentNode.appendChild(i);var P=function(ab,aa){var X=(parseInt(w.clientWidth,10)-M)/2;var W=(parseInt(w.clientHeight,10)-B)/2;var Z=document.createElement("div");Z.id=ab;Z.style.position="relative";Z.style.top=W+"px";Z.style.left=X+"px";Z.style.width=M+"px";Z.style.height=B+"px";Z.style.verticalAlign="middle";Z.style.textAlign="center";Z.style.color="#fdfdfd";Z.style.size="12px";Z.style.fontFamily="Geneva, Arial, Helvetica, sans-serif";Z.style.display="table";Z.style.backgroundColor="#000000";Z.style.borderColor="#f3f3f3";Z.style.borderWidth="2px";Z.style.borderStyle="solid";Z.style.borderRadius="15px";Z.style.zIndex="1000";var Y=document.createElement("div");Y.style.display="table-cell";Y.style.verticalAlign="middle";Y.style.margin="5px";Y.innerHTML=aa;Z.appendChild(Y);t.appendChild(Z);};var k=function(){P(Template.INVITATION_MSG_ID,R);};var N=function(W){var X="";if(W==="EXTERNAL"){X='<img src="'+c+'"'+' width="'+M+'"/>';}else{if(W==="TEXT"){X="<p>"+c+"</p>";}else{X=c;}}P(Template.PRODUCT_MSG_ID,X);};var s=function(){t.style.opacity=0.8;};var d=function(){t.style.opacity=0;};var e=function(){if(typeof c!==S.UNDEFINED&&c!==null&&typeof E!==S.UNDEFINED&&E!==null){N(E);t.style.visibility="visible";t.addEventListener("mouseover",s,false);t.addEventListener("mouseout",d,false);}};var h=function(){setTimeout(function(){t.style.opacity=0;var W=document.getElementById(Template.INVITATION_MSG_ID);if(typeof W!==S.UNDEFINED&&W!==null){W.parentNode.removeChild(W);}e();},1200);};var U=function(){setTimeout(function(){t.style.opacity=0.8;h();},1200);};var L=function(W){if(typeof W.invitation_message===S.UNDEFINED||W.invitation_message===null){p=false;}else{p=true;R=W.invitation_message;R=R.replace(/\\r|\\n/g,"<br>");}if(typeof W.product_message!==S.UNDEFINED&&W.product_message!==null){c=W.product_message;c=c.replace(/\\r|\\n/g,"<br>");}if(typeof W.product_message!==S.UNDEFINED&&W.product_message!==null){E=W.product_message_type;}if(p){k();}};var b=function(X){var W=w.currentTime/w.duration;if(J==Template.PLAYBACK_STATE.METADATA_AVAILABLE){J=Template.PLAYBACK_STATE.PLAYBACK0;n.fire(z.AdVideoStart,{type:z.AdVideoStart,ad_duration:y});if(p){t.style.visibility="visible";U();}}else{if(W>0.25&&J==Template.PLAYBACK_STATE.PLAYBACK0){J=Template.PLAYBACK_STATE.PLAYBACK25;n.fire(z.AdVideoFirstQuartile,{type:z.AdVideoFirstQuartile,ad_duration:y});}else{if(W>0.5&&J==Template.PLAYBACK_STATE.PLAYBACK25){J=Template.PLAYBACK_STATE.PLAYBACK50;n.fire(z.AdVideoMidpoint,{type:z.AdVideoMidpoint,ad_duration:y});}else{if(W>0.75&&J==Template.PLAYBACK_STATE.PLAYBACK50){J=Template.PLAYBACK_STATE.PLAYBACK75;n.fire(z.AdVideoThirdQuartile,{type:z.AdVideoThirdQuartile,ad_duration:y});}}}}if(!Q&&w.currentTime>=30){Q=true;n.fire(v.CPCV,{type:v.CPCV,value:30,ad_duration:y});}n.fire(z.AdProgress,{type:z.AdProgress,position:w.currentTime,totalDuration:w.duration});};var H=function(){J=Template.PLAYBACK_STATE.METADATA_AVAILABLE;y=w.duration;};var A=function(){if((w.duration-w.currentTime)<=0.1&&J==Template.PLAYBACK_STATE.PLAYBACK75){n.fire(z.AdVideoComplete,{type:z.AdVideoComplete,ad_duration:y});J=Template.PLAYBACK_STATE.PLAYBACK100;}clearInterval(g);n.cancelAd();n.fire(r.AdStopped);};var F=function(W){D=W.timeStamp;C=true;g=setInterval(b,200);w.play();n.fire(r.AdPlayback);n.fire(v.BITRATE,{type:v.BITRATE,chosenBitrate:I});};var V=function(){n.fire(z.AdImpression,{type:z.AdImpression});};var q=function(W){n.fire(r.AdMediaFirstByte);};var o=function(X){if(O&&O!==""){window.open(O,"_blank");}var W=X.timeStamp-D;T+=1;n.fire(z.AdClickThru,{type:z.AdClickThru,click_url:O});n.fire(z.AdClick,{type:z.AdClick,diff:W,mouseClickCount:T});};var x=function(X){var W=X.timeStamp-D;f+=1;n.fire(z.AdMouseOver,{type:z.AdMouseOver,diff:W,mouseOverCount:f});};var u=function(W){n.cancelAd();n.fire(z.AdError,{type:z.AdError});};var l=function(W){if((w.duration-w.currentTime)>0.1){w.play();}};var m=function(){w.addEventListener("loadedmetadata",H,false);w.addEventListener("ended",A,false);w.addEventListener("canplay",F,false);w.addEventListener("pause",l,false);w.addEventListener("canplaythrough",V,false);w.addEventListener("loadeddata",q,false);w.addEventListener("mouseover",x,false);w.addEventListener("error",u,false);t.addEventListener("click",o,false);};var K=function(){w.removeEventListener("loadedmetadata",H,false);w.removeEventListener("ended",A,false);w.removeEventListener("canplay",F,false);w.removeEventListener("pause",l,false);w.removeEventListener("canplaythrough",V,false);w.removeEventListener("loadeddata",q,false);w.removeEventListener("mouseover",x,false);w.removeEventListener("error",u,false);t.removeEventListener("click",o,false);};this.initAd=function(W,X){if(w&&W){m();w.src="";w.load();w.play();w.src=W;w.load();w.controls=false;O=X.click_url;I=X.chosenBitrate;if(a.com.yahoo.ads.utils.Utils.isOverlaySupported()){L(X);}n.fire(r.AdStarted);return true;}else{}return false;};this.getAdVolume=function(){};this.setAdVolume=function(W){if(W>=0&&W<=1){w.volume=W;}};this.startAd=function(){};this.pauseAd=function(){};this.resumeAd=function(){};this.resizeAd=function(){};this.cancelAd=function(){if(typeof w!==S.UNDEFINED&&w!==null){w.src="";w.load();K();if(typeof i!==S.UNDEFINED&&i!==null){w.parentNode.removeChild(i);
i=null;}w=null;}};};Template.VIDEO_ID="yvap_video";Template.OVERLAY_ID="yvap_overlay";Template.INVITATION_MSG_ID="yvap_invitation_message";Template.PRODUCT_MSG_ID="yvap_product_message";Template.HTML5_VIDEO_READY_STATE={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};Template.HTML5_PLAY_CAPABILITY={BEST:"probably",LIKELY:"maybe",NO:""};Template.PLAYBACK_STATE={WAITING_FOR_METADATA:-1,METADATA_AVAILABLE:0,PLAYBACK0:1,PLAYBACK25:2,PLAYBACK50:3,PLAYBACK75:4,PLAYBACK100:5};a.augment(Template,a.EventTarget);a.com.yahoo.ads.renderer.templates.Template=Template;},"1.0.0",{requires:["node","ScopeLogger","Utils"]});YUI.add("ActionRule",function(a){a.namespace("com.yahoo.ads.rules");ActionRule=function(c){this.mName=null;this.mType=null;this.mSubtype=null;this.mBasis=null;this.mActionParams=null;this.mCondition=null;this.mRedirect={targetTag:"none",count:0};this.mAdXML=null;this.getType=function(){return this.mType;};this.setType=function(d){this.mType=d;};this.getSubType=function(){return this.mSubtype;};this.getRedirect=function(){return this.mRedirect;};this.getAdXml=function(){return this.mAdXML;};this.addActionParam=function(d,e){if(!this.mActionParams){this.mActionParams={};}this.mActionParams[d]=e;};this.parseActionParam=function(f){var h,d,g,e;if(f instanceof Array){for(e in f){h=f[e];d=h["@name"];g=h["@value"];this.addActionParam(d,g);}}else{if(f instanceof Object){h=f;d=h["@name"];g=h["@value"];this.addActionParam(d,g);}}};this.evaluateConditions=function(d){return true;};this.isBlocking=function(){return this.mType!="overlay";};if(c){this.mName=c["@name"];this.mType=c["@type"];this.mSubtype=c["@subtype"];this.mBasis=c["@basis"];if(c.adXML){this.mAdXML=c.adXML;}else{this.mAdXML=null;}for(var b in c){if(b=="actionParam"){this.parseActionParam(c[b]);}else{if(b=="enabledWhen"){}}}}};ActionRule.prototype.evaluateBasis=function(b){return null;};ActionRule.prototype.toString=function(){return"ActionRule :: name: "+this.mName+", type: "+this.mType+", subType: "+this.mSubtype+", basis: "+this.mBasis;};ActionRule.prototype.evaluate=function(d){var f=false;if(this.evaluateConditions(d)){f=true;}if(f){var e=d.getBasis(this.mBasis);var b=this.evaluateBasis(e);var c=new a.com.yahoo.ads.engine.EngineActionEvent(b,this);d.propagateActionEvent(c);}};a.com.yahoo.ads.rules.ActionRule=ActionRule;},"1.0.0",{requires:["node","EngineActionEvent"]});YUI.add("ActionRule_TIMELINE",function(a){a.namespace("com.yahoo.ads.rules");ActionRule_TIMELINE=function(d){ActionRule_TIMELINE.superclass.constructor.apply(this,[d]);var j,h,c,i,f,b;this.START_MINIMUM_PERCENT=0;this.START_MAXIMUM_PERCENT=99;this.DEFAULT_VID_DURATION=100;if(this.mActionParams.id.toLowerCase().indexOf("overlay")===0){this._isOverlay=true;this._showCommand="ShowOverlay";this._hideCommand="HideOverlay";}else{this._isOverlay=false;this._showCommand="InsertAd";this._hideCommand=null;}this._shownPoints={};j=d["@start"];h=d["@duration"];c=d["@interval"];i=parseInt(d["@intervalbetweenclips"],10);f=parseInt(d["@startatclip"],10);b=d["@padding"];if(i){this._intervalbetweenclips=i;}if(f){this._startatclip=f;}this._startatclip-=1;if(typeof b==="undefined"||b===null||b===""){b=actionParams.Padding;}if(b&&b.length>0){if(b.indexOf("%")!==-1){b=b.substring(0,b.length-1);}try{this._paddingDuration=parseInt(b,10);}catch(g){}}if(!c){c=9999;}if(!h){h=-1;}if(j.indexOf("%")!==-1){this._startIsPercentage=true;this._start=parseInt(j.replace("%",""),10);if(this._start<this.START_MINIMUM_PERCENT){this._start=this.START_MINIMUM_PERCENT;}}else{this._start=parseInt(j,10);if(j==="1"){this._start=2;}}if(h.indexOf("%")!==-1){this._durationIsPercentage=true;this._duration=parseInt(h.replace("%",""),10);if(this._duration>this.START_MAXIMUM_PERCENT){this._duration=this.START_MAXIMUM_PERCENT;}}else{this._duration=parseInt(h,10);}if(c.indexOf("%")!==-1){this._intervalIsPercentage=true;this._interval=parseInt(c.replace("%",""),10);}else{this._interval=parseInt(c,10);}this.getBasis=function(){return"videoTimeline";};this.evaluateBasis=function(m){var e=null;if(typeof m==="undefined"){return null;}if(m.getType()===TimerEventBasis.TIMER_BASIS){var l=m.getTimer();if(!this._isOverlay){return this.evaluateTimecode(Math.floor(l.getElapsed()),l.getTotalDuration());}var k=m.getClipCount();if(k>this._startatclip&&(k-(1+this._startatclip))%this._intervalbetweenclips===0){e=this.evaluateTimecode(Math.floor(parseInt(l.getElapsed(),10)),parseInt(l.getTotalDuration(),10));}else{}}else{}return e;};this.evaluateTimecode=function(o,m){if(m<1){m=this.DEFAULT_VID_DURATION;}var e=null;var p=this._start;var l=this._interval;var n=this._duration;if(this._startIsPercentage){p=Math.floor(p*m/100);}if(this._intervalIsPercentage){l=Math.floor(l*m/100);}if(this._durationIsPercentage){n=Math.ceil(n*m/100);}n+=this._paddingDuration;if((o>=p)&&((o-p)%(l+n)===0)){var k=o.toString();if(typeof this._shownPoints[k]==="undefined"||this._shownPoints[k]===null){if(n===0||(n>0&&n<=m-o)){e=this._showCommand;this._shownPoints[k]="";}else{}}}else{if(this._hideCommand&&(o>=p)&&((o-p)%(l+n))===n){}}return e;};this.resetClipRules=function(){this._shownPoints={};};};a.extend(ActionRule_TIMELINE,a.com.yahoo.ads.rules.ActionRule);a.com.yahoo.ads.rules.ActionRule_TIMELINE=ActionRule_TIMELINE;},"1.0.0",{requires:["node","EngineActionEvent","ActionRule"]});YUI.add("ActionRule_TRIGGER",function(a){a.namespace("com.yahoo.ads.rules");ActionRule_TRIGGER=function(d){ActionRule_TRIGGER.superclass.constructor.apply(this,[d]);this.ACTION_POSITIVE="InsertAd";this.ACTION_POSITIVE_SKIN="skin-op";this._evaluateRatio=function(n){var m=n.getCount();var o=n.getAdLength();var l=n.getVidLength();var e=this._ratio;if(l===0||o===0){e=this._ratio;}else{e=l/o;}var k=f==="true"?m>this._start:true;return k&&this._ratioEnabled&&(l===0||e>=this._ratio);};this._evaluateLength=function(m){var l=m.getCount();var k=m.getRecentVidLength();var e=f==="true"?l>this._start:true;return e&&this._lengthEnabled&&(k-this._length)>=0;
};this._evaluateFrequency=function(l){var k=l.getCount();var e=l.getRecentClipCount();return k>this._start&&e>=this._interval;};var c=function(k){var e=Math.random()*100;return e<=k;};var b="";var g="";var h="false",f,j;h=d["@minDurEnabled"];b=d["@ratioEnabled"];g=d["@lengthEnabled"];f=d["@firstAdProbabilityEnabled"]||"";j=parseInt(d["@firstAdProbability"],10)||0;this._interval=parseInt(d["@interval"],10);this._start=parseInt(d["@start"],10)-1;this._minDuartion=parseInt(d["@minDuration"],10);this._ratio=parseInt(d["@ratio"],10);this._length=parseInt(d["@length"],10);if(this.mActionParams.id==="purevideo"){this._symbol="video";this._actionString=this.ACTION_POSITIVE;}else{if(this.mActionParams.id==="skin"){this._symbol="skin";this._actionString=this.ACTION_POSITIVE_SKIN;}else{this._symbol="overlay";this._actionString=this.ACTION_POSITIVE;}}if(this._start<0){this._start=0;}try{this._ratioEnabled=b.length>0&&b==="true";this._lengthEnabled=g.length>0&&g==="true";this._minDuartionEnabled=h.length>0&&h==="true";}catch(i){this._ratioEnabled=false;this._lengthEnabled=false;this._minDuartionEnabled=false;}this.evaluateBasis=function(o){var e=null,m,l=a.com.yahoo.ads.engine.EngineActionEvent.SKIP_EVENT;if(typeof o==="undefined"){return e;}if(o.getType()===TriggerEventBasis.TRIGGER_BASIS){var k=o.getTriggerName();if(k.toLowerCase()===this.mSubtype.toLowerCase()){var n=o.getClipDuration();if((this._minDuartionEnabled&&n>=this._minDuartion)||!this._minDuartionEnabled){m=o.getCount();if(m===(this._start+1)&&f==="true"){e=c(j)?this._actionString:l;return e;}if(this._ratioEnabled){if(this._evaluateRatio(o)){e=this._actionString;}else{e=l;}}else{if(this._lengthEnabled){if(this._evaluateLength(o)){e=this._actionString;}else{e=l;}}else{if(this._evaluateFrequency(o)){e=this._actionString;}else{e=l;}}}}else{e=l;}}}return e;};this.getBasis=function(){return"triggers";};};a.extend(ActionRule_TRIGGER,a.com.yahoo.ads.rules.ActionRule);a.com.yahoo.ads.rules.ActionRule_TRIGGER=ActionRule_TRIGGER;},"1.0.0",{requires:["node","EngineActionEvent","ActionRule"]});YUI.add("RuleGroup",function(a){a.namespace("com.yahoo.ads.rules");RuleGroup=function(){var f=[];var d;var b;var g=false;var c="videoTimeline";var e="triggers";return{initFromJSON:function(j){var k=null;d=j["@id"];if(j["@defaultRuleset"]=="true"){b=true;}if(j.actionRule2 instanceof Array){for(var h=0;h<j.actionRule2.length;h++){mBasis=j.actionRule2[h]["@basis"];if(mBasis==e){k=new a.com.yahoo.ads.rules.ActionRule_TRIGGER(j.actionRule2[h]);g=false;}else{if(mBasis==c){k=new a.com.yahoo.ads.rules.ActionRule_TIMELINE(j.actionRule2[h]);g=true;}else{}}this.addRule(k);}}else{if(j.actionRule2 instanceof Object){mBasis=j.actionRule2["@basis"];if(mBasis==e){k=new a.com.yahoo.ads.rules.ActionRule_TRIGGER(j.actionRule2);g=false;}else{if(mBasis==c){k=new a.com.yahoo.ads.rules.ActionRule_TIMELINE(j.actionRule2);g=true;}else{}}this.addRule(k);}}},getisTimelineDriven:function(){return g;},getisDefault:function(){return b;},addRule:function(h){f.push(h);},setid:function(h){d=h;},getid:function(){return d;},evaluate:function(j){for(var h=0;h<f.length;h++){f[h].evaluate(j);}},resetClipRules:function(){for(var h=0;h<f.length;h++){if(f[h] instanceof ActionRule_TIMELINE){f[h].resetClipRules();}}},toString:function(){var h="";for(var j=0;j<f.length;j++){h+=f[j]+"\n";}return h;}};};a.com.yahoo.ads.rules.RuleGroup=RuleGroup;},"1.0.0",{requires:["node","ActionRule","ScopeLogger","ActionRule_TRIGGER","ActionRule_TIMELINE"]});YUI.add("Utils",function(b){b.namespace("com.yahoo.ads.utils");var a=b.com.yahoo.ads.common.Constants;Utils=function(){};Utils.guid=function(){var c=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1);};return(c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c());};Utils.getElementsByTagNameNS=function(f,e,c,d){if(typeof f===a.TYPEOF.UNDEFINED||f===null){return null;}if(typeof f.getElementsByTagNameNS===a.TYPEOF.UNDEFINED||f.getElementsByTagNameNS===null){return f.getElementsByTagName(d+":"+c);}else{return f.getElementsByTagNameNS(e,c);}};Utils.getTextFromNode=function(d){if(typeof d===a.TYPEOF.UNDEFINED||d===null){return null;}var c=d.textContent;if(typeof c===a.TYPEOF.UNDEFINED){c=d.text;}c=c.replace(/\s+$/,"");c=c.replace(/^\s+/,"");return c;};Utils.hasAttribute=function(f,e){if(typeof f===a.TYPEOF.UNDEFINED||f===null){return false;}try{return f.hasAttribute(e);}catch(d){var c=f.getAttribute(e);return(typeof c!==a.TYPEOF.UNDEFINED&&c!==null);}};Utils.isXDRSupported=function(){var e=/MSIE\s(\d)+/g;var c=navigator.userAgent.match(e);if(typeof c!==a.TYPEOF.UNDEFINED&&c!==null&&c.length>0){var d=c[0].match(/(\d)+/g);if(typeof d!==a.TYPEOF.UNDEFINED&&d!==null&&d.length>0){return(d[0]>9);}}return true;};Utils.isIPhoneSupported=function(){return(b.UA.iphone>=0&&b.UA.iphone<6.1);};Utils.isOverlaySupported=function(){return !(b.UA.ios||b.UA.android);};Utils.getCreativeAndBookingId=function(d){var e=/bi\$(\d+),cr\$(\d+)/,c,f=null;if(d&&typeof d===a.TYPEOF.STRING&&d.length>0){c=e.exec(d);if(c){f={};f[a.BOOKINGID]=c[1];f[a.CREATIVEID]=c[2];}}return f;};b.com.yahoo.ads.utils.Utils=Utils;},"1.0.0",{requires:["Constants"]});YUI.add("videoplayer",function(f){function n(al){var Y=this;this.addAttrs({id:{},title:{},description:{},duration:{validator:f.Lang.isNumber},clipDuration:{validator:f.Lang.isString},comscoreC5:{validator:f.Lang.isString,writeOnce:true},images:{value:{large:null,medium:null,small:null,provider:null,thumbnail:null}},shareUrl:{},embedCode:{},isLive:{validator:f.Lang.isBoolean},autoContinue:{validator:f.Lang.isBoolean},isPreFetched:{validator:f.Lang.isBoolean},eventBeginTime:{validator:f.Lang.isNumber},eventEndTime:{validator:f.Lang.isNumber},showName:{validator:f.Lang.isString},pageSpaceId:{validator:f.Lang.isString},CC:{},adData:{validator:f.Lang.isObject},licensorName:{validator:f.Lang.isString},licensorId:{validator:f.Lang.isString},licenseName:{validator:f.Lang.isString},licenseId:{validator:f.Lang.isString},spaceId:{validator:f.Lang.isString},"1u1sUrl":{validator:f.Lang.isString},"1u1sInterval":{validator:f.Lang.isNumber},originatingProperty:{validator:f.Lang.isString},cms:{},embeddable:{value:undefined,validator:f.Lang.isBoolean},bitrate:{},sessionGUID:{},playlistId:{},streams:[],visualseek:{},streamUrlOwner:{validator:f.Lang.isString},format:{},status:{},streamUrl:{},metrics:{validator:function(am){return f.Lang.isObject(am);
}},adTargeting:{},adTargetingCategory:{},mediaInfo:{value:{currentKbps:null,droppedFrames:null,playbackBytesPerSecond:null,frameRate:null,bufferLength:null,bufferingRatio:null,bufferSample:null,bufferTime:null,totalMemory:null,currentStreamIndex:null,currentStreamBitrate:null,qualityLevels:null,hwDecoding:null,hwRendering:null,minBitRate:null,maxBitRate:null,highestQualityPlaybackRatio:null,streamSwitchReason:null,mediaWidth:null,mediaHeight:null}},history:{value:{currentStreamBitrate:[],frameRate:[],currentKbps:[],streamSwitchReason:[],bufferSample:[]}},provider:{value:{name:null}},hdAvailable:{validator:f.Lang.isFunction},rendererType:{validator:function(am){return am==="html"||am==="flash";}}},al);this.after("mediaInfoChange",function(an){var ao=an.newVal,aq=Y.get("history"),ap=["frameRate","currentStreamBitrate","currentKbps","streamSwitchReason","bufferSample"],ar,am;for(ar=0;ar<ap.length;ar++){am=ap[ar];aq[am].push(ao[am]);if(aq[am].length>240){aq[am].shift();}}},this);}n.prototype={toObject:function(){return this.getAttrs();},_fireAttrChange:function(al,ap,ao,Y,an){f.Attribute.prototype._fireAttrChange.apply(this,arguments);var am=(an)?f.merge(an):this._ATTR_E_FACADE;this.fire("attrChange",am);}};f.augment(n,f.Attribute);f.namespace("VideoPlatform").MediaObject=n;function aa(al){if(f.Lang.isValue(al)){var Y=f.Lang.isArray(al)?al:f.Array(al);this._items=f.Array.map(Y,function(am){return f.instanceOf(am,n)?am:new n(am);});}else{this._items=this._items||[];}this._registerItems(this._items);this.publish("itemChange",{emitFacade:true});this.publish("clear",{emitFacade:true});}f.extend(aa,f.ArrayList,{toArray:function(){return f.Array.map(this._items.concat(),function(Y){return Y.toObject();});},add:function(an,al){var Y=this._items,ao=f.instanceOf(an,n)?an:new n(an),am;if(f.Lang.isNumber(al)){Y.splice(al,0,ao);am=al;}else{Y.push(ao);am=Y.length-1;}this.fire("add",{item:this.item(am)});return this;},reset:function(){this._items=[];},find:function(Y,al){return f.Array.find(this._items,Y,al);},getIndexById:function(al){var Y;Y=-1;f.Array.some(this._items,function(an,am){if(an.get("id")===al){Y=am;return true;}});return Y;},remove:function(ao,am,Y){var an=[],al;Y=Y||this.itemsAreEqual;for(al=this._items.length-1;al>=0;--al){if(Y.call(this,ao,this.item(al))){an=an.concat(this._items.splice(al,1));if(!am){break;}}}if(an.length>0){this._deregisterItems(an);this.fire("remove",{items:an});}return this;},removeItems:function(Y,am){var al;if(f.Lang.isUndefined(am)){throw new Error("Expected count, did you mean to use removeItem?");}al=this._items.splice(Y,am);this._deregisterItems(al);},removeItem:function(Y){this.removeItems(Y,1);},removeItemById:function(al){var Y=this.getIndexById(al);this.removeItem(Y);},removeItemsById:function(al){var Y=this;f.each(al,function(am){Y.removeItemById(am);});},clear:function(){this._deregisterItems(this._items);this._items=[];this.fire("clear");},_registerItems:function(Y){f.Array.each(Y,function(al){al.after("attrChange",this._onItemAttrChange,this);},this);},_deregisterItems:function(Y){f.Array.each(Y,function(al){al.detach("attrChange",this._onItemAttrChange,this);},this);},_onItemAttrChange:function(al){var Y=al.target;this.fire("itemChange",f.merge(al,{mediaObject:Y,index:this.indexOf(Y)}));}});f.augment(aa,f.EventTarget);f.namespace("VideoPlatform").MediaCollection=aa;function F(Y){this.addAttrs({id:{value:"",validator:function(am){return f.Lang.isValue(am);}},totalLength:{value:0,validator:function(am){return f.Lang.isNumber(am);}},totalRequested:{value:0,validator:function(am){return f.Lang.isNumber(am);}},title:{value:"",validator:function(am){return f.Lang.isValue(am);}},description:{value:"",validator:function(am){return f.Lang.isValue(am);}},mediaItems:{value:new f.VideoPlatform.MediaCollection(),writeOnce:"initOnly",setter:function(am){if(!f.instanceOf(am,f.VideoPlatform.MediaCollection)){return new f.VideoPlatform.MediaCollection(am);}}}},Y);var al=this.items();al.after("itemChange",this._onItemChange,this);al.after("add",this._onItemAdd,this);al.after("remove",this._onItemRemove,this);this.publish("mediaItemChange",{emitFacade:true});this.publish("mediaItemRemove",{emitFacade:true});this.publish("mediaItemAdd",{emitFacade:true});}F.prototype={items:function(){return this.get("mediaItems");},toObject:function(){var Y=this.getAttrs(),al=[];f.each(Y.mediaItems,function(am){al.push(am.toObject());});Y.mediaItems=al;return Y;},_onItemChange:function(Y){this.fire("mediaItemChange",{attrName:Y.attrName,index:Y.index,newVal:Y.newVal,prevVal:Y.prevVal,mediaObject:Y.mediaObject});},_onItemAdd:function(Y){this.fire("mediaItemAdd",{item:Y.item});},_onItemRemove:function(Y){this.fire("mediaItemRemove",{items:Y.items});},_fireAttrChange:function(al,ap,ao,Y,an){f.Attribute.prototype._fireAttrChange.apply(this,arguments);var am=(an)?f.merge(an):this._ATTR_E_FACADE;this.fire("attrChange",am);}};f.augment(F,f.Attribute);f.namespace("VideoPlatform").PlaylistObject=F;function ae(){this._items=[];}ae.prototype.items=function(){return this._items;};ae.prototype.add=function(Y){this._items.push(Y);this.fire("itemAdded",{item:Y});return this;};f.augment(ae,f.EventTarget);f.namespace("VideoPlatform").ProfileDataCollection=ae;function O(){O.superclass.constructor.apply(this,arguments);this.START_TIME=(new Date()).getTime();var Y=this.get("playlist");Y.after("attrChange",this._onPlaylistAttrChange,this);Y.after("mediaItemChange",this._onMediaItemChange,this);Y.after("mediaItemAdd",this._onMediaItemAdd,this);Y.after("mediaItemRemove",this._onMediaItemRemove,this);this.publish("playlistAttrChange",{emitFacade:true});this.publish("playlistItemChange",{emitFacade:true});this.publish("playlistItemAdd",{emitFacade:true});this.publish("playlistItemRemove",{emitFacade:true});}O.NAME="Model";O.NS="model";O.ATTRS={version:{value:"4.1.13.21046",readOnly:true},hostingData:{writeOnce:true,setter:function(Y){return{bucket:Y.bucket,colo:Y.colo,env:Y.env};}},criticalError:{value:null,validator:function(Y){return f.Lang.isObject(Y);
}},fullscreen:{value:false,validator:f.Lang.isBoolean},height:{validator:function(Y){return f.Lang.isNumber(Y)&&Y>=0;}},width:{validator:function(Y){return f.Lang.isNumber(Y)&&Y>=0;}},adClientSize:{value:{width:0,height:0}},volume:{value:0.7,validator:function(Y){return f.Lang.isNumber(Y);}},mute:{value:false,validator:function(Y){return f.Lang.isBoolean(Y);}},autoplay:{value:false,validator:function(Y){return f.Lang.isBoolean(Y);}},ybang:{value:true,validator:function(Y){return f.Lang.isBoolean(Y);}},carousel:{value:false,validator:function(Y){return f.Lang.isBoolean(Y);}},partnerCarouselItems:{value:null},endscreen:{value:true,validator:function(Y){return f.Lang.isObject(Y)||f.Lang.isBoolean(Y);},contentAlgo:{value:"",validator:function(Y){return f.Lang.isString(Y);}}},infoscreen:{value:true,validator:function(Y){return f.Lang.isObject(Y)||f.Lang.isBoolean(Y);}},errorscreen:{value:true,validator:function(Y){return f.Lang.isObject(Y)||f.Lang.isBoolean(Y);}},startscreen:{value:{showProvider:false,showDesc:true,showButton:true,showTitle:true},validator:function(Y){return f.Lang.isObject(Y)||(f.Lang.isBoolean(Y)&&!Y);}},client:{value:""},YVAP:{value:null,setter:function(Y){return new f.Attribute().addAttrs({accountId:{value:""},playContext:{value:""},ruleSetId:{value:-1},timeout:{value:""}},Y);}},YVAPRequired:{value:true},synd:{value:"",validator:f.Lang.isString},adPluginMetric:{value:null},adPluginQosMetric:{value:null},mediaFormats:{validator:f.Lang.isArray},continuousPlay:{value:false,validator:f.Lang.isBoolean},guid:{writeOnce:true,validator:f.Lang.isString},playerSpaceId:{value:"0"},pageSpaceId:{value:"0"},reportingDomain:{value:"unknown.videoplayer.yahoo.com"},lang:{value:"",validator:f.Lang.isString},bitrate:{value:900,validator:function(Y){return f.Lang.isNumber(Y);}},shareUrlTemplate:{value:"http://video.yahoo.com/play/{videoId}"},chromeless:{value:false,validator:f.Lang.isBoolean},warning:{value:null},error:{value:null},errorDisplayDuration:{value:5,validator:f.Lang.isNumber},beacons:{value:[],validator:f.Lang.isArray},site:{value:""},region:{value:""},jurisdiction:{value:""},comscoreC4:{validator:function(Y){return f.Lang.isString(Y)&&(Y.length>0);}},comscoreC6:{value:"",validator:f.Lang.isString},isOffNetwork:{value:false,validator:f.Lang.isBoolean},lms:{value:"none",validator:function(Y){return"none"===Y||"all"===Y;}},rendererType:{validator:f.Lang.isString},videoRendererState:{},rendererReady:{value:false},videoPlaybackState:{value:null},currentMedia:{value:null},duration:{value:-1,validator:function(Y){return f.Lang.isNumber(Y)||Y===Number.POSITIVE_INFINITY;}},playbackPosition:{value:-1,validator:f.Lang.isNumber,setter:function(Y){this.set("currentTime",Y);return Math.floor(Y);}},currentTime:{value:-1,validator:f.Lang.isNumber},adPlaybackPosition:{value:-1,validator:f.Lang.isNumber},playlistPosition:{value:-1,validator:f.Lang.isNumber},playlist:{value:new F(),writeOnce:"initOnly",setter:function(Y){return new F(Y);}},startVideo:{value:"",validator:f.Lang.isString},playerState:{value:null},yvapState:{value:null},yvapData:{value:null},isInitialized:{value:false},activeScreenStr:{value:undefined},isLoading:{value:false},isLoaded:{value:false},isPreparing:{value:false},isPrepared:{value:false},isStarted:{value:false},isCompleted:{value:false},isPlaying:{value:false},isWaiting:{value:false},isSeeking:{value:false},isPaused:{value:false},isError:{value:false},isPlaybackError:{value:false},metrics:{value:{sAPIRelatedClipsLatency:null,yvapJSLatency:null,cssLatency:null,playerRenderLatency:null}},expType:{value:"",validator:f.Lang.isString},expName:{value:"",validator:f.Lang.isString},expBucket:{value:"",validator:f.Lang.isString},profileData:{value:null,setter:function(){return new f.VideoPlatform.ProfileDataCollection();}},isSpinnerShown:{value:false},ccAvailable:{value:false,validator:f.Lang.isBoolean},showClosedCaptions:{value:false,validator:f.Lang.isBoolean},atlasEnv:{value:""},CMS:{value:{env:null,host:null,suppressAdContext:false}},SAPI_CONF:{value:{host:null}},emptySpaceIdContextInSapi:{value:false,validator:f.Lang.isBoolean},endScreenVideos:{value:new F(),writeOnce:"initOnly",setter:function(Y){return new F(Y);}},showControls:{value:false,validator:f.Lang.isBoolean},closedCaptionUrl:{value:null,validator:f.Lang.isString},closedCaptions:{value:null,validator:f.Lang.isObject},maxConnectionAttempts:{value:"3",validator:f.Lang.isNumber},streamAd:{value:null},standaloneAdMode:{value:false},loop:{value:false,validator:f.Lang.isBoolean},isVisualSeekEnabled:{value:true,validator:f.Lang.isBoolean},pageLatency:{value:{pagePlayerJsDownloadStart:null,pagePlayerJsDownloadTime:null,pageMediaItemPrefetchTime:null}}};f.extend(O,f.Base,{_onPlaylistAttrChange:function(Y){this.fire("playlistAttrChange",Y);},_onMediaItemChange:function(Y){this.fire("playlistItemChange",Y);},_onMediaItemAdd:function(Y){this.fire("playlistItemAdd",Y);},_onMediaItemRemove:function(Y){this.fire("playlistItemRemove",Y);}});f.namespace("VideoPlatform").Model=O;function s(){s.superclass.constructor.apply(this,arguments);}s.CSS=".yui3-videoplayer-loading,.yui3-videoplayer-carousel-left,.yui3-videoplayer-carousel-right,.yui3-videoplayer-controls .embed-chainlink-button,.yui3-videoplayer-controls .fb-icon,.yui3-videoplayer-infoscreen-fb-icon,.yui3-videoplayer-errorscreen-download-flash-button,.yui3-videoplayer-partner-bar .branding-logo,.yui3-videoplayer-controls .play-pause span,.yui3-videoplayer-carousel-viewport-item .overlay .play-button,.yui3-videoplayer-endscreen-watched-wrapper .yui3-videoplayer-endscreen-watched .overlay .replay-button,.yui3-videoplayer-endscreen-carousel-node .overlay .replay-button,.yui3-videoplayer-errorscreen-image,.yui3-videoplayer-controls .settings span,.yui3-videoplayer-controls .size .full,.yui3-videoplayer-controls .volume .mute span{background:url('http://l.yimg.com/rx/builds/4.1.13.21046/assets/main-images.png') no-repeat;*background-color:transparent}.yui3-videoplayer-loading,.ssl .yui3-videoplayer-content .yui3-videoplayer-carousel-left,.ssl .yui3-videoplayer-content .yui3-videoplayer-carousel-right,.ssl .yui3-videoplayer-content .yui3-videoplayer-controls .embed-chainlink-button,.ssl .yui3-videoplayer-content .yui3-videoplayer-controls .fb-icon,.ssl .yui3-videoplayer-content .yui3-videoplayer-infoscreen-fb-icon,.ssl .yui3-videoplayer-content .yui3-videoplayer-errorscreen-download-flash-button,.ssl .yui3-videoplayer-content .yui3-videoplayer-partner-bar .branding-logo,.ssl .yui3-videoplayer-content .yui3-videoplayer-controls .play-pause span,.ssl .yui3-videoplayer-content .yui3-videoplayer-carousel-viewport-item .overlay .play-button,.ssl .yui3-videoplayer-content .yui3-videoplayer-endscreen-watched-wrapper .yui3-videoplayer-endscreen-watched .overlay .replay-button,.ssl .yui3-videoplayer-content .yui3-videoplayer-endscreen-carousel-node .overlay .replay-button,.ssl .yui3-videoplayer-content .yui3-videoplayer-errorscreen-image,.ssl .yui3-videoplayer-content .yui3-videoplayer-controls .settings span,.ssl .yui3-videoplayer-content .yui3-videoplayer-controls .size .full,.ssl .yui3-videoplayer-content .yui3-videoplayer-controls .volume .mute span{background:url('https://s.yimg.com/rx/builds/4.1.13.21046/assets/main-images.png') no-repeat;*background-color:transparent}.yui3-videoplayer-loading{background-position:-0px -0px;width:80px;height:80px}.yui3-videoplayer-carousel-container .yui3-videoplayer-carousel-left{background-position:-40px -80px;width:40px;height:50px}.yui3-videoplayer-carousel-container .yui3-videoplayer-arrow-container .yui3-videoplayer-carousel-left:hover{background-position:-0px -80px;width:40px;height:50px}.yui3-videoplayer-carousel-container .yui3-videoplayer-carousel-right{background-position:-80px -112px;width:40px;height:50px}.yui3-videoplayer-carousel-container .yui3-videoplayer-arrow-container .yui3-videoplayer-carousel-right:hover{background-position:-0px -130px;width:40px;height:50px}.yui3-videoplayer-controls .embed-chainlink-button{background-position:-147px -99px;width:11px;height:12px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDExLjM0NSAxMiIgd2lkdGg9IjExLjM0NXB4IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTEuMzQ1IDEyIj4KPGcgZmlsbD0iIzY2NjU2NCI+Cgk8cGF0aCBkPSJtNC4xOTcgNC44MzRsMC44NzcgMC44NzZzMS4xNjgtMS4yNzcgMi4wOC0wLjI1NmMwIDAgMy43MjIgMi42MjkgMi40MDggNC4zOCAwIDAtMS42MDUgMS45MzQtMy4yODQtMC44NGwtMS40MjMgMC4xMXMyLjAwNyA0LjUyNCA1LjIxOSAyLjI2MmMwIDAgMi4wNDMtMS40OTYgMC45NDgtMy43NTkgMCAwLTMuMzk0LTUuNzI5LTYuODI1LTIuNzczeiIvPgoJPHBhdGggZD0ibTcuMTQ4IDcuMTY2bC0wLjg3Ny0wLjg3NnMtMS4xNjggMS4yNzctMi4wOCAwLjI1NmMwIDAtMy43MjMtMi42MjgtMi40MDktNC4zOCAwIDAgMS42MDYtMS45MzQgMy4yODUgMC44NGwxLjQyMy0wLjExcy0yLjAwOC00LjUyNS01LjIxOS0yLjI2M2MwIDAtMi4wNDQgMS40OTYtMC45NDkgMy43NTkgMCAwLjAwMSAzLjM5NSA1LjczIDYuODI2IDIuNzc0eiIvPgo8L2c+Cjwvc3ZnPgo=);background-position:0 0,0 0;*background-position:-147px -99px}.yui3-videoplayer-controls .fb-icon{background-position:-135px -79px;width:20px;height:20px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB3aWR0aD0iMjBweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIj4KPHBhdGggZD0ibTIwIDE4YzAgMS4xMDQtMC44OTYgMi0yIDJoLTE2Yy0xLjEwNCAwLTItMC44OTYtMi0ydi0xNmMwLTEuMTA1IDAuODk2LTIgMi0yaDE2YzEuMTA0IDAgMiAwLjg5NSAyIDJ2MTZ6IiBmaWxsPSIjM0I1Njk5Ii8+Cgk8cGF0aCBkPSJtMTEuMTYgMTcuNjh2LTYuODQyaDIuMjk3bDAuMzQ4LTIuNjY2aC0yLjY0NXYtMS43MDNjMC0wLjc3MSAwLjIxNS0xLjI5NyAxLjMyNC0xLjI5N2wxLjQxLTAuMDAydi0yLjM4NWMtMC4yNDQtMC4wMzEtMS4wODItMC4xMDUtMi4wNTYtMC4xMDUtMi4wMzcgMC0zLjQzIDEuMjQyLTMuNDMgMy41MjV2MS45NjdoLTIuMzAzdjIuNjY2aDIuMzA1djYuODQyaDIuNzV6IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=);background-position:0 0,0 0;*background-position:-135px -79px}.yui3-videoplayer-controls .fb-icon:hover{background-position:-135px -59px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMjBweCIgd2lkdGg9IjIwcHgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIj4KPGcgZGlzcGxheT0ibm9uZSI+Cgk8cGF0aCBkPSJtMjAgMThjMCAxLjEwNC0wLjg5NiAyLTIgMmgtMTZjLTEuMTA0IDAtMi0wLjg5Ni0yLTJ2LTE2YzAtMS4xMDUgMC44OTYtMiAyLTJoMTZjMS4xMDQgMCAyIDAuODk1IDIgMnYxNnoiIGRpc3BsYXk9ImlubGluZSIgZmlsbD0iIzNCNTY5OSIvPgoJPGcgZGlzcGxheT0iaW5saW5lIj4KCQk8cGF0aCBkPSJtMTEuMTYgMTcuNjh2LTYuODQyaDIuMjk3bDAuMzQ4LTIuNjY2aC0yLjY0NXYtMS43MDNjMC0wLjc3MSAwLjIxNS0xLjI5NyAxLjMyNC0xLjI5N2wxLjQxLTAuMDAydi0yLjM4NWMtMC4yNDQtMC4wMzEtMS4wODItMC4xMDUtMi4wNTYtMC4xMDUtMi4wMzcgMC0zLjQzIDEuMjQyLTMuNDMgMy41MjV2MS45NjdoLTIuMzAzdjIuNjY2aDIuMzA1djYuODQyaDIuNzV6IiBmaWxsPSIjZmZmIi8+Cgk8L2c+CjwvZz4KCTxwYXRoIGQ9Im0yMCAxOGMwIDEuMTA0LTAuODk2IDItMiAyaC0xNmMtMS4xMDQgMC0yLTAuODk2LTItMnYtMTZjMC0xLjEwNSAwLjg5Ni0yIDItMmgxNmMxLjEwNCAwIDIgMC44OTUgMiAydjE2eiIgZmlsbD0iIzMwNDY3QSIvPgoJCTxwYXRoIGQ9Im0xMS4xNiAxNy42OHYtNi44NDJoMi4yOTdsMC4zNDgtMi42NjZoLTIuNjQ1di0xLjcwM2MwLTAuNzcxIDAuMjE1LTEuMjk3IDEuMzI0LTEuMjk3bDEuNDEtMC4wMDJ2LTIuMzg1Yy0wLjI0NC0wLjAzMS0xLjA4Mi0wLjEwNS0yLjA1Ni0wLjEwNS0yLjAzNyAwLTMuNDMgMS4yNDItMy40MyAzLjUyNXYxLjk2N2gtMi4zMDN2Mi42NjZoMi4zMDV2Ni44NDJoMi43NXoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==);background-position:0 0,0 0;*background-position:-135px -59px}.yui3-videoplayer-infoscreen-fb-icon{background-position:-0px -219px;width:20px;height:20px}.yui3-videoplayer-errorscreen-download-flash-button{background-position:-0px -180px;width:158px;height:39px}.yui3-videoplayer-loading.legacy{background-position:-120px -112px;width:26px;height:26px}.yui3-videoplayer-partner-bar .branding-logo{background-position:-80px -0px;width:74px;height:59px}.yui3-videoplayer-controls .pause span{background-position:-76px -219px;width:11px;height:11px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTFweCIgdmlld0JveD0iMCAwIDEwLjUgMTEiIHdpZHRoPSIxMC41cHgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMC41IDExIj4KCQk8cmVjdCB4PSIuMTI1IiBoZWlnaHQ9IjExIiB3aWR0aD0iMyIgZmlsbD0iI0NEQ0NDQyIvPgoJCTxyZWN0IHg9IjcuMzc1IiBoZWlnaHQ9IjExIiB3aWR0aD0iMyIgZmlsbD0iI0NEQ0NDQyIvPgo8L3N2Zz4K);background-position:0 0,0 0;*background-position:-76px -219px}.yui3-videoplayer-controls .pause:hover span{background-position:-65px -219px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTFweCIgdmlld0JveD0iMCAwIDEwLjUgMTEiIHdpZHRoPSIxMC41cHgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMC41IDExIj4KCQk8cmVjdCB4PSIuMTI1IiBoZWlnaHQ9IjExIiB3aWR0aD0iMyIgZmlsbD0iI2ZmZiIvPgoJCTxyZWN0IHg9IjcuMzc1IiBoZWlnaHQ9IjExIiB3aWR0aD0iMyIgZmlsbD0iI2ZmZiIvPgo8L3N2Zz4K);background-position:0 0,0 0;*background-position:-65px -219px}.yui3-videoplayer-controls .play span{background-position:-54px -219px;width:11px;height:11px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTFweCIgdmlld0JveD0iMCAwIDEwLjUgMTEiIHdpZHRoPSIxMC41cHgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMC41IDExIj4KCQk8cG9seWdvbiBwb2ludHM9IjEwLjM1MiA1LjQ5OCAwLjE0OCAxMSAwLjE0OCAwIiBmaWxsPSIjY2NjIi8+Cjwvc3ZnPgo=);background-position:0 0,0 0;*background-position:-54px -219px}.yui3-videoplayer-controls .play:hover span{background-position:-87px -219px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTFweCIgdmlld0JveD0iMCAwIDEwLjUgMTEiIHdpZHRoPSIxMC41cHgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMC41IDExIj4KCQk8cG9seWdvbiBwb2ludHM9IjEwLjM1MiA1LjQ5OCAwLjE0OCAxMSAwLjE0OCAwIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=);background-position:0 0,0 0;*background-position:-87px -219px}.yui3-videoplayer-carousel-viewport-item .overlay .play-button{background-position:-120px -138px;width:33px;height:23px;background-image:none,url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMjIuODI4cHgiIHZpZXdCb3g9IjAgMCAzMS45MDEgMjIuODI4IiB3aWR0aD0iMzEuOTAxcHgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMS45MDEgMjIuODI4Ij4KCTxwYXRoIGQ9Im0wLjE0NiA0LjQzOGMwLTIuMzIxIDEuODU5LTQuMjA1IDQuMTU0LTQuMjA1IDAgMCAxMS40NzMtMC41MjMgMjMuMjI5IDAgMi4yOTQgMCA0LjE1NSAxLjg4NCA0LjE1NSA0LjIwNSAwIDAgMC40ODYgNi43OTcgMCAxNC4wMzkgMCAyLjMyMi0xLjg2MSA0LjIwMy00LjE1NSA0LjIwMyAwIDAtMTEuODA0IDAuMzM0LTIzLjIyOSAwLTIuMjk1IDAtNC4xNTQtMS44ODEtNC4xNTQtNC4yMDMgMCAwLTAuMzMtMy4zNiAwLTE0LjAzOXoiIGZpbGw9IiMzMjRGRTEiLz4KCTxwb2x5Z29uIHBvaW50cz0iMjEuMDk4IDExLjQxNCAxMy4wNyAxNS44MDcgMTMuMDcgNy4wMiIgZmlsbD0iI2ZmZiIvPgo8L3N2Zz4K');background-position:0 0,0 0;*background-position:-120px -138px}.yui3-videoplayer-endscreen-watched-wrapper .yui3-videoplayer-endscreen-watched .overlay .replay-button,.yui3-videoplayer-endscreen-carousel-node .overlay .replay-button{background-position:-40px -130px;width:39px;height:43px;background-image:none,url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iNDIuNXB4IiB2aWV3Qm94PSIwIDAgMzguNSA0Mi41IiB3aWR0aD0iMzguNXB4IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMzguNSA0Mi41Ij4KPHBhdGggZD0ibTEuNTc4IDIzLjAzNmMwIDkuNzM0IDcuODkgMTcuNjI0IDE3LjYyMyAxNy42MjQgOS43MzIgMCAxNy42MjMtNy44OSAxNy42MjMtMTcuNjI0IDAtOS43MzMtNy44OTEtMTcuNjIzLTE3LjYyMy0xNy42MjMtMS4wMjggMC0yLjAzNCAwLjA5NC0zLjAxNCAwLjI2MnYtNC4xMDVsLTYuNTg0IDYuNTk4IDYuNTg0IDYuNjExdi00LjEwNmMwLjk2Ny0wLjIzNiAxLjk3Ni0wLjM2NCAzLjAxNC0wLjM2NCA3LjAxOCAwIDEyLjcyOCA1LjcxIDEyLjcyOCAxMi43MjggMCA3LjAxOS01LjcxIDEyLjcyOS0xMi43MjggMTIuNzI5cy0xMi43MjktNS43MTEtMTIuNzI5LTEyLjczaC00Ljg5NHoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==');background-position:0 0,0 0;*background-position:-40px -130px}.yui3-videoplayer-errorscreen-image{background-position:-80px -59px;width:55px;height:53px}.yui3-videoplayer-controls .settings span{background-position:-142px -161px;width:13px;height:13px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTIuMDAxcHgiIHZpZXdCb3g9IjAgMCAxMiAxMi4wMDEiIHdpZHRoPSIxMnB4IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTIgMTIuMDAxIj4KPGcgZmlsbD0iI2NjYyI+Cgk8cG9seWdvbiBwb2ludHM9IjYuMDAxIDMuMzI3IDIuNzM5IDYuNTgxIDMuODI0IDcuNzAyIDYuMDAxIDUuNTE0IDguMTQ1IDcuNzAyIDkuMjQ4IDYuNjA3Ii8+Cgk8cGF0aCBkPSJtNiAwYy0zLjMxMyAwLTYgMi42ODYtNiA2IDAgMy4zMTMgMi42ODcgNiA2IDZzNi0yLjY4NyA2LTZjMC0zLjMxNC0yLjY4Ny02LTYtNnptLTAuMDA3IDEwLjQxNGMtMi40NDkgMC00LjQzNC0xLjk3OS00LjQzNC00LjQyMXMxLjk4NC00LjQyIDQuNDM0LTQuNDIgNC40MzQgMS45NzkgNC40MzQgNC40Mi0xLjk4NSA0LjQyMS00LjQzNCA0LjQyMXoiLz4KPC9nPgo8L3N2Zz4K);background-position:0 0,0 0;*background-position:-142px -161px}.yui3-videoplayer-controls .settings.on span{background-position:-101px -162px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTIuMDAxcHgiIHZpZXdCb3g9IjAgMCAxMiAxMi4wMDEiIHdpZHRoPSIxMnB4IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTIgMTIuMDAxIj4KCQk8cGF0aCBkPSJtNiAwYy0zLjMxMyAwLTYgMi42ODctNiA2czIuNjg3IDYgNiA2IDYtMi42ODggNi02YzAtMy4zMTMtMi42ODctNi02LTZ6IiBmaWxsPSIjNUYzM0ZGIi8+Cgk8cG9seWdvbiBwb2ludHM9IjUuOTg1IDguNzUzIDkuMjQ4IDUuNDk4IDguMTYzIDQuMzc3IDUuOTg1IDYuNTY1IDMuODQyIDQuMzc3IDIuNzM5IDUuNDcyIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=);background-position:0 0,0 0;*background-position:-101px -162px}.yui3-videoplayer-controls .size .full{background-position:-120px -161px;width:22px;height:17px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTdweCIgdmlld0JveD0iMCAwIDIyIDE3IiB3aWR0aD0iMjJweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIyIDE3Ij4KCQk8cG9seWdvbiBwb2ludHM9IjIyIDYgMjAgNiAyMCAyIDE2IDIgMTYgMCAyMiAwIiBmaWxsPSIjQ0RDQ0NDIi8+CgkJPHBvbHlnb24gcG9pbnRzPSIyMiAxNyAxNiAxNyAxNiAxNSAyMCAxNSAyMCAxMSAyMiAxMSIgZmlsbD0iI0NEQ0NDQyIvPgoJCTxwb2x5Z29uIHBvaW50cz0iMiA2IDAgNiAwIDAgNiAwIDYgMiAyIDIiIGZpbGw9IiNDRENDQ0MiLz4KCQk8cG9seWdvbiBwb2ludHM9IjYgMTcgMCAxNyAwIDExIDIgMTEgMiAxNSA2IDE1IiBmaWxsPSIjQ0RDQ0NDIi8+Cjwvc3ZnPgo=);background-position:0 0,0 0;*background-position:-120px -161px}.yui3-videoplayer-controls .size .full:hover{background-position:-79px -162px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTdweCIgdmlld0JveD0iMCAwIDIyIDE3IiB3aWR0aD0iMjJweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIyIDE3Ij4KCQk8cG9seWdvbiBwb2ludHM9IjIyIDYgMjAgNiAyMCAyIDE2IDIgMTYgMCAyMiAwIiBmaWxsPSIjZmZmIi8+CgkJPHBvbHlnb24gcG9pbnRzPSIyMiAxNyAxNiAxNyAxNiAxNSAyMCAxNSAyMCAxMSAyMiAxMSIgZmlsbD0iI2ZmZiIvPgoJCTxwb2x5Z29uIHBvaW50cz0iMiA2IDAgNiAwIDAgNiAwIDYgMiAyIDIiIGZpbGw9IiNmZmYiLz4KCQk8cG9seWdvbiBwb2ludHM9IjYgMTcgMCAxNyAwIDExIDIgMTEgMiAxNSA2IDE1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=);background-position:0 0,0 0;*background-position:-79px -162px}.yui3-videoplayer-controls .size .full.on,.yui3-videoplayer-controls .size .full.on:hover{background-position:-20px -219px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTdweCIgdmlld0JveD0iMCAwIDIyIDE3IiB3aWR0aD0iMjJweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIyIDE3Ij4KCQk8cG9seWdvbiBwb2ludHM9IjIyIDYgMjAgNiAyMCAyIDE2IDIgMTYgMCAyMiAwIiBmaWxsPSIjNUYzRkZGIi8+CgkJPHBvbHlnb24gcG9pbnRzPSIyMiAxNyAxNiAxNyAxNiAxNSAyMCAxNSAyMCAxMSAyMiAxMSIgZmlsbD0iIzVGM0ZGRiIvPgoJCTxwb2x5Z29uIHBvaW50cz0iMiA2IDAgNiAwIDAgNiAwIDYgMiAyIDIiIGZpbGw9IiM1RjNGRkYiLz4KCQk8cG9seWdvbiBwb2ludHM9IjYgMTcgMCAxNyAwIDExIDIgMTEgMiAxNSA2IDE1IiBmaWxsPSIjNUYzRkZGIi8+Cjwvc3ZnPgo=);background-position:0 0,0 0;*background-position:-20px -219px}.yui3-videoplayer-controls .volume .mute span{background-position:-146px -112px;width:12px;height:12px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTJweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyIDEyIj4KCTxnIGZpbGw9IiNjY2MiPgoJCTxwb2x5Z29uIHBvaW50cz0iMi4zNiA0LjE3NiAwLjUyMiA0LjE3NiAwLjUyMiA3Ljg0NCAyLjM3NCA3Ljg0NCA2LjAyNCAxMS41IDYuMDI0IDAuNSAyLjM2IDQuMTciLz4KCQk8cGF0aCBkPSJtNy40MzMgMy42ODZsLTAuNTUzIDEuMDg1djAuMDI1YzAuMzQ2IDAuMjg0IDAuNTcyIDAuNzA4IDAuNTcyIDEuMTkgMCAwLjQ4LTAuMjI3IDAuOTA0LTAuNTcyIDEuMTg4djAuMDA0bDAuNTYgMS4xMDFjMC43NDItMC40OTQgMS4yMzItMS4zMzYgMS4yMzItMi4yOTMgMC4wMDEtMC45NjMtMC40OTEtMS44MDgtMS4yMzktMi4zeiIvPgoJCTxwYXRoIGQ9Im0xMS40NzggNS45ODZjMC0yLjA0Ny0xLjEyNS0zLjgyOC0yLjc4OS00Ljc2OGwtMC41NDUgMS4wN3YwLjAyN2MxLjI2MiAwLjczOCAyLjExMyAyLjEwNCAyLjExMyAzLjY3IDAgMS41NjQtMC44NTIgMi45My0yLjExMyAzLjY2OHYwLjAwNGwwLjU1NSAxLjA4OGMxLjY1Ny0wLjkzOCAyLjc3OS0yLjcxOCAyLjc3OS00Ljc1OXoiLz4KCTwvZz4KPC9zdmc+Cg==);background-position:0 0,0 0;*background-position:-146px -112px}.yui3-videoplayer-controls .volume .mute:hover span{background-position:-146px -124px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTJweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyIDEyIj4KCTxnIGZpbGw9IiNmZmYiPgoJCTxwb2x5Z29uIHBvaW50cz0iMi4zNiA0LjE3NiAwLjUyMiA0LjE3NiAwLjUyMiA3Ljg0NCAyLjM3NCA3Ljg0NCA2LjAyNCAxMS41IDYuMDI0IDAuNSAyLjM2IDQuMTciLz4KCQk8cGF0aCBkPSJtNy40MzMgMy42ODZsLTAuNTUzIDEuMDg1djAuMDI1YzAuMzQ2IDAuMjg0IDAuNTcyIDAuNzA4IDAuNTcyIDEuMTkgMCAwLjQ4LTAuMjI3IDAuOTA0LTAuNTcyIDEuMTg4djAuMDA0bDAuNTYgMS4xMDFjMC43NDItMC40OTQgMS4yMzItMS4zMzYgMS4yMzItMi4yOTMgMC4wMDEtMC45NjMtMC40OTEtMS44MDgtMS4yMzktMi4zeiIvPgoJCTxwYXRoIGQ9Im0xMS40NzggNS45ODZjMC0yLjA0Ny0xLjEyNS0zLjgyOC0yLjc4OS00Ljc2OGwtMC41NDUgMS4wN3YwLjAyN2MxLjI2MiAwLjczOCAyLjExMyAyLjEwNCAyLjExMyAzLjY3IDAgMS41NjQtMC44NTIgMi45My0yLjExMyAzLjY2OHYwLjAwNGwwLjU1NSAxLjA4OGMxLjY1Ny0wLjkzOCAyLjc3OS0yLjcxOCAyLjc3OS00Ljc1OXoiLz4KCTwvZz4KPC9zdmc+Cg==);background-position:0 0,0 0;*background-position:-146px -124px}.yui3-videoplayer-controls .volume .mute.on span{background-position:-135px -99px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTJweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyIDEyIj4KCTxnIGZpbGw9IiM1RjNGRkYiPgoJCTxwb2x5Z29uIHBvaW50cz0iMi4zNDYgNC4xNjcgMi4zNDYgNC4xNzQgMC41MDggNC4xNzQgMC41MDggNy44NDMgMi4zNTggNy44NDMgNi4wMDggMTEuNDk4IDYuMDA4IDcuMTkyIDIuNzI1IDMuNzg3Ii8+CgkJPHBvbHlnb24gcG9pbnRzPSI2LjAwOCAwLjQ5OCAzLjgwNSAyLjcwNyA2LjAwOCA0Ljg0OCIvPgoJCTxwYXRoIGQ9Im03LjQxMSA2LjI3MmwwLjk3IDAuOTE4YzAuMTc4LTAuMzY0IDAuMjc4LTAuNzc0IDAuMjc4LTEuMjA4IDAtMC45NjMtMC40OTQtMS44MDgtMS4yNC0yLjNsLTAuNTU1IDEuMDg2djAuMDI2YzAuMzQ5IDAuMjgyIDAuNTc0IDAuNzA2IDAuNTc0IDEuMTg4IDAgMC4xLTAuMDA4IDAuMTk3LTAuMDI3IDAuMjl6Ii8+CgkJPHBhdGggZD0ibTEwLjI0MyA1Ljk4M2MwIDAuODk1LTAuMjc4IDEuNzI1LTAuNzUzIDIuNDEybDAuODY5IDAuODgzYzAuNjkzLTAuOTE2IDEuMTA0LTIuMDU4IDEuMTA0LTMuMjk0IDAtMi4wNDctMS4xMjUtMy44MjctMi43ODktNC43NjdsLTAuNTQ1IDEuMDd2MC4wMjZjMS4yNjIgMC43MzkgMi4xMTQgMi4xMDQgMi4xMTQgMy42N3oiLz4KCQk8cGF0aCBkPSJtMTEuODY4IDExLjE5M2wtMTAuOTU5LTEwLjk4cy0wLjMzMy0wLjQzOC0wLjgzMyAwYzAgMC0wLjIwOCAwLjM1NCAwLjEyNSAwLjcwOGwxMC44OTcgMTAuODc2czAuMzEyIDAuNDE2IDAuNzcxIDBjLTAuMDAxIDAgMC4yNy0wLjI5MS0wLjAwMS0wLjYwNHoiLz4KCTwvZz4KPC9zdmc+Cg==);background-position:0 0,0 0;*background-position:-135px -99px}.yui3-videoplayer-controls .volume .mute.on:hover span{background-position:-42px -219px;background-image:none,url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTJweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyIDEyIj4KCTxnIGZpbGw9IiNmZmYiPgoJCTxwb2x5Z29uIHBvaW50cz0iMi4zNDYgNC4xNjcgMi4zNDYgNC4xNzQgMC41MDggNC4xNzQgMC41MDggNy44NDMgMi4zNTggNy44NDMgNi4wMDggMTEuNDk4IDYuMDA4IDcuMTkyIDIuNzI1IDMuNzg3Ii8+CgkJPHBvbHlnb24gcG9pbnRzPSI2LjAwOCAwLjQ5OCAzLjgwNSAyLjcwNyA2LjAwOCA0Ljg0OCIvPgoJCTxwYXRoIGQ9Im03LjQxMSA2LjI3MmwwLjk3IDAuOTE4YzAuMTc4LTAuMzY0IDAuMjc4LTAuNzc0IDAuMjc4LTEuMjA4IDAtMC45NjMtMC40OTQtMS44MDgtMS4yNC0yLjNsLTAuNTU1IDEuMDg2djAuMDI2YzAuMzQ5IDAuMjgyIDAuNTc0IDAuNzA2IDAuNTc0IDEuMTg4IDAgMC4xLTAuMDA4IDAuMTk3LTAuMDI3IDAuMjl6Ii8+CgkJPHBhdGggZD0ibTEwLjI0MyA1Ljk4M2MwIDAuODk1LTAuMjc4IDEuNzI1LTAuNzUzIDIuNDEybDAuODY5IDAuODgzYzAuNjkzLTAuOTE2IDEuMTA0LTIuMDU4IDEuMTA0LTMuMjk0IDAtMi4wNDctMS4xMjUtMy44MjctMi43ODktNC43NjdsLTAuNTQ1IDEuMDd2MC4wMjZjMS4yNjIgMC43MzkgMi4xMTQgMi4xMDQgMi4xMTQgMy42N3oiLz4KCQk8cGF0aCBkPSJtMTEuODY4IDExLjE5M2wtMTAuOTU5LTEwLjk4cy0wLjMzMy0wLjQzOC0wLjgzMyAwYzAgMC0wLjIwOCAwLjM1NCAwLjEyNSAwLjcwOGwxMC44OTcgMTAuODc2czAuMzEyIDAuNDE2IDAuNzcxIDBjLTAuMDAxIDAgMC4yNy0wLjI5MS0wLjAwMS0wLjYwNHoiLz4KCTwvZz4KPC9zdmc+Cg==);background-position:0 0,0 0;*background-position:-42px -219px}.yui3-videoplayer-startscreen-button{background:url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iNTRweCIgdmlld0JveD0iMCAwIDc2IDU0IiB3aWR0aD0iNzZweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDc2IDU0Ij4KICAgICAgICA8cG9seWdvbiBwb2ludHM9IjUxLjExNiAyNy42MzcgMzEgMzguNTIyIDMxIDE2Ljc1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=');background-repeat:no-repeat;background-color:#324fe1;background-position:50% 50%;border-radius:7px;height:60px;left:50%;position:absolute;margin-left:-42px;margin-top:-30px;top:50%;width:85px;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIBJREFUeNpiPHPmzH4GBoYHQNxoYmIConECJiidAMTngRobgFiAkGIQACmqB+L7IE2EFKNoAmoAaUogpBgGFIB4PlADyHkOhBTDgAEQ7wc5jYUIxReAuBAYUgfwKYYF5wKYADbFH6CKJqBLsKApmgjEE4AKP2CzCqZ4ATExCBBgACJTMAloE9JCAAAAAElFTkSuQmCC');*background-image:url('http://l.yimg.com/rx/builds/4.1.13.21046/assets/play.png');background-image:url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iNTRweCIgdmlld0JveD0iMCAwIDc2IDU0IiB3aWR0aD0iNzZweCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDc2IDU0Ij4KICAgICAgICA8cG9seWdvbiBwb2ludHM9IjUxLjExNiAyNy42MzcgMzEgMzguNTIyIDMxIDE2Ljc1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo='),none}.ssl .yui3-videoplayer-content .yui3-videoplayer-startscreen-button{*background-image:url('https://s.yimg.com/rx/builds/4.1.13.21046/assets/play.png')}.yui3-videoplayer-content.small .yui3-videoplayer-startscreen-button{background-size:40px 28px;width:45px;height:30px;margin-left:-22px;margin-top:-15px}.yui3-videoplayer-content.medium .yui3-videoplayer-startscreen-button{background-size:59px 50px;width:65px;height:45px;margin-left:-32px;margin-top:-22px}.yui3-videoplayer-content{position:relative;width:100%;height:100%;overflow:hidden;font-family:Helvetica Neue Regular,Helvetica Neue,helvetica,arial,sans-serif;font-size:16px;cursor:default;background-color:black}.yui3-videoplayer-content:-webkit-full-screen{width:100%!important;height:100%!important}.yui3-videoplayer-content h3,.yui3-videoplayer-content p,.yui3-videoplayer-content label,.yui3-videoplayer-content span,.yui3-videoplayer-content input{margin:0}.yui3-videoplayer-content h2:focus,.yui3-videoplayer-content h3:focus,.yui3-videoplayer-content h4:focus{outline:0}.yui3-videoplayer-yvap{position:absolute;top:0;left:0;width:100%;height:100%}.yui3-videoplayer-content a{color:#6cc5fd}.yui3-videoplayer-content a:hover{color:white}.yui3-videoplayer-content input:focus{outline:0}.yui3-videoplayer-video{position:absolute;width:100%;height:100%;top:0;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yui3-videoplayer-video>video{margin:auto;position:absolute;top:0;right:0;bottom:0;left:0}.yui3-videoplayer-loading{position:absolute;top:50%;left:50%;margin-top:-40px;margin-left:-40px;-moz-opacity:.30;opacity:.30;filter:alpha(opacity=30);-webkit-animation:yui3-videoplayer-spinner .6s infinite linear;-moz-animation:yui3-videoplayer-spinner .6s infinite linear}@-webkit-keyframes yui3-videoplayer-spinner{from{-webkit-transform:rotateZ(0deg)}to{-webkit-transform:rotateZ(360deg)}}@-moz-keyframes yui3-videoplayer-spinner{from{-moz-transform:rotateZ(0deg)}to{-moz-transform:rotateZ(360deg)}}.yui3-videoplayer-content.ie .yui3-videoplayer-loading{margin-left:-13px;margin-top:-13px}.yui3-videoplayer-main{width:100%;position:relative}.yui3-videoplayer-startscreen-container{width:100%;height:100%;background-color:black;position:absolute;cursor:pointer}.yui3-videoplayer-startscreen-container.yui3-videoplayer-show{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-startscreen-container h3{font-size:1.3em;font-weight:bold;margin-bottom:5px}.yui3-videoplayer-startscreen-container h4{font-size:1.1em;font-weight:normal;margin-bottom:5px}.yui3-videoplayer-startscreen-desc{-webkit-font-smoothing:antialiased;font-weight:200}.small .yui3-videoplayer-startscreen-container p{font-size:82%}.medium .yui3-videoplayer-startscreen-container h3{font-size:100%}.small .yui3-videoplayer-startscreen-container h4{font-size:85%}.small .yui3-videoplayer-startscreen-container h3,.medium .yui3-videoplayer-startscreen-container h4{font-size:91%}.small .yui3-videoplayer-startscreen-container h3,.small .yui3-videoplayer-startscreen-container h4,.medium .yui3-videoplayer-startscreen-container h3,.medium .yui3-videoplayer-startscreen-container h4{margin-bottom:3px}.yui3-videoplayer-startscreen-container .yui3-videoplayer-startscreen-desc{font-size:85%;letter-spacing:.07em}.small .yui3-videoplayer-startscreen-container .yui3-videoplayer-startscreen-desc{display:none}.yui3-videoplayer-startscreen-bar-wrapper{position:absolute;top:0;left:0;height:100%;width:100%}.yui3-videoplayer-startscreen-bar{background-color:transparent;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yui3-videoplayer-startscreen-container:hover .yui3-videoplayer-startscreen-bar{background-color:rgba(0,0,0,.4)}.yui3-videoplayer-content.legacy .yui3-videoplayer-startscreen-bar-wrapper{background:black}.yui3-videoplayer-transition{-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yui3-videoplayer-startscreen-bar{position:absolute;width:100%;height:100%;padding:0;min-height:75px}.yui3-videoplayer-startscreen-bar-right{position:absolute;width:100%;bottom:0;padding:12px;background-image:-webkit-gradient(linear,50% 0,50% 100%,color-stop(0%,transparent),color-stop(100%,rgba(0,0,0,0.7)));background-image:-webkit-linear-gradient(top,transparent,rgba(0,0,0,0.7));background-image:-moz-linear-gradient(top,transparent,rgba(0,0,0,0.7));background-image:-o-linear-gradient(top,transparent,rgba(0,0,0,0.7));background-image:linear-gradient(top,transparent,rgba(0,0,0,0.7));display:-webkit-box;display:-moz-box;display:box;-webkit-box-align:bottom;-moz-box-align:bottom;box-align:bottom;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.yui3-videoplayer-startscreen-image{height:auto;width:100%;display:block}.yui3-videoplayer-startscreen-title-wrapper{color:#fff;max-height:95px;overflow:hidden;text-shadow:#000 0 1px 3px}.yui3-videoplayer-content.small .yui3-videoplayer-startscreen-title-wrapper{min-height:35px;max-height:60px}.yui3-videoplayer-content.medium .yui3-videoplayer-startscreen-title-wrapper{max-height:70px}.yui3-videoplayer-startscreen-container:hover{background-color:rgba(0,0,0,.4)}.yui3-videoplayer-errorscreen-container{width:100%;position:relative;display:block;-moz-opacity:0;opacity:0;filter:alpha(opacity=0);font-family:HelveticaNeue,Helvetica,Arial,sans-serif;height:100%;background-color:black}.yui3-videoplayer-errorscreen-container.show{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-content .yui3-videoplayer-errorscreen-wrapper{position:absolute;background-color:#000;display:block;vertical-align:middle;top:15%;color:#eee;margin-left:13%;margin-right:2%}.yui3-videoplayer-content .yui3-videoplayer-errorscreen-title{margin-top:10px;line-height:1.2;font-size:20px}.yui3-videoplayer-content.small .yui3-videoplayer-errorscreen-title{line-height:1;font-size:12px}.yui3-videoplayer-errorscreen-sub-desc-try{color:#5eb2e8;cursor:pointer;text-decoration:none}.yui3-videoplayer-content .yui3-videoplayer-errorscreen-type-code{text-align:center;color:#626262;font-size:12px;font-weight:lighter;font-family:HelveticaNeue,Helvetica,Arial,sans-serif;bottom:15px;right:22px;position:absolute;padding:3px;background-color:black}.yui3-videoplayer-content .yui3-videoplayer-errorscreen-download-flash-title{display:inline-block;*display:inline;zoom:1;font-size:16px;font-weight:normal}.yui3-videoplayer-content .yui3-videoplayer-errorscreen-download-flash-button{display:inline-block;*display:inline;zoom:1;margin-top:5%}.yui3-videoplayer-errorscreen-image{display:inline-block}.yui3-videoplayer-infoscreen-container{width:100%;height:100%;position:absolute;color:white;-moz-opacity:0;opacity:0;filter:alpha(opacity=0);-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yui3-videoplayer-infoscreen-container.yui3-videoplayer-show{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-infoscreen-tint{width:100%;height:100%;position:absolute;background-color:black}.yui3-videoplayer-infoscreen-top{position:absolute;width:100%}.yui3-videoplayer-infoscreen-left{display:inline-block;margin-left:15px;zoom:1;*display:inline}.yui3-videoplayer-infoscreen-right{display:inline-block;vertical-align:top;margin-left:15px;zoom:1;*display:inline}.yui3-videoplayer-content .yui3-videoplayer-infoscreen-now-playing{margin-left:15px;margin-top:10px;padding-bottom:5px;font-weight:bold;font-size:.9em}.yui3-videoplayer-infoscreen-title{overflow:hidden}.yui3-videoplayer-content.small .yui3-videoplayer-infoscreen-title{font-size:.8em}.yui3-videoplayer-content .yui3-videoplayer-infoscreen-desc{font-size:.75em;color:#aaa;margin-top:5px;overflow:hidden}.yui3-videoplayer-content.small .yui3-videoplayer-infoscreen-desc{font-size:.6em}.yui3-videoplayer-infoscreen-image-link{position:relative;border:3px solid #61cbff;display:block;cursor:pointer}.yui3-videoplayer-infoscreen-image{position:relative;background-color:black;display:block}.yui3-videoplayer-infoscreen-share{margin-top:7px;border-spacing:3px;width:100%}.yui3-videoplayer-content.small .yui3-videoplayer-infoscreen-share{display:none}.yui3-videoplayer-infoscreen-share td{font-size:12px;white-space:pre;padding-top:3px}.yui3-videoplayer-infoscreen-link-text-box-td,.yui3-videoplayer-infoscreen-embed-text-box-td{width:100%;padding-left:3px}.yui3-videoplayer-infoscreen-link-text-box,.yui3-videoplayer-infoscreen-embed-text-box{background-color:black;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;border-bottom:1px solid #333;border-right:1px solid #333;border-top:0;border-left:0;padding:2px 5px;width:100%;color:#aaa;font-size:11px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box box-sizing:border-box;-webkit-transition:background-color .5s,color .5s;-moz-transition:background-color .5s,color .5s;-o-transition:background-color .5s,color .5s;transition:background-color .5s,color .5s}.yui3-videoplayer-infoscreen-link-text-box:hover,.yui3-videoplayer-infoscreen-embed-text-box:hover{background-color:#222;color:#ccc}.yui3-videoplayer-infoscreen-link-text-box::-moz-selection,.yui3-videoplayer-infoscreen-embed-text-box::-moz-selection{color:black!important;background:#6cc5fd!important}.yui3-videoplayer-infoscreen-link-text-box::selection,.yui3-videoplayer-infoscreen-embed-text-box::selection{color:black!important;background:#6cc5fd!important}.yui3-videoplayer-infoscreen-fb-link{margin-top:5px;display:inline-block;text-decoration:none}.yui3-videoplayer-content.small .yui3-videoplayer-infoscreen-fb-link{display:none}.yui3-videoplayer-infoscreen-fb-icon{display:inline-block}.yui3-videoplayer-content .yui3-videoplayer-infoscreen-fb-share{padding:0;margin-top:3px;vertical-align:top;display:inline-block;font-size:12px;color:white;margin-left:5px}.yui3-videoplayer-content.legacy .yui3-videoplayer-infoscreen-fb-share{background-color:black}.yui3-videoplayer-content .yui3-videoplayer-infoscreen-closed-captions-complaint-link{text-align:center;color:#20bcfa;font-size:12px;font-weight:bold;margin-top:3px;position:absolute;right:0;bottom:0;padding:5px;background-color:black;text-decoration:none}.yui3-videoplayer-content .yui3-videoplayer-detailscreen-container p{padding:0 15px}.yui3-videoplayer-content .yui3-videoplayer-detailscreen-profile-log-link{position:absolute;right:20px;bottom:8px;color:#aaa;font-size:12px;font-weight:bold;cursor:pointer;font-style:italic}.yui3-videoplayer-content .yui3-videoplayer-detailscreen-profile-log-link:hover{color:#aaa}.yui3-videoplayer-detailscreen-container{position:absolute;color:white;right:-300px;z-index:9998;top:5px;-webkit-transition:all .5s ease-out;-moz-transition:all .5s ease-out;-o-transition:all .5s ease-out;transition:all .5s ease-out;-moz-opacity:0;opacity:0;filter:alpha(opacity=0)}.yui3-videoplayer-detailscreen-container.yui3-videoplayer-show{right:5px;-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-detailscreen-wrapper{width:inherit;position:relative;vertical-align:middle;text-align:right;font-family:monospace}.yui3-videoplayer-detailscreen-table-wrapper{display:inline-block;text-align:center;overflow-y:auto;overflow-x:hidden;height:200px;background:#000;background:rgba(0,0,0,0.6);border-radius:4px 0 0 4px;padding:0 10px 6px 10px;width:300px;border:2px solid white;position:relative;-webkit-box-shadow:0 0 8px 2px rgba(0,0,0,0.3);-moz-box-shadow:0 0 8px 2px rgba(0,0,0,0.3)}.yui3-videoplayer-content.legacy .yui3-videoplayer-detailscreen-table-wrapper{background:black}.yui3-videoplayer-detailscreen-details-table{float:right}.yui3-videoplayer-detailscreen-details-table td.title{font-size:10px;text-align:left;color:#61cbff;text-align:center;padding:5px 0 3px 0}.yui3-videoplayer-detailscreen-details-table td{border:0}.yui3-videoplayer-detailscreen-details-table td.label{color:white;font-size:10px;text-align:right;white-space:pre}.yui3-videoplayer-detailscreen-details-table td.value{color:#ccc;font-size:10px;text-align:left;padding-left:5px}.yui3-videoplayer-detailscreen-details-table-body canvas{cursor:pointer}.yui3-videoplayer-content .yui3-videoplayer-detailscreen-container .close{position:absolute;top:5px;right:20px;text-align:center}.yui3-videoplayer-hotkeyoverlay-title{font-size:1.2em;color:#6cc5fd}.yui3-videoplayer-hotkeyoverlay-container{position:absolute;width:100%;text-align:center;top:50%;margin-top:-110px;z-index:9999;-webkit-transition:all .3s ease-out;-moz-transition:all .3s ease-out;-o-transition:all .3s ease-out;transition:all .3s ease-out;-moz-opacity:0;opacity:0;filter:alpha(opacity=0)}.yui3-videoplayer-hotkeyoverlay-container.yui3-videoplayer-show{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-hotkeyoverlay-table{margin-top:10px}.yui3-videoplayer-hotkeyoverlay-table td{padding:1px}.yui3-videoplayer-hotkeyoverlay-table td.label{color:#6cc5fd;padding-right:10px}.yui3-videoplayer-hotkeyoverlay-table td.value{font-style:italic}.yui3-videoplayer-hotkeyoverlay-table-wrapper{display:inline-block;background:#000;background:rgba(0,0,0,0.8);padding:30px;color:white;border-radius:4px;border:2px solid white;position:relative;-webkit-box-shadow:0 0 8px 2px rgba(0,0,0,0.3);-moz-box-shadow:0 0 8px 2px rgba(0,0,0,0.3);zoom:1;*display:inline}.yui3-videoplayer-content.legacy .yui3-videoplayer-hotkeyoverlay-table-wrapper{background:black}.yui3-videoplayer-endscreen-container{position:relative;-moz-opacity:0;opacity:0;filter:alpha(opacity=0);background-color:#000;height:100%;font-family:HelveticaNeue,Helvetica,Arial,sans-serif;color:#fff;text-align:center;box-sizing:border-box}.yui3-videoplayer-endscreen-container.show{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-endscreen-watched-wrapper .yui3-videoplayer-endscreen-watched .overlay .replay-button,.yui3-videoplayer-endscreen-carousel-node .overlay .replay-button{left:50%;top:50%;position:absolute;margin-left:-20px;margin-top:-26px;background-color:transparent;border:0;cursor:pointer;outline:0}.yui3-videoplayer-endscreen-watched-wrapper .yui3-videoplayer-endscreen-watched .overlay .replay-text,.yui3-videoplayer-endscreen-carousel-node .overlay .replay-text{font-size:13px;overflow:hidden;position:absolute;bottom:24px;left:82px;color:white}.yui3-videoplayer-content.small .yui3-videoplayer-endscreen-carousel-node .overlay .replay-text,.yui3-videoplayer-content.small .yui3-videoplayer-endscreen-watched-wrapper .yui3-videoplayer-endscreen-watched .overlay .replay-text{bottom:10px;left:56px}.yui3-videoplayer-controls{font:12px Helvetica Neue,Helvetica,Arial,sans-serif;line-height:13px;color:#fff;font-weight:lighter;direction:ltr}.yui3-videoplayer-controls,.yui3-videoplayer-drag *{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.yui3-videoplayer-controls.hide,.yui3-videoplayer-controls .disable{display:none}.yui3-videoplayer-controls .ie-gradient{position:absolute;bottom:-18px;width:100%;height:36px;z-index:1;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000',endColorstr='#99000000',GradientType=0)}.yui3-videoplayer-controls.show .ie-gradient{bottom:0}.yui3-videoplayer-controls .bar{position:absolute;bottom:-3px;width:100%;height:36px;z-index:2;-moz-opacity:0;opacity:0;background:-webkit-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);background:-moz-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);background:-o-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);background:-ms-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);background:linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);-webkit-transition:opacity .2s ease-in-out,bottom .2s ease-in-out;-moz-transition:opacity .2s ease-in-out,bottom .2s ease-in-out;-o-transition:opacity .2s ease-in-out,bottom .2s ease-in-out;transition:opacity .2s ease-in-out,bottom .2s ease-in-out}.yui3-videoplayer-controls.show .bar{bottom:0;-moz-opacity:1;opacity:1}.yui3-videoplayer-controls .item{height:36px;cursor:pointer}.yui3-videoplayer-controls button{border:0;padding:0;cursor:pointer;outline:0}.yui3-videoplayer-controls button.disable{cursor:default}.yui3-videoplayer-controls .main,.yui3-videoplayer-controls .aux{height:36px}.yui3-videoplayer-controls .main{position:absolute;bottom:0;left:0}.yui3-videoplayer-controls .play-pause{width:40px;*float:left}.yui3-videoplayer-controls .play-pause span{display:block;margin-top:-1px;margin-left:16px;*margin-left:4px}.yui3-videoplayer-controls .seek{position:relative;margin:0 44px;cursor:pointer;height:9px;border-top:13px solid transparent;border-bottom:14px solid transparent}.yui3-videoplayer-controls .seek.disable-drag{cursor:default}.yui3-videoplayer-controls .seek .slider,.yui3-videoplayer-controls .seek .buffer,.yui3-videoplayer-controls .seek .progress,.yui3-videoplayer-controls .seek .handle{height:7px;border-radius:4px}.yui3-videoplayer-controls .seek .slider{width:100%;position:relative;background:#000;background:rgba(0,0,0,0.4);*background-color:#000;filter:alpha(opacity=40);*filter:none;border:1px solid #555;border-color:rgba(255,255,255,0.1)}.yui3-videoplayer-controls .seek .buffer{width:0;background:#371f83;background:rgba(95,51,255,0.5);*background-color:#371f83;-webkit-transition:width .2s ease-in-out;-moz-transition:width .2s ease-in-out;-o-transition:width .2s ease-in-out;transition:width .2s ease-in-out}.yui3-videoplayer-controls .seek .progress{width:0;position:absolute;top:0;background:#5f33ff;-webkit-transition:width .2s ease-in-out;-moz-transition:width .2s ease-in-out;-o-transition:width .2s ease-in-out;transition:width .2s ease-in-out}.yui3-videoplayer-controls .seek .handle,.yui3-videoplayer-controls .seek.disable-drag .handle:hover{width:7px;height:7px;position:absolute;top:0;margin-left:-4px;margin-top:0;background:#fff;border:0 solid #fff;z-index:3;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.yui3-videoplayer-controls .seek.drag .handle,.yui3-videoplayer-controls .seek .handle:hover{border-width:4px;border-radius:9px;background-color:#5f33ff;width:9px;height:9px;margin-left:-9px;margin-top:-5px}.yui3-videoplayer-controls .seek .time{position:absolute;top:-24px;padding:3px 0;text-align:center;font-size:14px;color:#fff;text-shadow:1px 1px 2px #000;background-color:#000;background-color:rgba(0,0,0,0.5);*background-color:#000;border-radius:5px;-moz-opacity:0;opacity:0;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.yui3-videoplayer-controls .seek .time.show{-moz-opacity:1;opacity:1}.yui3-videoplayer-controls .seek.drag .progress,.yui3-videoplayer-controls .seek.drag .handle,.yui3-videoplayer-controls .seek.drag .time{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.yui3-videoplayer-controls .aux,.yui3-videoplayer-controls .settings{position:absolute;bottom:0;right:0}.yui3-videoplayer-controls .seek .vseek{display:none;position:absolute;top:-65px;width:112px;height:63px;z-index:2;background-color:#000;border:1px solid #424242;text-align:center}.yui3-videoplayer-controls .vseek .vseek-thumb{margin:auto;background-size:1120px 630px;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;-ms-interpolation-mode:nearest-neighbor}.yui3-videoplayer-controls .vseek .vseek-time{position:absolute;bottom:4px;left:56px;width:48px;padding:3px 0;text-align:center;font-size:14px;color:#fff;text-shadow:1px 1px 2px #000;background-color:#000;background-color:rgba(0,0,0,0.5);*background-color:#000;border-radius:5px}.yui3-videoplayer-controls .settings{width:32px}.yui3-videoplayer-controls .settings span{display:block;margin:11px 0 0 6px}.yui3-videoplayer-controls .settings-panel-box{position:absolute;right:1px;bottom:26px;z-index:3;padding:18px;background-color:rgba(0,0,0,0)}.yui3-videoplayer-controls .settings-panel{padding:8px 20px;font-size:13px;background-color:#000;background-color:rgba(0,0,0,0.65);*background-color:#000;border:1px solid #555;border-color:rgba(255,255,255,0.1);border-radius:5px;z-index:3}.yui3-videoplayer-controls .settings-panel table{border-collapse:separate!important;border-spacing:0!important;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-o-hyphens:none;hyphens:none}.yui3-videoplayer-controls .settings-panel th{font-weight:lighter;text-align:right;padding:6px 10px 6px 0;cursor:default;border:0}.yui3-videoplayer-controls .settings-panel td{min-width:70px;border:0}.yui3-videoplayer-controls .settings-panel .on{cursor:default}.yui3-videoplayer-controls .settings-panel button.text{margin-right:3px;padding:3px 1px;background:0;color:#ccc}.yui3-videoplayer-controls .settings-panel button.text:hover{color:#fff}.yui3-videoplayer-controls .settings-panel button.text.on{color:#5f33ff}.yui3-videoplayer-controls .settings-panel .fb-icon{float:left;cursor:pointer}.yui3-videoplayer-controls .settings-panel .embed-button{float:left;width:60px;height:19px;margin-left:8px;background:#fff;cursor:pointer}.yui3-videoplayer-controls .settings-panel .embed-button:hover{background:#e2e2e6}.yui3-videoplayer-controls .settings-panel .embed-chainlink-button{float:left;margin:2px 10px 0 8px;background-color:transparent;cursor:pointer}.yui3-videoplayer-controls .settings-panel .embed-link tr{margin-left:20px;padding:4px 0 2px 0}.yui3-videoplayer-controls .settings-panel .embed-link th{border-top:1px solid #5a5958;border-left:1px solid #5a5958;padding:2px 10px 2px 0;font-size:11px}.yui3-videoplayer-controls .settings-panel .embed-link td{border-top:1px solid #5a5958;border-right:1px solid #5a5958}.yui3-videoplayer-controls .settings-panel .embed-link-text{float:left;border:0;background-color:transparent;color:#fff;width:165px;font-size:11px;margin-top:2px}.yui3-videoplayer-controls .settings-panel .embed-code tr{margin-left:20px;padding:4px 0 2px 0}.yui3-videoplayer-controls .settings-panel .embed-code th{border-left:1px solid #5a5958;border-bottom:1px solid #5a5958;padding:2px 10px 4px 0;font-size:11px}.yui3-videoplayer-controls .settings-panel .embed-code td{border-bottom:1px solid #5a5958;border-right:1px solid #5a5958}.yui3-videoplayer-controls .settings-panel .embed-code-text{float:left;border:0;background-color:transparent;color:#fff;width:165px;font-size:11px}.yui3-videoplayer-controls .settings-panel .embed-code .embed-error{min-width:280px;opacity:2;background-color:transparent}.yui3-videoplayer-controls .settings-panel .embed-error-text{float:left;border:0;background:#686868;color:#ccc;font-size:11px;padding-left:3px;width:98%}.yui3-videoplayer-controls .settings-panel input{padding:0;border-radius:0}.embed-link-text::-moz-selection,.embed-code-text::-moz-selection{background:#686868!important}.embed-link-text::selection,.embed-link-text::selection{background:#686868!important}.yui3-videoplayer-controls .settings-panel .cc-feedback{margin-left:23px;cursor:pointer}.yui3-videoplayer-controls .size button{display:inline;vertical-align:middle}.yui3-videoplayer-controls .size .small{background:0;border:2px solid #ccc;width:18px;height:13px;margin:4px 10px 3px 3px;*cursor:pointer}.yui3-videoplayer-controls .size .small:hover{border-color:#fff;*background:0}.yui3-videoplayer-controls .size .small.on,.yui3-videoplayer-controls .size .small.on:hover{border-color:#5f33ff;cursor:default}.yui3-videoplayer-controls .size .full{margin-top:1px}.yui3-videoplayer-controls .size .full.on,.yui3-videoplayer-controls .size .full.on:hover{cursor:default}.yui3-videoplayer-controls .volume .mute{float:left;width:20px;height:20px;margin-top:2px;background:0;cursor:pointer}.yui3-videoplayer-controls .volume .mute span{display:block;margin-left:4px}.yui3-videoplayer-controls .volume .bars{float:left;width:42px;margin-top:7px;padding-left:3px;cursor:pointer}.yui3-videoplayer-controls .volume .bars div{width:4px;height:10px;float:left;margin-right:3px;background:#ccc;cursor:pointer}.yui3-videoplayer-controls .volume .bars.drag div:hover{background:#ccc}.yui3-videoplayer-controls .volume .bars div:hover{background:#fff}.yui3-videoplayer-controls .volume .bars:not(.drag) div:hover{-webkit-transition:background-color .3s ease-in-out;-moz-transition:background-color .3s ease-in-out;-o-transition:background-color .3s ease-in-out;transition:background-color .3s ease-in-out}.yui3-videoplayer-controls .volume .bars div.on{background:#5f33ff}.yui3-videoplayer-controls .volume .bars:hover div.on{*background-color:#5f33ff}.yui3-videoplayer-main .accessible-controls{position:absolute;top:0;left:0;-moz-opacity:0;opacity:0;filter:alpha(opacity=0)}.yui3-videoplayer-lightbox{overflow:hidden!important}.yui3-videoplayer-lightbox .yui3-videoplayer-content{position:fixed;top:0;left:0;width:100%!important;height:100%!important;z-index:2147483647}.yui3-videoplayer-lightbox-ancestor{z-index:2147483647!important}.yui3-videoplayer-slug{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:lighter;font-size:13px;color:white;position:absolute;top:14px;left:24px;cursor:default;z-index:1;display:none}.yui3-videoplayer-content .close{position:absolute;top:5px;right:5px;font-size:10px;color:#333;cursor:pointer;font-family:Arial;background-color:white;border-radius:8px;width:17px;height:17px;vertical-align:middle;font-weight:bold;text-decoration:none;padding:0;border:0}.yui3-videoplayer-content .close:hover{background-color:#61cbff;color:black}.yui3-videoplayer-carousel-viewport li.load .metadata{bottom:0;*bottom:0;*left:0;width:100%;position:absolute;height:35px;background:-webkit-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);background:-moz-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);background:-o-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);background:-ms-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);background:linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,0.6) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000',endColorstr='#99000000',GradientType=0)}.yui3-videoplayer-carousel-viewport .metadata .title{font-size:13px;line-height:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#fff;margin:16px 6px;*filter:alpha(opacity=100)}.overlay .overlay-background{filter:alpha(opacity=40);background:#000;width:100%;height:100%}.yui3-videoplayer-carousel-viewport-item .overlay .play-button{position:absolute;border:0;*border:0;cursor:pointer;outline:0;background-color:transparent;*background-color:transparent;left:50%;top:50%}.desktop .yui3-videoplayer-carousel-viewport-item .overlay .play-button{margin:-26px 0 0 -16px}.mobile .yui3-videoplayer-carousel-viewport-item .overlay .play-button{margin:-12px 0 0 -16px}.yui3-videoplayer-carousel-viewport li.load .overlay{background-color:rgba(0,0,0,0.4);width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden}.desktop .yui3-videoplayer-carousel-viewport li.load .overlay{-moz-opacity:0;opacity:0;filter:alpha(opacity=0);-moz-transition:opacity .2s ease-in;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}.mobile .yui3-videoplayer-carousel-viewport li.load,.desktop .yui3-videoplayer-carousel-viewport li.load:hover .overlay{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-carousel-viewport-item .overlay .play-video-text{font-size:13px;overflow:hidden;position:absolute;bottom:44px;left:74px;color:#fff;*filter:alpha(opacity=100)}.yui3-videoplayer-content.small .yui3-videoplayer-carousel-viewport-item .overlay .play-video-text{bottom:30px;left:52px}.yui3-videoplayer-carousel-container{position:relative;height:inherit;background:0;overflow:hidden;padding:0;height:100%;background:0;padding:0;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.yui3-videoplayer-carousel-viewport{position:relative;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;*width:9999px;height:100%;margin:0 auto}.yui3-videoplayer-carousel-viewport.touch,.yui3-videoplayer-carousel-viewport.touch li{-webkit-transition:none;-moz-transition:none;-o-transition:color 0 ease-in;transition:none;-webkit-user-select:none}.yui3-videoplayer-content.medium .yui3-videoplayer-carousel-viewport,.yui3-videoplayer-content.small .yui3-videoplayer-carousel-viewport{margin-left:20px}.yui3-videoplayer-carousel-container.yui3-videoplayer-enabled .yui3-videoplayer-carousel-viewport{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-carousel-viewport li{display:inline-block;zoom:1;*display:inline;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .3s ease-in-out;-moz-opacity:.60;opacity:.60;filter:alpha(opacity=60);position:relative}.yui3-videoplayer-carousel-container li.load,.yui3-videoplayer-carousel-viewport li.load:hover{cursor:pointer;-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-carousel-viewport img{display:block;filter:alpha(opacity=100)}.card-m .yui3-videoplayer-content.large img,.card-m .yui3-videoplayer-content.medium img{width:190px;height:107px}.card-m .yui3-videoplayer-content.small img{width:125px;height:71px}.yui3-videoplayer-carousel-viewport-item-play{position:absolute;left:0;bottom:0}.yui3-videoplayer-carousel-title{color:#34c4ff;font-weight:bold;margin-left:2%;width:96%;text-align:center;position:absolute;bottom:0;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;-moz-opacity:0;opacity:0;filter:alpha(opacity=0);-webkit-transition:opacity .2s ease-in-out;-moz-transition:opacity .2s ease-in-out;-o-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.yui3-videoplayer-carousel-title.yui3-videoplayer-show{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-content.medium .yui3-videoplayer-carousel-title{font-size:12px;margin-top:2px}.yui3-videoplayer-content.small .yui3-videoplayer-carousel-title{font-size:12px;margin-top:2px}.yui3-videoplayer-carousel-viewport-item-indicator{position:absolute;background-color:#21beff;padding:5px;color:white;top:0;left:0;font-size:12px;font-weight:bold;*filter:alpha(opacity=100)}.yui3-videoplayer-content.medium .yui3-videoplayer-carousel-viewport-item-indicator,.yui3-videoplayer-content.small .yui3-videoplayer-carousel-viewport-item-indicator{font-size:8px}.yui3-videoplayer-carousel-container li,.yui3-videoplayer-carousel-container li:hover{-moz-opacity:0;opacity:0;filter:alpha(opacity=0);float:left;position:absolute;overflow:hidden;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.yui3-videoplayer-carousel-container .yui3-videoplayer-carousel-viewport-item-img{width:190px;height:107px}.yui3-videoplayer-carousel-container .yui3-videoplayer-arrow-container{position:absolute;top:0;height:inherit;width:30px}.yui3-videoplayer-content .yui3-videoplayer-left-enabled .yui3-videoplayer-carousel-left,.yui3-videoplayer-content .yui3-videoplayer-right-enabled .yui3-videoplayer-carousel-right{-moz-opacity:1;opacity:1;filter:alpha(opacity=100);display:block;*zoom:1}.yui3-videoplayer-content.medium .yui3-videoplayer-carousel-container .yui3-videoplayer-arrow-container,.yui3-videoplayer-content.small .yui3-videoplayer-carousel-container .yui3-videoplayer-arrow-container{height:100px}.yui3-videoplayer-carousel-container .yui3-videoplayer-arrow{display:inline-block;position:absolute;margin-top:-30px;margin-left:-10px;-moz-opacity:0;opacity:0;filter:alpha(opacity=0);top:50%;display:none;cursor:pointer}.yui3-videoplayer-content .yui3-videoplayer-carousel-left{margin-left:0}.yui3-videoplayer-carousel-container .yui3-videoplayer-carousel-left-container{left:0}.yui3-videoplayer-carousel-container .yui3-videoplayer-carousel-right-container{right:0}.yui3-videoplayer-endscreen-container .yui3-videoplayer-endscreen-carousel-node,.yui3-videoplayer-endscreen-container .yui3-videoplayer-endscreen-blank-node,.yui3-videoplayer-endscreen-container .yui3-videoplayer-endscreen-watched-center-wrapper{width:100%;position:relative;height:100%;z-index:2}.yui3-videoplayer-endscreen-container .yui3-videoplayer-endscreen-watched-wrapper{height:100%;margin:0 auto;width:200px;text-align:left}.yui3-videoplayer-endscreen-container .yui3-videoplayer-endscreen-watched{position:relative;top:50%}.yui3-videoplayer-endscreen-watched img{width:208px;height:117px}.yui3-videoplayer-endscreen-watched img:hover{cursor:pointer}.yui3-videoplayer-endscreen-container .yui3-videoplayer-arrow-container{background:0;bottom:0;margin:auto;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yui3-videoplayer-endscreen-carousel-node p{margin:0;text-align:left}.yui3-videoplayer-endscreen-carousel-node .yui3-videoplayer-arrow-container .yui3-videoplayer-carousel-left{*margin:-25px 0 0 -15px}.yui3-videoplayer-endscreen-carousel-node .yui3-videoplayer-arrow-container .yui3-videoplayer-carousel-right{*margin:-25px 0 0 -25px}.yui3-videoplayer-content.large .yui3-videoplayer-endscreen-carousel-node li,.yui3-videoplayer-content.medium .yui3-videoplayer-endscreen-carousel-node li{width:208px;height:117px}.yui3-videoplayer-content.small .yui3-videoplayer-endscreen-carousel-node li{width:157px;height:88px}.yui3-videoplayer-endscreen-watched-wrapper .yui3-videoplayer-endscreen-watched .overlay{width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden;background-color:transparent;background-color:rgba(0,0,0,0.4)}.desktop .yui3-videoplayer-endscreen-carousel-node li.replay .overlay{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-errorscreen-container .yui3-videoplayer-errorscreen-videos-node,.yui3-videoplayer-errorscreen-container .yui3-videoplayer-errorscreen-flash-download-node{width:100%;position:absolute;height:120px;z-index:2;margin:auto auto;bottom:15%}.yui3-videoplayer-errorscreen-container .yui3-videoplayer-errorscreen-flash-download-node a{color:#5eb2e8;text-decoration:none}.yui3-videoplayer-errorscreen-container .yui3-videoplayer-errorscreen-flash-download-node{position:absolute;background-color:#000;display:block;vertical-align:middle;font-size:16px;color:#5eb2e8;margin-left:13%;width:100%}.yui3-videoplayer-errorscreen-download-flash{cursor:pointer;position:relative;z-index:3;display:inline-block;zoom:1;*display:inline}.yui3-videoplayer-errorscreen-container .yui3-videoplayer-arrow-container{background:0;bottom:0;margin:auto;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yui3-videoplayer-errorscreen-videos-node p{margin:0;text-align:left}.yui3-videoplayer-errorscreen-videos-node .yui3-videoplayer-arrow-container .yui3-videoplayer-carousel-left{*margin:-25px 0 0 -15px}.yui3-videoplayer-errorscreen-videos-node .yui3-videoplayer-arrow-container .yui3-videoplayer-carousel-right{*margin:-25px 0 0 -25px}.yui3-videoplayer-content.large .yui3-videoplayer-errorscreen-videos-node li,.yui3-videoplayer-content.medium .yui3-videoplayer-errorscreen-videos-node li{width:208px;height:117px}.yui3-videoplayer-content.small .yui3-videoplayer-errorscreen-container .yui3-videoplayer-errorscreen-videos-node{top:25%}.yui3-videoplayer-content.small .yui3-videoplayer-endscreen-carousel-node li{width:157px;height:88px}.yui3-videoplayer-content.large .yui3-videoplayer-errorscreen-wrapper{font-size:20px}.yui3-videoplayer-content.medium .yui3-videoplayer-errorscreen-wrapper{font-size:18px;margin-left:10%;margin-right:1%}.yui3-videoplayer-content.small .yui3-videoplayer-errorscreen-wrapper{position:absolute;background-color:#000;display:block;vertical-align:middle;top:15%;font-family:HelveticaNeue,Helvetica,Arial,sans-serif;color:#eee;font-size:13px;margin-left:8%;margin-right:2%}.yui3-videoplayer-content .yui3-videoplayer-playlist-carousel{margin-left:auto;margin-right:auto}.yui3-videoplayer-content .yui3-videoplayer-playlist-carousel .yui3-videoplayer-carousel-container,.yui3-videoplayer-content .yui3-videoplayer-playlist-carousel h4{background-color:#000}.yui3-videoplayer-content .yui3-videoplayer-playlist-carousel .yui3-videoplayer-carousel-container li{margin:10px 0}.yui3-videoplayer-content .yui3-videoplayer-playlist-carousel .yui3-videoplayer-carousel-container li.load{-moz-opacity:.6;opacity:.6;filter:alpha(opacity=60)}.yui3-videoplayer-content .yui3-videoplayer-playlist-carousel .yui3-videoplayer-carousel-container li.load:hover{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-closedcaptions{opacity:0;-moz-opacity:0;filter:alpha(opacity=0);z-index:0;width:100%;height:24%;position:absolute;bottom:0}.yui3-videoplayer-closedcaptions-text{color:#fff;font-size:20px;text-align:center;margin:0 40px 0 40px}.partner-bar-clearfix:before,.partner-bar-clearfix:after{content:'.';display:block;visibility:hidden;height:0;font-size:0;line-height:0}.yui3-videoplayer-partner-bar{position:relative;width:100%;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;background:#001633;background:-moz-linear-gradient(left,#001633 0,#103359 19%,#011e3c 100%);background:-webkit-gradient(linear,left top,right top,color-stop(0%,#001633),color-stop(19%,#103359),color-stop(100%,#011e3c));background:-webkit-linear-gradient(left,#001633 0,#103359 19%,#011e3c 100%);background:-o-linear-gradient(left,#001633 0,#103359 19%,#011e3c 100%);background:-ms-linear-gradient(left,#001633 0,#103359 19%,#011e3c 100%);background:linear-gradient(to right,#001633 0,#103359 19%,#011e3c 100%);*background:#001633;white-space:nowrap;font-size:0;height:94px}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-branding{position:relative;margin:10px auto;top:10;left:0;text-align:center;vertical-align:middle;display:inline-block;*display:inline;zoom:1;width:20%}.yui3-videoplayer-partner-bar .branding-logo{display:block;text-indent:100%;overflow:hidden;white-space:nowrap;vertical-align:middle;margin:0 auto}.yui3-videoplayer-partner-bar .branding-text{color:white;font-weight:300;font-size:9px;display:block;padding-top:4px}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos{vertical-align:middle;width:80%;display:inline-block;*display:inline;zoom:1}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos ul{list-style:none;white-space:nowrap;max-width:100%;overflow:hidden;font-size:0;padding:7px 2px 7px 0;position:relative}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos ul li{display:inline-block;*display:inline;zoom:1;position:relative;width:24%;margin-right:1%;cursor:pointer}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos .img-wrap-16x9{padding-bottom:56.25%;height:0;position:relative;overflow:hidden}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos img{width:100%;height:auto;display:block}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos .icon-overlay{font-size:13px;height:100%;width:100%;position:absolute;left:0;top:0;-moz-opacity:0;opacity:0;filter:alpha(opacity=0);-moz-transition:opacity .2s ease-in;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in;background-color:rgba(0,0,0,0.4)}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos .icon-overlay:hover{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos .icon-overlay .play-text{font-family:HelveticaNeue,Helvetica,Arial,sans-serif;color:#FFF;font-size:12px;font-weight:300;position:absolute;text-align:left;bottom:6px;margin-left:30px}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos .icon-overlay .title-text{font-family:HelveticaNeue,Helvetica,Arial,sans-serif;font-size:12px;line-height:13px;height:26px;overflow:hidden;white-space:normal;text-overflow:ellipsis;position:absolute;color:#fff;margin-left:5px;margin-top:5px}.yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos .play-icon{border-radius:2px;background-color:#324fe1;cursor:pointer;position:absolute;bottom:5px;left:5px;width:20px;height:14px;background-image:url('http://l.yimg.com/rx/builds/4.1.13.21046/assets/play.png');background-image:url('http://l.yimg.com/rx/builds/4.1.13.21046/assets/play-white.svg'),none;background-repeat:no-repeat;background-size:100% 100%;text-indent:100%;overflow:hidden}.ssl .yui3-videoplayer-content .yui3-videoplayer-partner-bar .yui3-videoplayer-partner-videos .play-icon{background-image:url('https://s.yimg.com/rx/builds/4.1.13.21046/assets/play.png');background-image:url('https://s.yimg.com/rx/builds/4.1.13.21046/assets/play-white.svg'),none}.yui3-videoplayer-opacity-0{-moz-opacity:0;opacity:0;filter:alpha(opacity=0)}.yui3-videoplayer-opacity-70{-moz-opacity:.7;opacity:.7;filter:alpha(opacity=70)}.yui3-videoplayer-opacity-80{-moz-opacity:.8;opacity:.8;filter:alpha(opacity=80)}.yui3-videoplayer-opacity-100{-moz-opacity:1;opacity:1;filter:alpha(opacity=100)}.ssl .yui3-videoplayer-content .yui3-videoplayer-transparent{background:url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7');*background:url('https://s.yimg.com/rx/builds/4.1.13.21046/assets/transparent.gif')}.yui3-videoplayer-transparent{background:url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7');*background:url('http://l.yimg.com/rx/builds/4.1.13.21046/assets/transparent.gif')}";
s.NAME="View";s.NS="view";s.ATTRS={screenSize:{value:"LARGE"},activeScreen:{value:undefined},activeOverlay:{value:undefined},state:{value:"INIT"},_skipFlashCheck:{value:false},startScreenCreated:{value:false}};s.PLAYLIST_CAROUSEL_DIMENSIONS={LARGE:{HEIGHT:150,IMAGE_HEIGHT:105,HORIZONTAL_SPACING:20,VERTICAL_SPACING:20,MARGIN:3},MEDIUM:{HEIGHT:100,IMAGE_HEIGHT:63,HORIZONTAL_SPACING:10,VERTICAL_SPACING:10,MARGIN:3},SMALL:{HEIGHT:100,IMAGE_HEIGHT:63,HORIZONTAL_SPACING:10,VERTICAL_SPACING:10,MARGIN:3}};s.FACEBOOK_URL_TEMPLATE="http://www.facebook.com/sharer.php?t={title}&u={shareUrl}";s.CC_COMPLAINTS_URL_TEMPLATE="http://info.yahoo.com/legal/{region}/yahoo/cc/{lang}/";s.KEYS={SHIFT:16,CTRL:17,OPTION:18,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,M:77,QUESTION:191,ESC:27};var W=s.KEYS;s.GOLDEN_RATIO=16/9;s.SMALL_MAX_WIDTH=495;s.MEDIUM_MAX_WIDTH=729;f.extend(s,f.Base,{initializer:function(al){var Y,an,am;this._model=al.model;this._controller=al.controller;Y=this._model.get("version");an="yvpstyle_"+Y;am=f.one("head").getById(an);if(!am){am=f.Node.create("<style id="+an+">"+s.CSS+"</style>");f.one("head").append(am);}this.controls=new G({model:this._model,controller:this._controller,view:this});},getController:function(){return this._controller;},_createRenderers:function(){this.createVideoRenderer(this.videoBox);if(this._model.get("error")!==null){return false;}return true;},render:function(am){this._renderStartTime=new Date().getTime();this._node=am;this.contentBox=this.createNode("div","content");this.main=this.createNode("div","main");this.controlsContent=this.createNode("div","controls");this.loading=this.createNode("div","loading");this.slug=this.createNode("div","slug");this.loading.setStyle("display","none");if(this._controller.isHtmlCCSupported()){this.closedCaptions=this.createNode("div","closedcaptions");this.main.append(this.closedCaptions);}this.main.append(this.controlsContent);this.main.append(this.loading);this.main.append(this.slug);this._addContentClasses();var ap=this,an=ap._model,al=am.get("offsetHeight"),ao=ap.main,Y=ap.get("screenSize"),ar=an.get("carousel")?(al-s.PLAYLIST_CAROUSEL_DIMENSIONS[Y].HEIGHT).toString()+"px":"100%",aq=ap.createNode("div","video"),at;ao.setStyle("height",ar);ap.contentBox.append(ap.main);am.appendChild(ap.contentBox);ap._model.set("height",ap.contentBox.get("offsetHeight"));ap._model.set("width",ap.contentBox.get("offsetWidth"));ap._model.set("adClientSize",{width:ap.contentBox.get("offsetWidth"),height:ap.contentBox.get("offsetHeight")});aq.setStyle("opacity",0.001);ao.appendChild(aq);ap.videoBox=aq;at=an.get("playerState");if(at===ab.ERROR){ap._displayErrorScreen();return;}else{if(!an.get("autoplay")&&at===ab.LOADED){this._handleLoadedState();}}setTimeout(function(){ap.controls.render(ap.controlsContent);ap._delayCreateRenderers();},5);ap._bindUI();f.later(1000,this,"_delaySpinner");},_delaySpinner:function(){var Y=this._model,an=Y.get("playerState"),am=["begin","initialized","loading","loaded","prepared","preparing","prestarted"],al=Y.get("autoplay");if(f.Array.indexOf(am,an)>=0){if(al||an!=="loaded"){Y.set("isSpinnerShown",true);}else{if(Y.get("isSpinnerShown")===true){Y.set("isSpinnerShown",false);}}}},_delayCreateRenderers:function(){var Y=this._model,al;if(!this._createRenderers()){al=new Date().getTime()-this._renderStartTime;Y.set("metrics.playerRenderLatency",al);return;}al=new Date().getTime()-this._renderStartTime;Y.set("metrics.playerRenderLatency",al);this.set("state","RENDERED");},_addContentClasses:function(){var ao=this._node,al=this.contentBox,Y=this._model,ap=al.getAttribute("class"),aq=f.UA.ie,an=ao.get("offsetWidth"),ar=ao.get("offsetHeight"),am;if(an<s.SMALL_MAX_WIDTH||ar<=Math.floor(s.SMALL_MAX_WIDTH/s.GOLDEN_RATIO)){am="SMALL";}else{if(an<s.MEDIUM_MAX_WIDTH||ar<=Math.floor(s.MEDIUM_MAX_WIDTH/s.GOLDEN_RATIO)){am="MEDIUM";}else{am="LARGE";}}this.set("screenSize",am);ap+=" "+am.toLowerCase();if(I.isMobile()){ap+=" mobile";}else{ap+=" desktop";}if(document.location.protocol==="https:"){ap+=" ssl";}if(aq>0&&aq<8){ap+=" legacy";}if(aq===6){ap+=" ie6";}else{if(aq===7){ap+=" ie7";}}if(aq>0){ap+=" ie";}if(!Y.get("ybang")){ap+=" noybang";}al.setAttribute("class",ap);},_fireAssetsRequestComplete:function(){if(this.get("state")==="LOADING"){f.fire("VideoPlayer.assetsRequestComplete");}},_hideVideoTag:function(){this._node.one(".yui3-videoplayer-video").setStyle("marginTop","-2000px");},_showVideoTag:function(){this._node.one(".yui3-videoplayer-video").setStyle("marginTop","0px");},createVideoRenderer:function(an){var ao=this._controller,al=this._model,am=ao.getRendererClass(al.get("rendererType")),Y=new am({model:al,controller:ao,skipFlashCheck:this.get("_skipFlashCheck")});ao.registerRenderer(Y);Y.render(an);this.videoRenderer=Y;al.set("rendererReady",true);},_resizeAndPositionImage:function(Y,al){var an=Y.get("src"),am=new Image();am.onload=function(){var at=am.width,ao=am.height,ar=at/ao,aq=al.get("offsetWidth"),au=al.get("offsetHeight"),ap=aq/au;if(ar>=ap){if(ao>au){ao=au;at=au*ar;}}else{if(at>aq){at=aq;ao=aq/ar;}}Y.set("width",at);Y.set("height",ao);};am.src=an;},unrenderPlugin:function(){this.videoBox.clear();},onPluginInstanceChange:function(Y){if(Y.oldVal){this.unrenderPlugin(Y.oldVal);}if(Y.newVal){this.renderPlugin(Y.newVal);}},_bindUI:function(){var Y=this._model,al=this,am=["VideoPlayer.Carousel.navigationClick","VideoPlayer.Carousel.touch","VideoPlayer.Carousel.partnerLogoClick","VideoPlayer.Carousel.partnerBarView","VideoPlayer.ErrorScreen.flashDownloadClick","VideoPlayer.ErrorScreen.tryAgainLink"];this._bindKeys();Y.after("partnerCarouselItemsChange",function(an){al._removePartnerBar();if(an.newVal!==null){al._renderPartnerBar();}},al);Y.after("isSpinnerShownChange",function(an){if(an.newVal===true){al.loading.setStyle("display","block");}else{al.loading.setStyle("display","none");}});Y.after("yvapStateChange",function(ap){var ao=al.slug,an;switch(ap.newVal){case"adProgress":al.videoBox.setStyle("opacity",1);break;case"adStart":if(Y.get("rendererType")==="html"){al.videoBox.setStyle("opacity",1);
}al.controlsContent.removeClass("hide");an=Y.get("yvapData");if(an&&an.adslug===true){ao.set("innerHTML",al._controller.getStrings().ADVERTISEMENT);ao.setStyle("display","block");}break;case"adError":case"adComplete":ao.set("innerHTML","");ao.setStyle("display","none");break;}},this);Y.after("isPlayingChange",function(an){if(an.newVal===true){al.videoBox.setStyle("opacity",1);al.controlsContent.removeClass("hide");}});Y.before("playerStateChange",function(an){al._playerStateChange(an);});Y.after("playerStateChange",function(an){if(an.newVal==="playbackComplete"){al._handlePlaybackCompleteStateChange(an);}});Y.after("fullscreenChange",function(an){if(an.newVal){al.set("activeScreen",undefined);}});Y.before("activeScreenStrChange",function(an){al._activeScreenStrChange(an);});Y.after("showClosedCaptionsChange",function(an){al._displayCaptionsChange(an.newVal);});this.after("activeScreenChange",function(an){if(undefined===an.newVal){Y.set("activeScreenStr",undefined,{src:"internal"});}if(an.prevVal!==undefined){an.prevVal.destructor();}});this.after("activeOverlayChange",function(an){if(an.prevVal!==undefined){an.prevVal.destructor();}if(an.newVal!==undefined){an.newVal.render(al.main);}});f.Global.on("VideoPlayer.Carousel.thumbnailClick",function(ap){var ao,an=ap.index;switch(ap.plType){case"endScreen":ao=(an===0)?"es-rpl":"es-vid-"+parseInt(an+1,10);break;case"errorScreen":ao="err-rel-vid-"+parseInt(an+1,10);break;default:ao="pc-vid-"+parseInt(an+1,10);break;}Y.fire("uiInteract",{source:ao});if(Y.get("rendererType")==="html"){al._showVideoTag();}al._controller.playIndex(ap.index,ap.plType);});f.Global.on(am,function(an){Y.fire("uiInteract",{source:an});});},_activeScreenStrChange:function(ao){var am=this._model,ap=this._controller,an=this,al,Y;if(ao.src==="internal"){return;}al=an._node.one(".yui3-videoplayer-content");switch(ao.newVal){case"info":if(am.get("infoscreen")){if(!an.prevPlayerState){an.prevPlayerState=am.get("playerState");}an._controller.pause();Y=new Z({model:am,view:an});if(ap._renderer){ap._renderer.setFullscreen(false);}Y.render(an.main);an.set("activeScreen",Y);}break;case undefined:if(an.prevPlayerState!=="paused"){an._controller.play();}an.prevPlayerState=undefined;an.set("activeScreen",undefined);break;default:break;}},_displayErrorScreen:function(){var al=this._model,an,am,Y;if(this._node&&al.get("errorscreen")){Y=this._node.one(".yui3-videoplayer-content");an=Y.one(".yui3-videoplayer-video");am=new x({model:al,view:this});this.slug.setStyle("display","none");am.render(this.main);this.set("activeScreen",am);if(al.get("rendererType")==="html"){console.log("calling hideVideo");this._hideVideoTag();}this.controlsContent.addClass("hide");}},_handleLoadedState:function(){var al=this._model,Y=this.main;if(!al.get("autoplay")&&!this.startScreen&&al.get("startscreen")){this.startScreen=new a({model:al,view:this});this.startScreen.render(Y);this.set("activeScreen",this.startScreen);this.set("startScreenCreated",true);}if(al.get("carousel")&&!this.carousel){this.renderPlaylistCarousel();}if(al.get("partnerCarouselItems")!==null&&!this.partnerCarousel){this.renderPartnerCarousel();}},renderPlaylistCarousel:function(){var Y=this._model.get("playlist").get("mediaItems").toArray(),am=this.get("screenSize"),al=Math.floor(s.PLAYLIST_CAROUSEL_DIMENSIONS[am].IMAGE_HEIGHT*s.GOLDEN_RATIO),ao=this.createNode("div","playlist-carousel"),an;ao.setStyle("width",this.contentBox.get("offsetWidth"));ao.setStyle("height",s.PLAYLIST_CAROUSEL_DIMENSIONS[am].HEIGHT-20);this.contentBox.append(ao);this.carousel=new g({view:this,mediaItems:Y,pltype:"default",showMetadata:false,showNavigation:true,dimensions:{itemWidth:al,itemHeight:s.PLAYLIST_CAROUSEL_DIMENSIONS[am].IMAGE_HEIGHT,imageWidth:al,imageHeight:s.PLAYLIST_CAROUSEL_DIMENSIONS[am].IMAGE_HEIGHT,horizontalSpacing:s.PLAYLIST_CAROUSEL_DIMENSIONS[am].HORIZONTAL_SPACING,verticalSpacing:s.PLAYLIST_CAROUSEL_DIMENSIONS[am].VERTICAL_SPACING,carouselMargin:s.PLAYLIST_CAROUSEL_DIMENSIONS[am].MARGIN}});this.carousel.render(ao);an=this.createNode("h4","title","carousel");ao.setStyle("height",s.PLAYLIST_CAROUSEL_DIMENSIONS[am].HEIGHT+20);this.contentBox.one(".yui3-videoplayer-carousel-viewport").delegate("mouseover",function(at){var ap=at.container.all("li"),ar=at.currentTarget,aq=ap.indexOf(ar);an.setAttribute("innerHTML",Y[aq].title);an.addClass("yui3-videoplayer-show");},"li");this.contentBox.one(".yui3-videoplayer-carousel-viewport").delegate("mouseout",function(){an.removeClass("yui3-videoplayer-show");},"li");this.contentBox.append(an);this._model.fire("uiInteract",{source:"pc-view"});},_renderPartnerBar:function(){var aw=this,ax=aw._controller.getStrings(),aq=aw._model,ap=aq.get("partnerCarouselItems"),ay="partner",au=ap.toArray(),an=aw.createNode("div","partner-branding"),am=aw.createNode("div","partner-videos"),ar=f.Node.create('<ul class="partner-bar-clearfix"></ul>'),at="",al=null,av,Y,ao;f.publish("VideoPlayer.Carousel.partnerLogoClick",{broadcast:2});f.publish("VideoPlayer.Carousel.partnerBarView",{broadcast:2});f.each(["#videoPlayerContainer",".mod-player","#player"],function(aA){var az=f.Node.one(aA);if(az!==null){al=az;return;}},aw);if(al===null){return;}aw.partnerBar=aw.createNode("div","partner-bar");Y=aq.get("site")||"";ao=aq.get("expName")||"";at='<a href="http://www.nfl.com/?campaign=partner_yahoo_syndicatevideo_'+Y+ao+'"';at+=' target="nfl_site"><span class="branding-logo">nfl</span></a>';at+='<span class="branding-text">More NFL Videos</span>';an.set("innerHTML",at);an.on("click",function(){f.Global.fire("VideoPlayer.Carousel.partnerLogoClick","partner-logo");});aw.partnerBar.append(an);f.each(au,function(aJ,aE){var aG=f.Node.create,aA=aJ.images.thumbnail||"",aK,aC,aM,aH,aF,aI,aB,az,aD,aL;aK=aG("<li/>");aB=aG("<div/>").setAttribute("class","img-wrap-16x9");aD=aG("<img/>").setAttribute("src",aA);aB.append(aD);aK.append(aB);aI=aG("<div/>").setAttribute("class","icon-overlay");aC=aG("<div/>").setAttribute("class","title");aM=aG("<p/>").setAttribute("class","title-text").setAttribute("innerHTML",aJ.title);
aC.append(aM);aI.append(aC);az=aG("<span/>").setAttribute("class","play-text").setAttribute("innerHTML",ax.PLAY_VIDEO);aI.append(az);aH=aG("<div/>").setAttribute("class","play-button");aF=aG("<span/>").setAttribute("class","play-icon").setAttribute("innerHTML",".");aH.append(aF);if(f.UA.ie>0&&f.UA.ie<9){aI.hide();aK.on("hover",function(){aI=aK.one(".icon-overlay");aI.show();},function(){aI=aK.one(".icon-overlay");aI.hide();});aL=aG("<div/>").setAttribute("class","overlay-background");aI.append(aL);}aK.append(aI);aK.append(aH);aK.setData("videoId",aJ.id);aK.setData("param",{"index":aE,"plType":ay});aK.on("click",function(aQ){var aR=aq.get("playlist"),aT=aR.items().size(),aS=aQ.currentTarget.getData("videoId"),aP=ap.find(function(aU){return aS===aU.get("id");}),aN,aO=aQ.currentTarget.getData("param");if(aP){aN=aR.after("mediaItemAdd",function(aV){var aU=aV.item||null;if(aU&&aU.get("id")===aS){aN.detach();aw._controller.preparePlaylistPosition(aT);}},aw);aw._controller.addToPlaylist(aP);}aq.fire("uiInteract",{source:"partner-t-"+parseInt(aO.index+1,10)});},aw);ar.append(aK);},aw);am.append(ar);aw.partnerBar.append(am);if(al.getAttribute("id")==="player"){aw.contentBox.setStyle("height","360");}al.append(aw.partnerBar);f.Global.fire("VideoPlayer.Carousel.partnerBarView","partner-view");av=f.Node.one(".yom-card-main .thumbstrip");if(av){av.setStyle("display","none");}},_removePartnerBar:function(){var Y,al,am=this.partnerBar;if(am){am.detachAll();am.remove(true);am=null;Y=f.Node.one(".yom-card-main .thumbstrip");if(Y){Y.setStyle("display","block");}al=f.Node.one(".slideshow-main-col .caption-wrap");if(al){al.setStyle("position","absolute");}}},_displayCaptionsChange:function(al){var Y=this.videoRenderer;if(Y&&this._model.get("ccAvailable")){Y.updateControls({ccShow:al});}},_handlePlaybackCompleteStateChange:function(){var an=this._model,ao=this._controller,au=this,al=this.main,ar,ap,Y,at,am,aq;ar=an.get("playlistPosition");ap=ar+1;aq=an.get("playlist").items().item(ap);if(an.get("continuousPlay")&&aq||an.get("loop")===true){ao.playNext();}else{if(an.get("fullscreen")||an.get("rendererType")==="html"){ao.setFullscreen(false);at=1000;}else{at=0;}setTimeout(function(){if(an.get("endscreen")){am=au._node.one(".yui3-videoplayer-content");Y=new p({model:an,view:au});Y.render(al);au.set("activeScreen",Y);au.videoBox.setStyle("opacity",0);au.controlsContent.addClass("hide");}},at);}},_playerStateChange:function(ar){var an=this._model,al=this._controller,ap=al.getStrings(),aq=ar.newVal,ao,Y,am;switch(aq){case"loaded":this._handleLoadedState();break;case"preparing":if(this.get("activeScreen")){this.set("activeScreen",undefined);}break;case"prestarted":if(this.get("activeScreen")){this.set("activeScreen",undefined);}if(this.carousel){this.carousel.setIndicator(an.get("playlistPosition"),ap.UP_NEXT.replace(":","").toUpperCase());}break;case"started":this.set("activeScreen",undefined);if(this.carousel){this.carousel.setIndicator(an.get("playlistPosition"),ap.NOW_PLAYING.toUpperCase());}break;case"poststarted":ao=an.get("playlistPosition");Y=ao+1;am=an.get("playlist").items().item(Y);if(this.carousel&&am){this.carousel.setIndicator(Y,ap.UP_NEXT.replace(":","").toUpperCase());}break;case"paused":this.set("activeScreen",undefined);break;case"error":this._displayErrorScreen();break;}},_bindTouch:function(){var al=null,Y=this;Y._node.on("touchstart",function(am){am.preventDefault();clearTimeout(al);al=setTimeout(function(){Y.openProfiler();},5000);});Y._node.on("touchend",function(){clearTimeout(al);});},_bindKeys:function(){var am=this,ap=[],an=false,Y=false,al=false,ao=[79,80,69,78,83,73,77,83,73,77];if(f.Node.DOM_EVENTS.key.eventDef!==undefined){f.Node.DOM_EVENTS.key.eventDef.KEY_MAP.shift=16;f.Node.DOM_EVENTS.key.eventDef.KEY_MAP.ctrl=17;f.Node.DOM_EVENTS.key.eventDef.KEY_MAP.space=32;f.Node.DOM_EVENTS.key.eventDef.KEY_MAP.esc=27;f.Node.DOM_EVENTS.key.eventDef.KEY_MAP.m=77;f.Node.DOM_EVENTS.key.eventDef.KEY_MAP.n=78;f.one("doc").on("key",function(){am.controls._play();},"space+shift");f.one("doc").on("key",function(){am.controls._nextVideo();},"n+ctrl+shift");f.one("doc").on("key",function(){am.controls._muteChange();},"m+ctrl+shift");f.one("doc").on("key",function(){am.set("activeOverlay",undefined);var aq=am.get("activeScreen");if(aq!==undefined&&aq.name==="InfoScreen"){aq._closeScreen();}},"esc");}f.one("doc").on("yui3-videoplayer|keypress",function(aq){var ar=aq.keyCode;if(ar===63){am.controls._hotkeyMenu();}});f.one("body").on("yui3-videoplayer|keydown",function(aq){var ar=aq.keyCode;switch(ar){case W.CTRL:an=true;break;case W.OPTION:Y=true;break;case W.SHIFT:al=true;break;}ap.push(ar);if(ap.length>ao.length){ap.shift();}if(this._node&&ap.toString()===ao.toString()){am.openDetailScreen();}});f.one("body").on("yui3-videoplayer|keyup",function(aq){var ar=aq.keyCode;switch(ar){case W.CTRL:an=false;break;case W.OPTION:Y=false;break;case W.SHIFT:al=false;break;case W.ESC:am.set("activeOverlay",undefined);break;}});},openDetailScreen:function(){var al=this,an=this.get("activeOverlay"),Y=this._model,am;if(!an||an.name!=="DetailScreen"){am=new t({model:Y,view:al});this.set("activeOverlay",am);}},openProfiler:function(){var an="",Y=this._model,aq,ao,am,ar=f.Object.getValue(this,["_controller","_yvapRenderer","_adPlugin"]),al=this._controller?this._controller.getProfiler():null;an+="<p>Yahoo Video Player: "+Y.get("version")+"<p>";if(al){an+=al.draw();}an+='<p><table border="1">';an+="<tr><td>Event</td><td>START</td><td>END</td><td>DIFF</td><td>QOS KEY</td></tr>";am=this._model.get("profileData").items();f.each(am,function(at){an+="<tr><td>"+at.message+"</td><td>"+at.startTime+"</td><td>"+at.endTime+"</td><td>"+at.timeDiff+"</td><td>"+at.type+"</td></tr>";});an+="</table></p>";an+='<p><table border="1">';am=this._model.get("profileData").items();f.each(f.UA,function(au,at){if(au){an+="<tr><td>"+at+"</td><td>"+au+"</td></tr>";}});an+="</table></p>";an+='<p><table border="1"><tr><td colspan="2">MediaObject Data</td></tr>';
ao=Y.get("currentMedia").toObject();f.each(ao,function(au,at){if(typeof au!=="object"){an+="<tr><td>"+at+"</td><td>"+au+"</td></tr>";}});an+="</table></p>";try{if(ar){if(ar.adsStatus){an+=ar.adsStatus.toTable();}else{an+="<p>adsStatus is not available</p>";}}else{an+="<p>adPlugin is not available</p>";}}catch(ap){an+="<p>adsStatus is not available</p>";}if(I.isMobile()){document.write(an);}else{aq=window.open();aq.document.write(an);}},createNode:function(aq,al,ao){var an,Y={img:true,input:true},ap=ao?"-"+ao:"",am;an=f.ClassNameManager.getClassName("videoplayer"+ap,al);if(aq in Y){am=f.Node.create("<"+aq+"/>").setAttribute("class",an);}else{am=f.Node.create("<"+aq+"></"+aq+">").setAttribute("class",an);}return am;},_buildFbLink:function(an){var aq=this._controller.getStrings(),am=this._model.get("currentMedia"),ap=am.get("shareUrl"),ao=this.createNode("a","fb-link",an),al=this.createNode("span","fb-icon",an),Y=this.createNode("span","fb-share",an);if(ap){Y.setAttribute("innerHTML",aq.SHARE_ON_FACEBOOK);ao.setAttribute("target","_blank");ao.setAttribute("href",f.substitute(s.FACEBOOK_URL_TEMPLATE,{title:encodeURIComponent(am.get("title")),shareUrl:encodeURIComponent(ap)}));ao.append(al);ao.append(Y);return ao;}return false;},destructor:function(){this._model.detachAll();f.one("body").detach("yui3-videoplayer|*");}});f.namespace("VideoPlatform").View=s;var ad={HD_HEIGHT_CONSTANT:720,HD_WIDTH_CONSTANT:1280,HD_BITRATE_CONSTANT:1400};var ab={BEGIN:"begin",INITIALIZED:"initialized",LOADING:"loading",LOADED:"loaded",PREPARING:"preparing",PREPARED:"prepared",PRESTARTED:"prestarted",STARTED:"started",POSTSTARTED:"poststarted",PAUSED:"paused",PLAYBACKCOMPLETE:"playbackComplete",ERROR:"error"};function e(){}e.prototype.log=function(Y,al){};function k(){k.superclass.constructor.apply(this,arguments);}k.NAME="Timer";k.NS="Timer";k.ATTRS={};f.extend(k,f.Base,{initializer:function(Y){this._m=Y.model;},start:function(){this._start=(new Date()).getTime();},stop:function(Y,ao){var an=this._m.get("profileData"),al,am,ap;if(an){al=(new Date()).getTime();am=al-this._m.START_TIME;ap=al-this._start;an.add({type:Y,message:ao,timeDiff:ap,startTime:am-ap,endTime:am});}},setStartTime:function(Y){this._start=Y;},getStartTime:function(){return this._start;},recordTime:function(Y,an,ao,al){var am=this._m.get("profileData");if(am){am.add({type:Y,message:an,timeDiff:ao,startTime:al,endTime:al+ao});}},destructor:function(){}});f.namespace("VideoPlatform").Timer=k;function ac(al,Y){this.model=al;this.controller=Y;}ac.NAME="BaseState";ac.prototype={activate:function(){},init:function(){},load:function(){},prepare:function(){},start:function(){},play:function(){},pause:function(){},seek:function(){},setFullscreen:function(){},readyStateHandler:function(Y){this.model.set("rendererState",Y.newVal);},playbackReadyHandler:function(){var am=this.controller,al=am._renderer,Y=this.model.get("currentMedia");if(Y.get("isRTX")===true){al.seek(0);}am.updateDuration(Y,al.getDuration());},playbackPlayHandler:function(){var Y=ab.STARTED;this.controller._setState(Y);this.model.set("playerState",Y);},playbackPlayingHandler:function(){this.model.set("isPlaying",true);this.model.set("isWaiting",false);},playbackPausedHandler:function(){var Y=ab.PAUSED;this.controller._setState(Y);this.model.setAttrs({playerState:Y,isPlaying:false});},playbackProgressHandler:function(al){var Y=(al.currentTime)?al.currentTime:"";this.model.set("playbackPosition",Y);},mediaInfoUpdateHandler:function(Y){this.model.get("currentMedia").set("mediaInfo",Y.mediaInfo);},playbackSeekHandler:function(){this.model.set("isSeeking",true);},playbackSeekedHandler:function(){this.model.set("isSeeking",false);},playbackCompleteHandler:function(){this.controller._setState(ab.POSTSTARTED);},playbackErrorHandler:function(Y){this.controller.error(Y);},playbackWaitingHandler:function(){this.model.set("isWaiting",true);},bitrateChangeHandler:function(Y){this.model.set("bitrate",Y.bitrate);},resizeHandler:function(Y){this.model.set("width",Y.width);this.model.set("height",Y.height);},clientResizeHandler:function(Y){this.model.set("adClientSize",{width:Y.width,height:Y.height});},adPluginReadyHandler:function(){this.model.set("yvapState",YVAPEvents.ADPLUGIN_READY);},adStartHandler:function(){},adEndHandler:function(){},adCompleteHandler:function(){},adProgressHandler:function(){},adErrorHandler:function(){},adNoneHandler:function(){},adPluginMetricHandler:function(Y){this.model.set("adPluginMetric",Y);},adPluginQosMetricHandler:function(Y){this.model.set("adPluginQosMetric",Y);},adPluginRemovedHandler:function(){this.model.set("yvapState",YVAPEvents.PLUGIN_REMOVED);},volumeChangeHandler:function(Y){this.model.set("volume",Y.details[0]);},muteChangeHandler:function(Y){this.model.set("mute",Y.details[0]);},fullscreenEnterHandler:function(){this.model.set("fullscreen",true);},fullscreenExitHandler:function(){this.model.set("fullscreen",false);},uiInteractHandler:function(Y){this.model.fire(Y);},durationChangeHandler:function(){},toString:function(){return"{state "+this.constructor.NAME+"}";}};f.augment(ac,e);function d(){d.superclass.constructor.apply(this,arguments);}d.NAME="AdBaseState";f.extend(d,ac,{adStartHandler:function(am){var al=false,Y=this.model;Y.set("yvapData",am);Y.set("yvapState",YVAPEvents.AD_START);Y.set("isSpinnerShown",al);L.init(this.controller._controls);L.updateControls({seekbarVisible:true,seekDragEnable:false,playPauseEnable:false,ccEnable:false});},adEndHandler:function(){this._resumePlayback();},adCompleteHandler:function(){this._resumePlayback();},adNoneHandler:function(){this.model.set("yvapState",YVAPEvents.AD_NONE);this._resumePlayback();},adProgressHandler:function(al){var Y=this.model;Y.set("yvapData",al);Y.set("yvapState",YVAPEvents.AD_PROGRESS);this.controller._controls.setAdDuration(al.duration);Y.set("adPlaybackPosition",al.position);},adErrorHandler:function(al){var Y=this.model;Y.set("yvapData",al);Y.set("yvapState",YVAPEvents.AD_ERROR);this._resumePlayback();
},_resumePlayback:function(){var Y=this.model;if(Y.get("rendererType")==="html"){this.controller._returnVideoControl();}if(Y.get("yvapState")!==YVAPEvents.AD_ERROR){Y.set("yvapState",YVAPEvents.AD_COMPLETE);}L.init(this.controller._controls);L.updateControls({seekbarVisible:true,seekDragEnable:true,playPauseEnable:true,ccEnable:true});}});function E(){E.superclass.constructor.apply(this,arguments);}E.NAME="BeginState";f.extend(E,ac,{activate:function(){this.model.setAttrs({isInitialized:false,isLoading:false,isLoaded:false,isPreparing:false,isPrepared:false,isStarted:false,hasError:false});},init:function(){var Y=this.model,al=this.controller;al.cookieHandler=new H({model:Y});al.cookieHandler.createAndLoadCookies();al._setState(ab.INITIALIZED);Y.set("playerState",ab.INITIALIZED);},adErrorHandler:function(al){var Y=this.model;Y.set("yvapData",al);Y.set("yvapState",YVAPEvents.AD_ERROR);}});function D(){D.superclass.constructor.apply(this,arguments);}D.NAME="InitializedState";f.extend(D,ac,{activate:function(){this.model.setAttrs({isInitialized:true,isLoading:false,isLoaded:false,isPreparing:false,isPrepared:false,isStarted:false,isPlaying:false,isPaused:false,isSeeking:false,isCompleted:false,isError:false});},adErrorHandler:function(al){var Y=this.model;Y.set("yvapData",al);Y.set("yvapState",YVAPEvents.AD_ERROR);},load:function(){var am=this,aq=am.controller,Y=am.model,ao=Y.get("playlist"),ap=new k({model:Y}),al=aq?aq.getProfiler():null;if(Y.get("standaloneAdMode")){aq._createYVAP();aq._setState(ab.LOADED);Y.set("playerState",ab.LOADED);return;}ap.start();if(al){al.setEndTime(aj.INIT_TO_LOAD_PLAYLIST.type);al.add(aj.PLAYLIST_LOADED);}function an(){ap.stop(aj.PLAYLIST_LOADED.type,aj.PLAYLIST_LOADED.desc);if(al){al.setEndTime(aj.PLAYLIST_LOADED.type);}if(Y.get("YVAPRequired")===true){aq._createYVAP();}aq.setPlaylistPosition(0);if(Y.get("playerState")!==ab.ERROR){aq._setState(ab.LOADED);Y.set("playerState",ab.LOADED);}}aq.getLoadStrategy().call(aq,{loadFromCMS:function(){if(ao.get("id").length>0||ao.items().size()>0){aq._setState(ab.LOADING);Y.set("playerState",ab.LOADING);ap.start();am.loadPlaylist(ao,{success:an,failure:function(ar){aq.error(ar);}});}},loadData:function(){setTimeout(an,1);}});},loadPlaylist:function(am,ar){var au=this.controller,Y=ar.context||null,at=am.items(),aw,av,aq=this.model,ap=this.constructor.NAME;function ao(){ar.success.call(Y,am);}function al(ax){ar.failure.call(Y,f.merge({type:c.ERROR.CMS_REQUEST.type},ax));}function an(aC){var ay,aA,ax,aB;function az(){if(typeof ay!=="undefined"){return ay;}for(aA=0,ax=aC.length;aA<ax;aA++){aB=aC[aA];if(aB.height>=ad.HD_HEIGHT_CONSTANT&&aB.width>=ad.HD_WIDTH_CONSTANT){ay=true;return ay;}}ay=false;return ay;}return az;}if(am.get("id").length>0){au._cmsService.loadPlaylist(am.get("id"),0,0,null,{success:function(ay){var aB=ay.mediaItems,aA,az,aC=aq.get("playlist"),ax=ay.status;if(aB.length===0){aC.set("status",ax);al(new f.VideoPlatform.ErrorObject(c.ERROR.NO_PLAYLIST_CONTENT.type,ax.code,ap,ax.msg+"; playlistId "+aC.get("id"),c.LEVEL.CRITICAL));}else{am.set("totalLength",ay.total);am.set("totalRequested",au._cmsService.get("playlistCount"));for(aA=0;aA<aB.length;aA++){az=aB[aA];az.hdAvailable=an(az.streams);if(az.images){az.images.large=az.images.medium=az.images.thumbnail;}at.add(az);}ao();}},failure:al});}else{aw=at.item(0);av=at.filter(function(ax){return ax.get("id");});if(av.size()>0){au._cmsService.loadClips(av,{success:function(ax){if(ax){f.each(ax,function(az){var aA=az.id,ay=at.find(function(aB){return aA===aB.get("id");});if(az.streams){az.hdAvailable=an(az.streams);}if(ay){f.Object.each(az,function(aC,aB){var aD,aE=ay.get(aB);if(f.Lang.isObject(aE)&&f.Lang.isObject(aC)){for(aD in aC){if(!aE[aD]){aE[aD]=aC[aD];}}}else{if(aE===undefined){ay.set(aB,aC);}}});}});ao();}else{al(new f.VideoPlatform.ErrorObject(c.ERROR.NO_PLAYLIST_CONTENT.type,c.ERROR.NO_PLAYLIST_CONTENT.code,ap,"no clips found",c.LEVEL.CRITICAL));}},failure:al});}else{ao();}}}});function C(){C.superclass.constructor.apply(this,arguments);}C.NAME="LoadingState";f.extend(C,ac,{activate:function(){this.model.setAttrs({isInitialized:true,isLoading:true,isLoaded:false,isPreparing:false,isPrepared:false,isStarted:false,isPlaying:false,isPaused:false,isSeeking:false,isCompleted:false,isError:false});},adErrorHandler:function(al){var Y=this.model;Y.set("yvapData",al);Y.set("yvapState",YVAPEvents.AD_ERROR);}});function ak(){ak.superclass.constructor.apply(this,arguments);}ak.NAME="LoadedState";f.extend(ak,ac,{activate:function(){this.model.setAttrs({isInitialized:true,isLoading:false,isLoaded:true,isPreparing:false,isPrepared:false,isStarted:false,isPlaying:false,isPaused:false,isSeeking:false,isCompleted:false,isError:false});if(this.model.get("autoplay")===false){this.model.set("isSpinnerShown",false);}},prepare:function(){var ap=this.controller,Y=this.model,al=ap?ap.getProfiler():null,ao=Y.get("currentMedia"),am=aj.VP_PREPARED.type,an=ap.preparedProfileKey;ap._setState(ab.PREPARING);Y.set("playerState",ab.PREPARING);if(Y.get("standaloneAdMode")){ap._setState(ab.PREPARED);Y.set("playerState",ab.PREPARED);ap.play();return;}ap.resetStreamsIfRendererMismatch();ap.getPrepareStrategy(ao).call(ap,ao,{success:function(aq){ap.updateMediaAttrs(ao,aq);ap._setState(ab.PREPARED);Y.set("playerState",ab.PREPARED);if(al&&isNaN(al.getItem(am,an).endTime)){al.setEndTime(am,an);}ap.play();},failure:function(ar,aq){if(aq){ap.updateMediaAttrs(ao,aq);}if(al&&isNaN(al.getItem(am,an).endTime)){al.setEndTime(am,an);}ap.error(ar);},context:this});},play:function(){this.controller.prepare();},adErrorHandler:function(al){var Y=this.model;Y.set("yvapData",al);Y.set("yvapState",YVAPEvents.AD_ERROR);}});function Q(){Q.superclass.constructor.apply(this,arguments);}Q.NAME="PreparingState";f.extend(Q,ac,{activate:function(){this.model.setAttrs({isInitialized:true,isLoading:false,isLoaded:true,isPreparing:true,isPrepared:false,isStarted:false,isPlaying:false,isPaused:false,isSeeking:false,isCompleted:false,isError:false});
if(this.model.get("autoplay")===false){this.model.set("isSpinnerShown",true);}},adErrorHandler:function(al){var Y=this.model;Y.set("yvapData",al);Y.set("yvapState",YVAPEvents.AD_ERROR);}});function R(){R.superclass.constructor.apply(this,arguments);}R.NAME="PreparedState";f.extend(R,ac,{activate:function(){this.model.setAttrs({isInitialized:true,isLoading:false,isLoaded:true,isPreparing:false,isPrepared:true,isStarted:false,isPlaying:false,isPaused:false,isSeeking:false,isCompleted:false,isError:false});var Y=this.model.get("endScreenVideos").items().size();if(Y>0){this.model.get("endScreenVideos").items().reset();}},play:function(){this.controller._setState(ab.PRESTARTED);},setFullscreen:function(Y){this.controller._renderer.setFullscreen(Y);},adErrorHandler:function(al){var Y=this.model;Y.set("yvapData",al);Y.set("yvapState",YVAPEvents.AD_ERROR);}});function X(){X.superclass.constructor.apply(this,arguments);}X.NAME="StartedState";f.extend(X,d,{activate:function(){this.model.setAttrs({isInitialized:true,isLoading:false,isLoaded:true,isPreparing:false,isPrepared:true,isStarted:true,isPlaying:false,isPaused:false,isSeeking:false,isCompleted:false,isError:false,isSpinnerShown:false});var am=this,Y=am.model,an=Y.get("ccAvailable"),al=am.controller;if(an===true&&al.isHtmlCCSupported()){if(!Y.get("closedCaptions")){Y.after("playbackPositionChange",am._loadClosedCaptionContent,am);}else{}}am._loadRelatedContent();},_loadRelatedContent:function(){var at=this,an=at.model,al=an.get("currentMedia"),Y=an.get("continuousPlay"),ar=an.get("playlistPosition"),am=an.get("playlist").items().size(),ap=an.get("endScreenVideos").items().size(),aq=false,ao;if(!an.get("endscreen")){return;}if(ap!==0){return;}aq=(al.get("id")&&an.get("loop")===false&&((Y&&ar===am-1)||!Y));if(!aq){return;}ao=al.get("duration");if(isNaN(ao)||ao===0){an.after("durationChange",at._startLoadingEndScreenContent,at,true);}else{at._startLoadingEndScreenContent({newVal:ao});}},_startLoadingEndScreenContent:function(ao,Y){var al=this,am=al.model,an=3;if(ao.newVal<=an){return;}am.after("playbackPositionChange",al.loadEndScreenContent,al);if(Y){am.detach("durationChange",al._startLoadingEndScreenContent,al);}},loadEndScreenContent:function(){var al=this,Y=al.model,am=Y.get("currentMedia"),an=al.controller;if(Y.get("playbackPosition")>3){Y.detach("playbackPositionChange",al.loadEndScreenContent,al);al.loadEndScreenVideos(am,{success:function(ao){if(Y.get("endScreenVideos").get("mediaItems")._items.length===0){Y.set("endScreenVideos",ao);}},failure:function(ao){an.warn(ao);}});}else{}},loadEndScreenVideos:function(al,aq){var ar=aq.context||null,an=this.model,ao=this.constructor.NAME,ap=this.controller,at={success:function(av){var aw=c.ERROR.NO_RELATED_CONTENT;if("100"===av.status.code){am(au(av));}else{Y(new f.VideoPlatform.ErrorObject(aw.type,aw.code,ao,"error loading related videos",c.LEVEL.WARNING));}},failure:function(av){Y(av);}};function am(av){aq.success.call(ar,av);}function Y(av){aq.failure.call(ar,av);}function au(av){an.get("endScreenVideos").items().reset();var az=an.get("endScreenVideos"),ax=az.items(),ay,aw;for(ay=0;ay<av.mediaItems.length;ay++){if("100"===av.mediaItems[ay].status.code||"101"===av.mediaItems[ay].status.code){aw=av.mediaItems[ay];if(aw.images){aw.images.large=aw.images.medium=aw.images.thumbnail;}ax.add(aw);}}return ax;}ap._cmsService.loadRelatedVideos(al,at);},loadClosedCaptions:function(an){var aq=an.context||null,am=this.constructor.NAME,Y=this.controller,ao={success:function(ar){var at=c.ERROR.NO_CLOSED_CAPTION_CONTENT;if(!f.Object.isEmpty(ar.entries)){al(ar);}else{ap(new f.VideoPlatform.ErrorObject(at.type,at.code,am,"error loading closed captions",c.LEVEL.WARNING));}},failure:function(ar){ap(ar);}};function al(ar){an.success.call(aq,ar);}function ap(ar){an.failure.call(aq,ar);}Y._cmsService.fetchClosedCaptionContent(ao);},_loadClosedCaptionContent:function(){var al=this,am=al.controller,Y=al.model;if(Y.get("playbackPosition")>1){Y.detach("playbackPositionChange",al._loadClosedCaptionContent,al);al.loadClosedCaptions({success:function(an){Y.set("closedCaptions",an);},failure:function(an){am.warn(an);}});}else{}},pause:function(){this.controller._renderer.pause();},seek:function(Y){this.controller._renderer.seek(Y);},setFullscreen:function(Y){this.controller._renderer.setFullscreen(Y);},durationChangeHandler:function(Y){this.controller.updateDuration(this.model.get("currentMedia"),Y.details[0]);},uiInteractHandler:function(Y){this.constructor.superclass.uiInteractHandler.call(this,Y);if(Y.source==="controlsInfoButton"){this.controller.toggleInfoScreen();}else{if(Y.source==="controlsCCButton"){this.controller.toggleClosedCaptions();}}},mediaInfoUpdateHandler:function(Y){this.model.get("currentMedia").set("mediaInfo",Y.mediaInfo);},prepare:function(){ak.prototype.prepare.apply(this,arguments);},adStartHandler:function(Y){if(this.model.get("rendererType")==="flash"){this.pause();}X.superclass.adStartHandler.call(this,Y);},_resumePlayback:function(){}});function B(){B.superclass.constructor.apply(this,arguments);}B.NAME="PausedState";f.extend(B,d,{activate:function(){this.model.setAttrs({isInitialized:true,isLoading:false,isLoaded:true,isPreparing:false,isPrepared:true,isStarted:true,isPlaying:false,isPaused:true,isSeeking:false,isCompleted:false,isError:false});},play:function(){this.controller._renderer.play();},seek:function(){X.prototype.seek.apply(this,arguments);},setFullscreen:function(Y){this.controller._renderer.setFullscreen(Y);},uiInteractHandler:function(Y){X.prototype.uiInteractHandler.call(this,Y);},mediaInfoUpdateHandler:function(Y){X.prototype.mediaInfoUpdateHandler.call(this,Y);},durationChangeHandler:function(Y){this.controller.updateDuration(this.model.get("currentMedia"),Y.details[0]);},_resumePlayback:function(){B.superclass._resumePlayback.call(this);this.play();},prepare:function(){ak.prototype.prepare.apply(this,arguments);}});function U(){U.superclass.constructor.apply(this,arguments);}U.NAME="PlaybackCompleteState";
f.extend(U,ac,{activate:function(){this.model.setAttrs({isInitialized:true,isLoading:false,isLoaded:true,isPreparing:false,isPrepared:true,isStarted:true,isPlaying:false,isPaused:false,isSeeking:false,isCompleted:true,isError:false});},play:function(){this.model.set("playbackPosition",0);ak.prototype.prepare.apply(this,arguments);},setFullscreen:function(Y){this.controller._renderer.setFullscreen(Y);},prepare:function(){ak.prototype.prepare.apply(this,arguments);}});function M(){M.superclass.constructor.apply(this,arguments);}M.NAME="ErrorState";f.extend(M,ac,{activate:function(){this.model.setAttrs({isError:true});},prepare:function(){ak.prototype.prepare.apply(this,arguments);},playbackPausedHandler:function(){}});function J(){J.superclass.constructor.apply(this,arguments);}J.NAME="PreStartedState";f.extend(J,d,{activate:function(){var am=this.controller,Y=this.model,al=am._yvapRenderer;if(Y.get("rendererReady")===false){Y.after("rendererReadyChange",function(an){if(true===an.newVal){this.activate();}},this);return;}this.model.setAttrs({playerState:ab.PRESTARTED,isInitialized:true,isLoading:false,isLoaded:true,isPreparing:false,isPrepared:true,isStarted:true,isPlaying:false,isPaused:false,isSeeking:false,isCompleted:false,isError:false});if(al&&!al.get("criticalError")){if(Y.get("rendererType")==="html"){am._suspendVideoControl();}al.requestPreRollAd();}else{this._resumePlayback();}},_resumePlayback:function(){var al=this.controller._renderer,Y=this.model;J.superclass._resumePlayback.call(this);al.load(Y.get("currentMedia"));al.play();},prepare:function(){ak.prototype.prepare.apply(this,arguments);}});function S(){S.superclass.constructor.apply(this,arguments);}S.NAME="PostStartedState";f.extend(S,d,{activate:function(){this.model.setAttrs({playerState:ab.POSTSTARTED,isInitialized:true,isLoading:false,isLoaded:true,isPreparing:false,isPrepared:true,isStarted:true,isPlaying:false,isPaused:false,isSeeking:false,isCompleted:false,isError:false});var Y=this.controller._yvapRenderer,al=ab.PLAYBACKCOMPLETE;if(!Y||Y.get("criticalError")){this.controller._setState(al);this.model.set("playerState",al);}else{if(this.model.get("rendererType")==="html"){this.controller._suspendVideoControl();}Y.requestPostRollAd();}},_resumePlayback:function(){var am=this.controller,Y=this.model,al=ab.PLAYBACKCOMPLETE;S.superclass._resumePlayback.call(this);am._setState(al);Y.set("playerState",al);},prepare:function(){ak.prototype.prepare.apply(this,arguments);}});function b(al,am){var Y=this;Y._m=al;Y._states={begin:new E(al,Y),initialized:new D(al,Y),loading:new C(al,Y),loaded:new ak(al,Y),preparing:new Q(al,Y),prepared:new R(al,Y),started:new X(al,Y),paused:new B(al,Y),playbackComplete:new U(al,Y),error:new M(al,Y),prestarted:new J(al,Y),poststarted:new S(al,Y)};Y._activeState=Y._states.begin;Y._defaultRenderer=f.Object.getValue(am,"playlist.mediaItems.0.adData.adRules.result.renderType".split("."))||"flash";Y._preferHTML5=f.Object.getValue(am,"html5");if(Y._m){Y._m.setAttrs({guid:I.generateGuid(),rendererType:Y.getRendererType(f.UA),isOffNetwork:!I.isYahooDomain(I.getHostName()),hostingData:f.Object.getValue(window,"YAHOO.VideoPlatform.PlayerHosting".split("."))||{},lang:f.config.lang||"",autoplay:f.Object.getValue(am,"standaloneAdMode")===true});Y._m.after("currentMediaChange",function(an){f.later(1,Y,Y._checkPartnerBranding,an);},Y);}Y._cmsService=new f.VideoPlatform.LegoCMS({model:Y._m,controller:Y});Y._1u1s=new r();Y._1u1s.on("disconnect",function(){Y.pause();Y.error(new f.VideoPlatform.ErrorObject(c.ERROR["1U1S"].type,c.ERROR["1U1S"].code,Y.constructior.NAME,"disconnect received from 1u1s",c.LEVEL.CRITICAL));},Y);Y._1u1s.start(Y._m);}b.NAME="Controller";b.INSTANCE_CONFIG_WHITELIST=["autoplay","bitrate","site","lang","region","pageSpaceId","comscoreC4","comscoreC6","playerSpaceId","reportingDomain","playlist","chromeless","rendererType","continuousPlay","YVAP","beacons","errorDisplayDuration","mute","volume","lms","ybang","carousel","endscreen","startscreen","errorscreen","infoscreen","expType","expName","startVideo","atlasEnv","CMS","expBucket","SAPI_CONF","emptySpaceIdContextInSapi","pageLatency","standaloneAdMode","loop","synd"];b.CONFIG_UPDATE_ALLOWED_WHITELIST=["continuousPlay"];b.prototype={init:function(){this._activeState.init();this.load();},setControlsObj:function(Y){this._controls=Y;},getControlsObj:function(){return this._controls;},setProfiler:function(Y){this._profiler=Y;},getProfiler:function(){return this._profiler;},setMetricsModule:function(Y){this._metrics=Y;},getMetricsModule:function(){return this._metrics;},getRenderer:function(){return this._renderer;},validateConfig:function(aq){var Y=this._m,ao=this.configErrors(aq),ap,am,al,an;if(ao.length){ap=ao.join("\n");this.error(new f.VideoPlatform.ErrorObject(c.ERROR.CONFIG.type,c.ERROR.CONFIG.code,this.constructor.NAME,ap,c.LEVEL.CRITICAL));}else{am=this.filterObject(aq,b.INSTANCE_CONFIG_WHITELIST);this.commitToModel(am,Y);if(!aq.YVAP){Y.set("YVAPRequired",false);}an=am.playlist;if(an&&an.startVideo){Y.set("startVideo",an.startVideo);}else{if(an&&an.id&&an.mediaItems){al=an.mediaItems;if(al.length>0){Y.set("startVideo",al[0].id);}}}}},updateConfig:function(aq){var Y=this,al=(f.Lang.isObject(aq))?aq:null,an=f.VideoPlatform.Controller.CONFIG_UPDATE_ALLOWED_WHITELIST,ap=an.length,ao,am;if(al===null){return;}for(am=0;am<ap;am++){ao=an[am];if(al.hasOwnProperty(ao)){Y._m.set(ao,al[ao]);}}},load:function(al,Y){this._activeState.load(al,Y);},prepare:function(){var Y=this._profiler,al=Y?this._profiler.getItem(aj.VP_PREPARED.type):null;if(Y&&!f.Lang.isValue(al)){Y.setEndTime(aj.WAITING_FOR_LOADED.type);this.preparedProfileKey=Y.add(aj.VP_PREPARED);}this._activeState.prepare();},startMediaChangeTimer:function(){var Y=this._m,al=this._profiler,am=new k({model:Y});function ap(){am.stop(aj.VP_MEDIA_CHANGE.type,aj.VP_MEDIA_CHANGE.desc);if(al){al.setEndTime(aj.VP_MEDIA_CHANGE.type);}}function ao(aq){switch(aq.newVal){case YVAPEvents.AD_START:ap();break;case YVAPEvents.AD_NONE:case YVAPEvents.AD_ERROR:Y.after("isPlayingChange",an,this);
break;}}function an(aq){if(aq.newVal===true){ap();Y.detach("isPlayingChange",an,this);}}Y.once("yvapStateChange",ao,this);am.start();if(al){al.add(aj.VP_MEDIA_CHANGE);}},preparePlaylistPosition:function(Y){this.startMediaChangeTimer();this.setPlaylistPosition(Y);this.prepare();},play:function(){this._activeState.play();},pause:function(){this._activeState.pause();},seek:function(Y){this._activeState.seek(Y);},setFullscreen:function(Y){this._activeState.setFullscreen(Y);},setVolume:function(al){try{if(al<0){al=0;}if(al>1){al=1;}this._renderer.setVolume(al);}catch(Y){}},setMute:function(Y){try{this._renderer.setMute(Y);}catch(al){}},setPlaylistPosition:function(al){var Y=this._m;this.pause();Y.set("playlistPosition",al);Y.set("currentMedia",Y.get("playlist").items().item(al));Y.set("playbackPosition",0);},playNext:function(){var Y=this._m.get("playlistPosition")+1,al=this._m.get("playlist").items(),am=al.size();if(this._m.get("continuousPlay")===true&&am>Y){al._items[Y].set("autoContinue",true);this.preparePlaylistPosition(Y);}else{if(this._m.get("loop")===true){this._m.reset("playlistPosition");this.preparePlaylistPosition(0);}}},playIndex:function(am,al){var Y=this._m,an,ao;al=f.Lang.isUndefined(al)?false:al;if(al&&(al==="endScreen"||al==="errorScreen")){an=Y.get("endScreenVideos").items().item(am);ao=Y.get("playlist").items();am=Y.get("playlistPosition")+1;ao.add(an,am);}Y.get("playlist").items()._items[am].set("autoContinue",false);this.preparePlaylistPosition(am);},clearPlaylist:function(){var al=ab.INITIALIZED,Y=this._m;this.pause();Y.get("playlist").items().clear();this._setState(al);Y.set("playerState",al);},addToPlaylist:function(al){var Y=this._m;Y.get("playlist").items().add(al);if(ab.INITIALIZED===Y.get("playerState")){this.load();}},toggleInfoScreen:function(){var Y=this._m,al=Y.get("activeScreenStr"),am="info"===al?undefined:"info";Y.set("activeScreenStr",am);},toggleClosedCaptions:function(){var Y=this._m,am=Y.get("showClosedCaptions"),al=!am;Y.set("showClosedCaptions",al);this.updateControls({ccShow:al});},updateControls:function(Y){if(this._renderer){this._renderer.updateControls(Y);}},displayClosedCaptions:function(al){var Y=this._m;if(f.Lang.isValue(Y)){Y.set("showClosedCaptions",al);}},getMediaFormats:function(){return[I.formats.M3U8,I.formats.MP4];},warn:function(Y){this._m.set("warning",Y);},error:function(am){var al=ab.ERROR,Y=this._m;Y.set("error",am);this.pause();this._setState(al);Y.set("playerState",al);},updateMediaAttrs:function(al,Y){f.Object.each(Y,function(an,am){if((typeof(al.get(am))==="undefined")||(al.get(am)===null)){al.set(am,an);}});},resetStreamsIfRendererMismatch:function(){var al=this,Y=al._m,am=Y.get("currentMedia");if((al.getRendererType(f.UA)!==al._defaultRenderer)&&(am)&&!(f.Lang.isNumber(f.UA.ios))&&(f.UA.android<=0)){am.set("streams",null);am.set("adData",null);}},loadClips:function(al,Y){var am=Y.context||null;this._cmsService.loadClips(al,{success:function(an){Y.success.call(am,an);},failure:function(an){Y.failure.call(am,an);}});},commitToModel:function(an,Y){Y.setAttrs(an);if("playlist" in an){var am=an.playlist,al=Y.get("playlist");al.setAttrs(am);if("string"===typeof am.id&&am.id.length>0){}else{f.each(am.mediaItems,function(ao){al.items().add(ao);});}}if(f.Lang.isNumber(f.UA.ios)||(f.UA.android>0)){Y.set("autoplay",false);}if(Y.get("chromeless")){Y.set("startscreen",false);Y.set("infoscreen",false);Y.set("errorscreen",false);Y.set("endscreen",false);}},filterObject:function(am,Y){var al={};f.each(am,function(ao,an){if(f.Array.indexOf(Y,an)>=0){al[an]=ao;}});return al;},configErrors:function(al){var am=[],Y=["pageSpaceId","comscoreC4"];if(f.Lang.isObject(al)){f.each(Y,function(an){if(!f.Lang.isValue(al[an])){am.push('missing required key: "'+an+'"');}});if("beacons" in al){if(!f.Lang.isArray(al.beacons)){am.push("config.beacons should be an Array i.e. [{},]");}}}else{am.push("config is not an object");}return am;},updateDuration:function(al,Y){var am=isNaN(Y)?al.get("duration")||NaN:Y;if(al.get("isLive")||isNaN(am)){am=Number.POSITIVE_INFINITY;}this._m.set("duration",am);al.set("duration",am);},getLoadStrategy:function(){var am=this._fetchDataFromCMS,Y=this._m,al=false;if(this.isDataAvailable()){am=this._dataAvailable;al=true;}else{al=false;}Y.once("currentMediaChange",function(an){an.newVal.set("isPreFetched",al);},this);return am;},isDataAvailable:function(){var am=this,Y=am._m,al=["id","title","description","metrics","licensorName","licensorId","licenseName","licenseId","originatingProperty","images","provider","duration"],an=["streams","streamUrlOwner","adData","isLive"];an=an.concat(al);if(Y.get("autoplay")){return this._scanMediaObjects(an);}else{return this._scanMediaObjects(al);}},isHtmlCCSupported:function(){var Y=this._m;return(Y.get("rendererType")==="html"&&f.UA.mobile===null);},_scanMediaObjects:function(at){var al=this._m,an,am,ao,aq,Y=al.get("playlist").items(),ap=Y.toArray(),au=true,ar;if(ap.length===0){return false;}for(an=0,ao=ap.length;(an<ao&&au);an++){for(am=0,aq=at.length;(am<aq&&au);am++){ar=at[am];if(typeof ap[an][ar]==="undefined"){au=false;break;}if(ar==="streams"){Y.item(an).set("streams",this._getPreferredStreams(ap[an].streams));}}}return au;},_dataAvailable:function(Y){Y.loadData.call(Y.context||null,{});},_getPreferredStreams:function(aq){var ao=this._getPreferredFormats(),am=[],al,Y,ap,an;for(al=0,ap=ao.length;al<ap;al++){for(Y=0,an=aq.length;Y<an;Y++){if(ao[al]===aq[Y].format){am.push(aq[Y]);}}if(am.length>1){break;}}return am;},_getPreferredFormats:function(){var al=[],Y=this._m.get("rendererType");if("html"===Y){if(f.Lang.isNumber(f.UA.ios)){al=[I.formats.M3U8,I.formats.MP4];}else{if(f.Lang.isNumber(f.UA.android)&&f.UA.android>0){al=[I.formats.WEBM,I.formats.MP4];}else{al=[I.formats.MP4];}}}else{al=[I.formats.MP4,I.formats.FLV];}return al;},_fetchDataFromCMS:function(Y){Y.loadFromCMS.call(Y.context||null,{});},getPrepareStrategy:function(an){var Y=an.get("status"),ap=an.get("streams"),al=an.get("streamUrl"),am=Y&&Y.code?parseInt(Y.code,10):NaN,ao=this._fetchStreamData;
if((ap&&ap.length)||(al&&al.length)){ao=this._alreadyPrepared;an.set("isPreFetched",true);}else{an.set("isPreFetched",false);}if(!isNaN(am)&&am>=200){ao=this._clipStatusNotPlayable;}return ao;},_alreadyPrepared:function(am,al){var Y=am.get("streamUrl");if(Y&&Y.indexOf("/rtx/")!==-1){am.set("isRTX",true);}al.success.call(al.context||null,{});},_clipStatusNotPlayable:function(an,am){var Y=an.get("status"),al=this.constructor.NAME;am.failure.call(am.context||null,new f.VideoPlatform.ErrorObject(c.ERROR.STREAM_NOT_PLAYABLE.type,Y.code,al,"clip not playable: "+Y.msg,c.LEVEL.CRITICAL),null);},_fetchStreamData:function(an,ap){var aq=new f.VideoPlatform.MediaCollection([an]),ao=this.constructor.NAME,al=ap.context||null,Y=new k({model:this._m}),at=this._profiler;function ar(au){ap.success.call(al,au);}function am(av,au){ap.failure.call(al,av,au);}Y.start();if(at){at.add(aj.CMS_GetStreams);}this.loadClips(aq,{success:function(au){Y.stop(aj.CMS_GetStreams.type,aj.CMS_GetStreams.desc);if(at){at.setEndTime(aj.CMS_GetStreams.type);}var av=au[0];if(av&&av.status&&("100"===av.status.code||"101"===av.status.code)){ar(av);}else{am(new f.VideoPlatform.ErrorObject(c.ERROR.STREAM_NOT_PLAYABLE.type,(av&&av.status)?av.status.code:c.ERROR.STREAM_NOT_PLAYABLE.code,ao,(av&&av.status&&av.status.msg)?av.status.msg:"error loading content",c.LEVEL.CRITICAL),av);}},failure:function(au){am(au,null);}});},_activeState:null,_setState:function(Y){if(Y!==this._m.get("playerState")){this._activeState=this._states[Y];this._activeState.activate();}return this._activeState;},_renderer:null,_yvapRenderer:null,registerRenderer:function(Y){this._addRendererListeners(Y);this._renderer=Y;},_addRendererListeners:function(Y){var al=af;f.each([al.PLAYBACK_READY,al.PLAYBACK_PLAY,al.PLAYBACK_PLAYING,al.PLAYBACK_PAUSED,al.PLAYBACK_PROGRESS,al.PLAYBACK_SEEK,al.PLAYBACK_SEEKED,al.PLAYBACK_COMPLETE,al.PLAYBACK_ERROR,al.PLAYBACK_WAITING,al.FULLSCREEN_ENTER,al.FULLSCREEN_EXIT,al.MUTE_CHANGE,al.VOLUME_CHANGE,al.UI_INTERACT,al.MEDIA_INFO_UPDATE,al.BITRATE_CHANGE,al.PLAYER_RESIZE,al.PLAYER_READYSTATE,al.CLIENT_RESIZE,al.DURATION_CHANGE],function(am){Y.on(am,function(ao){var an=am+"Handler";if(f.Lang.isFunction(this._activeState[an])){this._activeState[an](ao);}},this);},this);},_suspendVideoControl:function(){var Y=this._renderer.suspendControl();this._m.set("videoPlaybackState",Y);},_returnVideoControl:function(){var Y=this._m.get("videoPlaybackState");if(Y){this._renderer.returnControl(Y);}},getRendererType:function(al){var am="html";if(f.Lang.isString(al.mobile)||f.Lang.isNumber(al.ios)||al.android>0){return am;}if((navigator&&navigator.userAgent)&&((navigator.userAgent.indexOf("MSAppHost")>=0)||(/.+MSIE 10.+Windows NT.+WebView/i.test(navigator.userAgent)))){return am;}if(this._fallBackTOHTML5(al)){return am;}function Y(){return !!document.createElement("video").canPlayType;}if(this._preferHTML5&&Y()){return am;}return this._defaultRenderer;},_isBrowserHTML5Compatible:function(Y){var al=I.compareVersions;return(al(Y.chrome,21)>=0||al(Y.ie,9)>=0||al(I.isIE11(),9)>=0||al(Y.safari,6)>=0||al(Y.opera,10.6)>=0||al(Y.gecko,23)>=0);},_fallBackTOHTML5:function(Y){return(!this._isFlashVersionAtLeast(10,2)&&this._isBrowserHTML5Compatible(Y));},_testsFlashVersionAtLeast:function(av,ar,an){var au,ap=f.UA,al=f.Lang,aq,ao,Y;function at(aw){return parseInt(aw,10);}function am(aw){if(al.isNumber(at(aw[0]))){ap.flashMajor=aw[0];}if(al.isNumber(at(aw[1]))){ap.flashMinor=aw[1];}if(al.isNumber(at(aw[2]))){ap.flashRev=aw[2];}}au=I.getFlashVersion();if(au!==0&&au!==6){if(ap.gecko||ap.webkit||ap.opera){au=au.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split(".");}else{au=au.replace(/[A-Za-z\s]+/g,"").split(",");}am(au);}aq=at(ap.flashMajor);ao=at(ap.flashMinor);Y=at(ap.flashRev);av=at(av||0);ar=at(ar||0);an=at(an||0);if(av===aq){if(ar===ao){return an<=Y;}return ar<ao;}return av<aq;},_isFlashVersionAtLeast:function(Y,am,al){return this._testsFlashVersionAtLeast(Y,am,al);},getRendererClass:function(Y){var al={"flash":j,"html":h};return al[Y];},_createYVAP:function(){var Y=new f.VideoPlatform.YVAP({model:this._m,controller:this});this._yvapRenderer=Y;this.registerYVAP(Y);},registerYVAP:function(Y){var al=YVAPEvents;f.each([al.ADPLUGIN_READY,al.AD_START,al.AD_END,al.AD_COMPLETE,al.AD_ERROR,al.AD_NONE,al.AD_PROGRESS,al.AD_PLUGIN_METRIC,al.AD_PLUGIN_QOS_METRIC,al.PLUGIN_REMOVED],function(am){Y.on(am,function(ao){var an=am+"Handler";if(f.Lang.isFunction(this._activeState[an])){this._activeState[an](ao);}},this);},this);},getStrings:function(){var Y=f.Object.getValue(window,"YAHOO.VideoPlatform.i18n".split("."));if(typeof Y==="undefined"){return[];}else{return Y;}},_checkPartnerBranding:function(ap){var am=this,an=am._m,ao=ap.newVal,aq=ao?ao.get("provider").name:null;if(aq!=="NFL Highlights"){an.reset("partnerCarouselItems");an.set("ybang",true);am.updateControls({ybangEnable:true});return;}an.set("ybang",false);am.updateControls({ybangEnable:false});function al(ar){var av=ar.mediaItems,au,at,aw=new f.VideoPlatform.MediaCollection();if(av.length===0){}else{for(au=0;au<av.length;au++){at=av[au];if(at.images){at.images.large=at.images.medium=at.images.thumbnail;}aw.add(at);}an.set("partnerCarouselItems",aw);an.set("ybang",false);}}function Y(){}this._cmsService.loadPlaylist("570a2285-8e29-4c78-a044-22b9aada15d3",0,0,4,{success:al,failure:Y});}};b.prototype.constructor=b;f.augment(b,e);f.namespace("VideoPlatform").Controller=b;var L={_controls:null,_updateHandlers:{"seekbarVisible":function(Y){this._controls.seekEnable(Y);},"seekDragEnable":function(Y){this._controls.seekDragEnable(Y);},"altDuration":function(Y){},"playPauseEnable":function(Y){this._controls.playPauseEnable(Y);},"fullscreenEnable":function(Y){this._controls.enableMaxMin(Y);},"ccEnable":function(Y){this._controls.enableCloseCaptions(Y);},"altCurrentTime":function(){},"infoEnable":function(){},"playLoadAnimation":function(){}},init:function(Y){this._controls=Y;},updateControls:function(an){var am,Y,al;for(Y in an){if(an.hasOwnProperty(Y)){al=this._updateHandlers[Y];
if(typeof al==="function"){am=[an[Y]];al.apply(this,am);}else{}}}}};f.namespace("VideoPlatform").UpdateControls=L;f.namespace("VideoPlatform").API_Events={PLAYER_RENDERED:"render",PLAYER_READY:"playerReady",PLAYER_ERROR:"playerError",PLAYBACK_ERROR:"playbackError",PLAYER_VOLUME_CHANGE:"volumeChange",PLAYER_MUTE_CHANGE:"muteChange",PLAYBACK_READY:"playbackReady",PLAYBACK_START:"playbackStart",PLAYBACK_TIME_UPDATE:"playbackTimeUpdate",DURATION_CHANGE:"durationChange",BITRATE_CHANGE:"bitrateChange",PLAYBACK_PAUSE:"playbackPause",PLAYBACK_SEEK_COMPLETE:"playbackSeek",PLAYBACK_COMPLETE:"playbackComplete",PLAYER_FULLSCREEN_CHANGE:"fullscreenChange",AD_PLAYBACK_START:"adStart",AD_PLAYBACK_STOP:"adComplete",AD_PLAYBACK_PROGRESS:"adProgress",AD_NONE:"adNone",AD_ERROR:"adError",PLAYLIST_POSITION_CHANGE:"playlistPositionChange",UI_INTERACT:"uiInteract"};var l=f.VideoPlatform.API_Events;function v(al,Y){this._c=Y;this._m=al;}v.prototype.play=function(){this._c.play();};v.prototype.pause=function(){this._c.pause();};v.prototype.seek=function(Y){this._c.seek(Y);};v.prototype.getDuration=function(){return this._m.get("duration");};v.prototype.getCurrentTime=function(){return this._m.get("playbackPosition");};v.prototype.setFullscreen=function(Y){this._c.setFullscreen(Y);};v.prototype.getFullscreen=function(){return this._m.get("fullscreen");};v.prototype.setVolume=function(Y){this._c.setVolume(Y);};v.prototype.getVolume=function(){return this._m.get("volume");};v.prototype.setMute=function(Y){this._c.setMute(Y);};v.prototype.getMute=function(){return this._m.get("mute");};v.prototype.getBitrate=function(){return this._m.get("bitrate");};v.prototype.displayClosedCaptions=function(Y){this._c.displayClosedCaptions(Y);};f.namespace("VideoPlatform").ControlsAPI=v;function V(al,Y){this._c=Y;this._m=al;}V.prototype.get=function(){var Y=this._m.get("playlist");return Y.toObject();};V.prototype.setPosition=function(Y){this._m.get("playlist").items()._items[Y].set("autoContinue",false);this._c.preparePlaylistPosition(Y);};V.prototype.setPositionById=function(al){var Y;Y=this._m.get("playlist").items().getIndexById(al);if(Y===-1){return;}this._m.get("playlist").items()._items[Y].set("autoContinue",false);this._c.preparePlaylistPosition(Y);};V.prototype.getPosition=function(){return this._m.get("playlistPosition");};V.prototype.clear=function(){this._c.clearPlaylist();};V.prototype.removeItems=function(Y,al){return this._m.get("playlist").items().removeItems(Y,al);};V.prototype.removeItem=function(Y){return this._m.get("playlist").items().removeItem(Y);};V.prototype.getIndex=function(Y){return this._m.get("playlist").items().getIndexById(Y);};V.prototype.removeItemById=function(Y){return this._m.get("playlist").items().removeItemById(Y);};V.prototype.removeItemsById=function(Y){return this._m.get("playlist").items().removeItemsById(Y);};V.prototype.getSize=function(){return this._m.get("playlist").items().size();};V.prototype.addItem=function(Y){this._c.addToPlaylist(Y);};V.prototype.getItem=function(Y){var al=null;if(f.Lang.isNumber(Y)){al=this._m.get("playlist").get("mediaItems").item(Y);if(al){al=al.toObject();}}return al;};V.prototype.getCurrentItem=function(){return this.getItem(this.getPosition());};V.prototype.fetchMetaData=function(Y,al){var an=al.context||null,am=new f.VideoPlatform.MediaCollection(Y);this._c.loadClips(am,{success:function(ao){if(f&&f.Array){ao=f.Array.map(ao,function(ap){return new f.VideoPlatform.MediaObject(ap);});al.success.call(an,ao);}},failure:function(ao){al.failure.call(an,ao);}});};V.prototype.updatePlayerData=function(Y){var am=this._c._yvapRenderer,al=(f.Lang.isArray(Y))?Y:[Y];if(am===null){}else{am._updatePlayerData(al);}};f.namespace("VideoPlatform").PlaylistAPI=V;function m(){}m.prototype.updateConfig=function(Y){this._controller.updateConfig(Y);};m.prototype._setupAPI=function(al,Y){this._model=this._model||al;this._controller=this._controller||Y;this.publish(l.PLAYER_READY,{fireOnce:true});this.publish(l.PLAYER_RENDERED,{fireOnce:true});this.controls=new v(al,Y);this.playlist=new V(al,Y);al.after("isSeekingChange",this._onSeekingChange,this);al.after("playbackPositionChange",this._onPlaybackPositionChange,this);al.after("durationChange",this._onDurationChange,this);al.after("volumeChange",this._onVolumeChange,this);al.after("muteChange",this._onMuteChange,this);al.after("playerStateChange",this._onPlayerStateChange,this);al.after("fullscreenChange",this._onFullscreenChange,this);al.after("isPlaybackErrorChange",this._onPlaybackErrorChange,this);al.after("yvapStateChange",this._onYVAPStateChange,this);al.after("playlistPositionChange",this._onPlaylistPositionChange,this);al.after("uiInteract",this._onUIInteract,this);};m.prototype._onSeekingChange=function(Y){if(Y.newVal===false&&Y.prevVal===true){this.fire(l.PLAYBACK_SEEK_COMPLETE);}};m.prototype._onVolumeChange=function(Y){this.fire(l.PLAYER_VOLUME_CHANGE,Y.newVal);};m.prototype._onFullscreenChange=function(Y){this.fire(l.PLAYER_FULLSCREEN_CHANGE,Y.newVal);};m.prototype._onMuteChange=function(Y){this.fire(l.PLAYER_MUTE_CHANGE,Y.newVal);};m.prototype._onPlaybackPositionChange=function(Y){this.fire(l.PLAYBACK_TIME_UPDATE,Y.newVal);};m.prototype._onDurationChange=function(Y){this.fire(l.DURATION_CHANGE,{duration:Y.newVal});};m.prototype._onBitrateChange=function(Y){this.fire(l.BITRATE_CHANGE,Y.newVal);};m.prototype._onPlaybackErrorChange=function(al){var Y;if(al.newVal===true){Y=this._model.get("error");this.fire(l.PLAYBACK_ERROR,new f.VideoPlatform.API_ErrorObject({message:Y.msg,code:Y.code}));}};m.prototype._adProgressHandler=function(Y){if("position" in Y.newVal){this.fire(l.AD_PLAYBACK_PROGRESS,Y.newVal);}};m.prototype._onYVAPStateChange=function(al){var Y=al.newVal||"";switch(Y){case"adStart":this.fire(l.AD_PLAYBACK_START,this._model.get("yvapData"));break;case"adComplete":this.fire(l.AD_PLAYBACK_STOP);break;case"adProgress":this.fire(l.AD_PLAYBACK_PROGRESS,this._model.get("yvapData"));this._model.after("yvapDataChange",this._adProgressHandler,this);
break;case"adError":this.fire(l.AD_ERROR);break;case"adNone":this.fire(l.AD_NONE);break;}if(al.prevVal==="adProgress"&&al.newVal!=="adProgress"){this._model.detach("yvapDataChange",this._adProgressHandler,this);}};m.prototype._onPlayerStateChange=function(am){var Y=am.newVal||"",al;switch(Y){case ab.LOADED:this.fire(l.PLAYER_READY);this.fire(l.PLAYBACK_READY);break;case ab.PREPARED:break;case ab.STARTED:this.fire(l.PLAYBACK_START);break;case ab.PAUSED:this.fire(l.PLAYBACK_PAUSE);break;case ab.PLAYBACKCOMPLETE:this.fire(l.PLAYBACK_COMPLETE);break;case ab.ERROR:al=this._model.get("error")||{};this.fire(l.PLAYER_ERROR,new f.VideoPlatform.API_ErrorObject({message:al.msg,code:""}));break;}};m.prototype._onPlaylistPositionChange=function(Y){this.fire("playlistPositionChange",{position:Y.newVal});};m.prototype._onUIInteract=function(Y){if(Y.source){this.fire(l.UI_INTERACT,{srcElement:Y.source});}};f.augment(m,f.EventTarget);f.namespace("VideoPlatform").API=m;f.namespace("VideoPlatform").API_ConfigObject=function(){return{pageSpaceId:null,playlist:{},lang:null,airplay:null,chromeless:null,continuousPlay:null,YVAP:{accountId:null,playContext:null,ruleSetId:null},volume:null,mute:null,site:null,region:null,jurisdiction:null,beacons:[],comscoreC4:null,comscoreC6:null,autoplay:null,ybang:true,carousel:false,expType:null,expName:null,expBucket:null,startVideo:"",atlasEnv:null,standaloneAdMode:false,streamAd:null};};f.namespace("VideoPlatform").API_ErrorObject=function(Y){return f.merge({code:"",message:""},Y);};f.namespace("VideoPlatform").API_MediaObject=function(){return new f.VideoPlatform.MediaObject().toObject({});};f.namespace("VideoPlatform").API_StreamObject=function(){return{callback:"",path:"",type:"",streamId:"",cdn:"",bitrate:"",isLive:"",width:"",height:"",playGUID:"",duration:""};};f.namespace("VideoPlatform").API_PlaylistObject=function(){return new F().toObject({});};function ai(){ai.superclass.constructor.apply(this,arguments);}ai.NAME="VideoPlayer";ai.NS="videoPlayer";ai.ATTRS={rendererType:{readOnly:true,getter:function(){return this._model.get("rendererType");}},spinnerTimeout:{value:"10",getter:function(Y){return Number(Y);}},playbackPlugin:{readOnly:true,getter:function(){var al;try{al=this._controller._renderer._yswf;}catch(Y){}finally{return al;}}},rendered:{value:false}};f.extend(ai,f.Base,{initializer:function(al){var Y=new ah(),am;Y.add(aj.VP_INIT_TO_START);Y.add(aj.VP_INIT_TO_STARTSCREEN);Y.add(aj.VP_CONSTRUCTOR);Y.add(aj.MVC_CONSTRUCTORS);this._instanceConfig=al;this._vpInitTime=(new Date()).getTime();this._model=new O();this._controller=new b(this._model,al);this._view=new s({model:this._model,controller:this._controller});Y.setEndTime(aj.MVC_CONSTRUCTORS.type);Y.add(aj.VP_SETUP_API);this._controller.validateConfig(al);am=this._model.get("autoplay");if(am===true){Y.remove(aj.VP_INIT_TO_STARTSCREEN.type);this._autoplayTimer(this._model,Y);}else{Y.remove(aj.VP_INIT_TO_START.type);this._startScreenTimer(this._model,Y);}this._metrics=new f.VideoPlatform.Metrics({model:this._model,controller:this._controller,view:this._view});Y.setMetricsModule(this._metrics);this._controller.setProfiler(Y);this._controller.setMetricsModule(this._metrics);this._setupAPI(this._model,this._controller);this._startSpinnerTimer(this._model);Y.setEndTime(aj.VP_SETUP_API.type);Y.add(aj.INIT_TO_LOAD_PLAYLIST);this._controller.init(al);Y.setEndTime(aj.VP_CONSTRUCTOR.type);},render:function(aq){var al=aq,am,ao=this._model,ar=this._controller,at=this._view,au=ar?ar.getProfiler():null,Y=new k({model:this._model});if(au){au.add(aj.RENDER_NODE_AVAILABLE);}function ap(){at.on("stateChange",an,this);Y.start();if(au){au.setEndTime(aj.RENDER_NODE_AVAILABLE.type);au.add(aj.CREATE_RENDERER);}at.render(am);}function an(av){if("RENDERED"===av.newVal){Y.stop(aj.CREATE_RENDERER.type,aj.CREATE_RENDERER.desc);if(au){au.setEndTime(aj.CREATE_RENDERER.type);}this.set("rendered",true);this.fire(l.PLAYER_RENDERED);at.detach("stateChange",an,this);if(ao.get("autoplay")===true){if(au){au.add(aj.WAITING_FOR_LOADED);}if(ao.get("isLoaded")===true){ar.prepare();}else{ao.once("isLoadedChange",function(){ar.prepare();},this);}}}}if(f.Lang.isString(al)){f.on("available",function(){am=f.Node.one(al);ap.call(this);},al,this);}else{if(al&&(al.getDOMNode||f.Node.getDOMNode(al))){am=al;ap.call(this);}else{ar.error(new f.VideoPlatform.ErrorObject(c.ERROR.CONFIG.type,c.ERROR.CONFIG.code,this.constructor.NAME,"invalid parentNode",c.LEVEL.CRITICAL));}}return this;},setScreenConfig:function(al,Y){this._model.set(al,Y);},_startScreenTimer:function(am,al){var Y=am,an=al,ao=new k({model:Y});ao.start();this._view.once("startScreenCreatedChange",function(ap){if(ap.newVal===true){ao.stop(aj.VP_INIT_TO_STARTSCREEN.type,aj.VP_INIT_TO_STARTSCREEN.desc);ao=null;if(an){an.setEndTime(aj.VP_INIT_TO_STARTSCREEN.type);}}},this);},_startSpinnerTimer:function(an){var Y=an,aq=this._controller,ao=this.constructor.NAME,am;function ap(){if(am!==null&&am!==undefined){clearInterval(am);am=null;}}function al(){var ar=new f.VideoPlatform.ErrorObject(c.ERROR.SPINNER.type,c.ERROR.SPINNER.code,ao,"ps="+Y.get("playerState")+";as="+Y.get("yvapState"),c.LEVEL.WARNING);aq.warn(ar);ap();}Y.on("isSpinnerShownChange",function(at){var ar=this.get("spinnerTimeout")*1000;if(at.newVal===true){am=setTimeout(al,ar);}else{ap();}},this);},_autoplayTimer:function(ar,au){var an=ar,aq=au,al=new k({model:an});function ap(){al.stop(aj.VP_INIT_TO_START.type,aj.VP_INIT_TO_START.desc);al=null;if(aq){aq.setEndTime(aj.VP_INIT_TO_START.type);}}function ao(){an.once("yvapStateChange",at,this);}function am(){an.after("isPlayingChange",Y,this);}function at(av){switch(av.newVal){case YVAPEvents.AD_START:ap();break;case YVAPEvents.AD_NONE:case YVAPEvents.AD_ERROR:case YVAPEvents.PLUGIN_REMOVED:am();break;}}function Y(av){if(av.newVal===true){ap();an.detach("isPlayingChange",Y,this);}}ao();al.setStartTime(this._vpInitTime);an.once("YVAPRequiredChange",function(av){if(av.newVal===false){am();an.detach("yvapStateChange",at,this);
}},this);}});f.augment(ai,m);f.namespace("VideoPlatform").VideoPlayer=ai;function c(Y,al,an,am,ao){this.type=Y||"";this.code=al||"";this.src=an||"";this.message=am||"";this.level=ao||c.LEVEL.WARNING;return this;}c.ERROR={CMS_REQUEST:{type:"400",code:"101"},CMS_RESPONSE:{type:"400",code:"405"},CMS_RESPONSE_LOADCLIPS_STREAMS:{type:"401",code:"405"},CMS_RESPONSE_LOADCLIPS_META:{type:"402",code:"405"},CMS_RESPONSE_LOADCLIPS_MULTI:{type:"403",code:"405"},CMS_RESPONSE_LOADCLIPS_ALL:{type:"404",code:"405"},CMS_RESPONSE_LOADPLAYLIST:{type:"405",code:"405"},CMS_RESPONSE_LOADRELATED:{type:"406",code:"405"},CMS_RESPONSE_CLOSED_CAPTION:{type:"407",code:"405"},CMS_TIMEOUT:{type:"400",code:"408"},CMS_TIMEOUT_LOADCLIPS_STREAMS:{type:"401",code:"408"},CMS_TIMEOUT_LOADCLIPS_META:{type:"402",code:"408"},CMS_TIMEOUT_LOADCLIPS_MULTI:{type:"403",code:"408"},CMS_TIMEOUT_LOADCLIPS_ALL:{type:"404",code:"408"},CMS_TIMEOUT_LOADPLAYLIST:{type:"405",code:"408"},CMS_TIMEOUT_LOADRELATED:{type:"406",code:"408"},CMS_TIMEOUT_CLOSED_CAPTION:{type:"407",code:"408"},CMS_TIMEOUT_LOADCLIPS_ALL_RETRY:{type:"204",code:"408"},CMS_TIMEOUT_LOADPLAYLIST_RETRY:{type:"205",code:"408"},CMS_TIMEOUT_LOADRELATED_RETRY:{type:"206",code:"408"},CMS_REQUEST_LOADCLIPS_ALL_RETRY:{type:"204",code:"101"},CMS_REQUEST_LOADPLAYLIST_RETRY:{type:"205",code:"101"},CMS_REQUEST_LOADRELATED_RETRY:{type:"206",code:"101"},PLAYBACK:{type:"400",code:"100"},CONFIG:{type:"400",code:"300"},NO_FLASH:{type:"400",code:"200"},OLD_FLASH:{type:"400",code:"201"},NO_CONFIG:{type:"400",code:"300"},YUI_INTEGRATION_ERR:{type:"400",code:"301"},SPINNER:{type:"400",code:"305"},"1U1S":{type:"400",code:"401"},NO_CONTENT:{type:"500",code:"0"},STREAM_NOT_PLAYABLE:{type:"501",code:"0"},NO_PLAYLIST_CONTENT:{type:"502",code:"0"},NO_RELATED_CONTENT:{type:"503",code:"0"},NO_POPULAR_CONTENT:{type:"504",code:"0"},NO_CLOSED_CAPTION_CONTENT:{type:"505",code:"0"},FLASH_BLOCKED:{type:"200",code:"202"},CMS_METRICS_VALIDATION:{type:"200",code:"100"}};c.LEVEL={CRITICAL:"critical",WARNING:"warning"};f.namespace("VideoPlatform").ErrorObject=c;var I={validateUrl:function(al){var an=this.removeExtraLineChars(al),Y=true,am;if(this.isUrl(an)){am=an.split(this.isUrlMatch(an)[0])[1];if(this.isScriptable(am)||this.isExecutable(am)){Y=false;}}else{Y=false;}return Y;},isAlphaNumeric:function(Y){return !(new RegExp(/[^a-z0-9\,\._\-]/gi).test(Y));},isExecutable:function(Y){return new RegExp(/(\:|\;|\"|\'|\(|\)|<|>| )/gi).test(Y);},isUrl:function(Y){return new RegExp(/htt(p:\/\/|ps:\/\/)/).test(Y);},isUrlMatch:function(Y){var am=new RegExp(/htt(p:\/\/|ps:\/\/)/).exec(Y),al=[];if(am){al=am;}return al;},fixedEncodeURIComponent:function(Y){return encodeURIComponent(Y).replace(/[!'()]/g,escape).replace(/\*/g,"%2A");},isScriptable:function(Y){return new RegExp(/(asfunction:|javascript:|event:|vbscript:)/gi).test(Y);},removeExtraLineChars:function(Y){var al=Y;al=al.split(" ").join("");al=al.split("\t").join("");al=al.split("\n").join("");al=al.split("\r").join("");return al;},generateGuid:function(Y){var al=Y||22,ao="",am,an="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._";for(am=0;am<al;am++){ao+=an.charAt(Math.floor(Math.random()*an.length));}return ao;},isIE11:function(){var Y,am={ie:0,opera:0,gecko:0,webkit:0,safari:0,chrome:0,mobile:null,air:0,phantomjs:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,silk:0,accel:false,webos:0,caja:navigator&&navigator.cajaVersion,secure:false,os:null,nodejs:0,touchEnabled:false},al=function(an){var ao=0;return parseFloat(an.replace(/\./g,function(){return(ao++===1)?"":".";}));};Y=navigator.userAgent.match(/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/);if(Y&&(Y[1]||Y[2])){am.ie=al(Y[1]||Y[2]);}return am.ie;},getFlashVersion:function(){var ap=0,au=this,an=f.UA,at="ShockwaveFlash",al,am,av,Y;function ar(){return(an.ie||au.isIE11());}if(an.gecko||an.webkit||an.opera){if((al=navigator.mimeTypes["application/x-shockwave-flash"])){if((am=al.enabledPlugin)){ap=am.description;}}}else{if(ar()){try{av=new ActiveXObject(at+"."+at+".6");av.AllowScriptAccess="always";}catch(ao){if(av!==null){ap=6;}}if(ap===0){try{Y=new ActiveXObject(at+"."+at);ap=Y.GetVariable("$version");}catch(aq){}}}}return ap;},generateHashCode:function(aq,an,ap){var ar=typeof aq,ao=0,am,Y,al;if(ar==="number"){aq+="";}else{if(ar!=="string"){return"invalid-71";}}Y=aq.length;if(Y===0){return"invalid-72";}for(al=0;al<Y;++al){am=aq.charCodeAt(al);ao=((ao<<5)-ao)+am;ao&=ao;}if(ao<0){ao=Y+""+ao;}else{ao=ao+"-"+Y;}an=((typeof an!=="string")&&(typeof an!=="number"))?"":an+"-";ap=((typeof ap!=="string")&&(typeof ap!=="number"))?"":"-"+ap;return an+ao+ap;},determineWindowMode:function(ao,al){var Y,an,am,ap="opaque";if(ao.flashMajor<"10"){return ap;}if(ao.flashMinor<"2"){return ap;}switch(ao.os){case"macintosh":am=/Mac OS X\s+([0-9_\.]+)/i;an=am.exec(al);if(an){Y=an[1].split(/[_.]/);if(Y[0]>=10&&Y[1]>=6){if(ao.chrome>0||ao.gecko>=4||ao.safari>=530){ap="direct";}}}break;case"windows":break;}return ap;},getHostName:function(){var am,Y;if(I.inIFrame()){try{Y=window.top.location.href;}catch(al){}if(!f.Lang.isValue(Y)){Y=document.referrer;}}else{if(I.isValidHostDomain(window.location.href,window.document.URL)){Y=window.location.href;}}am=Y;return am;},isValidHostDomain:function(am,al){var an,Y;if(!am||!al){return false;}an=I.parseUrl(am).host;Y=I.parseUrl(al).host;return an===Y;},parseUrl:function(al){var Y={url:"",protocol:"",host:"",path:"",file:""},am,an;if(al&&f.Lang.isString(al)){am=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/;an=al.match(am);if(an){Y.url=an[0]||Y.url;Y.protocol=an[1]||Y.protocol;Y.host=an[6]||Y.host;Y.path=an[10]||Y.path;Y.file=an[11]||Y.file;}}return Y;},isYahooDomain:function(al){var Y=f.Object.getValue(window,"YAHOO.VideoPlatform.WhiteListedDomains".split("."));if((typeof Y==="object")&&(typeof al==="string")){try{if(al.match(/(https?:\/\/)?(.[^\/:]+)/i)[2] in Y){return true;}}catch(am){}}return(/^https?:\/\/([A-Za-z0-9_\-]*\.)*yahoo.com(:(6553[0-5]|655[0-2]\d|65[0-4]\d\d|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3}|0))?($|\/)/.test(al)||/^https?:\/\/([A-Za-z0-9_\-]*\.)*yimg.com($|\/)/.test(al)||/^https?:\/\/([A-Za-z0-9_\-]*\.)*yahoo.net($|\/)/.test(al)||/^https?:\/\/([A-Za-z0-9_\-]*\.)*yahooapis.com($|\/)/.test(al)||/^https?:\/\/([A-Za-z0-9_\-]*\.)*rivals.com($|\/)/.test(al)||/^https?:\/\/([A-Za-z0-9_\-]*\.)*maktoob.com($|\/)/.test(al));
},compareVersions:function(am,al){var ar,aq,ao,ap,an,Y;if(am===al){return 0;}aq=(am+"").split(".");ap=(al+"").split(".");for(an=0,Y=Math.max(aq.length,ap.length);an<Y;++an){ar=parseInt(aq[an],10);ao=parseInt(ap[an],10);if(isNaN(ar)){ar=0;}if(isNaN(ao)){ao=0;}if(ar<ao){return -1;}if(ar>ao){return 1;}}return 0;},inIFrame:function(){return(window.top!==window.self);},postMessage:function(Y){var al;if(parent&&parent.postMessage){al=window.location.hash.split("=")[1];if(!al){al=1;}parent.postMessage(Y+":"+al,"*");}},isFullscreenSupported:function(){if(!I.inIFrame()){return true;}if(window.location.hash.substr(0,4)==="#id="){return true;}return((document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled)===true);},getDuration:function(Y){Y=parseInt(Y,10);return Math.floor(Y/60)+":"+this.prefixZeroes(Y%60);},prefixZeroes:function(Y){if(Y<10){return"0"+Y.toString();}else{return Y.toString();}},isMobile:function(){var Y=f.UA;if(Y.android!==0||Y.ios!==null||Y.mobile!==null){return true;}return false;},clients:{MISC:"misc",APPLE:"apple",DESKTOP:"desktop"},formats:{FLV:"flv",MP4:"mp4",M3U8:"m3u8",WEBM:"webm",F4M:"f4m"},protocols:{HTTP:"http",RTMP:"rtmp",RTSP:"rtsp"}};I.PLAYER_ASSETS_URL=(document.location.protocol==="https:")?"https://s.yimg.com/rx/builds/4.1.13.21046/assets/":"http://l.yimg.com/rx/builds/4.1.13.21046/assets/";f.namespace("VideoPlatform").Utils=I;function K(){}K.Events={VP_CONSTRUCTOR:{type:"tcons",desc:"VideoPlayer Constructor",color:"green",qosMetric:true},MVC_CONSTRUCTORS:{type:"tmvccons",desc:"VideoPlayer MVC constructors",color:"white",qosMetric:false},VP_SETUP_API:{type:"tsetupapi",desc:"Before controller init",color:"white",qosMetric:false},INIT_TO_LOAD_PLAYLIST:{type:"titlpl",desc:"Controller init to load playlist (Begin state to Init state)",color:"white",qosMetric:false},PLAYLIST_LOADED:{type:"tploaded",desc:"Playlist loaded",color:"darkcyan",qosMetric:true},SAPI_LOADCLIPS:{type:"tsapic",desc:"SAPI request for clips",color:"darkcyan",qosMetric:true},RENDER_NODE_AVAILABLE:{type:"trnodeavail",desc:"Player Render API waiting for node to be available",color:"hotpink",qosMetric:true},CREATE_RENDERER:{type:"trcreate",desc:"Creating the renderer (swf/html)",color:"hotpink",qosMetric:true},WAITING_FOR_LOADED:{type:"twfl",desc:"Waiting for isLoaded to start controller.prepare()",color:"white",qosMetric:false},YSWF_READY:{type:"tswfr",desc:"Player SWF is ready",color:"royalblue",qosMetric:true},YSWF_NodeRendered:{type:"tfoins",desc:"Inserted flash object tag",color:"white",qosMetric:true},YSWF_LOADED:{type:"tfdl",desc:"Flash Download (Browser creates plugin, SWF is downloaded, Flex FW is initialized)",color:"white",qosMetric:true},YSWF_SWF_ONLY_INIT_TIME:{type:"tswfoi",desc:"Player SWF init time",color:"white",qosMetric:true},YVAP_LOADED:{type:"tswfl",desc:"Yvap Loaded",color:"saddlebrown",qosMetric:false},CMS_GetStreams:{type:"tcmsgs",desc:"SAPI Get Streams",color:"darkcyan",qosMetric:false},YVAP_READY:{type:"tyvapr",desc:"VideoAdPlugin is ready",color:"saddlebrown",qosMetric:true},VP_PREPARED:{type:"tprep",desc:"Player prepared",color:"hotpink",qosMetric:true},YVAP_ADSTARTED:{type:"tyvapads",desc:"Ad Started",color:"saddlebrown",qosMetric:true},YVAP_NOAD:{type:"tyvapadn",desc:"Ad None",color:"saddlebrown",qosMetric:true},YVAP_ERROR:{type:"tyvape",desc:"Ad Error",color:"saddlebrown",qosMetric:true},SAPI_LOADPLAYLIST:{type:"tsapilp",desc:"SAPI Get for playlists",color:"darkcyan",qosMetric:true},SAPI_LOADRELATED:{type:"tsapilr",desc:"SAPI Get for related videos",color:"darkcyan",qosMetric:true},YQL_LOAD_CC:{type:"tyqlcc",desc:"SAPI call to load closed captions",color:"darkcyan",qosMetric:true},VP_CLICK_TO_START:{type:"ttsapf",desc:"Player click to playback start",color:"hotpink",qosMetric:true},VP_MEDIA_CHANGE:{type:"tvpmc",desc:"Player media change to Playback Start",color:"hotpink",qosMetric:true},VP_INIT_TO_START:{type:"ttsapt",desc:"VideoPlayer init to Playback Start",color:"red",qosMetric:true},VP_INIT_TO_STARTSCREEN:{type:"titssc",desc:"VideoPlayer init to StartScreen Rendered",color:"red",qosMetric:true},AD_PLUGIN_QOS_METRIC:{type:"qaplc",desc:"Ad Plugin QOS metric",color:"saddlebrown",qosMetric:false},STREAM_REQUEST_TO_RENDER:{type:"treqtr",desc:"Stream Latency (From request to render)",color:"purple",qosMetric:true},STREAM_LOADED:{type:"tstreaml",desc:"Media Stream Loaded",color:"white",qosMetric:true},STREAM_PLAY_TO_RENDER:{type:"tsltps",desc:"Media playback start to video render",color:"white",qosMetric:true}};f.namespace("VideoPlatform").QOS=K;var aj=K.Events;function N(){N.superclass.constructor.apply(this,arguments);}N.SERVICES={ULT:"ult",YWA:"ywa",COMSCORE:"cs",QOS:"qos"};N.NAME="MetricsModule";N.NS="metricsModule";N.ATTRS={model:{value:null},controller:{value:null},view:{value:null},service:{value:null},eventMap:{value:{}},allowedEvents:{value:{"PAGE_VIEW":"PAGE_VIEW","PAGE_UNLOAD":"PAGE_UNLOAD","PLAYER_LOADED":"PLAYER_LOADED","VIDEO_LOADED":"VIDEO_LOADED","PLAYBACK_REQUEST":"PLAYBACK_REQUEST","PLAYBACK_START":"PLAYBACK_START","PLAYBACK_PAUSE":"PLAYBACK_PAUSE","PLAYBACK_RESUME":"PLAYBACK_RESUME","PLAYBACK_COMPLETE":"PLAYBACK_COMPLETE","PLAYBACK_PROGRESS":"PLAYBACK_PROGRESS","PLAYBACK_SEEK":"PLAYBACK_SEEK","PLAYER_FULLSCREEN":"PLAYER_FULLSCREEN","PLAYER_ERR":"PLAYER_ERR","AD_START":"AD_START","CLICK_PLAY":"CLICK_PLAY","CLICK_PAUSE":"CLICK_PAUSE","CLICK_INFO":"CLICK_INFO","CLICK_FULLSCREEN":"CLICK_FULLSCREEN","CLICK_VOL_BTN":"CLICK_VOL_BTN","CLICK_VOL_SLIDER":"CLICK_VOL_SLIDER","CLICK_SEEKBAR":"CLICK_SEEKBAR","CLICK_THUMB":"CLICK_THUMB","CLICK_LINK":"CLICK_LINK","CLICK_EMBED":"CLICK_EMBED","CLICK_SHARE":"CLICK_SHARE","UI_INTERACT":"UI_INTERACT","YSWF_SWF_ONLY_INIT_TIME":"YSWF_SWF_ONLY_INIT_TIME","YSWF_READY":"YSWF_READY","YVAP_LOADED":"YVAP_LOADED","YVAP_READY":"YVAP_READY","YVAP_ADSTARTED":"YVAP_ADSTARTED","YVAP_NOAD":"YVAP_NOAD","YVAP_ERROR":"YVAP_ERROR","VP_CLICK_TO_START":"VP_CLICK_TO_START","VP_MEDIA_CHANGE":"VP_MEDIA_CHANGE","VP_INIT_TO_START":"VP_INIT_TO_START","VP_INIT_TO_STARTSCREEN":"VP_INIT_TO_STARTSCREEN","AD_PLUGIN_METRIC":"AD_PLUGIN_METRIC","AD_PLUGIN_QOS_METRIC":"AD_PLUGIN_QOS_METRIC","SAPI_LOADCLIPS":"SAPI_LOADCLIPS","SAPI_LOADPLAYLIST":"SAPI_LOADPLAYLIST","SAPI_LOADRELATED":"SAPI_LOADRELATED","YQL_LOAD_CC":"YQL_LOAD_CC"}},YWAProjectId:{value:"115488662",validator:f.Lang.isString},playerBeacons:{value:[],validator:f.Lang.isArray},isAd:{value:false,validator:f.Lang.isBoolean}};
f.extend(N,f.Base,{initializer:function(Y){this._tokenMap={"FLASH_VERSION":"","COUNTRY_LANGUAGE_CODE":"","FULL_USER_AGENT":"","VIDEO_CLIP_ID":"","VIDEO_LENGTH":"","VIDEO_TITLE":"","VIDEO_WATCHED_PERCT":"","PAGE_SPACE_ID":"","REPORTING_DOMAIN":"","YVAP_ACCOUNT_ID":"","PLAYER_ERR_CODE":"","PLAYER_ERR_TYPE":"","PLAYER_ERR_MSG":"","YLT":"","PLAY_GUID":"","PLYR_SESS_GUID":"","CCM_PLAYLIST_ID":"","SECTION_NAME":"","SECTION_LINK_NAME":"","SECTION_LINK_POS":"","SECTION_TITLE":"","SECTION_LINK":"","COMSCORE_C4":"","COMSCORE_C5":"","COMSCORE_C6":"","PLAYER_INT32_GUID":"","MASTERPLAYER_INT32_GUID":"","PAGE_TITLE":"","PAGE_URL":"","PAGE_REFERRER":"","PLAYER_LOCATION":"","SITE":"","REGION":"","JURISDICTION":"","IS_LIVE":"","VIDEO_PLAYBACK_POS":"","VIDEO_SEQ_NUMBER":"","VIDEO_SEQ_START":"","CONTRACTING_PROPERTY":"","LICENSOR_NAME":"","LICENSOR_ID":"","LICENSE_NAME":"","LICENSE_ID":"","YWA_DPID":"","RANDOM_VALUE":"","YWA_PROJECT_ID":"","PLAYER_HOSTING_ENV":"","PLAYER_BUCKET":"","PLAYER_VERSION":"","PLAYER_WIDTH":"","PLAYER_HEIGHT":"","TIME_INITIALIZING":"","TIME_RENDERING":"","TIME_LOADING":"","TIME_PREPARING":"","SAPI_RESPONSE_DELAY":"","PLAYBACK_START_DELAY":"","STATE":"","TIME_STATE":"","EVENT_BEGIN":"","EVENT_END":"","AUTOPLAY":"","SHOW_NAME":"","MEDIA_META_TAGS":"","EXPERIENCE_TYPE":"","EXPERIENCE_NAME":"","EXPERIENCE_BUCKET":"","BITRATE":"","DOWNLOAD_SPEED":"","VIDEO_STREAM":"","RENDERER_TYPE":"","CUSTOM_PARAMS":"","YVAP_LOADED":"","YVAP_READY":"","YVAP_ADSTARTED":"","YVAP_NOAD":"","YVAP_ERROR":"","VP_CLICK_TO_START":"","VP_MEDIA_CHANGE":"","VP_INIT_TO_START":"","VP_INIT_TO_STARTSCREEN":"","UI_INTERACT_PAYLOAD":"","SAPI_LOADCLIPS":"","SAPI_LOADPLAYLIST":"","SAPI_LOADRELATED":"","YQL_LOAD_CC":"","CONTINUOUS_PLAY":"","CONTINUOUS_PLAY_COUNT":"","CMS_STATUS_CODE":"","VIDEO_TYPE":"","AUTOCONTINUE":"","VIDEO_PREFETCH":"","RETRY_COUNT":"","HD_AVAILABLE":"","PROGRESS":"","TIME_WAITING":"","BANDWIDTH":"","PAGE_SID":"","SYNDICATION":""};this.Constants={"PROG_BEACON_LENGTH":10};this._lastValidProgVal=0;this.set("model",Y.model);this.set("controller",Y.controller);this.set("view",Y.view);this.set("service",new f.VideoPlatform.BeaconService());this._seqNum=0;this._seqStart=0;this._progressHandler=null;this._seekStart=0;this._startedFired=false;this._startTime=null;this._startTimer();this._ttInitialized=0;this._ttLoading=0;this._ttLoadingEnd=0;this._ttLoaded=0;this._ttPreparing=0;this._ttPreparingEnd=0;this._ttPrepared=0;this._ttStarted=0;this._ttPlaying=0;this._timeWaiting=0;this._continuousPlayCount=0;this._defaultConfigParam="na";this._htmlBitrate=null;this.setup();},parseHostingConfig:function(){var Y=f.VideoPlatform.playerBeaconList.init();if(Y){this.set("playerBeacons",Y);}else{}},_deferBeacons:function(al){var Y=this.get("model"),ap=YVAPEvents,am=al;function ao(){Y.after("playerStateChange",an,this);}function aq(ar){switch(ar.newVal){case ap.AD_START:am.run();break;case ap.AD_NONE:case ap.AD_ERROR:ao();break;}}function an(ar){switch(ar.newVal){case ab.STARTED:case ab.ERROR:am.run();Y.detach("playerStateChange",an,this);break;}}am.pause();if(Y.get("YVAPRequired")===true){Y.once("yvapStateChange",aq,this);}else{ao();}},setup:function(){this.parseHostingConfig();this.parse(this.get("playerBeacons"));if(this.get("model")){var Y=this.get("model"),al=this;this.setupHandlers();Y.after("isInitializedChange",function(an){var am=an.newVal;if(am){al._evalStaticTokens();if(!f.Object.getValue(window,["YAHOO","VideoPlatform","Metrics","PageView"])){al._tokenMap.MASTERPLAYER_INT32_GUID=al._tokenMap.PLAYER_INT32_GUID;f.Object.setValue(window,["YAHOO","VideoPlatform","Metrics"],{"PageView":null,"MasterPlayer":null});f.Object.setValue(window,["YAHOO","VideoPlatform","Metrics","MasterPlayer"],al._tokenMap.PLAYER_INT32_GUID);f.Object.setValue(window,["YAHOO","VideoPlatform","Metrics","PageView"],true);al.process(al.get("allowedEvents").PAGE_VIEW);}else{al._tokenMap.MASTERPLAYER_INT32_GUID=f.Object.getValue(window,["YAHOO","VideoPlatform","Metrics","MasterPlayer"]);}al.process(al.get("allowedEvents").PLAYER_LOADED);}},this);Y.after("beaconsChange",function(am){al.remove(am.prevVal);al.parse(am.newVal);},this);Y.after("currentMediaChange",function(an){var am,ao;if(f.Lang.isValue(an.prevVal)){am=an.prevVal.get("metrics.beacons");al.remove(am);}if(f.Lang.isValue(an.newVal)){ao=an.newVal.get("metrics.beacons");al.parse(ao);}this._startedFired=false;if(this._progressHandler){this._progressHandler.detach();this._progressHandler=null;}},this);Y.before("playerStateChange",function(am){switch(am.newVal){case ab.INITIALIZED:this._ttInitialized=this._getElapsedTime();break;case ab.LOADING:this._ttLoading=this._getElapsedTime();break;case ab.LOADED:this._ttLoaded=this._getElapsedTime();break;case ab.PREPARING:this._ttPreparing=this._getElapsedTime();break;case ab.PREPARED:this._ttPrepared=this._getElapsedTime();break;case ab.STARTED:this._ttStarted=this._getElapsedTime();break;case ab.POSTSTARTED:this._ttPoststarted=this._getElapsedTime();break;}switch(am.prevVal){case ab.LOADING:this._ttLoadingEnd=this._getElapsedTime();break;case ab.PREPARING:this._ttPreparingEnd=this._getElapsedTime();break;}},this);}},parse:function(al){var ap=this.get("eventMap"),an=this.get("allowedEvents"),Y=this.get("model"),ao=Y.get("hostingData.bucket"),am=this;if(f.Lang.isArray(al)&&al.length>0){f.each(al,function(aq){if(!am._validateBeacon(aq)){return;}if(f.Lang.isNumber(aq.samplePerct)&&(!f.Lang.isNumber(ao)||aq.samplePerct<ao)){return;}f.each(aq.events,function(av){var at=av.name,au=ap[at],ax=aq.action||"",aw=aq.data||"",ay=aq.target||"",ar={url:aq.urlTemplate,target:ay};if(at in ap){if(ay===N.SERVICES.ULT&&ax==="add"&&aw){f.each(au,function(az){if(az.target===N.SERVICES.ULT){az.url=az.url+"&"+aw;}});}else{ap[at].push(ar);}}else{if(at in an){ap[at]=new Array(ar);}else{}}});});}},_validateBeacon:function(Y){if(!f.Lang.isObject(Y,true)){return false;}if(f.Lang.isValue(Y.urlTemplate)&&f.VideoPlatform.Utils.validateUrl(Y.urlTemplate)){return true;}if(f.Lang.isValue(Y.action)&&Y.action.length>0&&f.Lang.isValue(Y.data)&&Y.data.length>0){return true;
}return false;},remove:function(Y){var al=this.get("eventMap");if(f.Lang.isArray(Y)&&Y.length>0){f.each(Y,function(am){if(!f.Lang.isValue(am.urlTemplate)){return;}f.each(am.events,function(ao){var an=ao.name,ap=al[an];if(f.Lang.isArray(ap)){ap.splice(f.Array.indexOf(ap,am.urlTemplate),1);}});});}},setupHandlers:function(){var ao=this.get("allowedEvents"),al=this._tokenMap,Y=this.get("model"),ap={},aq,an=Y.get("profileData"),am=this.get("view");Y.after("isPlayingChange",function(ar){if(ar.newVal){if(this._startedFired){this.process(ao.PLAYBACK_RESUME);}else{this._ttPlaying=this._getElapsedTime();this._seqNum=1;this._seqStart=Y.get("playbackPosition");if(this._progressHandler){this._progressHandler.detach();this._progressHandler=null;}this._progressHandler=this._startProgressPolling(this._seqStart,Y.get("currentMedia").get("duration"));if(Y.get("continuousPlay")){++this._continuousPlayCount;}this._htmlBitrate=am.videoRenderer.get("streamBitrate")||null;this.process(ao.PLAYBACK_START);this._startedFired=true;}}},this);ap[ab.PREPARING]=ao.PLAYBACK_REQUEST;ap[ab.LOADED]=ao.VIDEO_LOADED;ap[ab.PAUSED]=ao.PLAYBACK_PAUSE;ap[ab.PLAYBACKCOMPLETE]=ao.PLAYBACK_COMPLETE;Y.on("playerStateChange",function(ar){if(ar.newVal in ap){if(ar.newVal===ab.PLAYBACKCOMPLETE){this._startedFired=false;if(this._progressHandler){this._progressHandler.detach();this._progressHandler=null;}}this.process(ap[ar.newVal]);}},this);Y.after("isWaitingChange",function(ar){if(ar.newVal===false){this._timeWaiting+=this._getElapsedTime()-prevWaitTime;}prevWaitTime=(ar.newVal===true)?this._getElapsedTime():null;},this);Y.after("isSeekingChange",function(ar){if(ar.newVal===true&&ar.prevVal===false){if(this._progressHandler){this._progressHandler.detach();this._progressHandler=null;}this._seekStart=Y.get("playbackPosition");}else{if(ar.newVal===false&&ar.prevVal===true){if(this._progressHandler){this._progressHandler.detach();this._progressHandler=null;}this._seqNum++;this._seqStart=this._seekStart;this.process(ao.PLAYBACK_SEEK);this._seqStart=Y.get("playbackPosition");this._progressHandler=this._startProgressPolling(Y.get("playbackPosition"),Y.get("currentMedia").get("duration"));}}},this);aq={"controlsPlayButton":ao.CLICK_PLAY,"controlsPauseButton":ao.CLICK_PAUSE,"controlsInfoButton":ao.CLICK_INFO,"controlsFullscreenButton":ao.CLICK_FULLSCREEN,"controlsVolumeButton":ao.CLICK_VOL_BTN,"controlsVolumeSlider":ao.CLICK_VOL_SLIDER,"controlsSeekBar":ao.CLICK_SEEKBAR,"startscreenPlay":ao.CLICK_PLAY,"infoscreenThumb":ao.CLICK_THUMB,"infoscreenLink":ao.CLICK_LINK,"infoscreenEmbed":ao.CLICK_EMBED,"infoscreenFacebook":ao.CLICK_SHARE,"endscreenThumb":ao.CLICK_THUMB,"endscreenLink":ao.CLICK_LINK,"endscreenEmbed":ao.CLICK_EMBED,"endscreenFacebook":ao.CLICK_SHARE};Y.after("uiInteract",function(ar){if(ar.source in aq){if(aq[ar.source]===ao.CLICK_FULLSCREEN&&!Y.get("fullscreen")){return;}this.process(aq[ar.source],ar);}},this);Y.after("uiInteract",function(ar){this.process(ao.UI_INTERACT,ar);},this);Y.after("uiInteract",function(ar){if(ar.source.indexOf("pc-vid")>-1||ar.source.indexOf("es-vid")>-1||ar.source==="es-rpl"){this._continuousPlayCount=0;this._startedFired=false;}},this);Y.after("fullscreenChange",function(ar){if(ar.newVal===true&&ar.prevVal===false){this.process(ao.PLAYER_FULLSCREEN);}},this);Y.after("errorChange",function(at){var ar=at.newVal;if(ar){al.PLAYER_ERR_TYPE=ar.type;al.PLAYER_ERR_CODE=ar.code;al.PLAYER_ERR_MSG=I.fixedEncodeURIComponent(ar.message);this.process(ao.PLAYER_ERR);}},this);Y.after("warningChange",function(av){if(av.newVal){var ar,au,at,aw=av.newVal;if(aw){ar=aw.type;au=aw.code||"0";at=aw.message;al.PLAYER_ERR_TYPE=ar;al.PLAYER_ERR_CODE=au;al.PLAYER_ERR_MSG=I.fixedEncodeURIComponent(at);this.process(ao.PLAYER_ERR);}}},this);Y.after("yvapStateChange",function(ax){var at,aw,av,au,ay={},ar=this._defaultConfigParam;this._handleAdFlag(ax.newVal);if(ax.newVal==="adError"){at="300";aw="0";av=Y.get("yvapData");av=f.Lang.isObject(av)?av:{};ay={};ay[o.TIMEOUT_YUILOAD]="406";ay[o.TIMEOUT_CREATE]="407";ay[o.TIMEOUT_PRE]="408";ay[o.TIMEOUT_POST]="409";ay[o.INIT]="100";ay[o.CREATE]="101";ay[o.SCRIPTING]="501";if(f.Lang.isValue(av.message)&&av.message in ay){aw=ay[av.message];au=f.Lang.isValue(av.cause)?av.cause:ar;}else{if(f.Lang.isValue(av.type)&&av.type==="playerPluginLoadError"){aw="404";au=f.Lang.isValue(av.message)?av.message:ar;}}al.PLAYER_ERR_TYPE=at;al.PLAYER_ERR_CODE=aw;al.PLAYER_ERR_MSG=I.fixedEncodeURIComponent(au);this.process(ao.PLAYER_ERR);}else{if(ax.newVal==="loadError"){at="300";av=Y.get("yvapData");if(f.Lang.isObject(av)&&f.Lang.isValue(av.cause)){if(av.cause==="jsLoadingTimeout"){aw="401";}else{aw="400";}al.PLAYER_ERR_TYPE=at;al.PLAYER_ERR_CODE=aw;al.PLAYER_ERR_MSG=ar;this.process(ao.PLAYER_ERR);}}else{if(ax.newVal==="adStart"){this.process(ao.AD_START);}}}},this);f.Event.attach("unload",function(){this.process(ao.PAGE_UNLOAD);this.get("service").stop();},window,this);if(an){an.on("itemAdded",function(ar){if(ar.item.type!==aj.VP_INIT_TO_START.type){this.handleQOSProfiling(ar.item);}},this);}Y.after("adPluginMetricChange",this._handleAdPluginMetric,this);Y.after("adPluginQosMetricChange",this._handleAdPluginQosMetric,this);},_getAdPluginData:function(am){var al="",Y=am.data;f.each(Y,function(ao,an){al+="&"+an+"="+I.fixedEncodeURIComponent(ao);});return al;},_handleAdPluginMetric:function(Y){this._tokenMap.CUSTOM_PARAMS=this._getAdPluginData(Y.newVal);this.process(this.get("allowedEvents").AD_PLUGIN_METRIC);},_handleAdPluginQosMetric:function(Y){this._tokenMap.CUSTOM_PARAMS=this._getAdPluginData(Y.newVal);this.process(this.get("allowedEvents").AD_PLUGIN_QOS_METRIC);},handleQOSProfiling:function(al){var am=aj,Y;switch(al.type){case am.YVAP_LOADED.type:Y="YVAP_LOADED";break;case am.YVAP_READY.type:Y="YVAP_READY";break;case am.YVAP_ADSTARTED.type:Y="YVAP_ADSTARTED";break;case am.YVAP_NOAD.type:Y="YVAP_NOAD";break;case am.YVAP_ERROR.type:Y="YVAP_ERROR";break;case am.VP_CLICK_TO_START.type:Y="VP_CLICK_TO_START";break;case am.VP_MEDIA_CHANGE.type:Y="VP_MEDIA_CHANGE";
break;case am.VP_INIT_TO_START.type:Y="VP_INIT_TO_START";break;case am.VP_INIT_TO_STARTSCREEN.type:Y="VP_INIT_TO_STARTSCREEN";break;case am.YQL_LOAD_CC.type:Y="YQL_LOAD_CC";break;}if(Y){this._processQosBeacons(Y,al);}},fireSAPIBeacons:function(ap,ao){var an=aj,am,al,Y=this;if(!ap){return;}switch(ap.type){case an.SAPI_LOADCLIPS.type:am="SAPI_LOADCLIPS";break;case an.SAPI_LOADPLAYLIST.type:am="SAPI_LOADPLAYLIST";break;case an.SAPI_LOADRELATED.type:am="SAPI_LOADRELATED";break;}if(!f.Lang.isValue(ao)||!am){return;}for(al in ao){if(ao.hasOwnProperty(al)){Y._tokenMap[al]=ao[al];}}this._processQosBeacons(am,ap);},_processQosBeacons:function(Y,al){this._tokenMap.QOS_TIMER_DIFF=al.timeDiff;this._tokenMap[Y]=al.timeDiff;if(al.queryStringExtn){this._tokenMap.QOS_TIME_BREAKUP=al.queryStringExtn;}this.process(Y);},process:function(an,ap){var al=this.get("eventMap")[an],Y=this._tokenMap,am=this.get("service");if(typeof al==="undefined"){return;}try{this._evalDynTokens(ap,an);}catch(ao){}f.each(al,function(aq){am.set("beaconTemplate",aq.url);am.create(Y);am.send();});},_evalStaticTokens:function(){var an=this.get("model"),ay=this._tokenMap,ap=f.Cookie.get("ywadp"+this.get("YWAProjectId")),ao,av=this._getTopDocument(),at=this._defaultConfigParam,ar=I.fixedEncodeURIComponent,Y=an.START_TIME,au=typeof window.performance==="object"&&window.performance.timing||{},aq=au.fetchStart||null,am=au.responseStart||null,al=au.responseEnd||null,ax;ay.FLASH_VERSION=(an.get("rendererType")==="flash")?ar(this._getFlashVersionString()):at;ay.COUNTRY_LANGUAGE_CODE=ar(String(an.get("lang")).toLowerCase());ay.FULL_USER_AGENT=ar(f.UA.userAgent);ay.PAGE_SPACE_ID=ar(an.get("pageSpaceId"));ay.YVAP_ACCOUNT_ID=ar(an.get("YVAP.accountId")||at);ay.PLYR_SESS_GUID=ar(an.get("guid"));ay.COMSCORE_C4=ar(an.get("comscoreC4")||at);ay.PLAYER_INT32_GUID=Math.floor(Math.random()*4294967295);ay.PAGE_TITLE=ar(av?av.title:"unavailable");ay.PAGE_REFERRER=ar(this._trimLongUrls(av?av.referrer:"unavailable"));ay.SITE=ar(an.get("site")?an.get("site").toLowerCase():at);ay.REGION=ar(an.get("region")?an.get("region").toLowerCase():at);ay.JURISDICTION=ar(an.get("jurisdiction")||at);ay.BANDWIDTH=f.Cookie.getSub("BA","ba");ax=an.get("pageLatency");ax=typeof ax==="object"?ax:{};ay.PAGE_PLAYERJS_DL_START=ar(ax.pagePlayerJsDownloadStart||at);ay.PAGE_PLAYERJS_DL_TIME=ar(ax.pagePlayerJsDownloadTime||at);ay.PAGE_MEDIA_ITEM_PREFETCH_TIME=ar(ax.pageMediaItemPrefetchTime||at);ay.PAGE_LATENCY=au?ar((Y?(Y-aq):at)):at;ay.TIMING_DNS=au?ar(au.domainLookupEnd-au.domainLookupStart):at;ay.TIMING_CONNECT=au?ar(au.connectEnd-au.connectStart):at;ay.TIMING_TTFB=au?ar(am-au.requestStart):at;ay.TIMING_BASE_PAGE=au?ar(al-am):at;ay.TIMING_FRONTEND=au?ar(au.loadEventStart-al):at;ay.PLAYER_LOCATION=!this._isOnNetwork()?"3":(this._isIFrame()?"2":"1");if(!f.Lang.isValue(ap)){ap=""+Math.floor(Math.random()*4294967295);ao=new Date();ao.setTime(ao.getTime()+94608000000);f.Cookie.set("ywadp"+this.get("YWAProjectId"),ap,{expires:ao});}ay.YWA_DPID=""+ap;ay.YWA_PROJECT_ID=this.get("YWAProjectId");ay.PLAYER_HOSTING_ENV=an.get("hostingData.env")||at;ay.PLAYER_BUCKET=an.get("hostingData.bucket")||at;ay.PLAYER_VERSION=an.get("version")||at;ay.AUTOPLAY=an.get("autoplay")?"true":"false";ay.EXPERIENCE_TYPE=ar(String(an.get("expType")).toLowerCase());ay.EXPERIENCE_NAME=ar(String(an.get("expName")).toLowerCase());ay.EXPERIENCE_BUCKET=ar(an.get("expBucket")?an.get("expBucket").toLowerCase():at);ay.CONTINUOUS_PLAY=an.get("continuousPlay")?"1":"0";if(!ay.PAGE_SID){try{if(window.YAHOO&&window.YAHOO.i13n&&window.YAHOO.i13n.currentSID){ay.PAGE_SID=window.YAHOO.i13n.currentSID;}else{ay.PAGE_SID=at;}}catch(aw){ay.PAGE_SID=at;}}},_evalDynTokens:function(aI,aE){var ax=this.get("model"),am=this._tokenMap,aD=ax.get("playlist"),aB=ax.get("playlistPosition"),an=ax.get("playbackPosition"),ao=(ax.get("currentMedia")||aD.items().item((aB>=0)?aB:0)),aA=(ao?ao.get("duration"):null),au=(ao?ao.get("comscoreC5"):null),at=(ao?ao.get("comscoreC6"):null),Y=ax.get("continuousPlay"),aq,aG,aw,aF,al,az,ap,aC,av,aH=this._defaultConfigParam,ay=this._getTopDocument(),ar=I.fixedEncodeURIComponent;if(f.Lang.isNumber(aA)){aA=Math.floor(aA);}am.PAGE_URL=ar(this._trimLongUrls(ay?ay.URL:document.referrer));am.RANDOM_VALUE=Math.random();if(ax.get("rendererType")==="html"){am.RENDERER_TYPE="h";}else{am.RENDERER_TYPE="f";}am.TIME_INITIALIZING=this._ttInitialized;am.TIME_LOADING=this._ttLoadingEnd-this._ttLoading;am.TIME_RENDERING=ax.get("metrics.playerRenderLatency")||aH;am.TIME_PREPARING=this._ttPreparingEnd-this._ttPreparing;av=this._ttPlaying-this._ttStarted;am.PLAYBACK_START_DELAY=am.TIME_PREPARING+av;am.STATE=ax.get("playerState");if(f.Lang.isObject(ao)){if(aE!=="SAPI_LOADCLIPS"&&aE!=="SAPI_LOADPLAYLIST"&&aE!=="SAPI_LOADRELATED"){if(!f.Lang.isValue(ao.get("id"))&&f.Lang.isValue(ao.get("streamUrl"))){am.VIDEO_CLIP_ID=I.generateHashCode(ao.get("streamUrl"),"custom");}else{am.VIDEO_CLIP_ID=ar(ao.get("id")||aH);}am.VIDEO_TITLE=encodeURIComponent(ao.get("title")||aH);}else{am.VIDEO_CLIP_ID=aH;am.VIDEO_TITLE=aH;}am.VIDEO_LENGTH=f.Lang.isValue(aA)?aA:aH;am.VIDEO_PLAYBACK_POS=f.Lang.isValue(an)?an:"0";am.VIDEO_WATCHED_PERCT=(aA&&aA>0)?Math.floor(100*an/aA):"0";am.PLAY_GUID=encodeURIComponent(ao.get("metrics.pls")||aH);am.COMSCORE_C5=encodeURIComponent(f.Lang.isValue(au)?au:aH);am.COMSCORE_C6=encodeURIComponent(f.Lang.isValue(at)?at:aH);am.IS_LIVE=ao.get("isLive")?"1":"0";am.VIDEO_PREFETCH=ao.get("isPreFetched");am.AUTOCONTINUE=ao.get("autoContinue");am.CONTRACTING_PROPERTY=encodeURIComponent(ao.get("originatingProperty")||aH);am.LICENSOR_NAME=encodeURIComponent(ao.get("licensorName")||aH);am.LICENSOR_ID=encodeURIComponent(ao.get("licensorId")||aH);am.LICENSE_NAME=encodeURIComponent(ao.get("licenseName")||aH);am.LICENSE_ID=encodeURIComponent(ao.get("licenseId")||aH);am.EVENT_BEGIN=encodeURIComponent(ao.get("eventBeginTime")||aH);am.EVENT_END=encodeURIComponent(ao.get("eventEndTime")||aH);am.SHOW_NAME=encodeURIComponent(ao.get("showName")||aH);am.MEDIA_META_TAGS=encodeURIComponent(ao.get("metrics.metaTags")||aH);
am.BITRATE=ao.get("mediaInfo.currentStreamBitrate")||aH;am.DOWNLOAD_SPEED=ao.get("mediaInfo.currentKbps")||aH;am.VIDEO_STREAM=ao.get("mediaInfo.streamUrl")||aH;am.PLAYER_WIDTH=ar(ax.get("width")||aH);am.PLAYER_HEIGHT=ar(ax.get("height")||aH);am.CMS_STATUS_CODE=ar(ao.get("status.code")||aH);am.LIVE_INDICATOR=ao.get("isLive")?"_l":"";am.SYNDICATION=ar(ax.get("synd")||"");switch(aE){case"PLAYBACK_PROGRESS":am.PROGRESS=this.Constants.PROG_BEACON_LENGTH;am.TIME_WAITING=this._timeWaiting;this._lastValidProgVal=an;this._timeWaiting=0;break;case"PLAYBACK_COMPLETE":am.PROGRESS=f.Lang.isValue(aA)?(aA-this._lastValidProgVal)%this.Constants.PROG_BEACON_LENGTH:aH;am.TIME_WAITING=this._timeWaiting;this._timeWaiting=0;break;case"PLAYBACK_SEEK":am.PROGRESS=(f.Lang.isValue(aA)&&this._seqStart!==aA)?this._seqStart-this._lastValidProgVal:aH;this._lastValidProgVal=an;am.TIME_WAITING=this._timeWaiting;this._timeWaiting=0;break;default:am.PROGRESS=aH;}if(typeof(aC=ao.get("hdAvailable"))!=="undefined"){am.HD_AVAILABLE=aC().toString();}else{am.HD_AVAILABLE=aH;}ap=ao.get("isLive");if(this.get("isAd")){am.VIDEO_TYPE="ad";}else{if(ap){am.VIDEO_TYPE="live";}else{if(ao.get("streamUrl")){am.VIDEO_TYPE="stream";}else{am.VIDEO_TYPE=(typeof ap==="undefined")?aH:"clip";}}}if(am.BITRATE===aH){am.BITRATE=(this._htmlBitrate!==null)?this._htmlBitrate:aH;}}else{am.VIDEO_CLIP_ID=aH;am.VIDEO_LENGTH=aH;am.VIDEO_TITLE=aH;am.VIDEO_PLAYBACK_POS=aH;am.VIDEO_WATCHED_PERCT=aH;am.PLAY_GUID=aH;am.COMSCORE_C5=aH;am.COMSCORE_C6=aH;am.IS_LIVE=aH;am.CONTRACTING_PROPERTY=aH;am.LICENSOR_NAME=aH;am.LICENSOR_ID=aH;am.LICENSE_NAME=aH;am.LICENSE_ID=aH;am.EVENT_BEGIN=aH;am.EVENT_END=aH;am.SHOW_NAME=aH;am.BITRATE=aH;am.DOWNLOAD_SPEED=aH;am.VIDEO_STREAM=aH;am.VIDEO_TYPE=aH;am.VIDEO_PREFETCH=aH;am.AUTOCONTINUE=aH;am.HD_AVAILABLE=aH;am.PLAYER_WIDTH=aH;am.PLAYER_HEIGHT=aH;am.CMS_STATUS_CODE=aH;am.PROGRESS=aH;am.TIME_WAITING=aH;}am.VIDEO_SEQ_NUMBER=this._seqNum;am.VIDEO_SEQ_START=this._seqStart;am.CONTINUOUS_PLAY=(Y&&aD.items().size()>1)?"1":"0";if(Y){am.CONTINUOUS_PLAY_COUNT=this._continuousPlayCount;}if(aI){aq={"startscreen":"st","infoscreen":"inf","endscreen":"end","controls":"pb"};aG={"PlayButton":"pl","Play":"pl","PauseButton":"ps","InfoButton":"inf","SeekBar":"sk","VolumeSlider":"vol","FullscreenButton":"fs","Link":"lk","Embed":"emb","Facebook":"facebook"};az={"Facebook":"btn-sh-fb","Embed":"btn-sh-emb","Link":"btn-sh-emb-lnk","EmbedLink":"btn-sh-emb-emb"};aw=aI.source.match(/^([^A-Z\-]*)(?:\-?)(.*)/);aF=aq[aw[1]];al=aG[aw[2]];if(aw[2]==="VolumeButton"){al=ax.get("mute")?"mt":"un-mt";}else{if(aw[2]==="Thumb"){al=(aw[1]==="endscreen")?"rpl":"pl";}}am.SECTION_NAME=(aF)?aF:"pb";am.SECTION_LINK_NAME=(al)?al:aH;if(f.Lang.isUndefined(az[aw[2]])){am.SECTION_TITLE="ctrl";am.SECTION_LINK=aI.source;}else{am.SECTION_TITLE="sh";am.SECTION_LINK=az[aw[2]];}switch(aI.source){case"controlsCCButton":am.UI_INTERACT_PAYLOAD="cc-"+((aI.selected===true)?"1":"0");break;default:am.UI_INTERACT_PAYLOAD=am.SECTION_LINK;break;}}else{am.SECTION_NAME="pb";am.SECTION_LINK_NAME=aH;}am.CCM_PLAYLIST_ID=ar(aD.get("id")||aH);},_isVideoLive:function(){return this.get("model").get("currentMedia").get("isLive");},_startProgressPolling:function(Y,al){return this.get("model").after("playbackPositionChange",function(am){var an;this._seekStart=am.newVal;if((am.newVal>=al)&&!this._isVideoLive()){if(this._progressHandler){this._progressHandler.detach();this._progressHandler=null;}return;}an=am.newVal-Y;if(an>0&&((an%this.Constants.PROG_BEACON_LENGTH)===0)){this.process(this.get("allowedEvents").PLAYBACK_PROGRESS);}},this);},_startTimer:function(){this._startTime=new Date().getTime();},_getElapsedTime:function(){if(this._startTime){return new Date().getTime()-this._startTime;}else{return 0;}},_getTopDocument:function(){try{return window.top.document;}catch(Y){return null;}},_isIFrame:function(){try{if(window.top.location.href!==window.location.href){return true;}else{return false;}}catch(Y){return true;}},_isOnNetwork:function(){return I.isYahooDomain(I.getHostName());},_getFlashVersionString:function(){var am="",al=f.UA,Y;Y=I.getFlashVersion();switch(Y){case 0:am="";break;case 6:am="ShockwaveFlash 6.0";break;default:if(al.gecko||al.webkit||al.opera){am=Y;}else{am=Y.replace(/,/g,".");}}return am;},_trimLongUrls:function(Y){return Y.split("?")[0];},_handleAdFlag:function(al){var Y=(al==="adStart"||al==="adProgress")?true:false;this.set("isAd",Y);}});f.namespace("VideoPlatform").Metrics=N;function y(Y){y.superclass.constructor.apply(this,arguments);}y.NAME="PlayerBase";y.NS="playerBase";y.Events={PLAYBACK_READY:"playbackReady",PLAYBACK_PLAY:"playbackPlay",PLAYBACK_PLAYING:"playbackPlaying",PLAYBACK_PAUSED:"playbackPaused",PLAYBACK_PROGRESS:"playbackProgress",PLAYBACK_SEEK:"playbackSeek",PLAYBACK_SEEKED:"playbackSeeked",PLAYBACK_COMPLETE:"playbackComplete",PLAYBACK_ERROR:"playbackError",PLAYBACK_WAITING:"playbackWaiting",FULLSCREEN_ENTER:"fullscreenEnter",FULLSCREEN_EXIT:"fullscreenExit",MUTE_CHANGE:"muteChange",VOLUME_CHANGE:"volumeChange",DURATION_CHANGE:"durationChange",UI_INTERACT:"uiInteract",MEDIA_INFO_UPDATE:"mediaInfoUpdate",BITRATE_CHANGE:"bitrateChange",PLAYER_READYSTATE:"readyState",PLAYER_RESIZE:"resize",CLIENT_RESIZE:"clientResize"};var af=y.Events;y.ATTRS={playbackPlugin:{value:null},readyState:{value:""},videoContainer:{value:""}};y.Constants={READY_STATE:{HAVE_NOTHING:0}};f.extend(y,f.Base,{initializer:function(){},destructor:function(){},render:function(){},load:function(Y){},play:function(){},pause:function(){},seek:function(Y){},getDuration:function(){},setVolume:function(Y){},setMute:function(Y){},setFullscreen:function(Y){},joinUrl:function(){var al=function(am){return f.Lang.isString(am)&&am.length>0;},Y=function(am){return am.replace(/^\/*/,"").replace(/\/*$/,"");};return f.Array.map(f.Array.filter(f.Array(arguments),al),Y).join("/");},shouldLoopVideo:function(){var Y=this._model,al=Y.get("playlist").items();if(Y.get("loop")===false){return false;}if(!((Y.get("continuousPlay")===true)&&al.size()>1)){return true;
}return false;},updateControls:function(){},positionCaptions:function(Y){},computeAdClientSize:function(Y){return Y;},onMuteChange:function(Y){if(Y!==this._model.get("muted")){this.fire(af.MUTE_CHANGE,Y);}},onSeeking:function(){var Y=this._model.get("currentMedia");if(Y){if(Y.get("isRTX")!==true){this.fire(af.PLAYBACK_SEEK);}}else{this.fire(af.PLAYBACK_SEEK);}},onSeeked:function(){var Y=this._model.get("currentMedia");if(Y){if(Y.get("isRTX")!==true){this.fire(af.PLAYBACK_SEEKED);}}else{this.fire(af.PLAYBACK_SEEKED);}}});f.namespace("VideoPlatform").PlayerBase=y;function ag(){ag.superclass.constructor.apply(this,arguments);}ag.NAME="LegoCMS";ag.ATTRS={jsonpMethod:{value:f.jsonp},requestTimeout:{value:10},yqlStore:{value:"yahoo.media.video.streams"},env:{value:"prod"},yqlClipQuery:{value:"SELECT {columns} FROM {store} WHERE {idPredicate} AND {formatPredicate}"+" AND {protocolPredicate} AND {rendererTypePredicate} AND {playerGuidPredicate}"+" AND {yvapAcctIdPredicate} AND {playContextPredicate} AND {pageSpaceIdPredicate}"+" AND {offnetworkPredicate} AND {sitePredicate} AND {langPredicate} AND {regionPredicate}"+" AND {overridePredicate} AND {channelIdPredicate} AND {syndicationPredicate};"},yqlRelatedQuery:{value:"SELECT {columns} from yahoo.media.video.related({startPredicate},{countPredicate}) WHERE {idPredicate} "+"AND {playerGuidPredicate} AND {sitePredicate} AND {regionPredicate} AND {algoPredicate} "+"AND {langPredicate} AND {offnetworkPredicate} AND {widthPredicate} AND {heightPredicate};"},yqlPlaylistQuery:{value:"SELECT * from yahoo.media.video.playlist{countPredicate} "+"WHERE {idPredicate} AND {startVideoPredicate} AND {playIndexPredicate} AND {playerGuidPredicate} "+"AND {sitePredicate} AND {regionPredicate} AND {langPredicate} "+"AND {yvapAcctIdPredicate} AND {playContextPredicate} AND {pageSpaceIdPredicate} "+"AND {formatPredicate} AND {protocolPredicate} AND {offnetworkPredicate} AND {overridePredicate} "+"AND {widthPredicate} AND {heightPredicate} AND {channelIdPredicate} AND {syndicationPredicate};"},yqlMetaQuery:{value:"SELECT * from yahoo.media.video.abstract WHERE {idPredicate} "+"AND {sitePredicate} AND {langPredicate} AND {regionPredicate};"},yqlMultiClipsQuery:{value:"SELECT * from yql.query.multi WHERE {queriesPredicate}"},yqlCcTtmlQuery:{value:"SELECT * from xml WHERE {ttmlUrlPredicate}"},relatedCount:{value:20,validator:f.Lang.isNumber},relatedStart:{value:0,validator:f.Lang.isNumber},algoContent:{value:"mmsearch, core, ib, tags"},relatedVideosColumns:{value:["status, mediaObj.id, mediaObj.meta, mediaObj.status, mediaObj.license"]},playlistCount:{value:12,validator:f.Lang.isNumber},host:{value:"video.query.yahoo.com"},atlasHost:{value:"atlas.cdn.yimg.com"},urlTemplate:{value:"//{host}/v1/public/yql?q={query}&env={env}&format=json&callback={callback}"},formats:{value:[],validator:f.Lang.isArray},protocols:{value:[],validator:f.Lang.isArray},heights:{value:{"large":345,"medium":175}},widths:{value:{"large":634,"medium":233}}};ag.MIME_TYPE_MAP=(function(){return{"video/x-flv":I.formats.FLV,"video/mp4":I.formats.MP4,"application/vnd.apple.mpegurl":I.formats.M3U8};}());f.extend(ag,f.Base,{_model:null,_controller:null,log:function(al,Y){},initializer:function(am){var Y=(am||{}).model,al=(am||{}).controller,an=Y?Y.get("rendererType"):"flash";this._model=Y;this._controller=al;this._sapiRetry="true";this.updateRendererType(an);if(Y){Y.after("rendererTypeChange",function(ao){this.updateRendererType(ao.newVal);},this);Y.after("isPlayingChange",function(ap){var ao;if(ap.newVal){ao=Y.get("currentMedia");if(ao.get("streamUrlOwner")===this.name){ao.set("streams",undefined);}}},this);}},updateRendererType:function(al){var Y,am;if("html"===al){am=[I.protocols.HTTP];if(f.Lang.isNumber(f.UA.ios)){Y=[I.formats.M3U8,I.formats.MP4];}else{if(f.Lang.isNumber(f.UA.android)&&f.UA.android>0){Y=[I.formats.WEBM,I.formats.MP4];if(f.UA.chrome>0){Y.push(I.formats.M3U8);}else{Y.push("h264");am.push(I.protocols.RTSP);}}else{if((f.Lang.isNumber(f.UA.gecko)&&f.UA.gecko>0)||f.UA.opera>=10.6){Y=[I.formats.WEBM];}else{Y=[I.formats.MP4];}}}}else{Y=[I.formats.MP4,I.formats.FLV,I.formats.F4M];am=[I.protocols.RTMP,I.protocols.HTTP];}this.set("formats",Y);this.set("protocols",am);},loadClips:function(ay,aM){var au=f.Lang.sub,az=this,aC=az._model,aL=az.constructor.NAME,aA=az._controller,ao,an,aq,aN=az.get("jsonpMethod"),aw=az.get("requestTimeout")*1000,Y=aM.context||null,aJ=f.VideoPlatform.ErrorObject,aH=aJ.ERROR,av=aJ.LEVEL,ax=aA?aA.getProfiler():null,aD=aA?aA.getMetricsModule():null,ar,am,aB,aI,aG=0,aK=null;ao=az.getClipsQuery(["*"],az.clipIds(ay));ar=aH.CMS_TIMEOUT_LOADCLIPS_ALL;am=aH.CMS_RESPONSE_LOADCLIPS_ALL;aB=aH.CMS_TIMEOUT_LOADCLIPS_ALL_RETRY;aI=aH.CMS_REQUEST_LOADCLIPS_ALL_RETRY;an=au(az.get("urlTemplate"),{host:aC.get("SAPI_CONF").host||aC.get("CMS").host||az.get("host"),env:aC.get("CMS").env||az.get("env"),query:encodeURIComponent(ao)});function ap(aO){aM.failure.call(Y,aO);}function at(aO){var aQ=aO.error,aR={"RETRY_COUNT":aG},aP;if(ax){ax.setEndTime(aj.SAPI_LOADCLIPS.type,aK);aq=ax.getItem(aj.SAPI_LOADCLIPS.type,aK);if(aD){aD.fireSAPIBeacons(aq,aR);}}if(aQ){aP=aQ.status||am.code;ap(new aJ(am.type,aP,aL,"loadClips; "+aQ.description,av.CRITICAL));}else{aM.success.call(Y,az.parseStreamsResponse(aO));}}if(ax){aK=ax.add(aj.SAPI_LOADCLIPS);}function aF(aR){var aQ=(f.Lang.isArray(aR.errors))?aR.errors[0].error:aR.msg||aR.description||aR.statusText||"",aP=new aJ(aH.CMS_REQUEST.type,aH.CMS_REQUEST.code,aL,"loadClips-"+aQ,av.CRITICAL),aO=new aJ(aI.type,aI.code,aL,"LoadClips-1st attempt failure warning: "+aR.msg+";"+aR.description,av.WARNING);aE(aO,aP);}function aE(aP,aO){if(az._sapiRetry!=="true"||++aG!==1){ap(aO);return;}aA.warn(aP);aN(an,{on:{success:at,failure:aF,timeout:al},timeout:aw,context:az});}function al(aR){var aQ=(f.Lang.isArray(aR.errors))?aR.errors[0].error:aR.msg||aR.description||aR.statusText||"",aP=new aJ(ar.type,ar.code,aL,"loadClips-"+aQ,av.CRITICAL),aO=new aJ(aB.type,aB.code,aL,"LoadClips-1st attempt Timeout Warning: "+aR.msg+";"+aR.description,av.WARNING);
aE(aO,aP);}aN(an,{on:{success:at,failure:aF,timeout:al},timeout:aw,context:az});},loadPlaylist:function(aK,ao,aO,au,aN){var aw=f.Lang.sub,aA=this,aC=aA._model,at,aM=aA.constructor.NAME,aB=aA._controller,aq=aA.getPlaylistQuery(aK,ao,aO,au),ap=aw(aA.get("urlTemplate"),{host:aC.get("SAPI_CONF").host||aC.get("CMS").host||aA.get("host"),env:aC.get("CMS").env||aA.get("env"),query:encodeURIComponent(aq)}),aP=aA.get("jsonpMethod"),ay=aA.get("requestTimeout")*1000,al=aN.context||null,aL=f.VideoPlatform.ErrorObject,aI=aL.ERROR,ax=aL.LEVEL,aH=aI.CMS_TIMEOUT_LOADPLAYLIST,Y=aI.CMS_RESPONSE_LOADPLAYLIST,aJ=aI.CMS_TIMEOUT_LOADPLAYLIST_RETRY,an=aI.CMS_REQUEST_LOADPLAYLIST_RETRY,az=(aB)?aB.getProfiler():null,aD=aB?aB.getMetricsModule():null,aG=0;function ar(aQ){aN.failure.call(al,aQ);}function av(aQ){var aT=aQ,aV=aT.query||null,aS=aT.error||null,aU={"RETRY_COUNT":aG},aR;if(az){az.setEndTime(aj.SAPI_LOADPLAYLIST.type);at=az.getItem(aj.SAPI_LOADPLAYLIST.type);if(aD){aD.fireSAPIBeacons(at,aU);}}if(aS){aR=aS.status||Y.code;ar(new aL(Y.type,aR,aM,"loadPlaylist; "+aS.description,ax.CRITICAL));}else{if(aV&&aV.results){aN.success.call(al,this.parsePlaylistResponse(aT));}else{aR=Y.code;ar(new aL(Y.type,aR,aM,"loadPlaylist; null results",ax.CRITICAL));}}}function aE(aR,aQ){if(aA._sapiRetry!=="true"||++aG!==1){ar(aQ);return;}aB.warn(aR);aP(ap,{on:{success:av,failure:aF,timeout:am},timeout:ay,context:aA});}function aF(aT){var aS=(f.Lang.isArray(aT.errors))?aT.errors[0].error:aT.msg||aT.description||aT.statusText||"",aR=new aL(aI.CMS_REQUEST.type,aI.CMS_REQUEST.code,aM,"loadPlaylist; "+aS,ax.CRITICAL),aQ=new aL(an.type,an.code,aM,"LoadPlaylist-1st Attempt Failure Warning: "+aT.msg+";"+aT.description,ax.WARNING);aE(aQ,aR);}function am(aT){var aS=(f.Lang.isArray(aT.errors))?aT.errors[0].error:aT.msg||aT.description||aT.statusText||"",aR=new aL(aH.type,aH.code,aM,"loadPlaylist; "+aS,ax.CRITICAL),aQ=new aL(aJ.type,aJ.code,aM,"LoadPlaylist-1st attempt Timeout Warning: "+aT.msg+";"+aT.description,ax.WARNING);aE(aQ,aR);}if(az){az.add(aj.SAPI_LOADPLAYLIST);}aP(ap,{on:{success:av,failure:aF,timeout:am},timeout:ay,context:aA});},loadRelatedVideos:function(aF,aK){var ay=this,aA=ay._model,az=ay._controller,aq,aJ=ay.constructor.Name,ao=ay.getRelatedVideosQuery(aF.get("id")),an=f.Lang.sub(ay.get("urlTemplate"),{host:aA.get("SAPI_CONF").host||aA.get("CMS").host||ay.get("host"),env:aA.get("CMS").env||ay.get("env"),query:encodeURIComponent(ao)}),aM=ay.get("jsonpMethod"),av=ay.get("requestTimeout")*1000,Y=aK.context||null,aI=f.VideoPlatform.ErrorObject,aH=aI.ERROR,au=aI.LEVEL,am=null,aL=aH.CMS_TIMEOUT_LOADRELATED,aG=aH.CMS_RESPONSE_LOADRELATED,ax=aH.CMS_TIMEOUT_LOADRELATED_RETRY,at=aH.CMS_REQUEST_LOADRELATED_RETRY,aB=az?az.getMetricsModule():null,aE=0,aw=(az)?az.getProfiler():null;function ap(aN){aK.failure.call(Y,aN);}function ar(aN){var aQ=aN,aS=aQ.query||null,aP=aQ.error||null,aO,aR={"RETRY_COUNT":aE};if(aw){aw.setEndTime(aj.SAPI_LOADRELATED.type,am);aq=aw.getItem(aj.SAPI_LOADRELATED.type,am);if(aB){aB.fireSAPIBeacons(aq,aR);}}if(aP){aO=aP.status||aG.code;ap(new aI(aG.type,aO,aJ,"loadRelated; "+aP.description,au.CRITICAL));}else{if(aS&&aS.results){aK.success.call(Y,this.parseEndScreenContentResponse(aN));}else{aO=aG.code;ap(new aI(aG.type,aO,aJ,"loadRelated; null results",au.CRITICAL));}}}function aC(aO,aN){if(ay._sapiRetry!=="true"||++aE!==1){ap(aN);return;}az.warn(aO);aM(an,{on:{success:ar,failure:aD,timeout:al},timeout:av,context:ay});}function aD(aQ){var aP=(f.Lang.isArray(aQ.errors))?aQ.errors[0].error:aQ.msg||aQ.description||aQ.statusText||"",aO=new aI(aH.CMS_REQUEST.type,aH.CMS_REQUEST.code,aJ,"loadRelatedVideos; "+aP,au.CRITICAL),aN=new aI(at.type,at.code,aJ,"LoadRelated-1st Attempt failure warning: "+aQ.msg+";"+aQ.description,au.WARNING);aC(aN,aO);}function al(aQ){var aP=(f.Lang.isArray(aQ.errors))?aQ.errors[0].error:aQ.msg||aQ.description||aQ.statusText||"",aO=new aI(aL.type,aL.code,aJ,"loadRelatedVideos; "+aP,au.CRITICAL),aN=new aI(ax.type,ax.code,aJ,"LoadRelated-1st attempt Timeout warning: "+aQ.msg+";"+aQ.description,au.WARNING);aC(aN,aO);}if(aw){am=aw.add(aj.SAPI_LOADRELATED);}aM(an,{on:{success:ar,failure:aD,timeout:al},timeout:av,context:ay});},fetchClosedCaptionContent:function(au){var ap=this._model,aw=this.getCcTtmlUrlQuery(),an=aj.YQL_LOAD_CC,Y=f.Lang.sub(this.get("urlTemplate"),{host:ap.get("SAPI_CONF").host||ap.get("CMS").host||this.get("host"),env:ap.get("CMS").env||this.get("env"),query:encodeURIComponent(aw)}),ay=this.get("jsonpMethod"),ax=this.get("requestTimeout")*1000,am=au.context||null,al=new k({model:this._model}),az=f.VideoPlatform.ErrorObject,ar=az.ERROR,at=az.LEVEL,aB=(this._controller)?this._controller.getProfiler():null;function ao(aC){au.failure.call(am,aC);}function aA(aC){al.stop(an.type,an.desc);if(aB){aB.setEndTime(an.type);}al=null;var aG=aC,aH=aG.query||null,aF=aG.error||null,aD,aE=f.VideoPlatform.ErrorObject.ERROR.CMS_RESPONSE_CLOSED_CAPTION;if(aF){aD=aF.status||aE.code;ao(new az(aE.type,aD,this.constructor.NAME,"closedCaptions; "+aF.description,at.CRITICAL));}else{if(aH&&aH.results){au.success.call(am,this.parseClosedCaptionContentResponse(aG));}else{aD=aE.code;ao(new az(aE.type,aD,this.constructor.NAME,"closedCaptions; null results",at.CRITICAL));}}}function aq(aD){var aC=(f.Lang.isArray(aD.errors))?aD.errors[0].error:aD.msg||aD.description||aD.statusText||"";ao(new az(ar.CMS_REQUEST.type,ar.CMS_REQUEST.code,this.constructor.NAME,"loadClosedCaptionContent; "+aC,at.CRITICAL));}function av(aD){var aC=(f.Lang.isArray(aD.errors))?aD.errors[0].error:aD.msg||aD.description||aD.statusText||"";ao(new az(ar.CMS_TIMEOUT_CLOSED_CAPTION.type,ar.CMS_TIMEOUT_CLOSED_CAPTION.code,this.constructor.NAME,"loadClosedCaptionContent; "+aC,at.CRITICAL));}al.start();if(aB){aB.add(an);}ay(Y,{on:{success:aA,failure:aq,timeout:av},timeout:ax,context:this});},parseClosedCaptionContentResponse:function(al){var ap={},am=null,an=null,Y=null,aq=null;try{am=al.query.results;an=am.tt;Y=an.body.div.p;ap.entries={};aq=ap.entries;
aq.times=[];aq.text=[];f.each(Y,function(ar){aq.text.push(ar.content);aq.times.push({start:this._parseClosedCaptionTime(ar.begin),end:this._parseClosedCaptionTime(ar.end)});},this);}catch(ao){ap={entries:{}};}return ap;},_parseClosedCaptionTime:function(al){var aq=al.split(":"),ap=0,am,ao,Y,ar,an;if(aq.length===3){am=aq[0];ao=aq[1];Y=aq[2];}else{if(aq.length===2){am=0;ao=aq[0];Y=aq[1];}else{am=0;ao=0;Y=aq[0];}}Y=Y.split(/\s+/);ar=Y.splice(0,1)[0];ar=ar.split(/\.|,/);an=parseFloat(ar[1]);ar=ar[0];ap+=parseFloat(am)*3600;ap+=parseFloat(ao)*60;ap+=parseFloat(ar);if(an){ap+=an/1000;}return ap;},parseStreamsResponse:function(Y){var an,am;try{if(Y.query.results.results){am=this.mergeResults(Y);}else{am=this.arrayify(Y.query.results.mediaObj);}an=f.Array.map(am,this.parseMediaObj,this);}catch(al){an=false;}return an;},mergeResults:function(al){var an=[],am,Y,ao=[];al.query.results=al.query.results.results;Y=al.query.results;for(am=0;am<Y.length;am++){an=an.concat(Y[am].mediaObj);}al.query.results={mediaObj:an};ao=this.arrayify(al.query.results.mediaObj);return ao;},parsePlaylistResponse:function(al){var an,ao,Y;try{an=al.query.results.result;ao={start:an.start,count:an.count,total:an.total,mediaItems:f.Array.map(this.arrayify(an.mediaObj),this.parseMediaObj,this)};Y=an.status;if(Y){ao.status={code:Y.code,msg:Y.msg};}}catch(am){ao={start:0,count:0,total:0,mediaItems:[]};}return ao;},parseEndScreenContentResponse:function(al){var am,an,Y;try{am=al.query.results.result;an={mediaItems:f.Array.map(this.arrayify(am.mediaObj),this.parseMediaObj,this)};}catch(ao){an={start:0,count:0,total:0,mediaItems:[]};}if(am){Y=am.status;if(typeof Y!==undefined){an.status={code:Y.code,msg:Y.msg};}}return an;},parseMediaObj:function(ao){var an={},am,Y,al,ap;an.id=ao.id;am=ao.status;if(am){an.status={code:am.code,msg:am.msg};}am=ao.meta;if(am){an.embeddable=am.embed_rights;an.title=am.title;an.description=am.description;an.clipDuration=I.getDuration(am.duration);an.shareUrl=am.url;an.images={};if(am.thumbnail){an.images.thumbnail=am.thumbnail;}an.provider={};if(am.provider){an.provider.name=am.provider.name;}an.eventBeginTime=am.event_start;an.eventEndTime=am.event_stop;an.showName=am.show_name;}am=ao.streams;if(am){an.streams=f.Array.map(am,this.parseStreamNode,this);an.isLive=f.Array.some(am,function(aq){return aq.live===true;});an.duration=an.streams[0]&&f.Lang.isValue(an.streams[0].duration)?an.streams[0].duration:an.duration;an.streamUrlOwner=this.name;}am=ao.license;if(am){an.licensorName=am.account_name;an.licensorId=am.account_id;an.licenseName=am.title;an.licenseId=am.salesforce_id;an.originatingProperty=am.originating_property;am=ao.license["1U1S"];if(am){an["1u1sInterval"]=am.interval;an["1u1sUrl"]=am.url;}}am=ao.metrics;if(am){an.metrics=am;if(am.pspid){an.spaceId=am.pspid;}Y=am.ywa||[];if(Y&&Y.length>0){al=Y[0].split(",");if(al.length>0){Y.shift();f.each(al,function(aq){if(f.Array.indexOf(Y,aq)<0){Y.push(aq);}},this);}}an.metrics.metaTags=Y;delete an.metrics.ywa;ap={type:f.VideoPlatform.ErrorObject.ERROR.CMS_METRICS_VALIDATION.type,code:f.VideoPlatform.ErrorObject.ERROR.CMS_METRICS_VALIDATION.code};if(f.Lang.isUndefined(am.comscore_cm5)){ap.msg="comscore_cm5 is undefined in cms response";this._model.set("warning",ap);}else{an.comscoreC5=am.comscore_cm5;}if(f.Lang.isUndefined(am.comscore6)){ap.msg="comscore6 is undefined in cms response";this._model.set("warning",ap);}else{an.comscoreC6=am.comscore6;}}am=ao.yvap;if(am){an.adData=am;}am=ao.visualseek;if(am){an.visualseek=this._parseVisualSeekNode(am);}am=ao.closedcaptions;if(am){an.CC=am;}return an;},parseStreamNode:function(Y){return{format:this.typeToFormat(Y.mime_type),width:Y.width,height:Y.height,bitrate:Y.bitrate,duration:Y.duration,host:Y.host,path:Y.path};},_parseVisualSeekNode:function(Y){return{width:Y.width,height:Y.height,frequency:Y.frequency,images:f.Array.map(this.arrayify(Y.images),this._parseVisualSeekImagesNode,this)};},_parseVisualSeekImagesNode:function(Y){return{url:Y.url,count:Y.count,startIndex:Y.start_index};},typeToFormat:function(Y){var al=ag.MIME_TYPE_MAP;return al[Y]||"";},arrayify:function(Y){return f.Lang.isArray(Y)?Y:[Y];},getClipsQuery:function(am,ao){var al=this._model,Y=",",an=al.get("YVAP");return f.Lang.sub(this.get("yqlClipQuery"),{store:this.get("yqlStore"),columns:am.join(","),idPredicate:this.remoteFilter("id",ao),playerGuidPredicate:this.localFilter("plrs",al.get("guid")),formatPredicate:this.localFilter("format",this.get("formats").join(Y)),rendererTypePredicate:this.localFilter("rt",al.get("rendererType")),protocolPredicate:this.localFilter("protocol",this.get("protocols").join(Y)),offnetworkPredicate:this.localFilter("offnetwork",al.get("isOffNetwork")),sitePredicate:this.localFilter("site",al.get("site")),langPredicate:this.localFilter("lang",al.get("lang")),regionPredicate:this.localFilter("region",al.get("region")),yvapAcctIdPredicate:this.localFilter("acctid",an.get("accountId")),playContextPredicate:this._shouldSuppressAdContext()?'plidl=""':this.localFilter("plidl",an.get("playContext")),pageSpaceIdPredicate:this._shouldSuppressAdContext()?'pspid=""':this.localFilter("pspid",al.get("pageSpaceId")),overridePredicate:this.localFilter("override",al.get("lms")),channelIdPredicate:this.localFilter("plist",al.get("playlist").get("id")),syndicationPredicate:this.localFilter("synd",al.get("synd"))});},_shouldSuppressAdContext:function(){var Y=this._model;if((Y.get("CMS").suppressAdContext)||(Y.get("emptySpaceIdContextToSapi"))){return true;}return false;},getPlaylistQuery:function(al,am,an,at){var ao=this._model,au=",",ar=ao.get("startVideo")||"",ap=ao.get("YVAP"),aw=ao.get("autoplay")?"medium":"large",Y=ao.get("width")||this.get("widths")[aw],av=ao.get("height")||this.get("heights")[aw],aq=1;if(f.Lang.isNumber(at)){aq=at;}else{if(ao.get("carousel")){aq=this.get("playlistCount");}}return f.Lang.sub(this.get("yqlPlaylistQuery"),{countPredicate:"("+am+","+aq+")",idPredicate:this.localFilter("id",al),startVideoPredicate:this.localFilter("startvideo",ar),playIndexPredicate:this.localFilter("pidx",an),playerGuidPredicate:this.localFilter("plrs",ao.get("guid")),sitePredicate:this.localFilter("site",ao.get("site")),regionPredicate:this.localFilter("region",ao.get("region")),langPredicate:this.localFilter("lang",ao.get("lang")),formatPredicate:this.localFilter("format",this.get("formats").join(au)),protocolPredicate:this.localFilter("protocol",this.get("protocols").join(au)),yvapAcctIdPredicate:this.localFilter("acctid",ap.get("accountId")),playContextPredicate:this._shouldSuppressAdContext()?'plidl=""':this.localFilter("plidl",ap.get("playContext")),pageSpaceIdPredicate:this._shouldSuppressAdContext()?'pspid=""':this.localFilter("pspid",ao.get("pageSpaceId")),offnetworkPredicate:this.localFilter("offnetwork",ao.get("isOffNetwork")),overridePredicate:this.localFilter("override",ao.get("lms")),widthPredicate:this.localFilter("width",Y),heightPredicate:this.localFilter("height",av),channelIdPredicate:this.localFilter("plist",al),syndicationPredicate:this.localFilter("synd",ao.get("synd"))});
},getRelatedVideosQuery:function(ao){var al=this._model,an=380,Y=214,am=al.get("endscreen").algoContent||this.get("algoContent");return f.Lang.sub(this.get("yqlRelatedQuery"),{columns:this.get("relatedVideosColumns").join(","),startPredicate:this.get("relatedStart"),countPredicate:this.get("relatedCount"),idPredicate:this.localFilter("id",ao),playerGuidPredicate:this.localFilter("plrs",al.get("guid")),sitePredicate:this.localFilter("site",al.get("site")),regionPredicate:this.localFilter("region",al.get("region")),algoPredicate:this.localFilter("algo",am),langPredicate:this.localFilter("lang",al.get("lang")),offnetworkPredicate:this.localFilter("offnetwork",al.get("isOffNetwork")),widthPredicate:this.localFilter("width",an),heightPredicate:this.localFilter("height",Y)});},getMetaQuery:function(al,am){var Y=this._model;return f.Lang.sub(this.get("yqlMetaQuery"),{columns:al.join(","),idPredicate:this.remoteFilter("id",am),sitePredicate:this.localFilter("site",Y.get("site")),regionPredicate:this.localFilter("region",Y.get("region")),langPredicate:this.localFilter("lang",Y.get("lang")),offnetworkPredicate:this.localFilter("offnetwork",Y.get("isOffNetwork"))});},getCcTtmlUrlQuery:function(){var Y=this._model,al=Y.get("closedCaptionUrl")||"";return f.Lang.sub(this.get("yqlCcTtmlQuery"),{ttmlUrlPredicate:this.localFilter("url",al)});},getMultiClipsQuery:function(an,ao,ap){var am=this.getClipsQuery(an,ao),Y=this.getMetaQuery(an,ap),al="'"+am+Y+"'";return f.Lang.sub(this.get("yqlMultiClipsQuery"),{queriesPredicate:"queries = "+al});},clipIds:function(Y){return f.Array.map(Y.toArray(),function(al){return al.id;});},getFirstClip:function(Y){var al;if(f.Lang.isArray(Y)&&Y.length>0){al=new Array(Y[0]);return al;}return Y;},quoteStr:function(Y){return'"'+Y+'"';},remoteFilter:function(al,Y){var am=al;if(Y.length>1){am+=" IN ";am+="("+f.Array.map(Y,this.quoteStr).join(", ")+")";}else{am+="=";am+='"'+Y[0]+'"';}return am;},localFilter:function(Y,al){return Y+"="+this.quoteStr(al);}});f.namespace("VideoPlatform").LegoCMS=ag;function A(){A.superclass.constructor.apply(this,arguments);this.queue=new f.AsyncQueue();this.isRunning=true;}A.NAME="BeaconService";A.NS="beaconService";A.ATTRS={beaconTemplate:{value:""},beacon:{value:""}};f.extend(A,f.Base,{create:function(am){var al=this.get("beaconTemplate"),Y;if(al!==""){Y=f.substitute(al,am);this.set("beacon",Y);}},send:function(){var Y=this.get("beacon"),al;if(Y!==""){al=f.bind(this._getBeaconJob(Y),this);this.queue.add(al);if(this.isRunning){this.queue.run();}return true;}return false;},_getBeaconJob:function(Y){return function(){var al,am;al=new Image();am=function(){al.onload=null;al.onabort=null;al.onerror=null;al=null;};al.onload=am;al.onabort=am;al.onerror=am;al.src=Y;};},run:function(){this.isRunning=true;this.queue.run();},pause:function(){this.isRunning=false;this.queue.pause();},stop:function(){this.isRunning=false;this.queue.stop();}});f.namespace("VideoPlatform").BeaconService=A;function i(){}function h(){h.superclass.constructor.apply(this,arguments);}h.NAME="HTMLVideoRenderer";h.NS="htmlVideoRenderer";h.VIDEO_TEMPLATE="<video {initAttrs}></video>";h._instanceInfo={};h._registerInstance=function(Y){var am=h._instanceInfo,al=f.guid(Y);am[al]={ref:Y,removed:false};};h._unregisterInstance=function(Y){var am=h._instanceInfo,al=f.guid(Y);delete am[al];};if(f.UA.ios&&undefined===h._domNodeInserted){h._domNodeRemoved=function(al){if(1===al.srcElement.nodeType){var Y=f.one(al.srcElement);f.some(h._instanceInfo,function(am){if(am.ref._video&&Y.contains(am.ref._video)&&true!==am.syncing){am.removed=true;am.removedState={currentTime:Math.floor(am.ref._videoNode.get("currentTime"))};return true;}return false;});}};h._domNodeInserted=function(al){if(1===al.srcElement.nodeType){var Y=f.one(al.srcElement);f.some(h._instanceInfo,function(am){if(am.ref._video&&Y.contains(am.ref._video)){i("video added");if(true===am.removed){am.resyncing=true;am.ref._recreateVideo();am.ref._reSync();am.resyncing=false;}return true;}return false;});}};i("ios - listening for mutation events...");f.one("body")._node.addEventListener("DOMNodeRemoved",h._domNodeRemoved);f.one("body")._node.addEventListener("DOMNodeInserted",h._domNodeInserted);}h.ATTRS={mediaItem:{readOnly:true,getter:function(){return this._mediaItem;}},chromeless:{},videoUrlTemplate:{value:"http://m.yahoo.com/w/web/video?u=url%5B%5D%3D{id}&lg=yep"},guid:{value:""},volume:{value:""},mute:{value:""},ccNode:{value:null},ccTextNode:{value:null},streamBitrate:{value:null}};f.extend(h,y,{_container:null,_mediaItem:null,_videoNode:null,_profiler:null,_model:null,log:function(Y,al){},initializer:function(){var al=arguments[0]||{},Y=al.model,am=this;this._profiler=al.controller?al.controller.getProfiler():null;this._mediaItem=al.mediaItem;this._model=Y;if(f.UA.ios){setInterval(function(){var an=am._videoNode.get("webkitDisplayingFullscreen");if(Y.get("fullscreen")!==an){am._onFullscreenChange(null);}},300);}f.each(["videoUrlTemplate","chromeless","guid","volume","mute"],function(an){if(f.Lang.isValue(Y.get(an))){this.set(an,Y.get(an));}},this);this.after("volumeChange",function(an){this.fire(af.VOLUME_CHANGE,an.newVal);},this);this.after("muteChange",function(an){this.fire(af.MUTE_CHANGE,an.newVal);},this);h._registerInstance(this);},_renderNode:function(){var Y,al;Y={"x-webkit-airplay":"allow"};al=f.substitute(h.VIDEO_TEMPLATE,{initAttrs:this._toAttrString(Y)});return f.Node.create(al);},getContent:function(){return this._videoNode;},destructor:function(){this.stop();this._unbindEventHandlers();this._videoNode.remove();},render:function(Y){i("render()",Y);this.set("videoContainer",Y);this.renderUI(Y);this.bindUI();this.syncUI();return this;},renderUI:function(Y){this._videoNode=this._renderNode();this._syncStyle();if(Y){Y.appendChild(this._videoNode);}this.set("playbackPlugin",this._videoNode._node);if(!f.UA.mobile){this._addClosedCaptionsNode();this._displayClosedCaptions();}this.set("readyState",y.Constants.READY_STATE.HAVE_NOTHING);
},bindUI:function(){var Y=this._model;this._unbindEventHandlers();this._bindEventHandlers();Y.after("showClosedCaptionsChange",this._displayClosedCaptions,this);},syncUI:function(){var Y=this._model;this._videoNode.setAttrs(this._getVideoAttrs(this.getAttrs(),this._mediaItem));this.setVolume(Y.get("volume"));this.setMute(Y.get("mute"));this._syncStyle();},_syncStyle:function(){this._videoNode.setStyles({background:"#000",width:"100%",height:"100%"});},_recreateVideo:function(){this._videoNode.remove(true);this.renderUI();},_reSync:function(){var Y=this._getVideoAttrs(this.getAttrs(),this._mediaItem);delete Y.poster;this.bindUI();this._syncStyle();this._videoNode.setAttrs(Y);},_getVideoAttrs:function(){var Y={};if(f.UA.mobile!==null){Y.controls="controls";}return Y;},_getVideoUrl:function(an,am){var ap=an.get("streams"),ao,al,Y=an.get("streamUrl")||"";if(!f.Lang.isValue(an)){return Y;}if(ap){ap=ap.sort(function(ar,aq){return ar.bitrate-aq.bitrate;});ao=f.Array.filter(ap,function(aq){return Number(aq.bitrate)<=am;},this);al=(ao.length===0)?ap[0]:ao.pop();this.set("streamBitrate",al.bitrate);Y=this.joinUrl(al.host,al.path);}return Y;},_getUrlFromTemplate:function(Y,al){return f.substitute(Y,al,function(am,an){return encodeURIComponent(an);});},_toAttrString:function(Y){var al=[];f.each(Y,function(an,am){al.push(am+'="'+an+'"');});return al.join(" ");},_play:function(){i("_play");this._videoNode.invoke("play");},setClosedCaptionAvailability:function(){var Y=this._model,ap=this._mediaItem.get("CC"),ao=this._model.get("lang"),an=null,al=null,am;if(ap!==undefined&&ap!==null&&ap.length!==0){for(am=0;am<ap.length;am++){an=ap[am];if(an.lang===ao){al=an.url;}}if(al!==null){Y.set("closedCaptionUrl",al);Y.set("ccAvailable",true);}else{Y.set("ccAvailable",false);}}if(f.UA.mobile){Y.set("ccAvailable",false);Y.set("closedCaptionUrl",null);}},suspendControl:function(){i("suspendControl");var Y={currentTime:Math.floor(this._videoNode.get("currentTime")),ended:this._videoNode.get("ended"),paused:this._videoNode.get("paused")};this.pause();this._unbindEventHandlers();return Y;},returnControl:function(Y){if(true!==Y.ended){this._videoNode.setAttribute("autoplay","true");this._reSync(Y);this._videoNode.set("src","");this._videoNode._node.load();this.play();}},load:function(an){var al=this._model.get("bitrate"),ao=this._getVideoUrl(an,al),am=this._videoNode,Y=this._profiler;if(Y){Y.add(aj.STREAM_REQUEST_TO_RENDER);Y.add(aj.STREAM_LOADED);}this._mediaItem=an;am.set("src",ao);am._node.load();this.setClosedCaptionAvailability();this.play();},play:function(){this._videoNode.invoke("play");},pause:function(){this._videoNode.invoke("pause");},seek:function(Y){this._videoNode.set("currentTime",Y);},stop:function(){this._videoNode.invoke("pause");},getDuration:function(){return this._videoNode.get("duration");},getBuffered:function(){var Y=this;return{start:Y._videoNode.get("buffered").start(0),end:Y._videoNode.get("buffered").end(0)};},setFullscreen:function(Y){var al,an=f.UA.ipad||f.UA.iphone;if(Y===true){try{this._videoNode.invoke("webkitEnterFullscreen");}catch(am){al=am;}finally{if(null!==al){}else{if(an){this.fire(af.FULLSCREEN_ENTER);}}}}else{this._videoNode.invoke("webkitExitFullscreen");if(an){this.fire(af.FULLSCREEN_EXIT);}}},setMute:function(Y){this._videoNode.set("muted",Y);},setVolume:function(Y){this._videoNode.set("volume",Y);},applyClosedCaptions:function(){var ap=this._model.get("closedCaptions"),an=this._videoNode.get("currentTime"),ao="",Y=this.get("ccTextNode"),am=this.get("ccNode"),al;am.addClass("yui3-videoplayer-opacity-100");am.setStyle("zIndex",1);if(ap===null||ap.entries===null){return;}for(al=0;al<ap.entries.times.length;al++){if(an>=ap.entries.times[al].start&&an<=ap.entries.times[al].end){ao=ap.entries.text[al];Y.set("innerHTML",ao);return;}}},_addClosedCaptionsNode:function(){var an=this.get("videoContainer"),Y=an.ancestor(".yui3-videoplayer-content"),am,al;if(!an||!Y){return;}am=Y.one(".yui3-videoplayer-closedcaptions");al=am.appendChild(f.Node.create('<p class="yui3-videoplayer-closedcaptions-text"></p>'));this.set("ccNode",am);this.set("ccTextNode",al);if(this._model.get("showClosedCaptions")===false){am.hide();}},_displayClosedCaptions:function(){if(!this._model.get("ccAvailable")){return;}if(this._model.get("showClosedCaptions")===true){this.get("ccNode").show();}else{this.get("ccNode").hide();}},_bindEventHandlers:function(){var Y={"loadeddata":this._onLoadedData,"ended":this._onEnded,"error":this._onError,"pause":this._onPause,"play":this._onPlay,"playing":this._onPlaying,"timeupdate":this._onTimeUpdate,"seeking":this.onSeeking,"waiting":this._onWaiting,"seeked":this.onSeeked,"webkitfullscreenchange":this._onFullscreenChange,"fullscreenchange":this._onFullscreenChange,"volumechange":this._onVolumeChange};f.each(Y,function(al,am){f.Node.DOM_EVENTS[am]=1;if(null!==al){this._videoNode.on(am,al,this);}},this);},_unbindEventHandlers:function(){if(this._videoNode){this._videoNode.detachAll();}},_onPlay:function(){this.fire(af.PLAYBACK_PLAY);},_onPlaying:function(){if(this._profiler){this._profiler.setEndTime(aj.STREAM_REQUEST_TO_RENDER.type);}this.fire(af.PLAYBACK_PLAYING);},_onPause:function(){if(!this._videoNode.get("ended")){this.fire(af.PLAYBACK_PAUSED);}},_onTimeUpdate:function(){var Y=this._model.get("ccAvailable");if(Y){this.applyClosedCaptions();}this.fire(af.PLAYBACK_PROGRESS,{source:h.NAME,currentTime:this._videoNode.get("currentTime"),duration:this._videoNode.get("duration")});},_onWaiting:function(){this.fire(af.PLAYBACK_WAITING);},_onLoadedData:function(){if(this._profiler){this._profiler.setEndTime(aj.STREAM_LOADED.type);}this.fire(af.PLAYBACK_READY);},_onEnded:function(){if(this.shouldLoopVideo()===false){if(this.get("ccNode")){this.get("ccNode").hide();}this.fire(af.PLAYBACK_COMPLETE);}else{this._videoNode.currentTime=0;this.play();}},_onVolumeChange:function(){var al=this._videoNode.get("muted"),Y=this._videoNode.get("volume");if(al!==this.get("mute")){this.set("mute",al);
}if(Y!==this.get("volume")){this.set("volume",Y);}},_onFullscreenChange:function(){var Y=true===this._videoNode.get("webkitDisplayingFullscreen")?af.FULLSCREEN_ENTER:af.FULLSCREEN_EXIT;this.fire(Y);},_onError:function(){var am=["Unknown error code 0","ABORTED - The fetching process for the media resource was aborted by the user agent at the user's request.","NETWORK - A network error of some description caused the user"+"agent to stop fetching the media resource, after the resource was established to be usable.","DECODE - An error of some description occurred while decoding the media resource, after the resource was established to be usable.","SRC_NOT_SUPPORTED - The media resource indicated by the src attribute was not suitable."],Y=this._videoNode.get("error"),al=c;i("video ERROR: "+(Y?Y.code+" "+am[Y.code]:"null error. poster?"));if(Y){this.fire(af.PLAYBACK_ERROR,new f.VideoPlatform.ErrorObject(al.ERROR.PLAYBACK.type,al.ERROR.PLAYBACK.code,this.constructor.NAME,am[Y.code],al.LEVEL.CRITICAL));}}});f.namespace("VideoPlatform").HTMLVideoRenderer=h;function j(){j.superclass.constructor.apply(this,arguments);}j.NAME="FlashVideoRenderer";j.NS="flashVideoRenderer";j.SWF_NAME="player.swf";j.FLASH_VERSION="10.3.0";j.FIXED_SWF_ATTRS={allowScriptAccess:"always",allowFullScreen:"true",wmode:I.determineWindowMode(f.UA,f.config.win.navigator.userAgent)};j.ATTRS={swfUrl:{writeOnce:"initOnly"}};f.extend(j,y,{_model:null,_controller:null,_profiler:null,_shouldRecordTime:true,log:function(Y,al){},initializer:function(Y){this._model=Y.model;this._controller=Y.controller;this._skipFlashCheck=Y.skipFlashCheck;if(this._controller){this._profiler=this._controller.getProfiler();}if(!this.get("swfUrl")){this._set("swfUrl",I.PLAYER_ASSETS_URL+j.SWF_NAME);}if(Y.skipFlashCheck===false){if(!this._isFlashInstalled()){this._controller.error(new f.VideoPlatform.ErrorObject(c.ERROR.NO_FLASH.type,c.ERROR.NO_FLASH.code,this.constructor.NAME,"Flash is not installed",c.LEVEL.CRITICAL));return;}}this._model.after("yvapStateChange",function(al){if(al.newVal===YVAPEvents.PLUGIN_REMOVED){this._removeYVAP();}},this);},_removeYVAP:function(){var Y=this._yswf;if(Y){Y.callSWF("unloadPlugin",["YVAP"]);}},destructor:function(){},render:function(Y){this.set("videoContainer",Y);this.set("videoContentNode",Y.ancestor(".yui3-videoplayer-content"));this._yswf=this._renderNode(Y);this.set("playbackPlugin",this._yswf);this._yswf.on("swfReady",this._onSwfReady,this);this._yswf.on("uiInteract",this._onUiInteract,this);this._yswf.on("playerPluginResize",this._onResize,this);this._yswf.on("waiting",this._onWaiting,this);this._yswf.on("jsLog",function(al){},this);},_renderNode:function(am){var an=this.get("swfUrl"),Y=new k({model:this._model}),aq,at=this,ar=at._profiler,ap,ao,al=10000;Y.start();if(ar){ar.add(aj.YSWF_NodeRendered);}an=(this._model.get("hostingData.bucket")===1)?an+"?qos=1":an;this.swfReadyTimer=new k({model:this._model});this.swfReadyTimer.start();aq=new f.YEPSWF(am,an,{version:j.FLASH_VERSION,fixedAttributes:j.FIXED_SWF_ATTRS});if(aq!==null&&aq!==undefined){aq.after("yuiIntegrationError",function(){var au=c.ERROR.YUI_INTEGRATION_ERR;at._controller.error(new f.VideoPlatform.ErrorObject(au.type,au.code,at.constructor.NAME,"YUI.SWF is not available",c.LEVEL.CRITICAL));});aq.after("wrongflashversion",function(){var au=c.ERROR.OLD_FLASH;at._controller.error(new f.VideoPlatform.ErrorObject(au.type,au.code,this.constructor.NAME,"Flash is not up to date",c.LEVEL.CRITICAL));return;});}if(aq!==null&&aq!==undefined){ao=this._isFlashBlockerPresent(aq._id);switch(ao){case"present":this._controller.warn(new f.VideoPlatform.ErrorObject(f.VideoPlatform.ErrorObject.ERROR.FLASH_BLOCKED.type,f.VideoPlatform.ErrorObject.ERROR.FLASH_BLOCKED.code,this.constructor.NAME,"Flash is blocked",c.LEVEL.WARNING));break;case"absent":break;default:case"uncertain":setTimeout(function(){ap=at.get("readyState");if(ap!==y.Constants.READY_STATE.HAVE_NOTHING){at._controller.warn(new f.VideoPlatform.ErrorObject(f.VideoPlatform.ErrorObject.ERROR.FLASH_BLOCKED.type,f.VideoPlatform.ErrorObject.ERROR.FLASH_BLOCKED.code,at.constructor.NAME,"Flash is blocked",c.LEVEL.WARNING));}},al);break;}}Y.stop(aj.YSWF_NodeRendered.type,aj.YSWF_NodeRendered.desc);if(ar){ar.setEndTime(aj.YSWF_NodeRendered.type);ar.add(aj.YSWF_READY);ar.add(aj.YSWF_LOADED);}return aq;},isSwfReady:function(am){var Y=false;if(!f.Lang.isValue(am)){return Y;}try{Y=f.Lang.isValue(am.callSWF("get",["swfReady"]));}catch(al){f.warn("isSwfReady() + Error = "+al);}finally{return Y;}},load:function(Y){this._yswf.after("swfReady",function(){this._load(Y);},this);},play:function(Y){this._yswf.after("swfReady",function(){this._play(Y);},this);},pause:function(){},seek:function(){},stop:function(){},unload:function(){},getDuration:function(){return NaN;},setVolume:function(){},setMute:function(){},setFullscreen:function(){},updateControls:function(Y){if(this._yswf){this._yswf.callSWF("updateControls",[Y]);}},positionCaptions:function(Y){this.updateControls({ccBottomLeftOffset:Y});},computeAdClientSize:function(ao){var Y=this._controller,am=Y.getControlsObj(),an=f.Lang.isValue(ao)?ao.height:0,aq=(f.Lang.isValue(am))?am.getControlBarHeight():0,al=an,ar=f.Lang.isValue(ao)?ao.width:0,ap={};if(!am.inAdContext()&&this.isPlaybackMode()&&(an>=aq)){al=an-aq;}ap={width:ar,height:al};return ap;},isPlaybackMode:function(){var Y=this._model.get("playerState");return(Y==="started"||Y==="paused");},getBuffered:function(){return this._yswf.callSWF("get",["buffered"]);},_load:function(aq){var an=this._model,ao=an.get("hostingData"),ar={version:an.get("version"),site:an.get("site"),region:an.get("region"),bucket:(f.Lang.isObject(ao))?ao.bucket:0,autoplay:an.get("autoplay"),spaceid:an.get("pageSpaceId"),hostEnv:(f.Lang.isObject(ao))?ao.env:"",lang:an.get("lang"),atlasEnv:an.get("atlasEnv"),maxConnectionAttempts:an.get("maxConnectionAttempts")},am=true,ap=this.convertMedia(aq),al=this._profiler,Y=this.get("videoContainer");if(al){this._streamLatencyKey=al.add(aj.STREAM_REQUEST_TO_RENDER);
this._streamLoadedKey=al.add(aj.STREAM_LOADED);}this._shouldRecordTime=true;if(f.Lang.isValue(Y)){Y.setStyle("opacity","1");}this._yswf.callSWF("loadPlugin",["Conviva"]);this._yswf.callSWF("set",["playerInfo",ar]);this._yswf.callSWF("set",["loop",this.shouldLoopVideo()]);f.Array.each(ap.streams||[],function(at){},this);if(ap.CC===undefined||ap.CC===null||ap.CC.length===0){am=false;}this._model.set("ccAvailable",am);this._yswf.callSWF("updateControls",[{ccAvailable:am,ccShow:(am)?this._model.get("showClosedCaptions"):false,ccBottomLeftOffset:{x:0,y:this._controller.getControlsObj().getControlBarHeight()}}]);this._yswf.callSWF("set",["src",ap]);},_play:function(al){if(this._profiler&&this._shouldRecordTime){this._playToRenderKey=this._profiler.add(aj.STREAM_PLAY_TO_RENDER);}this._setProperties(this);if(al){var Y=this.convertMedia(al);this._yswf.callSWF("set",["src",Y]);}else{this._yswf.callSWF("playMedia");}},_pause:function(){this._shouldRecordTime=false;this._yswf.callSWF("pauseMedia");},_stop:function(){this._pause();},_seek:function(Y){this._shouldRecordTime=false;this._yswf.callSWF("set",["currentTime",Y]);},_unload:function(){},_getDuration:function(){return this._yswf.callSWF("get",["duration"]);},_setVolume:function(Y){this._yswf.callSWF("set",["volume",Y]);},_setFullscreen:function(an){var al=this.get("videoContentNode"),am=al._node,ao=f.one("body").hasClass("yui3-videoplayer-lightbox"),Y;if(an){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!ao){if(am.requestFullscreen){am.requestFullscreen();}else{if(am.webkitRequestFullscreen){am.webkitRequestFullscreen();}else{if(am.mozRequestFullScreen){am.mozRequestFullScreen();}else{this._enterLightbox();}}}}}else{if(ao){this._exitLightbox();}else{if(document.cancelFullScreen){document.cancelFullScreen();}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen();}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen();if(document.mozFullScreen===true){Y=al.get("parentNode");Y.removeChild(al);Y.appendChild(al);}}}}}}},_enterLightbox:function(){var Y=f.one("body"),al=this.get("videoContentNode").ancestor();if(Y.hasClass("yui3-videoplayer-lightbox")){return;}I.postMessage("enter_fullscreen");while(al.get("nodeName")!=="BODY"){al.addClass("yui3-videoplayer-lightbox-ancestor");al=al.ancestor();}Y.addClass("yui3-videoplayer-lightbox");this._onFullscreenChange();},_exitLightbox:function(){var Y=f.one("body"),al=this.get("videoContentNode").ancestor();if(!Y.hasClass("yui3-videoplayer-lightbox")){return;}I.postMessage("exit_fullscreen");Y.removeClass("yui3-videoplayer-lightbox");while(al.get("nodeName")!=="BODY"){al.removeClass("yui3-videoplayer-lightbox-ancestor");al=al.ancestor();}this._onFullscreenChange();},_setMute:function(Y){this._yswf.callSWF("set",["muted",Y]);},_setProperties:function(Y){Y._yswf.callSWF("set",["controls",false]);Y._yswf.callSWF("set",["ybang",Y._model.get("ybang")]);Y._yswf.callSWF("updateControls",[{ccBottomLeftOffset:{x:0,y:this._controller.getControlsObj().getControlBarHeight()}}]);},_setYuiId:function(Y,am){if(!f.Lang.isValue(am)){return;}try{if(f.Lang.isValue(am.callSWF)){am.callSWF("set",["yuiId",Y]);}}catch(al){f.warn("_setYuiId() + Error = "+al);}},_isFlashInstalled:function(){var Y=f.SWFDetect.getFlashVersion().split(".",3);if(Y[0]==="undefined"){return false;}return true;},_recordProfilingTime:function(){var ao,an,Y,am,ap,au,at,aq,al=0,ar=this._profiler;if(ar){this._yswf.callSWF("set",["jsStartupTime",ar.getItem(aj.YSWF_READY.type).startTime+ar.getPlayerStartTime()]);an=this._yswf.callSWF("get",["profileData"]);if(an){Y=an.ProfileBrowserTime.time;ar.setDelta(aj.YSWF_LOADED.type,Y);ar.add(aj.YSWF_SWF_ONLY_INIT_TIME);ar.setStartTime(aj.YSWF_SWF_ONLY_INIT_TIME.type,ar.getItem(aj.YSWF_LOADED.type).endTime);am=an.ProfileBeforeStartup.time;aq=an.ProfileJsapiInit.time;au=an.ProfileSwfReady.time;ap=am+aq+au;ar.setDelta(aj.YSWF_SWF_ONLY_INIT_TIME.type,ap);}}if(this.swfReadyTimer){this.swfLoadTimer=new k({model:this._model});ao=this.swfReadyTimer.getStartTime();this._yswf.callSWF("set",["jsStartupTime",ao]);Y=an.ProfileBrowserTime.time;this.swfLoadTimer.recordTime(aj.YSWF_LOADED.type,aj.YSWF_LOADED.desc,Y,ao-this._model.START_TIME);al=ao+Y;am=an.ProfileBeforeStartup.time;at=al-this._model.START_TIME;aq=an.ProfileJsapiInit.time;au=an.ProfileSwfReady.time;ap=am+aq+au;this.swfLoadTimer.recordTime(aj.YSWF_SWF_ONLY_INIT_TIME.type,aj.YSWF_SWF_ONLY_INIT_TIME.desc,ap,at);}},_onSwfReady:function(){var Y=this;Y.swfReadyTimer.stop(aj.YSWF_READY.type,aj.YSWF_READY.desc);if(Y._profiler){Y._profiler.setEndTime(aj.YSWF_READY.type);}if(this._skipFlashCheck===false){this._recordProfilingTime();}this._setUpActualApi();this._syncUI();this._bindUI();this._yswf.callSWF("updateControls",[{playLoadAnimation:true}]);setTimeout(function(){Y._setProperties(Y);},5);this.set("readyState",y.Constants.READY_STATE.HAVE_NOTHING);},_onUiInteract:function(Y){this.fire(Y);},_syncUI:function(){var al=this,Y=this._model;al.setVolume(Y.get("volume"));al.setMute(Y.get("mute"));},_bindUI:function(){var Y=this._model,an=this._yswf,al={loadeddata:this._onLoadedData,ended:this._onEnded,error:this._onError,pause:this._onPause,play:this._onPlay,playing:this._onPlaying,timeupdate:this._onTimeUpdate,durationchange:this._onDurationChange,seeking:this.onSeeking,seeked:this.onSeeked,volumechange:this._onVolumeChange,infoupdate:this._onInfoUpdate,bitratechange:this._onBitrateChange,waiting:this._onWaiting},ap=f.one(document),ao={"fullscreenchange":this._onFullscreenChange,"webkitfullscreenchange":this._onFullscreenChange,"mozfullscreenchange":this._onFullscreenChange},am=this;f.Object.each(al,function(aq,ar){f.Node.DOM_EVENTS[ar]=1;this._yswf.after(ar,aq,this);},this);f.each(ao,function(aq,ar){f.Node.DOM_EVENTS[ar]=1;ap.on(ar,aq,this);},this);Y.after("activeScreenStrChange",function(){var aq="info"===Y.get("activeScreenStr");an.callSWF("updateControls",[{infoSelect:aq,fullscreenEnable:!aq}]);});
f.on("keyup",function(aq){if(aq.keyCode===27&&f.one("body").hasClass("yui3-videoplayer-lightbox")){am._exitLightbox();}},"body");Y.after("showControlsChange",function(){am._updateView();});Y.after("widthChange",function(){am._updateView();});Y.after("heightChange",function(){am._updateView();});Y.after("currentMediaChange",function(){am._onMediaChange();});},_setUpActualApi:function(){var al=this,Y=["load","play","pause","seek","stop","unload","setVolume","setMute","setFullscreen","getDuration"];f.each(Y,function(am){al[am]=al["_"+am];});},_onMediaChange:function(){this._updateView();this.updateControls({ccShow:false,clearCaptions:true});},_updateView:function(){this._updateAdClientSize();this._positionCaptions();},_updateAdClientSize:function(){var al=this,am=al._model,ap=am.get("width"),Y=am.get("height"),an=am.get("adClientSize"),ao={};ao=al.computeAdClientSize({width:ap,height:Y});if(ao.width!==an.width||ao.height!==an.height){al.fire(af.CLIENT_RESIZE,ao);}},_positionCaptions:function(){var am=this,al=am._controller.getControlsObj(),ao=f.Lang.isValue(al)?al.getControlBarHeight():0,Y=(ao>0)?ao:0,an={x:0,y:Y};this.positionCaptions(an);},convertMedia:function(ao){var am=this,ap={},aq=f.Array.map(ao.get("streams")||[],function(ar){return{format:ar.format,bitrate:ar.bitrate,width:ar.width,height:ar.height,host:ar.host,path:am.isAtlas(ar)?am.fixPath(ar):ar.path};}),al=ao.get("streamUrl"),Y=function(at,ar){return at.bitrate-ar.bitrate;},an;ap.live=ao.get("isLive");ap.uuid=ao.get("id");ap.showName=ao.get("showName");ap.title=ao.get("title");ap.CC=ao.get("CC");if(aq.length){if(f.Array.every(aq,am.isPdl)){an=aq.sort(Y).pop();ap.url=am.joinUrl(an.host,an.path);}else{ap.streams=aq;}}else{if(al&&al.length){ap.url=al;}}return ap;},isAtlas:function(Y){return(/atlas\.cdn\.yimg\.com/).test(Y.host);},isPdl:function(Y){return !Y.host||(/^http:\/\//).test(Y.host);},isRtmp:function(Y){return(/^rtmp(?:e|t|te|s)?:\/\//).test(Y.host);},isMp4:function(Y){return I.formats.MP4===Y.format;},fixPath:function(ao){var Y=this.isRtmp(ao),am=this.isMp4(ao),an="mp4:",al;al=ao.path.replace(/^\/?mp4:/,"").replace(/^\//,"");return Y&&am?an+al:al;},_onLoadedData:function(){if(this._profiler){this._profiler.setEndTime(aj.STREAM_LOADED.type,this._streamLoadedKey);}this.fire(af.PLAYBACK_READY);},_onPlay:function(){if(this._profiler&&this._shouldRecordTime){this._profiler.setEndTime(aj.STREAM_PLAY_TO_RENDER.type,this._playToRenderKey);this._profiler.setEndTime(aj.STREAM_REQUEST_TO_RENDER.type,this._streamLatencyKey);}this._shouldRecordTime=true;this.fire(af.PLAYBACK_PLAY);},_onPlaying:function(){this.fire(af.PLAYBACK_PLAYING);},_onPause:function(){this.fire(af.PLAYBACK_PAUSED);},_onTimeUpdate:function(){this.fire(af.PLAYBACK_PROGRESS,{source:j.NAME,currentTime:this._yswf.callSWF("get",["currentTime"]),duration:this._yswf.callSWF("get",["duration"])});},_onDurationChange:function(Y){this.fire(af.DURATION_CHANGE,Y.duration);},_onEnded:function(){this.fire(af.PLAYBACK_COMPLETE);},_onVolumeChange:function(){var al=this._yswf.callSWF("get",["muted"]),Y=this._yswf.callSWF("get",["volume"]);if(al!==this._model.get("muted")){this.fire(af.MUTE_CHANGE,al);}if(Y!==this._model.get("volume")){this.fire(af.VOLUME_CHANGE,Y);}},_onBitrateChange:function(Y){this.fire(af.BITRATE_CHANGE,Y);},_onFullscreenChange:function(){var Y=this;f.later(200,Y,function(){var an,al,am;an=Y.get("videoContentNode").get("offsetHeight");al=Y._controller._controls._view.get("screenSize");am=Y._model.get("carousel")?(an-s.PLAYLIST_CAROUSEL_DIMENSIONS[al].HEIGHT-s.PLAYLIST_CAROUSEL_DIMENSIONS[al].VERTICAL_SPACING).toString()+"px":"100%";Y._controller._controls._view.main.setStyle("height",am);});if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||f.one("body").hasClass("yui3-videoplayer-lightbox")){this.fire(af.FULLSCREEN_ENTER);}else{this.fire(af.FULLSCREEN_EXIT);}},_onError:function(al){var Y=c;this.fire(af.PLAYBACK_ERROR,new f.VideoPlatform.ErrorObject(Y.ERROR.PLAYBACK.type,al.code+"",this.constructor.NAME,al.msg+"; "+al.detail,Y.LEVEL.CRITICAL));},_onResize:function(am){var al={width:am.width,height:am.height},Y=this;Y.fire(af.PLAYER_RESIZE,al);Y.fire(af.CLIENT_RESIZE,Y.computeAdClientSize(al));},_onInfoUpdate:function(){this.fire(af.MEDIA_INFO_UPDATE,{source:j.NAME,mediaInfo:this._yswf.callSWF("get",["mediaInfo"])});},_onWaiting:function(){this.fire(af.PLAYBACK_WAITING);},_isFlashBlockerPresent:function(an){var am=(f.UA.ie>0)?window.document:document,ao=(f.Lang.isValue(am))?am.getElementById(an):null,Y="uncertain";if(ao===null){return"absent";}if(f.UA.chrome!==0||f.UA.safari!==0){try{if(ao.PercentLoaded()>0){}Y="absent";}catch(al){Y="present";}}return Y;},getMediaInfo:function(){return this._yswf.callSWF("get",["mediaInfo"]);}});f.namespace("VideoPlatform").FlashVideoRenderer=j;var o={YUILOAD:"Unable to load VideoAdPlugin module",INIT:"Unable to init YVAP",CREATE:"Unable to create YVAP",SCRIPTING:"Script error when interfacing with VideoAdPlugin.",TIMEOUT_PRE:"No response from plugin preroll",TIMEOUT_POST:"No response from plugin post roll",TIMEOUT_CREATE:"No response from plugin instantiation",TIMEOUT_YUILOAD:"VideoAdPlugin is not loaded in YUI"};YVAPEvents={ADPLUGIN_READY:"adPluginReady",AD_START:"adStart",AD_END:"adEnd",AD_COMPLETE:"adComplete",AD_ERROR:"adError",AD_PROGRESS:"adProgress",AD_NONE:"adNone",AD_PLUGIN_METRIC:"adPluginMetric",AD_PLUGIN_QOS_METRIC:"adPluginQosMetric",PLUGIN_REMOVED:"adPluginRemoved"};var P={NOT_LOADED:"notloaded",INITIALIZED:"initialized"};function z(){z.superclass.constructor.apply(this,arguments);}z.NAME="YVAP";z.NS="YVAP";z.ATTRS={pluginTimeout:{value:"3",getter:function(Y){return Number(Y);},validator:function(Y){return !isNaN(parseFloat(Y));}},pluginTimer:{value:null},criticalError:{value:false,validator:f.Lang.isBoolean},enableYVAPQOS:{value:true,validator:f.Lang.isBoolean},pluginState:{value:P.NOT_LOADED},volume:{value:0,validator:f.Lang.isNumber}};f.extend(z,f.Base,{initializer:function(ao){var an=this,Y=(ao.model&&ao.hasOwnProperty("model"))?ao.model:null,am,ap,al;
an._adPlugin=null;an._yvapNode=null;an._model=Y;an._controller=(ao.controller&&ao.hasOwnProperty("controller"))?ao.controller:null;if(Y){am=(Y.get("mute")===true)?0:Y.get("volume");al=Y.get("YVAP");ap=(al)?al.get("timeout"):null;if(f.Lang.isValue(ap)){an.set("pluginTimeout",ap);}}an.set("volume",am);an.after("criticalErrorChange",an._onCriticalError,an);an._loadVideoAdPlugin();},requestPreRollAd:function(){var al,Y,an=this,am=an.get("pluginState");if(am===P.INITIALIZED){al=an._controller.getRenderer();Y=al.get("readyState");if(Y===y.Constants.READY_STATE.HAVE_NOTHING){an._startAdExperience();}else{al.after("readyStateChange",function ao(aq){if(aq.newVal===y.Constants.READY_STATE.HAVE_NOTHING){al.detach("readyStateChange",ao,an);an._startAdExperience();}},an);}}else{an.after("pluginStateChange",function ap(){an.detach("pluginStateChange",ap,an);an.requestPreRollAd();},an);}},requestPostRollAd:function(){var al=this,an=al._adPlugin,Y=al._getProfiler();if(f.Lang.isObject(an)&&an.onContentVideoComplete){al._createTimeout(o.TIMEOUT_POST);al.adStartTimer=new k({model:al._model});al.adStartTimer.start();if(Y){al._yvapAdStartedKey=Y.add(aj.YVAP_ADSTARTED);al._yvapNoAdKey=Y.add(aj.YVAP_NOAD);al._yvapErrorKey=Y.add(aj.YVAP_ERROR);}try{an.onContentVideoComplete();}catch(am){al._issueCriticalError(o.SCRIPTING,"onContentVideoComplete: "+am.message);}}else{this._issueCriticalError(o.SCRIPTING,"VideoAdPlugin.onContentVideoComplete not avail");}},_loadVideoAdPlugin:function(){var Y=this,al;Y._manageModelEvents("after");Y._adPlugin=Y._createVideoAdPlugin(Y._createAdConfig());Y._manageInitialRendererUpdate();function am(an){Y._updatePlayerData(an.item);}al=Y._model.get("playlist");if(al){al.on("mediaItemAdd",am,Y);Y.after("criticalErrorChange",function(an){if(an.newVal===true){al.detach("mediaItemAdd",am,Y);}},Y);}},_createVideoAdPlugin:function(am){var an=null,Y=this._getProfiler();this._createTimeout(o.TIMEOUT_CREATE);this._timerPluginReady=new k({model:this._model});this._timerPluginReady.start();if(Y){this._yvapReadyKey=Y.add(aj.YVAP_READY);}try{an=new f.VideoAds.VideoAdPlugin(am);}catch(al){this._issueCriticalError(o.CREATE,al.message);}finally{return an;}},_getProfiler:function(){var Y=this._controller;if(f.Lang.isValue(Y)){if(Y.constructor.prototype.hasOwnProperty("getProfiler")){return Y.getProfiler();}}return null;},_manageInitialRendererUpdate:function(){var al=this,Y=al._model.get("rendererReady");if(Y===true){al._checkRendererState();}else{al._model.after("rendererReadyChange",function(am){if(am.newVal===true){al._checkRendererState();}},al);}},_checkRendererState:function(){var al=this,ao=al._controller,Y=ao.getRenderer()||null,an=(Y)?Y.get("readyState"):null;if(an===y.Constants.READY_STATE.HAVE_NOTHING){al._updateRenderer();}else{Y.after("readyStateChange",function am(ap){if(ap.newVal===y.Constants.READY_STATE.HAVE_NOTHING){Y.detach("readyStateChange",am,al);al._updateRenderer();}},al);}},_updateRenderer:function(){var Y=this,ao=Y._adPlugin,al=Y._model.get("rendererType"),an=Y._controller.getRenderer();if(!an){return;}if(Y._yvapNode===null&&al==="html"){Y._yvapNode=Y._insertYVAPNode();}if(f.Lang.isObject(ao)&&ao.updateRenderer){try{ao.updateRenderer({adContainer:Y._yvapNode,rendererType:al,playerContainer:an.get("playbackPlugin")});}catch(am){Y._issueCriticalError(o.SCRIPTING,"updateRenderer: "+am.message);}}},_insertYVAPNode:function(){var Y=this._controller.getRenderer().get("videoContainer"),al=f.Node.create('<div class="'+f.ClassNameManager.getClassName("videoplayer-yvap","container")+'"/>');Y.appendChild(al);return al.getDOMNode();},_createAdConfig:function(){var al=this,am=al._model.get("playlist"),Y=(am)?am.items()._items:[];return{timeout:al.get("pluginTimeout"),rendererType:al._model.get("rendererType"),playerData:al._createPlayerData(Y),clientInfo:al._createClientInfoData(),enableQOS:al.get("enableYVAPQOS"),streamAd:al._model.get("streamAd"),on:{"PluginReady":al._onPluginReady,"VideoAdStart":al._onAdStart,"VideoAdEnd":al._onAdEnd,"PluginNoAd":al._onNoAd,"VideoAdExperienceComplete":al._onAdComplete,"blockingAdProgress":al._onAdProgress,"AdPluginError":al._onPluginError,"AdPluginProfiler":al._addProfilingItem,"AdPluginMetric":al._onAdPluginMetric,"AdStartMediaPlayback":al._onAdStartMediaPlayback},context:al};},_createPlayerData:function(an){var ao=null,Y=this._model,am=[],al=Y.get("YVAP");if(!f.Lang.isObject(an)&&!f.Lang.isArray(an)){return am;}if(!an.length){an=[an];}f.each(an,function(aq){try{ao=new f.VideoAds.PlayerData();ao.setMASAcctId(al.get("accountId"));ao.setClipId(aq.get("id"));ao.setClipDuration(aq.get("duration"));ao.setPlaylistId(al.get("playContext"));ao.setAdData(aq.get("adData"));ao.addCustomParameter("ad-biz:spaceID",aq.get("spaceId"));ao.addCustomParameter("ad-biz:licenseID",aq.get("licenseId"));ao.setIsLive(aq.get("isLive"));am.push(ao);}catch(ap){}finally{}},this);return am;},_createClientInfoData:function(){var Y=this._model,al=Y.get("adClientSize");return{x:0,y:0,width:al.width+"px",height:al.height+"px",volume:this.get("volume"),bitrate:Y.get("bitrate")};},_updatePlayerData:function(al){var ao=this._adPlugin,ap,am,Y=this;if(f.Lang.isValue(al)){am=(f.Lang.isArray(al))?al:[al];ap=this._createPlayerData(am);if(f.Lang.isObject(ao)&&ao.updatePlayerData){try{ao.updatePlayerData(ap);}catch(an){Y._issueCriticalError(o.SCRIPTING,"updatePlayerData: "+an.message);}}else{Y._issueCriticalError(o.SCRIPTING,"VideoAdPlugin.updatePlayerData not avail");}}},_startAdExperience:function(){var al=this,ap=al._adPlugin,an=al._model.get("currentMedia"),ao=al._createPlayerData([an]),Y=al._getProfiler();al.adStartTimer=new k({model:al._model});al.adStartTimer.start();if(Y){al._yvapAdStartedKey=Y.add(aj.YVAP_ADSTARTED);al._yvapNoAdKey=Y.add(aj.YVAP_NOAD);al._yvapErrorKey=Y.add(aj.YVAP_ERROR);}al._createTimeout(o.TIMEOUT_PRE);if(f.Lang.isObject(ap)&&ap.beginAdExperience){try{if(al._model.get("standaloneAdMode")){ap.fireStandaloneAdOpportunity();}else{ap.beginAdExperience(ao[0]);}}catch(am){al._issueCriticalError(o.SCRIPTING,"beginAdExperience: "+am.message);
}}else{al._issueCriticalError(o.SCRIPTING,"VideoAdPlugin.beginAdExperience not avail");}},_onPluginReady:function(){var al=this,Y=al._getProfiler();al._cancelTimer();al._updateClientInfo();if(Y){Y.setEndTime(aj.YVAP_READY.type,this._yvapReadyKey);}if(al._timerPluginReady){al._timerPluginReady.stop(aj.YVAP_READY.type,aj.YVAP_READY.desc);delete al._timerPluginReady;}al.set("pluginState",P.INITIALIZED);},_addProfilingItem:function(al){var Y=new k({model:this._model});Y.recordTime(al.type,al.message,al.timeDiff,al.startTime);},_onAdPluginMetric:function(am){var al=am.YWAData,Y=am.YAMASData,an=am.profilerData;if(f.Lang.isObject(al)){this.fire(YVAPEvents.AD_PLUGIN_METRIC,{type:"ywa",data:al});}if(f.Lang.isObject(Y)){this.fire(YVAPEvents.AD_PLUGIN_QOS_METRIC,{type:"qos",data:Y});}if(f.Lang.isObject(an)){this._addProfilingItem(an);}},_onAdStart:function(){this._cancelTimer();},_onAdStartMediaPlayback:function(am){var al=this._getProfiler(),Y=null;if(this.adStartTimer){this.adStartTimer.stop(aj.YVAP_ADSTARTED.type,aj.YVAP_ADSTARTED.desc);delete this.adStartTimer;}if(al){Y=al.getItem(aj.YVAP_ADSTARTED.type,this._yvapAdStartedKey);if(Y&&isNaN(Y.endTime)){al.setEndTime(aj.YVAP_ADSTARTED.type,this._yvapAdStartedKey);}al.remove(aj.YVAP_NOAD.type,this._yvapNoAdKey);al.remove(aj.YVAP_ERROR.type,this._yvapErrorKey);}this.fire(YVAPEvents.AD_START,{volume:am.volume,adslug:am.adslug,timer:am.timer,scale:am.scale,blocking:am.blocking});},_onAdEnd:function(){this.fire(YVAPEvents.AD_END);},_onAdComplete:function(){this.fire(YVAPEvents.AD_COMPLETE);},_onNoAd:function(){var al=this,Y=al._getProfiler();if(al.adStartTimer){al.adStartTimer.stop(aj.YVAP_NOAD.type,aj.YVAP_NOAD.desc);delete al.adStartTimer;}if(Y){Y.remove(aj.YVAP_ADSTARTED.type,al._yvapAdStartedKey);Y.setEndTime(aj.YVAP_NOAD.type,al._yvapNoAdKey);Y.remove(aj.YVAP_ERROR.type,al._yvapErrorKey);}al._cancelTimer();al.fire(YVAPEvents.AD_NONE);},_onAdProgress:function(Y){this.fire(YVAPEvents.AD_PROGRESS,{duration:Y.totalDuration,position:Y.position});},_onPluginError:function(am){var al=this,Y=al._getProfiler();al._cancelTimer();if(al.adStartTimer){al.adStartTimer.stop(aj.YVAP_ERROR.type,aj.YVAP_ERROR.desc);delete al.adStartTimer;}if(Y){Y.remove(aj.YVAP_ADSTARTED.type,al._yvapAdStartedKey);Y.remove(aj.YVAP_NOAD.type,al._yvapNoAdKey);Y.setEndTime(aj.YVAP_ERROR.type,al._yvapErrorKey);}al._issueCriticalError(YVAPEvents.AD_ERROR,am);},raiseError:function(al,Y){this.fire(YVAPEvents.AD_ERROR,{message:al,cause:Y});},_manageModelEvents:function(an){var al=this,Y=al._model,ao=an,am={"muteChange":al._onMuteChange,"playbackPositionChange":al._onVideoProgress,"bitrateChange":al._updateClientInfo,"adClientSizeChange":al._updateClientInfo,"volumeChange":al._updateVolume,"rendererTypeChange":al._updateRenderer};if(Y[ao]){f.each(am,function(aq,ap){Y[ao](ap,aq,al);},al);}},_updateClientInfo:function(){var Y=this,am=Y._adPlugin,an;if(f.Lang.isObject(am)&&am.onClientInfoChanged){an=Y._createClientInfoData();try{am.onClientInfoChanged(an);}catch(al){Y._issueCriticalError(o.SCRIPTING,"onClientInfoChanged: "+al.message);}}},_onVolumeChange:function(Y){this.set("volume",Y.newVal);},_onMuteChange:function(ao){var Y=this,al=(ao.newVal===true)?0:Y._model.get("volume"),an=Y._adPlugin;if(f.Lang.isObject(an)){try{an.onVolumeChange(al);}catch(am){Y._issueCriticalError(o.SCRIPTING,"onVolumeChange: "+am.message);}}},_updateVolume:function(an){var Y=this,am=Y._adPlugin;if(f.Lang.isObject(am)){try{am.onVolumeChange(an.newVal);}catch(al){Y._issueCriticalError(o.SCRIPTING,"onVolumeChange: "+al.message);}}},_onVideoProgress:function(an){var Y=this,am=Y._adPlugin,ap=an.newVal,ao=Y._model.get("currentMedia").get("duration");if(f.Lang.isObject(am)&&am.onContentVideoProgress){try{am.onContentVideoProgress({position:ap,duration:ao});}catch(al){Y._issueCriticalError(o.SCRIPTING,"onContentVideoProgress: "+al.message);}}else{this._issueCriticalError(o.SCRIPTING,"VideoAdPlugin.onContentVideoProgress not avail");}},_issueCriticalError:function(Y,al){this.set("criticalError",true);this.raiseError(Y,al);},_onCriticalError:function(al){var Y=this;if(al.newVal===true){Y._cancelTimer();Y._removePlugin();Y.detach("criticalErrorChange",Y._onCriticalError,Y);}},_createTimeout:function(am){var al,Y;if(this.get("criticalError")===true){return;}al=this.get("pluginTimeout")*1000;Y={timer:f.later(al,this,"_timerResponse"),type:am};this.set("pluginTimer",Y);},_timerResponse:function(){var Y=this,an=Y._adPlugin,al=Y.get("pluginTimer");if(al===null){return;}if(f.Lang.isObject(an)&&an.subscribe&&an.timeout){try{an.subscribe("AdPluginTimeout",function(){},Y);an.timeout();}catch(am){Y._issueCriticalError(o.SCRIPTING,"_timerResponse: "+am.message);}}else{Y._issueCriticalError(o.SCRIPTING,"VideoAdPlugin.timeout not avail");}Y.raiseError(al.type,"VideoAdPlugin process timed out");},_cancelTimer:function(){var Y=this.get("pluginTimer");if(Y&&Y.timer){Y.timer.cancel();}this.reset("pluginTimer");},_removePlugin:function(){var Y=this,ao=Y._adPlugin,am=YVAPEvents;function an(){Y._adPlugin=null;Y.fire(am.PLUGIN_REMOVED);Y._manageModelEvents("detach");}if(!f.Lang.isObject(ao)){an();return;}try{ao.detachAll();ao.subscribe("AdPluginDestroy",function(){an();},Y);ao.destroy();}catch(al){an();}}});f.namespace("VideoPlatform").YVAP=z;function T(){T.superclass.constructor.apply(this,arguments);}T.ATTRS={jsonpMethod:{value:f.jsonp},requestTimeout:{value:8}};T.NAME="OUOSService";T.NS="OUOSService";f.extend(T,f.Base,{log:function(Y,al){},ping:function(ao,an){var Y=this,al=ao.get("1u1sUrl")+"&callback={callback}",ap=Y.get("jsonpMethod"),aq=Y.get("timeout"),am=an.context||null;ap(al,{on:{success:function(ar){an.success.call(am,Y.parseResponse(ar));},failure:function(ar){an.failure.call(am,ar);}},timeout:aq,context:this});},parseResponse:function(al){var Y=al&&al.query&&al.query.results?al.query.results.status:1;return Y!==0;}});f.namespace("VideoPlatform").OUOSService=T;function r(){r.superclass.constructor.apply(this,arguments);}r.ATTRS={};r.NAME="1U1S";
r.NS="1U1S";f.extend(r,f.Base,{_currentMedia:null,_service:new T(),_interval:NaN,log:function(Y,al){},isEnforceable:function(ao){var an=false,al=ao.get("1u1sUrl"),am=ao.get("1u1sInterval"),Y=f.Lang;if((Y.isString(al)&&al.length)&&(Y.isNumber(am)&&am>0)){an=true;}return an;},start:function(Y){this._model=Y;if(Y){Y.after("currentMediaChange",this._currentMediaChange,this);}},startEnforce:function(an){var al=this,am=an.get("1u1sInterval")*1000;al._currentMedia=an;function Y(){al._service.ping(an,{success:function(ao){if(!ao){al.stopEnforce();al.fire("disconnect");}},failure:function(){al.log("ping() failure()");},context:al});}al._interval=setInterval(Y,am);Y();},stopEnforce:function(){clearInterval(this._interval);},_currentMediaChange:function(){var an=this,al=an._model,Y=al.get("currentMedia");this.stopEnforce(this._currentMedia);if(Y&&an.isEnforceable(Y)){if(al.get("isPlaying")){an.startEnforce(Y);}else{al.after("isPlayingChange",function am(ao){if(true===ao.newVal){al.detach("isPlayingChange",am);an.startEnforce(Y);}});}}}});f.namespace("VideoPlatform").OUOS=r;function H(){H.superclass.constructor.apply(this,arguments);}H.NAME="CookieHandler";H.NS="CookieHandler";H.ATTRS={};f.extend(H,f.Base,{DAYS_IN_A_YEAR:365,initializer:function(Y){this.model=Y.model;this._observeModel();},isCookieEnabled:function(){return navigator.cookieEnabled;},removeYepCookie:function(){if(!this.isCookieEnabled()){return;}f.Cookie.remove("V",{path:"/",domain:"yahoo.com"});},setSubCookies:function(al){var Y=new Date(),am=this;if(!am.isCookieEnabled()||f.Lang.isNull(f.Cookie.get("V"))||f.Lang.isNull(al)||!f.Lang.isObject(al)){return;}Y.setDate(Y.getDate()+am.DAYS_IN_A_YEAR);f.Cookie.setSubs("V",al,{path:"/",domain:"yahoo.com",expires:Y});},setSubCookie:function(al,an){var Y=new Date(),am=this;if(!am.isCookieEnabled()||f.Lang.isNull(f.Cookie.get("V"))||!f.Lang.isValue(al)||!f.Lang.isValue(an)){return;}Y.setDate(Y.getDate()+am.DAYS_IN_A_YEAR);f.Cookie.setSub("V",al,an,{path:"/",domain:"yahoo.com",expires:Y});},getSubCookies:function(){var Y=null;if(!this.isCookieEnabled()){return null;}Y=f.Cookie.getSubs("V");if(!f.Lang.isNull(Y)&&f.Lang.isObject(Y)){if(f.Lang.isValue(Y.v)){Y.v=parseFloat(Y.v);}if(f.Lang.isValue(Y.cc)){Y.cc=parseInt(Y.cc,10);}if(f.Lang.isValue(Y.m)){Y.m=parseInt(Y.m,10);}}return Y;},createAndLoadCookies:function(){var Y=null,al,an=this,am=an.model,ap,aq,ao;if(f.Lang.isNull(am)){return;}ap=am.get("volume");aq=am.get("showClosedCaptions");ao=am.get("mute");Y=an._createYepCookie();if(f.Lang.isNull(Y)){return;}if(Y===""){al={v:ap,cc:aq?1:0,m:ao?1:0};an.setSubCookies(al);}else{al=an.getSubCookies();if(f.Lang.isNull(al)){return;}if(f.Lang.isValue(al.v)){am.set("volume",al.v);}if(f.Lang.isValue(al.cc)){am.set("showClosedCaptions",(al.cc===1));}if(f.Lang.isValue(al.m)){am.set("mute",(al.m===1));}}},_createYepCookie:function(){var al=f.Cookie.get("V"),Y=new Date(),am=this;if(!am.isCookieEnabled()){return null;}Y.setDate(Y.getDate()+am.DAYS_IN_A_YEAR);if(f.Lang.isNull(al)||al===""){f.Cookie.set("V","",{path:"/",domain:"yahoo.com",expires:Y});}return f.Cookie.get("V");},_observeModel:function(){var al=this,Y=al.model,an,ao,am;Y.after("volumeChange",function(ap){an=ap.newVal;if(f.Lang.isValue(an)){an=an.toFixed(2);if(an<0){an=0;}al.setSubCookie("v",an);}},this);Y.after("showClosedCaptionsChange",function(ap){ao=ap.newVal;if(f.Lang.isValue(ao)){ao=(ao===true)?1:0;al.setSubCookie("cc",ao);}},this);Y.after("muteChange",function(ap){am=ap.newVal;if(f.Lang.isValue(am)){am=(am===true)?1:0;al.setSubCookie("m",am);}},this);}});f.namespace("VideoPlatform").CookieHandler=H;function g(){g.superclass.constructor.apply(this,arguments);}g.NAME="Carousel";g.NS="carousel";g.ATTRS={};f.extend(g,f.Base,{initializer:function(Y){var al=Y[0]||Y;this._mediaItems=al.mediaItems;this._view=al.view;this._controller=this._view._controller;this.index=0;this._itemCount=this._mediaItems.length;this._mediaItemDomArray=[];this._showMetadata=al.showMetadata;this._showNavigation=al.showNavigation;this._dimensions=al.dimensions;this._layout={};this.pltype=al.pltype;this.isAnimating=false;this.animDelay=0;this._touch={"prevClientX":null,"ignore":false};if(this._controller){this.i18n=this._controller.getStrings();}f.publish("VideoPlayer.Carousel.thumbnailClick",{broadcast:2});f.publish("VideoPlayer.Carousel.touch",{broadcast:2});if(this._showNavigation!==false){f.publish("VideoPlayer.Carousel.navigationClick",{broadcast:2});}},_calculateLayout:function(ao){var Y=ao.get("offsetWidth"),an=ao.get("offsetHeight"),ap,al,am;am=this._calculateLayoutAxis(an,this._dimensions.itemHeight,this._dimensions.verticalSpacing);this._layout.rows=am.dimension;this._layout.remainingVerticalSpacing=am.remainingSpace;al=this._calculateLayoutAxis(Y,this._dimensions.itemWidth,this._dimensions.horizontalSpacing);this._layout.cols=al.dimension;this._layout.remainingHorizontalSpacing=al.remainingSpace;ap=this._layout.rows*this._layout.cols;if(this._showNavigation===false&&ap<this._itemCount){this._itemCount=ap;}this._layout.itemsInRow=(parseInt(this._itemCount/ap,10)*this._layout.cols);},_calculateLayoutAxis:function(ar,Y,ao){var ap,at,aq,al,an,au,am=ar%Y;ap=Math.floor(ar/Y);al=(ap-1)*ao;an=(ap*Y)+al;if(an>ar){ap=ap-1;al=at-ao;}aq=(ap*Y)+((ap-1)*ao);au=ar-aq;return{"dimension":ap,"margin":am,"remainingSpace":au};},render:function(Y){this._calculateLayout(Y);this.renderContainer(Y);this.loadItems();this.showPage(0);if(this._showNavigation!==false){this._syncNavigation();}this._bindUI();},renderContainer:function(an){var am=g.NS,ar,ao,aq,al,ap,Y;this.container=this.createNode("div","container",am);this.viewport=this.createNode("ul","viewport",am);for(ar=0;ar<this._itemCount;ar++){ao=this._mediaItems[ar];this._addMediaItem(ar,ao);}this.container.append(this.viewport);if(this._showNavigation!==false){aq=this.createNode("div","carousel-left-container");aq.addClass("yui3-videoplayer-arrow-container");al=this.createNode("div","carousel-left arrow");al.addClass("yui3-videoplayer-arrow");
aq.append(al);ap=this.createNode("div","carousel-right-container");ap.addClass("yui3-videoplayer-arrow-container");Y=this.createNode("div","carousel-right");Y.addClass("yui3-videoplayer-arrow");ap.append(Y);this.container.append(aq);this.container.append(ap);}an.append(this.container);this.viewport.setStyle("margin",parseInt(this._layout.remainingVerticalSpacing/2,10)+"px "+parseInt(this._layout.remainingHorizontalSpacing/2,10)+"px");if(this._showNavigation!==false){if(f.UA.ie>=7&&f.UA.ie<8){this.container.all(".yui3-videoplayer-arrow-container").getStyle("height");this.container.all(".yui3-videoplayer-arrow-container").setStyle("height",this.container.get("offsetHeight")+"px");}}this.enable();},loadItems:function(){var at=this._layout.cols,au=this._layout.rows,am,Y,av,ap,ao,aw,al,ar,aq,an;if(this._showNavigation!==false){am=parseInt(this._itemCount/at,10);Y=(this._itemCount%at)===0?parseInt(am,10):(am+1);}else{Y=1;}for(av=0;av<Y;av++){an=av*this._dimensions.itemWidth*at;for(ap=0;ap<at;ap++){al=an+(ap*this._dimensions.itemWidth)+(ap*this._dimensions.horizontalSpacing);for(ao=0;ao<au;ao++){aq=(av*(at*au))+ap+(ao*at);aw=this._mediaItemDomArray[aq];if(!aw){continue;}ar=(ao*this._dimensions.itemHeight)+(ao*this._dimensions.verticalSpacing);aw.setStyle("top",ar);aw.setStyle("left",Math.round(al));}}}},_addMediaItem:function(at,an){var al,ap,ax,aq,ao,aw,Y,am,ar,au,av;al=an.images&&(an.images.thumbnail||an.images.small||an.images.medium||an.images.large)||I.PLAYER_ASSETS_URL+"video_thumb_nopic.png";ap=this.createNode("li","carousel-viewport-item");if(this._showMetadata){if(this.pltype==="endScreen"&&at===0){ap.append(this._getThumbnailNode(al));ap.addClass("replay");aq=f.Node.create("<div/>");aq.addClass("overlay");aw=f.Node.create("<button/>");aw.addClass("replay-button");Y=f.Node.create("<span/>");Y.addClass("replay-text");Y.set("innerHTML",this.i18n.REPLAY);aq.append(aw);aq.append(Y);ap.append(aq);}else{ap.append(this._getThumbnailNode(al));aq=f.Node.create("<div/>");aq.addClass("overlay");ar=f.Node.create("<button/>");ar.addClass("play-button");if(!I.isMobile()){au=f.Node.create("<p/>");au.addClass("play-video-text");au.set("innerHTML",this.i18n.PLAY_VIDEO);}if(f.UA.ie>0&&f.UA.ie<9){aq.hide();ap.on("hover",function(){ax=ap.one(".overlay");ax.show();},function(){ax=ap.one(".overlay");ax.hide();});av=f.Node.create("<div/>");av.addClass("overlay-background");aq.append(av);}aq.append(ar);aq.append(au);ap.append(aq);am=f.Node.create("<div/>");am.addClass("metadata");ao=f.Node.create("<p/>");ao.addClass("title");ao.set("innerHTML",an.title);am.append(ao);ap.append(am);}}else{ap.append(this._getThumbnailNode(al));}ap.setData("param",{"index":at,"plType":this.pltype});ap.setStyle("width",this._dimensions.itemWidth);ap.setStyle("height",this._dimensions.itemHeight);this.viewport.append(ap);this._mediaItemDomArray.push(ap);},navLeft:function(Y){if(Y.isAnimating===true){return;}Y.isAnimating=true;Y.scrollTo(Y.index-Y._layout.cols);setTimeout(function(){Y.isAnimating=false;},Y.animDelay);},navRight:function(Y){if(Y.isAnimating===true){return;}Y.isAnimating=true;Y.scrollTo(Y.index+Y._layout.cols);setTimeout(function(){Y.isAnimating=false;},Y.animDelay);},_bindUI:function(){var Y=this;if(this._showNavigation!==false){Y.container.one(".yui3-videoplayer-carousel-left").on("click",function(){Y.navLeft(Y);f.fire("VideoPlayer.Carousel.navigationClick","pc-navl");});Y.container.one(".yui3-videoplayer-carousel-right").on("click",function(){Y.navRight(Y);f.fire("VideoPlayer.Carousel.navigationClick","pc-navr");});Y.viewport.on("touchstart",Y._touchStart,Y);Y.viewport.on("touchmove",Y._touchMove,Y);Y.viewport.on(["touchend","touchcancel"],Y._touchEnd,Y);}Y.container.one(".yui3-videoplayer-carousel-viewport").delegate("click",function(al){f.fire("VideoPlayer.Carousel.thumbnailClick",al.currentTarget.getData("param"));},"li.load");},showPage:function(ao){var ap=this._layout.cols,aq=this._layout.rows,an=ao*ap,ar=100,am,al,at,Y;this.container.all("li.load").removeClass("load");Y=ao*this._dimensions.itemWidth*ap;for(am=0;am<ap;am++){for(al=0;al<aq;al++){ar+=100;an=(ao*(ap*aq))+am+(al*ap);at=this._mediaItemDomArray[an];if(!at){continue;}this._showItem(at,ar);}}this.animDelay=ar;},_showItem:function(al,Y){if(typeof al!=="undefined"){setTimeout(function(){al.addClass("load");},Y);}},scrollTo:function(Y){while(Y>this._itemCount){Y-=this._itemCount;}var al=(Y*(this._dimensions.imageWidth*-1)+parseInt(this._layout.remainingHorizontalSpacing/2,10))+"px";if(al===this.viewport.getStyle("marginLeft")){return;}this.viewport.setStyle("marginLeft",al);this.showPage(Y/this._layout.cols);this.index=Y;this._syncNavigation();},_syncNavigation:function(){if((this._itemCount/this._layout.rows)>this._layout.cols){this.disableArrow("left");this.disableArrow("right");if(this.index>0){this.enableArrow("left");}if(this.index<(this._itemCount-this._layout.cols)){this.enableArrow("right");}}},disable:function(){this.container.removeClass("yui3-videoplayer-enabled");this.clearIndicator();},enable:function(){this.container.addClass("yui3-videoplayer-enabled");},enableArrow:function(Y){this.container.addClass("yui3-videoplayer-"+Y+"-enabled");},disableArrow:function(Y){this.container.removeClass("yui3-videoplayer-"+Y+"-enabled");},setIndicator:function(al,am){this.clearIndicator();if(typeof this._mediaItemDomArray[al]==="undefined"){return;}var Y=this._view.createNode("span","viewport-item-indicator",g.NS);Y.set("innerHTML",am);this._mediaItemDomArray[al].append(Y);if(al%(this._layout.rows*this._layout.cols)===0){this.scrollTo(al);}},clearIndicator:function(){this.viewport.all(".yui3-videoplayer-carousel-viewport-item-indicator").remove();},destructor:function(){this.container.remove();},createNode:function(ap,al,an){var Y={img:true,input:true},ao=an?"-"+an:"",am;if(ap in Y){am=f.Node.create("<"+ap+' class="'+f.ClassNameManager.getClassName("videoplayer"+ao,al)+'"/>');}else{am=f.Node.create("<"+ap+' class="'+f.ClassNameManager.getClassName("videoplayer"+ao,al)+'"></'+ap+">");
}return am;},_touchStart:function(Y){if(this._touch.prevClientX!==null){return;}this._touch.prevClientX=Y.touches[0].clientX;this._touch.offset=0;this._touch.viewportMarginLeft=parseInt(this.viewport.getStyle("marginLeft"),10);this.viewport.addClass("touch");this._touch.startPageX=Y.touches[0].pageX;this._touch.startPageY=Y.touches[0].pageY;},_touchMove:function(am){var al,Y;if(this._touch.prevClientX===null||this._touch.ignore){return;}Y=this._isTouchMoveVertical(this._touch.startPageX,am.touches[0].pageX,this._touch.startPageY,am.touches[0].pageY);if(this._touch.offset===0&&Y){this._touch.ignore=true;return;}am.preventDefault();this._touch.offset+=this._touch.prevClientX-am.touches[0].clientX;this._touch.prevClientX=am.touches[0].clientX;this.viewport.setStyle("marginLeft",(this._touch.viewportMarginLeft-this._touch.offset)+"px");al=this.viewport.all(".yui3-videoplayer-carousel-viewport-item:not(.load)");al.setStyle("opacity",Math.min(0.6,Math.abs(this._touch.offset)/200));},_touchEnd:function(){if(this._touch.prevClientX===null){return;}var Y=100;this._touch.prevClientX=null;this._touch.ignore=false;this.viewport.removeClass("touch");this.viewport.all(".yui3-videoplayer-carousel-viewport-item:not(.load)").setStyle("opacity","");if(this._touch.offset>Y&&this.index<(this._itemCount-this._layout.cols)){this.navRight(this);f.fire("VideoPlayer.Carousel.touch","pc-swipe");}else{if(this._touch.offset<-Y&&this.index>0){this.navLeft(this);f.fire("VideoPlayer.Carousel.touch","pc-swipe");}else{if(this._touch.offset!==0){this.viewport.setStyle("marginLeft",this._touch.viewportMarginLeft+"px");}}}},_isTouchMoveVertical:function(al,an,Y,am){return((180/Math.PI)*Math.atan2(Math.abs(am-Y),Math.abs(an-al)))>=60;},_getThumbnailNode:function(al){var Y=f.Node.create("<img/>");Y.set("src",al);Y.set("width",this._dimensions.imageWidth);Y.set("height",this._dimensions.imageHeight);return Y;}});f.namespace("VideoPlatform").Carousel=g;function q(){q.superclass.constructor.apply(this,arguments);}q.NAME="Graph";q.NS="graph";q.ATTRS={};f.extend(q,f.Base,{initializer:function(Y){this.color=Y.color;this.width=Y.width;this.height=Y.height;this.graphHeight=Y.graphHeight;},render:function(al){var Y=f.Node.create('<canvas width="'+this.width+'" height="'+this.height+'"></canvas>');al.append(Y);this.canvas=Y;this.context=Y._node.getContext("2d");},appendSwitchReasonLogs:function(ap,ao){var am=0,Y,an,al;this.context.font="8pt Monospace";for(Y=0;Y<ap.length;Y++){if(ap[Y]!=="None"){am++;an=Math.floor(Y/3600)+":"+Math.floor((Y%3600)/60)+":"+((Y%3600)%60);al=an+" - Switched to "+ao[Y]+" kbps. Reason: "+ap[Y];this.context.fillText(al,10,this.graphHeight+15*am);}}},syncUI:function(ap,ao,Y){if(ap.length>=2){var aq,ar,al,am,an=this.context;if(ao===undefined&&Y===undefined){ao=ap[0];Y=ap[0];for(ar=1;ar<ap.length;ar++){aq=ap[ar];ao=Math.min(ao,aq);Y=Math.max(Y,aq);}}an.clearRect(0,0,this.width,this.graphHeight);an.save();an.translate(40,this.graphHeight-2);al=(Y-ao>0)?(this.graphHeight-4)/(Y-ao):1;am=(this.width-40)/240;an.scale(am,-1*al);an.beginPath();an.moveTo(0,ap[0]-ao);for(ar=1;ar<ap.length;ar++){an.lineTo(ar,ap[ar]-ao);}an.restore();an.save();an.lineWidth=3;an.lineCap="round";an.lineJoin="round";an.strokeStyle=this.color;an.stroke();an.font="8pt Monospace";an.fillStyle=this.color;an.fillText(Y,0,10);an.fillText(ao,0,this.graphHeight);an.restore();}},destructor:function(){}});f.namespace("VideoPlatform").Graph=q;function t(){t.superclass.constructor.apply(this,arguments);}t.NAME="DetailScreen";t.NS="detailscreen";t.ATTRS={};f.extend(t,f.Base,{log:function(al,Y){},initializer:function(Y){this._model=Y.model;this._view=Y.view;},render:function(am){var al=t.NS,Y=this,an=Y._view;Y._node=am;Y._container=an.createNode("div","container",al);Y._close=an.createNode("button","close",al);Y._wrapper=an.createNode("div","wrapper",al);Y._tableWrapper=an.createNode("div","table-wrapper",al);Y._detailsTable=an.createNode("table","details-table",al);Y._tb=an.createNode("tbody","details-table-body",al);Y._version=an.createNode("td","version",al);Y._hostingBucket=an.createNode("td","hosting-bucket",al);Y._hostingColo=an.createNode("td","hosting-colo",al);Y._hostingEnv=an.createNode("td","hosting-env",al);Y._uuid=an.createNode("td","uuid",al);Y._guid=an.createNode("td","guid",al);Y._lang=an.createNode("td","lang",al);Y._offNetwork=an.createNode("td","off-network",al);Y._profileLogLink=an.createNode("span","profile-log-link",al);Y._close.addClass("close");Y._host=null;Y._streamUrl=null;Y._appendTitleRow("About Yahoo Video Player");Y._appendRow("version","Version");if(Y._model.get("rendererType")==="flash"){if(!!document.createElement("canvas").getContext){Y._appendTitleRow("Bit Rate History");Y._appendGraphRow("currentStreamBitrate");Y._appendTitleRow("Download Speed History");Y._appendGraphRow("currentKbps");Y._appendTitleRow("Buffering History");Y._appendGraphRow("bufferSample");Y._appendTitleRow("Frame Rate History");Y._appendGraphRow("frameRate");}Y._appendTitleRow("Current Media");Y._appendRow("uuid","UUID");Y._appendRow("currentStreamBitrate","Bit Rate");Y._appendRow("quality-levels","Total Quality Levels");Y._appendRow("high-quality-ratio","High Quality Play Ratio");Y._appendRow("frameRate","Frame Rate");Y._appendRow("dropped-frames","Dropped Frames");Y._appendRow("download-speed","Download Speed");Y._appendRow("buffer-length","Buffer length / time ");Y._appendRow("stream-playback-rate","Stream Playback Rate");Y._appendRow("buffering-ratio","Buffering Ratio");Y._appendRow("total-memory","Memory Used");Y._appendRow("hw-decoding","Hardware Decoding");Y._appendRow("hw-rendering","Hardware Rendering");Y._appendRow("media-size","Media Size");}Y._appendTitleRow("Error");Y._appendRow("error-type","Error Type");Y._appendRow("error-code","Error Code");Y._appendRow("error-msg","Error Msg");Y._appendTitleRow("User Agent");Y._appendRow("os","OS");f.each(f.UA,function(ap,ao){if(ap!==undefined&&f.Lang.isNumber(ap)&&ap>0){Y._appendRow(ao,ao);}});Y._appendRow("flash","Adobe Flash");
Y._appendTitleRow("Hosting");Y._appendRow("hosting-bucket","Bucket");Y._appendRow("hosting-colo","Colo");Y._appendRow("hosting-env","Env");Y._appendTitleRow("Instance");Y._appendRow("guid","GUID");Y._appendRow("lang","Lang");Y._appendRow("off-network","Off Network");Y._close.set("innerHTML","X");Y._close.setAttribute("alt","Close Detail Overlay");Y._profileLogLink.set("innerHTML","Profile");Y._detailsTable.append(Y._tb);Y._tableWrapper.append(Y._detailsTable);Y._wrapper.append(Y._tableWrapper);Y._container.append(Y._wrapper);Y._container.append(Y._close);Y._container.append(Y._profileLogLink);am.append(Y._container);Y._bindUI();Y._syncUI();setTimeout(function(){Y._container.addClass("yui3-videoplayer-show");},10);},_appendGraphRow:function(Y){var an=f.Node.create("<td></td>"),am=f.Node.create("<tr></tr>"),al;an.addClass("graph");an.setAttribute("colspan",2);am.append(an);this._tb.append(am);al=new q({color:"white",width:280,height:30,graphHeight:30});al.render(an);this[Y+"-graph"]=al;},_appendTitleRow:function(al){var am=f.Node.create("<td></td>"),Y=f.Node.create("<tr></tr>");am.addClass("title");am.set("innerHTML",al);am.setAttribute("colspan",2);Y.append(am);this._tb.append(Y);},_appendRow:function(Y,al){this[Y]=this._view.createNode("td",Y,t.NS);var an=this[Y],am=f.Node.create("<tr></tr>");an.addClass("value");am.append(f.Node.create('<td class="label">'+al+":</td>"));am.append(an);this._tb.append(am);},_bindUI:function(){var am=this,al=am._view,Y=am._model;am._close.on("click",function(){al.set("activeOverlay",undefined);});Y.after("currentMediaChange",function(){this._bindToCurrentMedia();am._syncUI();},this);am._bindToCurrentMedia();Y.after("errorChange",function(){am._syncUI();},this);am._addCanvasClickHandler("currentStreamBitrate");am._addCanvasClickHandler("frameRate");am._addCanvasClickHandler("currentKbps");am._addCanvasClickHandler("bufferSample");am._profileLogLink.on("click",function(){al.openProfiler();});},_addCanvasClickHandler:function(Y){var am=this,al=Y+"-graph";if(this[al]){this[al].canvas.on("click",function(){var an=f.Node.create("<div></div>"),au=120,at=am._model.get("currentMedia").get("history"),ap=at[Y],ar=0,aw,av,aq,ao;if(Y==="currentStreamBitrate"){aq=at.streamSwitchReason;for(ao=0;ao<aq.length;ao++){if(aq[ao]!=="None"){ar++;}}au=120+ar*15;}aw=new q({color:"#333",width:520,height:au,graphHeight:120});aw.render(an);aw.syncUI(ap);if(Y==="currentStreamBitrate"){aw.appendSwitchReasonLogs(aq,ap);}av=aw.canvas._node.toDataURL();window.open(av);});}},_bindToCurrentMedia:function(){var Y=this._model,al=this;if(Y&&Y.get("currentMedia")){Y.get("currentMedia").after("mediaInfoChange",function(){al._syncUI();},this);}},_syncUI:function(){var ao=this._model,av=this,at=ao.get("hostingData"),au=ao.get("error"),am=ao.get("currentMedia"),al=f.UA,an,Y,ar,ap,aq;this.version.set("innerHTML",ao.get("version"));this.os.set("innerHTML",f.UA.os);this.flash.set("innerHTML",f.UA.flashMajor+"."+f.UA.flashMinor+"."+f.UA.flashRev);f.each(al,function(ax,aw){if(ax!==undefined&&f.Lang.isNumber(ax)&&ax>0){av[aw].set("innerHTML",ax);}});if(f.Lang.isObject(at)){this["hosting-bucket"].set("innerHTML",at.bucket);this["hosting-colo"].set("innerHTML",at.colo);this["hosting-env"].set("innerHTML",at.env);}this.guid.set("innerHTML",ao.get("guid"));this.lang.set("innerHTML",ao.get("lang"));this["off-network"].set("innerHTML",ao.get("isOffNetwork"));if(f.Lang.isObject(au)){this["error-type"].set("innerHTML",au.type);this["error-code"].set("innerHTML",au.code||"");this["error-msg"].set("innerHTML",au.message||"");}if(am&&this.uuid){an=am;Y=an.get("id");if(Y!==null){this.uuid.set("innerHTML",Y);}}if(am&&am.get("mediaInfo")&&ao.get("rendererType")==="flash"){an=ao.get("currentMedia");ar=an.get("mediaInfo");if(ar.currentStreamBitrate!==null){this.currentStreamBitrate.set("innerHTML",ar.currentStreamBitrate+" kbps");}if(ar.qualityLevels!==null){this["quality-levels"].set("innerHTML",ar.qualityLevels);}if(ar.highestQualityPlaybackRatio!==null){this["high-quality-ratio"].set("innerHTML",ar.highestQualityPlaybackRatio+" %");}if(ar.frameRate!==null){this.frameRate.set("innerHTML",ar.frameRate+" fps");}if(ar.droppedFrames!==null){this["dropped-frames"].set("innerHTML",ar.droppedFrames);}if(ar.currentKbps!==null){this["download-speed"].set("innerHTML",ar.currentKbps+" kbps");}if(ar.bufferLength!==null&&ar.bufferTime!==null){this["buffer-length"].set("innerHTML",ar.bufferLength+" sec / "+ar.bufferTime+" sec");}if(ar.playbackBytesPerSecond!==null){this["stream-playback-rate"].set("innerHTML",ar.playbackBytesPerSecond+" kbps");}if(ar.bufferingRatio!==null){this["buffering-ratio"].set("innerHTML",(ar.bufferingRatio).toFixed(2)+" %");}if(ar.totalMemory!==null){this["total-memory"].set("innerHTML",ar.totalMemory+" MB");}if(ar.hwDecoding!==null){ap=(ar.hwDecoding===true)?"Yes":"No";this["hw-decoding"].set("innerHTML",ap);}if(ar.hwRendering!==null){aq=(ar.hwRendering===true)?"Yes":"No";this["hw-rendering"].set("innerHTML",aq);}if(ar.mediaWidth!==null&&ar.mediaHeight!==null){this["media-size"].set("innerHTML",ar.mediaWidth+" x "+ar.mediaHeight);}if(this["currentStreamBitrate-graph"]){if(ar.minBitRate&&ar.maxBitRate){this["currentStreamBitrate-graph"].syncUI(an.get("history").currentStreamBitrate,ar.minBitRate,ar.maxBitRate);}else{this["currentStreamBitrate-graph"].syncUI(an.get("history").currentStreamBitrate);}}if(this["bufferSample-graph"]){this["bufferSample-graph"].syncUI(an.get("history").bufferSample);}if(this["frameRate-graph"]){this["frameRate-graph"].syncUI(an.get("history").frameRate);}if(this["currentKbps-graph"]){this["currentKbps-graph"].syncUI(an.get("history").currentKbps);}}},destructor:function(){this._container.removeClass("yui3-videoplayer-show");var Y=this;setTimeout(function(){Y._container.remove();},500);}});f.namespace("VideoPlatform").DetailScreen=t;function Z(){Z.superclass.constructor.apply(this,arguments);}Z.NAME="InfoScreen";Z.NS="infoscreen";Z.ATTRS={};f.extend(Z,f.Base,{initializer:function(Y){this._model=Y.model;
this._view=Y.view;},render:function(az){this._node=az;var aB=Z.NS,au=this._view,aq=this,ar=au._controller.getStrings(),al=az.get("offsetWidth"),ap=az.get("offsetHeight"),aw=15,aE=3,aA=al-(aw*3)-(aE*2),av=this._view.createNode("div","container",aB),ao=this._view.createNode("div","tint",aB),ay=this._view.createNode("div","top",aB),Y=this._view.createNode("h3","now-playing",aB),an=this._view.createNode("a","image-link",aB),am=this._view.createNode("div","left",aB),aF=this._buildImage(aA),aC=this._buildRight(aA),ax=this._view.createNode("button","close",aB),at=this._buildCcComplaintsLink(aA,ap),aD=ap-40;av.set("offsetHeight",aD);this._container=av;this.imgLink=an;this.close=ax;an.append(aF);ax.addClass("close");ax.set("innerHTML","X");am.append(an);ay.append(Y);ay.append(am);ay.append(aC);Y.set("innerHTML",ar.NOW_PLAYING);ay.append(ax);av.append(ao);av.append(ay);if(at){av.append(at);}az.append(av);this._bindUI();setTimeout(function(){aq._container.addClass("yui3-videoplayer-show");},5);if(this._model.get("rendererType")==="html"){this._view._hideVideoTag();}},_buildRight:function(ap){var am=this._model.get("currentMedia"),az=0,av=typeof(am.get("title"))==="string"?am.get("title"):"",Y=typeof(am.get("description"))==="string"?am.get("description"):"",al=this._node.get("offsetHeight"),an=Z.NS,au=this._view.createNode("h3","title",an),aq=this._view.createNode("p","desc",an),ay=this._view.createNode("table","share",an),ao=this._view.createNode("tbody","share-body",an),at=this._buildLink(),ar=this._buildEmbed(),ax=this._buildFbLink(),aw=this._view.createNode("div","right",an);aw.set("offsetWidth",ap*0.6);au.set("innerHTML",av);au.setAttribute("tabIndex",-1);aq.set("innerHTML",Y);if(this._view.get("screenSize")==="LARGE"){az=(al-140)>0?al-140:0;}else{az=(al-60)>0?al-60:0;}au.setStyle("maxHeight",az*0.4);aq.setStyle("maxHeight",az*0.6);aw.append(au);aw.append(aq);if(at||ar){if(at){ao.append(at);}if(ar){ao.append(ar);}ay.append(ao);aw.append(ay);}if(ax){aw.append(ax);}return aw;},_buildFbLink:function(){var aq=this._view._controller.getStrings(),an=this._model.get("currentMedia"),ap=an.get("shareUrl"),am=Z.NS,ao=this._view.createNode("a","fb-link",am),al=this._view.createNode("span","fb-icon",am),Y=this._view.createNode("span","fb-share",am);if(ap){Y.set("innerHTML",aq.SHARE_ON_FACEBOOK);ao.set("target","_blank");ao.set("href",f.substitute(s.FACEBOOK_URL_TEMPLATE,{title:encodeURIComponent(an.get("title")),shareUrl:encodeURIComponent(ap)}));ao.append(al);ao.append(Y);return ao;}return false;},_buildLink:function(){var ar=this._view._controller.getStrings(),ap=this._model.get("currentMedia"),aq=ap.get("shareUrl"),ao=Z.NS,an=this._view.createNode("tr","link",ao),Y=this._view.createNode("td","link-label",ao),am=this._view.createNode("td","link-text-box-td",ao),al=this._view.createNode("input","link-text-box",ao);if(aq){Y.set("innerHTML",ar.LINK_COLON);al.set("value",aq);al.setAttribute("readonly","readonly");am.append(al);an.append(Y);an.append(am);return an;}return false;},_buildEmbed:function(){var at=this._view._controller.getStrings(),am=this._model.get("currentMedia"),al=am.get("embedCode"),ar=am.get("embeddable"),an=Z.NS,aq=this._view.createNode("tr","embed",an),Y=this._view.createNode("td","embed-label",an),ap=this._view.createNode("td","embed-text-box-td",an),ao=this._view.createNode("input","embed-text-box",an);if(al&&ar){Y.set("innerHTML",at.EMBED_COLON);ao.set("value",al);ao.setAttribute("readonly","readonly");ap.append(ao);aq.append(Y);aq.append(ap);return aq;}return false;},_buildImage:function(ar){var ao=this._model.get("currentMedia"),Y=ao.get("images"),ap=this._node.get("offsetHeight"),al=null,an=ar*0.4,am=Z.NS,aq=new Image();if(Y&&typeof(Y.medium)==="string"){al=this._view.createNode("img","image",am);aq.onload=function(){var au=aq.width,at=aq.height;al.set("src",Y.medium);al.set("offsetWidth",an);al.set("offsetHeight",an*at/au);};aq.src=Y.medium;}else{al=this._view.createNode("div","image",am);al.set("offsetWidth",an);al.set("offsetHeight",ap*0.4);}return al;},_buildCcComplaintsLink:function(an,Y){var ap=this._view._controller.getStrings(),ao=Z.NS,am=this._view.createNode("a","closed-captions-complaint-link",ao),ar=this._model.get("ccAvailable"),aq=this._model.get("lang"),al="us";if(an<250||Y<170){return false;}if(ar&&(aq==="en-US"||aq==="es-US")){am.set("innerHTML",ap.CLOSED_CAPTION_COMPLAINTS);am.set("target","_blank");if(aq==="es-US"){al="e1";}am.set("href",f.substitute(s.CC_COMPLAINTS_URL_TEMPLATE,{region:al,lang:aq.toLowerCase()}));return am;}return false;},_closeScreen:function(){var Y=this._model;if(Y.get("rendererType")==="html"){this._view._showVideoTag();}Y.set("activeScreenStr",undefined);},_bindUI:function(){var aq=this._container,am=this,Y=this._model,ap=this.close,ao=this.imgLink,al=aq.all(".yui3-videoplayer-infoscreen-share input"),an=aq.one(".yui3-videoplayer-infoscreen-fb-link");if(f.Lang.isValue(ap)){ap.on("click",function(){am._closeScreen();},this);}if(f.Lang.isValue(ao)){ao.on("click",function(){Y.fire("uiInteract",{source:this.constructor.NS+"Thumb"});am._closeScreen();},this);}if(f.Lang.isValue(al)){al.on("click",function(ar){var au=ar.target,at=au._node.className.match(/yui3-videoplayer-[\w]*-([\w]*)-text-box/)[1].replace(/^([\w])(.*)/,function(av,ax,aw){return this.constructor.NS+ax.toUpperCase()+aw;});au.focus();au.select();Y.fire("uiInteract",{source:at});},this);}if(f.Lang.isValue(an)){an.on("click",function(){Y.fire("uiInteract",{source:this.constructor.NS+"Facebook"});},this);}},destructor:function(al){var Y=this;this._container.removeClass("yui3-videoplayer-show");if(f.UA.ie>0&&f.UA.ie<9){Y._container.remove();if(al){al();}}else{setTimeout(function(){Y._container.remove();if(al){al();}},300);}}});f.namespace("VideoPlatform").InfoScreen=Z;function p(){p.superclass.constructor.apply(this,arguments);}p.NAME="EndScreen";p.NS="endscreen";p.ATTRS={};p.DIMENSIONS={LARGE:{CONTAINER_PADDING:35,MIN_WIDTH:200,MIN_HEIGHT:200},MEDIUM:{CONTAINER_PADDING:35,MIN_WIDTH:200,MIN_HEIGHT:200},SMALL:{CONTAINER_PADDING:35,MIN_WIDTH:200,MIN_HEIGHT:160}};
p.END_SCREEN_CAROUSEL_DIMENSIONS={LARGE:{ITEM_WIDTH:208,ITEM_HEIGHT:117,IMAGE_WIDTH:208,IMAGE_HEIGHT:117,HORIZONTAL_SPACING:8,VERTICAL_SPACING:4,MARGIN:0},MEDIUM:{ITEM_WIDTH:208,ITEM_HEIGHT:117,IMAGE_WIDTH:208,IMAGE_HEIGHT:117,HORIZONTAL_SPACING:8,VERTICAL_SPACING:4,MARGIN:0},SMALL:{ITEM_WIDTH:157,ITEM_HEIGHT:88,IMAGE_WIDTH:157,IMAGE_HEIGHT:88,HORIZONTAL_SPACING:2,VERTICAL_SPACING:1}};f.extend(p,f.Base,{initializer:function(Y){this._model=Y.model;this._view=Y.view;this.mode="REPLAY";this._controller=Y.view._controller;this.i18n=this._controller.getStrings();this.screenSize=this._view.get("screenSize");this.dimensions=p.DIMENSIONS[this.screenSize];this._config=f.Lang.isObject(this._model.get("endscreen"))||{};this._useCarousel=(this._model.get("endScreenVideos").get("mediaItems")).length>1;if(this._config&&this._config.on){this.on(this._config.on);}},render:function(ao){var an=this,am=p.NS,Y=an._getMediaItem(),ap,al;if(an.mode==="PLAY_NEXT"){an._continue();return;}an.renderView(ao,Y,am);if(an.mode==="REPLAY"&&this._model.get("carousel")){an._hidePlaylistCarousel(an.container);}al=an._model.get("endScreenVideos").get("mediaItems");al.add(Y,0);al=al.toArray();this._useCarousel=al.length>1;if(this._isValidPlayerSize(ao)===true){if(this._useCarousel){setTimeout(function(){an._renderCarousel(al,am);},20);}else{an._renderWatchedView(Y,am);}}else{ap=an._view.createNode("div","blank-node",am);an._setContainerHeight(ap);an.container.prepend(ap);}an.container.addClass("show");an._bindUI();},_isValidPlayerSize:function(Y){return(this.dimensions.MIN_HEIGHT<=Y.get("offsetHeight")&&this.dimensions.MIN_WIDTH<=Y.get("offsetWidth"));},_getMediaItem:function(){var ap=this,Y=ap._model,ao=ap._config.mediaItem||null,am,an,al;if(ao){am=new n(ao);if(am.images){am.images.large=am.images.medium=am.images.thumbnail;}}else{an=Y.get("playlistPosition");al=Y.get("playlist").items().item(an+1);if(al&&Y.get("continuousPlay")){ap.mode="PLAY_NEXT";am=al;}else{ap.mode="REPLAY";am=Y.get("playlist").items().item(an);}}return am;},_hidePlaylistCarousel:function(Y){var al=Y.ancestor(".yui3-videoplayer-content");al.one(".yui3-videoplayer-playlist-carousel").setStyle("display","none");al.one(".yui3-videoplayer-carousel-title").removeClass("yui3-videoplayer-show");al.one(".yui3-videoplayer-main").setStyle("height","100%");},renderView:function(an,al,am){var ao=this._view,Y=ao.createNode("div","container",am);an.append(Y);this.container=Y;if(this._model.get("rendererType")==="html"){ao._hideVideoTag();}this._model.fire("uiInteract",{source:"es-view"});},_renderWatchedView:function(am,an){var ax=this,au=ax._view,al=ax.container,at=am.get("images")||null,aw=at&&(at.thumbnail||at.small||at.medium||at.large)||I.PLAYER_ASSETS_URL+"video_thumb_nopic.png",ao=au.createNode("img","watched-img",an),aq=f.Node.create("<div/>").setAttribute("class","overlay"),av=f.Node.create("<button/>").setAttribute("class","replay-button"),Y=f.Node.create("<span/>").setAttribute("class","replay-text").setAttribute("innerHTML",ax.i18n.REPLAY),ap=au.createNode("div","watched",an),ar=au.createNode("div","watched-wrapper",an);aq.append(av);aq.append(Y);ao.once("load",function(){ax._positionReplayViewNode(ap);ar.setStyle("visibility","visible");});ao.setAttribute("src",aw);ax._resizeImage(ao);ap.append(ao);ap.append(aq);ar.append(ap);ar.setStyles({"width":p.END_SCREEN_CAROUSEL_DIMENSIONS[ax.screenSize].IMAGE_WIDTH,"visibility":"hidden","overflow":"auto"});al.prepend(ar);},_resizeImage:function(am){var al=this,ao=p.END_SCREEN_CAROUSEL_DIMENSIONS[al.screenSize],Y=al._useCarousel?ao.IMAGE_HEIGHT+"px":"auto",an=al._useCarousel?ao.IMAGE_WIDTH+"px":"100%";am.setStyles({"height":Y,"width":an});},_positionReplayViewNode:function(Y){var al=0-Math.round(Y.get("region").height/2);Y.setStyle("marginTop",al);},_setContainerHeight:function(Y){Y.setStyle("height",this.container.get("offsetHeight"));},_renderCarousel:function(am,ao){var Y=this._view.createNode("div","carousel-node",ao),an=this.screenSize,al=new g({"view":this,"mediaItems":am,"pltype":"endScreen","showMetadata":true,"showNavigation":false,"dimensions":{itemWidth:p.END_SCREEN_CAROUSEL_DIMENSIONS[an].ITEM_WIDTH,itemHeight:p.END_SCREEN_CAROUSEL_DIMENSIONS[an].ITEM_HEIGHT,imageWidth:p.END_SCREEN_CAROUSEL_DIMENSIONS[an].IMAGE_WIDTH,imageHeight:p.END_SCREEN_CAROUSEL_DIMENSIONS[an].IMAGE_HEIGHT,horizontalSpacing:p.END_SCREEN_CAROUSEL_DIMENSIONS[an].HORIZONTAL_SPACING,verticalSpacing:p.END_SCREEN_CAROUSEL_DIMENSIONS[an].VERTICAL_SPACING,carouselMargin:p.END_SCREEN_CAROUSEL_DIMENSIONS[an].MARGIN}});this._setContainerHeight(Y);this.container.prepend(Y);al.render(Y);},destructor:function(){var Y=this;if(f.UA.ie>0&&f.UA.ie<9){Y.container.remove();}else{Y.container.removeClass("show");setTimeout(function(){Y.container.remove();},500);}},_replayVideo:function(){if(this._model.get("rendererType")==="html"){this._view._showVideoTag();}this._view._model.set("activeScreenStr",undefined);this._model.fire("uiInteract",{source:"es-rpl"});},_bindUI:function(){var Y=this,al;al=f.one(".yui3-videoplayer-endscreen-watched");if(al){al.on(["click","touchstart"],Y._replayVideo,Y);}},_continue:function(){var Y=this;setTimeout(function(){if(Y._model.get("rendererType")==="html"){Y._view._showVideoTag();}if(Y.mode==="PLAY_NEXT"){Y._view._controller.playNext();}else{Y._view._model.set("activeScreenStr",undefined);}},500);}});f.namespace("VideoPlatform").EndScreen=p;function u(){u.superclass.constructor.apply(this,arguments);}u.NAME="HotkeyOverlay";u.NS="hotkeyoverlay";u.ATTRS={};f.extend(u,f.Base,{log:function(al,Y){},initializer:function(Y){this._view=Y.view;},render:function(am){var al=this,an=al._view,Y=u.NS;al._node=am;al.container=an.createNode("div","container",Y);al.wrapper=an.createNode("div","table-wrapper",Y);al.table=an.createNode("table","table",Y);al.close=an.createNode("button","close",Y);al.title=an.createNode("h2","title",Y);al._tb=f.Node.create("<tbody></tbody>");al.close.set("innerHTML","X");al.close.setAttribute("alt","Close Hotkey Menu");
al.close.addClass("close");al.title.set("innerHTML","Hotkey Menu");al.title.setAttribute("tabIndex",-1);al._appendRow("Question Mark:","Open Hotkey Menu");al._appendRow("Esc:","Close Menu");al._appendRow("Shift + Space Bar:","Play / Pause");al._appendRow("Ctrl + Shift + M:","Mute / Un-Mute");al._appendRow("Ctrl + Shift + N:","Next Video");al.table.append(al._tb);al.wrapper.append(al.title);al.wrapper.append(al.table);al.wrapper.append(al.close);al.container.append(al.wrapper);am.append(al.container);al._bindUI();setTimeout(function(){al.container.addClass("yui3-videoplayer-show");},10);},_bindUI:function(){var Y=this._view;this.close.on("click",function(al){Y.set("activeOverlay",undefined);al.preventDefault();});},_appendRow:function(al,Y){var ao=f.Node.create('<td class="label" align="left"></td>'),am=f.Node.create('<td class="value" align="left"></td>'),an=f.Node.create("<tr></tr>");ao.set("innerHTML",al);am.set("innerHTML",Y);an.append(ao);an.append(am);this._tb.append(an);},destructor:function(){this.container.removeClass("yui3-videoplayer-show");var Y=this;setTimeout(function(){Y.container.remove();},400);}});f.namespace("VideoPlatform").HotkeyOverlay=u;function G(){G.superclass.constructor.apply(this,arguments);}G.NAME="Controls";G.NS="controls";G.ATTRS={};G.VOLUME_INCREMENT=0.1;G.SEEK_INCREMENT=5;G.VISUAL_SEEK_COLLAGE_ROWS=10;G.VISUAL_SEEK_COLLAGE_COLS=10;f.extend(G,f.Base,{initializer:function(Y){var al=document.createElement("p").style;this._model=Y.model;this._controller=Y.controller;this._view=Y.view;this.i18n=this._controller.getStrings();this._controller.setControlsObj(this);this.controlsAPI=new v(this._model,this._controller);this.playlistAPI=new V(this._model,this._controller);this._isIE9OrEarlier=f.UA.ie>0&&f.UA.ie<10;this._transitionsSupported="transition" in al||"WebkitTransition" in al||"MozTransition" in al||"msTransition" in al||"OTransition" in al;this._node=null;this._controlsNode=null;this._barNode=null;this._playPauseNode=null;this._seekNode=null;this._seekBufferNode=null;this._seekProgressNode=null;this._seekHandleNode=null;this._seekTimeNode=null;this._settingsNode=null;this._settingsPanelNode=null;this._sizeSmallNode=null;this._sizeFullNode=null;this._volumeBarsNode=null;this._muteNode=null;this._ccOnNode=null;this._ccOffNode=null;this._idleTimer=null;this._settingsPanelTimer=null;this._settingsTimer=null;this._totalSecs=null;if(f.UA.gecko>0&&f.UA.os==="macintosh"){this._lastPlayTime=0;}},render:function(aw){var ar=this,an=null,Y=null,aq=null,ay=null,aC=null,am=null,aB=null,aD=null,ax=null,al=null,ap=null,az=null,ao=null,av=null,at=this._model.get("chromeless"),aA=null,au=null;ar._node=aw;ar._barNode=ar._createNode("div","bar");ar._seekNode=ar._createNode("div","seek");an=ar._createNode("div","main");ar._playPauseNode=ar._addButton("item play-pause yui3-videoplayer-transparent","","span");an.append(ar._playPauseNode);aq=ar._createNode("div","slider");ar._sliderNode=aq;ar._seekBufferNode=ar._createNode("div","buffer");aq.append(ar._seekBufferNode);ar._seekProgressNode=ar._createNode("div","progress");aq.append(ar._seekProgressNode);ar._seekHandleNode=ar._createNode("div","handle");aq.append(ar._seekHandleNode);ar._seekNode.append(aq);ar._seekTimeNode=ar._createNode("div","time show");ar._seekNode.append(ar._seekTimeNode);if(ar._model.get("isVisualSeekEnabled")===true){ar._visualSeekNode=ar._createNode("div","vseek");ar._visualSeekThumbNode=ar._createNode("div","vseek-thumb");ar._visualSeekNode.append(ar._visualSeekThumbNode);ar._visualSeekTimeNode=ar._createNode("div","vseek-time");ar._visualSeekNode.append(ar._visualSeekTimeNode);ar._seekNode.append(ar._visualSeekNode);}ar._settingsNode=ar._createNode("div","item settings yui3-videoplayer-transparent");ar._settingsNode.append(ar._createNode("span",""));Y=ar._createNode("div","aux");Y.append(ar._settingsNode);aC=ar._createNode("tbody","");aC.append(ar._getShareEmbedNode());aC.append(ar._getEmbedLinkNode());aC.append(ar._getEmbedCodeNode());aC.append(ar._getClosedCaptionsNode());ar._sizeSmallNode=ar._addButton("small on","");ar._sizeFullNode=ar._addButton("full","");aD=ar._createNode("td","");aD.append(ar._sizeSmallNode);aD.append(ar._sizeFullNode);ax=ar._createNode("th","");ax.set("innerHTML",this.i18n.SIZE_LC);aB=ar._createNode("tr","size");aB.append(ax);aB.append(aD);aC.append(aB);ao=ar._createNode("div","bars");ao.append(ar._createNode("div","bar-1"));ao.append(ar._createNode("div","bar-2"));ao.append(ar._createNode("div","bar-3"));ao.append(ar._createNode("div","bar-4"));ao.append(ar._createNode("div","bar-5"));ao.append(ar._createNode("div","bar-6"));ar._volumeBarsNode=ao;ar._muteNode=ar._addButton("mute","Mute");az=ar._createNode("td","");ar._muteNode=ar._addButton("mute","","span");az.append(ar._muteNode);az.append(ar._volumeBarsNode);ap=ar._createNode("th","");ap.set("innerHTML",this.i18n.VOLUME_LC);al=ar._createNode("tr","volume");al.append(ap);al.append(az);aC.append(al);ay=ar._createNode("table","");ay.append(aC);ar._settingsPanelNode=ar._createNode("div","settings-panel");am=ar._createNode("div","settings-panel-box yui3-videoplayer-transparent");ar._settingsPanelNode.append(ay);am.append(ar._settingsPanelNode);ar._barNode.append(an);ar._barNode.append(ar._seekNode);ar._barNode.append(Y);if(this._isIE9OrEarlier){av=ar._createNode("div","ie-gradient");ar._node.append(av);}ar._node.append(ar._barNode);ar._node.append(am);if(f.UA.mobile!==null||at===true){aw.setStyle("display","none");}au=ar._node.ancestor();if(au){aA=ar._createNode("div","accessible-controls");aA.append(ar._addButton("play","Play"));aA.append(ar._addButton("seek-back","Seek Back 5 Seconds"));aA.append(ar._addButton("seek-forward","Seek Forward 5 Seconds"));aA.append(ar._addButton("volume-up","Volume Up"));aA.append(ar._addButton("volume-down","Volume Down"));aA.append(ar._addButton("mute","Mute"));aA.append(ar._addButton("next-video","Next Video"));aA.append(ar._addButton("hotkey-menu","Open Hotkey Menu"));aA.setStyle("display","none");
ar._node.insert(aA,"before");}if(ar._isIE9OrEarlier){ar._node.all("*").setAttribute("unselectable","on");}ar._bindUI();ar._syncUI();setTimeout(function(){ar._view._node.one(".accessible-controls").setStyle("display","block");},300);ar._show();},inAdContext:function(){var Y=this._model.get("yvapState");if((Y===YVAPEvents.AD_START)||(Y===YVAPEvents.AD_PROGRESS)){return true;}return false;},_play:function(){if(!this._model.get("isPlaying")){this.controlsAPI.play();}else{this.controlsAPI.pause();}},_volumeUp:function(){this.controlsAPI.setVolume(this.controlsAPI.getVolume()+G.VOLUME_INCREMENT);},_volumeDown:function(){this.controlsAPI.setVolume(this.controlsAPI.getVolume()-G.VOLUME_INCREMENT);},_nextVideo:function(){var Y=this.playlistAPI.getPosition(),al=this.playlistAPI.getSize()-1;if(Y<al){this.playlistAPI.setPosition(Y+1);}},_hotkeyMenu:function(){var Y=this._view,al;if(Y.get("activeOverlay")&&Y.get("activeOverlay").name==="HotkeyOverlay"){Y.set("activeOverlay",undefined);}else{al=new u({view:Y});Y.set("activeOverlay",al);}},_bindUI:function(){var at=this,am=at._model,an=f.one(document),aq=at._view._node,al=null,ap=null,ar=null,ao=null,Y=null;at._controlsNode=at._node;at._barNode=at._controlsNode.one(".bar");al=at._barNode.one(".main");ap=at._barNode.one(".aux");at._settingsPanelNode=at._controlsNode.one(".settings-panel-box");at._hotkeyNode=aq.one(".hotkey-menu");at._idleTimer=null;at._settingsPanelTimer=null;at._settingsTimer=null;at._bufferTimer=null;at._bufferTimerStarted=false;at._controlsNode.addClass("hide");an.on("mousemove",function(au){at._seekDragChange(au);at._volumeDragChange(au);},this);an.on("mouseup",function(au){at._seekDragEnd(au);at._volumeDragEnd(au);},this);aq.on("mousemove",at._show,at);aq.on("mouseleave",at._hide,at);at._controlsNode.on("hover",at._controlsMouseEnter,at._controlsMouseLeave,at);at._playPauseNode.on("click",at._playPauseChange,at);at._seekNode.on("mouseenter",function(){at._seekTimeNode.addClass("show");});at._settingsPanelNode.on("hover",null,at._hideSettingsAfterDelay,at);at._settingsNode.on("click",at._settingsClick,at);at._sizeSmallNode.on("click",at._sizeSmallClick,at);at._sizeFullNode.on("click",at._sizeFullClick,at);am.after("rendererReadyChange",function(){if(!at._model.get("rendererReady")){return;}at._controller._renderer.after(af.FULLSCREEN_ENTER,at._setFullSizeButton,at);at._controller._renderer.after(af.FULLSCREEN_EXIT,at._setSmallSizeButton,at);},at);at._muteNode.on("click",at._muteClick,at);at._volumeBarsNode.on("mousedown",at._volumeDragStart,at);at._seekNode.on("mousedown",at._seekDragStart,at);if(am.get("isVisualSeekEnabled")===true){Y=at._sliderNode;Y.on("mouseenter",at._onVisualSeekMouseEnter,this);Y.on("mouseleave",at._onVisualSeekMouseLeave,this);Y.on("mousemove",at._moveVisualSeek,this);}am.after("durationChange",function(au){at._updateDuration(au.newVal);});am.after("isPlayingChange",function(){at._setCloseCaptions();at._setShareUrlEmbedCode();at._volumeBarsChange(at.controlsAPI.getVolume());at._updateSeekBarState();at._syncUI();if(am.get("isVisualSeekEnabled")===true){at._updateVisualSeek();}},at);am.after("yvapStateChange",function(au){if(au.newVal===YVAPEvents.AD_START){at._setShareUrlEmbedCode();at._volumeBarsChange(at.controlsAPI.getVolume());at._syncUI();at._hideVisualSeek();}},at);am.after("muteChange",function(){at._syncUI();},at);am.after("currentTimeChange",function(au){at.playTimeChange(au.newVal,at._totalSecs);if(am.get("isPlaying")&&at._bufferTimerStarted===false){at._bufferTimerStarted=true;at._startBufferTimer();}},at);am.after("adPlaybackPositionChange",function(au){at.playTimeChange(au.newVal,at.adTotalSecs);},at);am.after("currentMediaChange",function(){at._setShareUrlEmbedCode();at._setCloseCaptions();at._updateSeekBarState();at._bufferTimeChange(0);if(am.get("isVisualSeekEnabled")===true){at._resetVisualSeek();}},at);am.after("showClosedCaptionsChange",function(au){if(f.Lang.isValue(au.newVal)){at._updateClosedCaptionButtons(au.newVal);}},at);am.after("playerStateChange",function(au){if(au.newVal==="playbackComplete"){at._clearBufferTimer();}},at);at._settingsPanelNode.setStyle("display","none");if(f.UA.mobile!==null){at._settingsPanelNode.one(".volume").addClass("disable");}if(f.UA.mobile===null&&am.get("rendererType")==="html"){ao=aq.one(".yui3-videoplayer-video");ao.on("click",at._playPauseChange,at);}at._settingsPanelNode.one(".fb-icon").on("click",function(){at._fireUIInteractBeacon("ctrl-Facebook");});at._bindAccessibleControls();at._startIdleTimer();if(!I.isFullscreenSupported()){ar=at._settingsPanelNode.one(".size");ar.addClass("disable");}},_syncUI:function(){var am=this,Y=am._model,al=am._view;setTimeout(function(){if(al.get("activeOverlay")&&al.get("activeOverlay").name==="HotkeyOverlay"){am._hotkeyNode.set("innerHTML","Close Hotkey Menu");}else{am._hotkeyNode.set("innerHTML","Open Hotkey Menu");}if(!am.controlsAPI.getMute()){am._muteNode.removeClass("on");}else{am._muteNode.addClass("on");}},50);if(Y.get("isPlaying")){am._playPauseNode.removeClass("play");am._playPauseNode.addClass("pause");}else{am._playPauseNode.removeClass("pause");am._playPauseNode.addClass("play");}am._syncSizeButtons();},_startIdleTimer:function(){if(f.Lang.isNumber(f.UA.gecko)&&(f.UA.gecko>0)&&(f.UA.os==="macintosh")){return;}var Y=this;if(Y._idleTimer){clearTimeout(Y._idleTimer);Y._idleTimer=null;}if(Y._seekNode.hasClass("drag")||Y._controlsNode.hasClass("active")){return;}Y._idleTimer=setTimeout(function(){Y._hide();Y._idleTimer=null;},3000);},_startBufferTimer:function(){var Y=this,al=Y._controller.getRenderer();Y._bufferTimer=setInterval(function(){var an=al.getBuffered(),am;if(an){am=Math.floor(an.end);}else{Y._clearBufferTimer();return;}Y._bufferTimeChange(am);},1000);},_clearBufferTimer:function(){var Y=this;Y._bufferTimerStarted=false;if(Y._bufferTimer){clearInterval(Y._bufferTimer);}},_show:function(){var Y=this;if(!Y._controlsNode.hasClass("show")){Y._barNode.removeClass("disable");if(Y._transitionsSupported){setTimeout(function(){Y._controlsNode.addClass("show");
Y._model.set("showControls",true);},1);}else{Y._controlsNode.addClass("show");Y._model.set("showControls",true);}}Y._startIdleTimer();},_hide:function(){if(f.Lang.isNumber(f.UA.gecko)&&(f.UA.gecko>0)&&(f.UA.os==="macintosh")){this._hideSettingsAfterDelay();return;}var Y=this;if(Y._seekNode.hasClass("drag")||Y._controlsNode.hasClass("active")){return;}if(Y._idleTimer){clearTimeout(Y._idleTimer);Y._idleTimer=null;}if(Y._seekTimeNode.hasClass("show")&&Y._transitionsSupported){Y._seekTimeNode.removeClass("show");setTimeout(function(){Y._hideControls();},700);}else{Y._hideControls();}},_hideControls:function(){var Y=this;if(Y._idleTimer||Y._controlsNode.hasClass("active")){return;}Y._controlsNode.removeClass("show");Y._hideSettings();if(Y._transitionsSupported){setTimeout(function(){if(!Y._controlsNode.hasClass("show")){Y._barNode.addClass("disable");Y._seekTimeNode.addClass("show");Y._model.set("showControls",false);}},200);}else{Y._barNode.addClass("disable");Y._seekTimeNode.addClass("show");Y._model.set("showControls",false);}},_controlsMouseEnter:function(){this._controlsNode.addClass("active");},_controlsMouseLeave:function(){this._controlsNode.removeClass("active");this._startIdleTimer();},_bindAccessibleControls:function(){var au=this,al=au._view._node.one(".accessible-controls"),aq=al.one(".play"),at=al.one(".seek-back"),ap=al.one(".seek-forward"),ao=al.one(".volume-up"),an=al.one(".volume-down"),Y=al.one(".mute"),am=al.one(".next-video"),ar=al.one(".hotkey-menu");aq.on("click",function(){au._play();if(au._model.get("isPlaying")){aq.set("innerHTML","Pause");}else{aq.set("innerHTML","Play");}});at.on("click",function(){au.controlsAPI.seek(au.controlsAPI.getCurrentTime()-G.SEEK_INCREMENT);});ap.on("click",function(){au.controlsAPI.seek(au.controlsAPI.getCurrentTime()+G.SEEK_INCREMENT);});ao.on("click",function(){au._volumeUp();});an.on("click",function(){au._volumeDown();});Y.on("click",function(){au.controlsAPI.setMute(!au.controlsAPI.getMute());if(!au.controlsAPI.getMute()){Y.set("innerHTML","Mute");}else{Y.set("innerHTML","Unmute");}});am.on("click",function(){au._nextVideo();});ar.on("click",function(){au._hotkeyMenu();});au._syncUI();},_updateDuration:function(Y){this._totalSecs=Y;},_updateSeekBarState:function(){var Y=this,al=Y._model.get("currentMedia");if(al){if(al.get("isLive")===true||al.get("isRTX")===true){Y._seekNode.addClass("disable");}else{Y._seekNode.removeClass("disable");}}},enableMaxMin:function(Y){return Y;},_bufferTimeChange:function(Y){var al=this,am;if(!al._totalSecs){al._clearBufferTimer();return;}if(typeof Y==="undefined"||Y===null){al._clearBufferTimer();return;}if(Y>=Math.floor(al._totalSecs)){Y=al._totalSecs;}am=Y/al._totalSecs;al._seekBufferNode.setStyle("width",(am*100)+"%");},setAdDuration:function(Y){if(Y){this.adTotalSecs=Y;}},playTimeChange:function(an,Y){if(!Y){return;}if(f.UA.gecko>0&&f.UA.os==="macintosh"){if(an>this._lastPlayTime&&an-this._lastPlayTime<=0.25){return;}this._lastPlayTime=an;}if(an>Y){an=Y;}if(typeof an!=="undefined"){var al=this,am=an/Y;if(!isNaN(am)){al._seekProgressReposition(am);if(!al._seekNode.hasClass("drag")){al._setSeekTime(an,Y);al._seekHandleReposition(am);}}}},_setSeekTime:function(ao,Y){if(isNaN(Y)||Y===Number.POSITIVE_INFINITY){return;}var al=this,am=al._formatSecs(Y-Math.min(ao,Y)),an=am.length*12;al._seekTimeNode.set("innerHTML",am);al._seekTimeNode.setStyle("width",an+"px");al._seekTimeNode.setStyle("marginLeft","-"+Math.floor(an/2)+"px");},_seekProgressReposition:function(Y){this._seekProgressNode.setStyle("width",Y*100+"%");},_seekDragStart:function(al){var Y=this;if(Y._seekNode.hasClass("disable-drag")){return;}Y._seekNode.addClass("drag");f.one("body").addClass("yui3-videoplayer-drag");Y._seekDragChange(al);Y._fireUIInteractBeacon("ctrl-Seek");},_seekDragEnd:function(al){var Y=this;if(Y._seekNode.hasClass("disable-drag")){return;}Y._seekNode.removeClass("drag");f.one("body").removeClass("yui3-videoplayer-drag");Y._startIdleTimer();if(Y._isVisualSeekEnabled()&&(Y._sliderNode.contains(al.target)===false)){Y._hideVisualSeek();}},_seekDragChange:function(an){if(!this._seekNode.hasClass("drag")||this._seekNode.hasClass("disable-drag")){return;}var Y=this,am=an.pageX-Y._seekNode.getXY()[0],al=Math.max(0,Math.min(Y._seekNode.get("offsetWidth"),am))/Y._seekNode.get("offsetWidth"),ao=al*Y._totalSecs;Y._setSeekTime(ao,Y._totalSecs);Y._seekHandleReposition(al);Y._seekProgressReposition(al);Y.controlsAPI.seek(ao);if(Y._model.get("isVisualSeekEnabled")===true){Y._moveVisualSeek(an);}},_seekHandleReposition:function(am){var al=this,Y=(am*100)+"%";al._seekHandleNode.setStyle("left",Y);al._seekTimeNode.setStyle("left",Y);},_formatSecs:function(al){var an=Math.floor(al/3600),Y=Math.floor((al-an*3600)/60),am=Math.floor(al-(an*3600)-(Y*60));if(am<10){am="0"+am;}if(an>0){if(Y<10){Y="0"+Y;}return an+":"+Y+":"+am;}else{return Y+":"+am;}},_muteChange:function(){var Y=this;if(Y._muteNode.hasClass("disable")){return;}if(Y._muteNode.hasClass("on")){Y._muteOff();}else{Y._muteOn();}},_muteOff:function(){var Y=this;Y._muteNode.removeClass("on");if(Y.inAdContext()){Y._controller._renderer.onMuteChange(false);}Y.controlsAPI.setMute(false);Y._volumeBarsChange(Y.controlsAPI.getVolume());},_muteOn:function(){var Y=this;Y._muteNode.addClass("on");if(Y.inAdContext()){Y._controller._renderer.onMuteChange(true);}Y.controlsAPI.setMute(true);Y._volumeBarsChange(0);},_volumeBarsChange:function(ao){var al=this,Y,an,am=6;if(al.controlsAPI.getMute()){Y=0;}else{Y=Math.floor(ao*am);}for(an=1;an<=Y;an++){al._volumeBarsNode.one(".bar-"+an).addClass("on");}for(an=Y+1;an<=am;an++){al._volumeBarsNode.one(".bar-"+an).removeClass("on");}},volumeChange:function(al){var Y=this;if(al===0){Y._muteOn();}else{Y.controlsAPI.setVolume(al);if(Y.controlsAPI.getMute()){Y._muteOff();}Y._volumeBarsChange(al);}},_getVolumeFromPixelPosition:function(al){var Y=this._volumeBarsNode.get("clientWidth")-5;al=Math.min(Y,Math.max(0,al));return al/Y*1;},_volumeDragStart:function(al){var Y=this;
Y._volumeBarsNode.addClass("drag");Y._volumeDragChange(al);Y._fireUIInteractBeacon("ctrl-Volume");},_volumeDragChange:function(al){var Y=this;if(!Y._volumeBarsNode.hasClass("drag")){return;}Y.volumeChange(Y._getVolumeFromPixelPosition(al.pageX-Y._volumeBarsNode.getXY()[0]));},_volumeDragEnd:function(){var Y=this;if(!Y._volumeBarsNode.hasClass("drag")){return;}Y._volumeBarsNode.removeClass("drag");Y._startIdleTimer();},_playPauseChange:function(){var Y=this;if(Y._playPauseNode.hasClass("disable")){return;}if(Y._playPauseNode.hasClass("play")){Y._playPauseNode.removeClass("play");Y._playPauseNode.addClass("pause");Y._fireUIInteractBeacon("ctrl-Play");}else{Y._playPauseNode.removeClass("pause");Y._playPauseNode.addClass("play");Y._fireUIInteractBeacon("ctrl-Pause");}Y._play();},_showSettings:function(){var Y=this;if(Y._settingsPanelTimer){clearTimeout(Y._settingsPanelTimer);Y._settingsPanelTimer=null;}if(Y._settingsNode.hasClass("on")||Y._seekNode.hasClass("drag")){return;}Y._settingsNode.addClass("on");Y._settingsPanelNode.show("fadeIn",{duration:0.1});Y._fireUIInteractBeacon("ctrl-SettingsView");},_showSettingsAfterDelay:function(){var Y=this;Y._settingsTimer=setTimeout(function(){Y._showSettings();},300);},_hideSettings:function(){var Y=this;if(!Y._settingsNode.hasClass("on")){return;}Y._settingsPanelNode.one(".embed-code").hide();Y._settingsPanelNode.one(".embed-link").hide();Y._settingsNode.removeClass("on");Y._settingsPanelNode.hide("fadeOut",{duration:0.2});},_hideSettingsAfterDelay:function(){var Y=this;if(Y._settingsTimer){clearTimeout(Y._settingsTimer);Y._settingsTimer=null;}Y._settingsPanelTimer=setTimeout(function(){Y._hideSettings();},1500);},_settingsClick:function(){var Y=this;if(Y._settingsNode.hasClass("on")){Y._hideSettings();}else{Y._showSettings();}},_sizeSmallClick:function(){var Y=this;if(!Y._sizeFullNode.hasClass("on")){return;}if(Y.inAdContext()){Y._controller._renderer.setFullscreen(false);}else{Y.controlsAPI.setFullscreen(false);}Y._fireUIInteractBeacon("ctrl-Fullscreen-off");},_sizeFullClick:function(){var Y=this;if(!Y._sizeSmallNode.hasClass("on")){return;}if(Y.inAdContext()){Y._controller._renderer.setFullscreen(true);}else{Y.controlsAPI.setFullscreen(true);}Y._fireUIInteractBeacon("ctrl-Fullscreen-on");},_setSmallSizeButton:function(){var Y=this;Y._sizeFullNode.removeClass("on");Y._sizeSmallNode.addClass("on");},_setFullSizeButton:function(){var Y=this;Y._sizeSmallNode.removeClass("on");Y._sizeFullNode.addClass("on");},_getClosedCaptionsNode:function(){var al=this,ap=al.i18n,ao=al._createNode("tr","disable captions"),am=al._createNode("th","caption-hdr"),an=al._createNode("td","caption-buttons"),aq=al._addButton("text cc-feedback",ap.CAPTIONS_FEEDBACK),ar="en-us",Y="us";an.append(al._addButton("text cc-on on",ap.ON_LC));an.append(al._addButton("text cc-off",ap.OFF_LC));an.append(aq);am.set("innerHTML",ap.CAPTIONS_LC);ao.append(am);ao.append(an);aq.on("click",function(){window.open(f.substitute(s.CC_COMPLAINTS_URL_TEMPLATE,{region:Y,lang:ar.toLowerCase()}));});return ao;},_ccOnClick:function(){var Y=this;if(!Y._ccOffNode.hasClass("on")){return;}Y.controlsAPI.displayClosedCaptions(true);Y._fireUIInteractBeacon("ctrl-CC-on");},_ccOffClick:function(){var Y=this;if(!Y._ccOnNode.hasClass("on")){return;}Y.controlsAPI.displayClosedCaptions(false);Y._fireUIInteractBeacon("ctrl-CC-off");},_setCloseCaptions:function(){var al=this,Y=al._model,am=al._settingsPanelNode.one(".captions");if(Y.get("ccAvailable")){am.removeClass("disable");al._ccOnNode=al._settingsPanelNode.one(".cc-on");al._ccOffNode=al._settingsPanelNode.one(".cc-off");al._ccOnNode.on("click",al._ccOnClick,al);al._ccOffNode.on("click",al._ccOffClick,al);al._updateClosedCaptionButtons(Y.get("showClosedCaptions"));}else{am.addClass("disable");}},_updateClosedCaptionButtons:function(al){var Y=this;if(al){Y._ccOnNode.addClass("on");Y._ccOffNode.removeClass("on");}else{Y._ccOffNode.addClass("on");Y._ccOnNode.removeClass("on");}},enableCloseCaptions:function(Y){var al=this._settingsPanelNode.one(".captions");if(Y){al.removeClass("disable");}else{al.addClass("disable");}},_setShareUrlEmbedCode:function(){var at=this,am=at._model.get("currentMedia"),ao=am.get("shareUrl"),Y=am.get("embedCode"),ap=am.get("embeddable"),an=at._settingsPanelNode,ar=an.one(".fb-icon"),al=an.one(".embed-link-text"),aq=an.one(".embed-code-text");if(ap===undefined||(!ao&&!Y)||this.inAdContext()){an.one(".share-embeds").hide();return;}an.one(".share-embeds").show();if(ao){ar.set("target","_blank");ar.set("href",f.substitute(s.FACEBOOK_URL_TEMPLATE,{title:encodeURIComponent(am.get("title")),shareUrl:encodeURIComponent(ao)}));al.set("value",ao).setAttribute("readonly","readonly");}if(ap===true&&Y){aq.set("value",Y).setAttribute("readonly","readonly");an.one(".embed-valid-code").show();an.one(".embed-error").hide();}else{an.one(".embed-valid-code").hide();an.one(".embed-error").show();}},_getShareEmbedNode:function(){var am=this,an=am.i18n,Y=am._createNode("tr","share-embeds"),ap=am._createNode("th","share-embeds-hdr"),ao=am._createNode("td","share-embeds-buttons"),al=null;al=am._addButton("button embed-button",an.EMBED_UCF);al.on("click",am._toggleEmbedCode,am);ao.append(am._createNode("a","button fb-icon",""));ao.append(al);ap.set("innerHTML",an.SHARE_LC);Y.append(ap);Y.append(ao);return Y;},_getEmbedLinkNode:function(){var an=this,ap=an._createNode("tr","embed-link"),ar=an._createNode("th",""),ao=an._createNode("td",""),Y=an._createNode("div","text",""),al=an._createNode("input","text embed-link-text",""),aq=an._createNode("span","text embed-link-button",""),am=an._addButton("button embed-chainlink-button","");aq.append(am);aq.on("click",an._onLinkClick,an);al.on("click",an._onLinkClick,an);Y.append(al);Y.append(aq);ao.append(Y);ar.set("innerHTML",an.i18n.LINK_LC);ap.append(ar);ap.append(ao);ap.hide();return ap;},_getEmbedCodeNode:function(){var av=this,aw=av.i18n,ar=av._createNode("tr","embed-code"),Y=av._createNode("th",""),ap=av._createNode("td",""),am=av._createNode("div","text embed-valid-code",""),au=av._createNode("input","text embed-code-text",""),aq=av._createNode("span","text embed-code-button",""),an=av._addButton("button embed-chainlink-button",""),al=av._createNode("div","text embed-error",""),at=av._createNode("input","text embed-error-text",""),ao=aw.ERR_EMBED;
aq.append(an);aq.on("click",av._onEmbedClick,av);au.on("click",av._onEmbedClick,av);am.append(au);am.append(aq);al.append(at);at.set("value",ao).setAttribute("readonly","readonly");ap.append(am);ap.append(al);Y.set("innerHTML",aw.EMBED_LC);ar.append(Y);ar.append(ap);ar.hide();return ar;},_onLinkClick:function(al){al.preventDefault();al.stopPropagation();var Y=this,am=Y._settingsPanelNode.one(".embed-link-text");am.select();Y._fireUIInteractBeacon("ctrl-Link");},_onEmbedClick:function(al){al.preventDefault();al.stopPropagation();var Y=this,am=Y._settingsPanelNode.one(".embed-code-text");am.select();Y._fireUIInteractBeacon("ctrl-EmbedLink");},_toggleEmbedCode:function(){var al=this,an,Y,am;an=al._settingsPanelNode.one(".embed-link");Y=al._settingsPanelNode.one(".embed-code");am=al._settingsPanelNode.one(".embed-link").getStyle("display")==="none";if(am){an.show();Y.show();}else{an.hide();Y.hide();}this._fireUIInteractBeacon("ctrl-Embed");},_muteClick:function(){var Y=this;if(Y._muteNode.hasClass("disable")){return;}if(Y._muteNode.hasClass("on")){Y._muteOff();Y._fireUIInteractBeacon("ctrl-Mute-off");}else{Y._muteOn();Y._fireUIInteractBeacon("ctrl-Mute-on");}},_syncSizeButtons:function(){var Y=this;if(Y._model.get("fullscreen")){Y._sizeSmallNode.removeClass("on");Y._sizeFullNode.addClass("on");}else{Y._sizeFullNode.removeClass("on");Y._sizeSmallNode.addClass("on");}},seekEnable:function(Y){if(Y){this._seekNode.removeClass("disable");}else{this._seekNode.addClass("disable");}},seekDragEnable:function(Y){if(Y){this._seekNode.removeClass("disable-drag");}else{this._seekNode.addClass("disable-drag");}},playPauseEnable:function(Y){if(Y){this._playPauseNode.removeClass("disable");}else{this._playPauseNode.addClass("disable");}},_addButton:function(Y,am,ao){var al=this,an;al[Y]=al._createNode("button",Y);if(ao){an=al._createNode(ao,"");an.set("innerHTML",am);al[Y].append(an);}else{al[Y].set("innerHTML",am);}return al[Y];},getControlBarHeight:function(){var Y=this,an=Y._controlsNode.one(".bar"),am=0,al=0;if(!f.Lang.isValue(an)||!Y._controlsNode.hasClass("show")){return am;}al=an.getStyle("height").split("px")[0];am=f.Lang.isValue(al)?al:0;return am;},_fireUIInteractBeacon:function(Y){this._model.fire("uiInteract",{source:Y});},_createNode:function(al,Y){return f.Node.create("<"+al+' class="'+Y+'"/>');},_onVisualSeekMouseEnter:function(al){var Y=this;if(!Y._isVisualSeekEnabled()){return;}Y._showVisualSeek();Y._moveVisualSeek(al);},_onVisualSeekMouseLeave:function(){var Y=this;if(!Y._isVisualSeekEnabled()||Y._seekNode.hasClass("drag")){return;}Y._hideVisualSeek();},_showVisualSeek:function(){var Y=this._visualSeekNode;if(Y){Y.setStyle("display","block");}},_hideVisualSeek:function(){var Y=this._visualSeekNode;if(Y){Y.setStyle("display","none");}},_moveVisualSeek:function(al){var Y=this,am;if(!Y._isVisualSeekEnabled()){return;}if(Y._visualSeekNode.getStyle("display")==="none"){Y._showVisualSeek();}am=al.pageX-Y._seekNode.getX();Y._visualSeekReposition(am);Y._loadVisualSeekThumb(am);},_updateVisualSeek:function(){var Y=this,am=Y._model.get("currentMedia"),al=am.get("visualseek"),an=Y._visualSeekNode;Y._visualSeek=al;delete Y._visualSeekImages;if(al&&an){Y._visualSeekImages=al.images;if(an.getStyle("backgroundSize")===undefined){Y._resizeVisualSeekNode(al);}}},_resetVisualSeek:function(){var Y=this;delete Y._visualSeek;delete Y._visualSeekImages;Y._hideVisualSeek();},_resizeVisualSeekNode:function(ao){var am=this,ap=am._visualSeekNode,al=ao.width,Y=ao.height,an=parseInt(ap.getStyle("width"),10);if(al<an){ap.setStyle("width",al+"px");ap.setStyle("height",Y+"px");ap.setStyle("top",-(Y+3)+"px");am._visualSeekTimeNode.setStyle("left",(al/2)+"px");}},_isVisualSeekEnabled:function(){var Y=this;if((Y._visualSeekImages&&Y._visualSeekImages.length>0)&&!Y._playPauseNode.hasClass("disable")){return true;}return false;},_loadVisualSeekThumb:function(ar){var av=this,aq=av._visualSeek,at=Math.max(0,Math.min(av._seekNode.get("offsetWidth"),ar))/av._seekNode.get("offsetWidth"),an=at*av._totalSecs,am=Math.ceil(Math.floor(an)/aq.frequency),ao=av._visualSeekThumbNode,al=aq._thumbSize,au,ap,Y;if(al===undefined){al=av._getVisualSeekThumbSize();au=al.width;ap=al.height;aq._thumbSize=al;ao.setStyles({"width":au,"height":ap,"backgroundSize":(au*G.VISUAL_SEEK_COLLAGE_COLS)+"px "+(ap*G.VISUAL_SEEK_COLLAGE_ROWS)+"px"});}Y=av._getVisualSeekCollage(am,al);if(!ao.getStyle("backgroundImage").match(Y.url)){ao.setStyle("background","url("+Y.url+")");}ao.setStyle("backgroundPosition","-"+Y.x+"px -"+Y.y+"px");av._updateVisualSeekTime(an);},_updateVisualSeekTime:function(an){var Y=this,am=Y._visualSeekTimeNode,ao=Y._formatSecs(an),al=ao.length*12;am.setHTML(ao);am.setStyles({"width":al+"px","marginLeft":"-"+Math.floor(al/2)+"px"});},_getVisualSeekThumbSize:function(){var at=this,an=at._visualSeek,am=at._visualSeekNode,ap=an.width,aq=an.height,Y=ap/aq,ar=parseInt(am.getStyle("width"),10),ao=parseInt(am.getStyle("height"),10),al=ar/ao;if(Y>al){ao=(aq/ap)*ar;}else{ar=(ap/aq)*ao;}return{width:ar,height:ao};},_getVisualSeekCollage:function(ap,ao){var ax=this,al={},av=G.VISUAL_SEEK_COLLAGE_ROWS,at=G.VISUAL_SEEK_COLLAGE_COLS,an=av*at,au=ax._visualSeekImages,am=Math.floor(ap/an),aq=au[am],ar,Y,aw;if(aq){ar=ap%an;Y=ar%at;aw=Math.floor(ar/at);al={url:aq.url,x:Y*ao.width,y:aw*ao.height};}return al;},_visualSeekReposition:function(aq){var Y=this,an=Y._visualSeekNode.get("offsetWidth"),al=Math.round(an/2),am=aq-al,ao=aq+al,ap=Y._seekNode.get("offsetWidth");if(am<0){am=0;}else{if(ao>ap){am=ap-an;}}Y._visualSeekNode.setStyle("left",am);}});f.namespace("VideoPlatform").Controls=G;function x(){x.superclass.constructor.apply(this,arguments);}x.NAME="ErrorScreen";x.NS="errorscreen";x.ATTRS={};x.ERRORSCREEN_VIDEOS_DIMENSIONS={LARGE:{ITEM_WIDTH:208,ITEM_HEIGHT:117,IMAGE_WIDTH:208,IMAGE_HEIGHT:117,HORIZONTAL_SPACING:8,VERTICAL_SPACING:4,MARGIN:20},MEDIUM:{ITEM_WIDTH:208,ITEM_HEIGHT:117,IMAGE_WIDTH:208,IMAGE_HEIGHT:117,HORIZONTAL_SPACING:8,VERTICAL_SPACING:4,MARGIN:20},SMALL:{ITEM_WIDTH:157,ITEM_HEIGHT:88,IMAGE_WIDTH:157,IMAGE_HEIGHT:88,HORIZONTAL_SPACING:2,VERTICAL_SPACING:1,MARGIN:12}};
f.extend(x,f.Base,{log:function(al,Y){},initializer:function(Y){this._model=Y.model;this._view=Y.view;this._controller=Y.view._controller;this.screenSize=this._view.get("screenSize");f.publish("VideoPlayer.ErrorScreen.flashDownloadClick",{broadcast:2});f.publish("VideoPlayer.ErrorScreen.tryAgainLink",{broadcast:2});},render:function(ao){var au=this,ap=x.NS,av,am,aw,aq,ar,al=this._view.createNode("div","container",ap),an=this._model.get("currentMedia"),at=this._model.get("endScreenVideos").get("mediaItems").toArray(),Y=this._view.createNode("div","wrapper",ap);this._node=ao;this.container=al;this._error=this._model.get("error");this.desc=this._view.createNode("p","desc",ap);this.subDesc=this._view.createNode("p","sub-desc",ap);this.typeCode=this._view.createNode("p","type-code",ap);this._flashDownloadNode=null;this._retStr=null;this._wrapper=Y;Y.append(this.desc);Y.append(this.subDesc);al.append(Y);if(this._error.type==="400"&&(this._error.code==="200"||this._error.code==="201")){av=this._view.createNode("div","flash-download-node",ap);am=this._view.createNode("a","download-flash",ap);aw=this._view.createNode("p","download-link",ap);aq=this._view.createNode("span","download-flash-title",ap);ar=this._view.createNode("span","download-flash-button",ap);this._flashDownloadNode=am;this._retStr="undefined";aq.set("innerHTML",this._getString("DOWNLOAD_FLASH"));am.setAttribute("href","http://get.adobe.com/flashplayer/");am.setAttribute("target","_blank");aw.append(aq);am.append(aw);am.append(ar);av.append(am);this.flashDownloadNode=av;this.container.append(av);this._renderUI();}else{this._loadVideos(an,at,function(az,ax){if(az){au._controller.warn(az);au._retStr="undefined";var ay=az.type+"-"+az.code;au.typeCode.set("innerHTML",ay);}else{if(ax.length!==0){setTimeout(function(){au._renderVideos(ax);},20);}else{au._retStr="undefined";}}au._renderUI();});}},_renderUI:function(){this.container.append(this.typeCode);this._syncUI();this._bindUI();this._node.append(this.container);this.container.addClass("show");},_loadVideos:function(am,al,an){var Y=this;if(al.length===0){if(am!==null&&am!==undefined){Y._controller._states.started.loadEndScreenVideos(am,{success:function(ao){Y._model.set("endScreenVideos",ao);al=Y._model.get("endScreenVideos").get("mediaItems").toArray();an(null,al);},failure:function(ao){an(ao);}});}else{an(null,al);}}else{an(null,al);}},_renderVideos:function(Y){var am=x.NS,ao=this._view.createNode("div","videos-node",am),al=this.screenSize,an=new g({"view":this,"mediaItems":Y,"pltype":"errorScreen","showNavigation":false,"showMetadata":true,"dimensions":{itemWidth:x.ERRORSCREEN_VIDEOS_DIMENSIONS[al].ITEM_WIDTH,itemHeight:x.ERRORSCREEN_VIDEOS_DIMENSIONS[al].ITEM_HEIGHT,imageWidth:x.ERRORSCREEN_VIDEOS_DIMENSIONS[al].IMAGE_WIDTH,imageHeight:x.ERRORSCREEN_VIDEOS_DIMENSIONS[al].IMAGE_HEIGHT,horizontalSpacing:x.ERRORSCREEN_VIDEOS_DIMENSIONS[al].HORIZONTAL_SPACING,verticalSpacing:x.ERRORSCREEN_VIDEOS_DIMENSIONS[al].VERTICAL_SPACING,carouselMargin:x.ERRORSCREEN_VIDEOS_DIMENSIONS[al].MARGIN}});ao.setStyle("height",(this.container.get("offsetHeight")-parseInt(this.container.get("offsetHeight")/2,10)));this.container.append(ao);an.render(ao);this.errorScreenVideos=ao;},_bindUI:function(){var Y=this;if(this._flashDownloadNode!==null){this._flashDownloadNode.one(".yui3-videoplayer-errorscreen-download-link").on("click",function(){f.fire("VideoPlayer.ErrorScreen.flashDownloadClick","err-adobe-link");});this._flashDownloadNode.one(".yui3-videoplayer-errorscreen-download-flash-button").on("click",function(){f.fire("VideoPlayer.ErrorScreen.flashDownloadClick","err-adobe-CTA");});}else{if(this._retStr==="ERR_REL_TECH_ERR"){this.subDesc.one(".yui3-videoplayer-errorscreen-sub-desc-try").on("click",function(){f.fire("VideoPlayer.ErrorScreen.tryAgainLink","err-try");Y._reload();});}}},_reload:function(){setTimeout(function(){location.reload();},500);},_syncUI:function(){var am=this._error,al=this._errorToResourceKey(am),Y=am.type+"-"+am.code;this.desc.set("innerHTML",this._getString(al.key));if(this._retStr!=="undefined"||al.rel==="FLASH_UPGRADE_NOTE"){this.subDesc.set("innerHTML",this._getString(al.rel));this._retStr=al.rel;}this.typeCode.set("innerHTML",Y);},_getString:function(Y){return this._view._controller.getStrings()[Y];},_errorToResourceKey:function(am){var an="ERR_UNAVAILABLE_TEMP",Y="ERR_REL_VIDEO",al=am.code;switch(am.type){case"500":case"501":case"502":case"503":case"504":switch(al){case"200":case"401":case"402":case"403":case"501":an="ERR_UNAVAILABLE";break;case"201":case"500":an="ERR_UNAVAILABLE_TEMP";break;case"202":an="ERR_GEO";break;case"203":an="ERR_DEVICE";Y="ERR_REL";break;case"204":an="ERR_EMBED";break;case"205":an="ERR_USER";break;case"300":an="ERR_UNSUPPORTED_FORMAT";Y="ERR_REL";break;case"400":an="ERR_NOT_FOUND";break;default:an="ERR_TECH_DIFFICULTIES";Y="ERR_REL_TECH_ERR";break;}break;case"400":switch(al){case"14":an="ERR_SESSION_TIMEOUT";break;case"200":an="ERR_FLASH_NOT_ENABLED";Y="undefined";break;case"201":an="ERR_FLASH_NOT_UPTO_DATE";Y="FLASH_UPGRADE_NOTE";break;case"301":an="ERR_TECH_DIFFICULTIES";Y="ERR_REL_TECH_ERR";break;case"401":an="ERR_USER";break;default:an="ERR_TECH_DIFFICULTIES";Y="ERR_REL_TECH_ERR";break;}break;}return{"key":an,"rel":Y};},destructor:function(){if(this.container){this.container.remove();}}});f.namespace("VideoPlatform").ErrorScreen=x;function a(){a.superclass.constructor.apply(this,arguments);}a.NAME="StartScreen";a.NS="startscreen";a.ATTRS={};a.DIMENSIONS={LARGE:{BAR_HEIGHT:72,TRUNC_LENGTH:170},MEDIUM:{BAR_HEIGHT:72,TRUNC_LENGTH:88},SMALL:{BAR_HEIGHT:40,TRUNC_LENGTH:34}};f.extend(a,f.Base,{initializer:function(Y){this._model=Y.model;this._view=Y.view;},render:function(aE){this._node=aE;var aG=a.NS,aC=this._view,az=this._model.get("startscreen")||false,au=typeof az.showProvider!=="undefined"?az.showProvider:false,aA=typeof az.showTitle!=="undefined"?az.showTitle:true,ax=typeof az.showDesc!=="undefined"?az.showDesc:true,aF=typeof az.showButton!=="undefined"?az.showButton:true,ay=this,ao=this._view.createNode("div","container",aG),av=this._view.createNode("div","bar-wrapper",aG),aJ=this._view.createNode("div","bar",aG),aI=this._view.createNode("div","bar-right",aG),aN=this._view.createNode("img","image",aG),at=this._view.createNode("div","title-wrapper",aG),aD=aC.get("screenSize"),aw=a.DIMENSIONS[aD],ar,am=this._model.get("currentMedia"),aB=am.get("images"),al,aL,aq,aH,ap,aM,Y,aK,an;
if(aF){al=this._view.createNode("div","button",aG);this.button=al;}if(aA){Y=typeof(am.get("title"))==="string"?am.get("title"):"";if(Y){aM=this._view.createNode("h3","title",aG);this.title=aM;aM.set("innerHTML",Y);}}if(au){aq=typeof am.get("provider")==="object"&&typeof am.get("provider").name==="string"?am.get("provider").name:false;if(aq){aL=this._view.createNode("h4","provider",aG);this.provider=aL;aL.set("innerHTML",aq);}}if(ax){ap=typeof(am.get("description"))==="string"?am.get("description"):false;if(ap){aH=this._view.createNode("p","desc",aG);this.desc=aH;aK=document.createElement("DIV");aK.innerHTML=ap;if(aK.innerHTML.length>aw.TRUNC_LENGTH){aK.innerHTML=aK.innerHTML.substr(0,aw.TRUNC_LENGTH)+"&#8230;";}aH.set("innerHTML",aK.innerText||aK.textContent||"");}}this._container=ao;this.wrapper=av;if(aB){an=aB.large||aB.thumbnail;if(an){aN.set("src",an);this._view._resizeAndPositionImage(aN,aE);}}if(au&&aL){at.append(aL);}if(Y&&aA){at.append(aM);}if(ax&&aH){at.append(aH);}aI.append(at);aJ.append(aI);av.append(aJ);ao.append(aN);ao.append(av);if(aF){ao.append(al);}if(this._model.get("ybang")===true){ar=this._view.createNode("div","ybang",aG);aJ.append(ar);}aE.append(ao);this._bindUI();if(this._model.get("rendererType")==="html"){this._view._hideVideoTag();}ay._container.addClass("yui3-videoplayer-show");setTimeout(function(){ay._container.addClass("yui3-videoplayer-transition");ay.wrapper.addClass("yui3-videoplayer-transition");},5);},_bindUI:function(){var ao=this._container,Y=this._model,an=this,al=an._view.getController(),am=al?al.getProfiler():null;ao.on(["click","tap"],function(){this.clickToStartTimer=new k({model:Y});this.clickToStartTimer.start();if(am){am.add(aj.VP_CLICK_TO_START);}if(Y.get("YVAPRequired")===true){Y.once("yvapStateChange",function(ap){switch(ap.newVal){case YVAPEvents.AD_START:an._stopTimer(aj.VP_CLICK_TO_START);this.clickToStartTimer.stop(aj.VP_CLICK_TO_START.type,aj.VP_CLICK_TO_START.desc);break;case YVAPEvents.AD_NONE:case YVAPEvents.AD_ERROR:case YVAPEvents.PLUGIN_REMOVED:Y.once("playerStateChange",function(aq){if(aq.newVal===ab.STARTED){an._stopTimer(aj.VP_CLICK_TO_START);this.clickToStartTimer.stop(aj.VP_CLICK_TO_START.type,aj.VP_CLICK_TO_START.desc);}},this);break;}},this);}else{Y.once("playerStateChange",function(ap){if(ap.newVal===ab.STARTED){an._stopTimer(aj.VP_CLICK_TO_START);this.clickToStartTimer.stop(aj.VP_CLICK_TO_START.type,aj.VP_CLICK_TO_START.desc);}},this);}an._view._controller.play();Y.fire("uiInteract",{source:this.constructor.NS+"Play"});},this);},_stopTimer:function(am){var Y=this._view.getController(),al=Y?Y.getProfiler():null;if(al){al.setEndTime(am.type);}},destructor:function(){var Y=this;if(f.UA.ie>0&&f.UA.ie<9){Y._container.remove();}else{Y._container.removeClass("yui3-videoplayer-show");setTimeout(function(){Y._container.remove();},500);}if(this._model.get("rendererType")==="html"){this._view._showVideoTag();}}});f.namespace("VideoPlatform").StartScreen=a;var N=f.VideoPlatform.Metrics;var w={generateBeaconList:function(al,at,ap,an,aq,am){var ao=0,ar=[],Y;am=!f.Lang.isUndefined(am)?am:[];if(typeof al!=="string"){al="";}f.each(at,function(au){Y={urlTemplate:al,target:ap};if(au.param){if(Y.urlTemplate.search("COMSCORE_C5")!==-1){Y.urlTemplate=Y.urlTemplate.replace("{COMSCORE_C5}",au.param);}else{Y.urlTemplate+=au.param;}}if(an){Y.urlTemplate+="&"+an+"={RANDOM_VALUE}";}Y.events=[{"name":au.name}];if(aq===true){if(au.samplePerct){Y.samplePerct=au.samplePerct;}else{Y.samplePerct=100;}}ar[ao]=Y;ao+=1;});if(am.length>0){ar=ar.concat(am);}return ar;},init:function(){var al=this.beaconComscore(),am=this.beaconQOS(),ao=this.beaconYwaPageView(),an=this.beaconYWA(),Y=this.beaconULT();return al.concat(ao,an,Y,am);},beaconComscore:function(){var Y=(document.location.protocol==="https:"?"https://sb":"http://b")+".scorecardresearch.com/p?C1=1&C2=7241469&C4={COMSCORE_C4}&C5={COMSCORE_C5}&C6={COMSCORE_C6}&cv=2.0",al=[{"name":"PLAYBACK_START","param":"{COMSCORE_C5}"},{"name":"AD_START","param":"09"}];return this.generateBeaconList(Y,al,N.SERVICES.COMSCORE,"rn");},beaconYwaPageView:function(){var al=(document.location.protocol==="https:"?"https://z.analytics.yahoo.com/p.pl":"http://z.analytics.yahoo.com/p.pl")+"?a=1000{YWA_PROJECT_ID}&dpid={YWA_DPID}&vp={PLAYER_INT32_GUID}&vpm={MASTERPLAYER_INT32_GUID}",Y=[{"name":"PAGE_VIEW","param":"&cf12={FLASH_VERSION}&cf08={PLAYER_HOSTING_ENV}&cf01={PLAYER_BUCKET}&cf07={PLAYER_VERSION}&cf09={EXPERIENCE_TYPE}&cf10={EXPERIENCE_NAME}&.ys={PAGE_SPACE_ID}&cf13={RENDERER_TYPE}&cf71={EXPERIENCE_BUCKET}&b={PAGE_TITLE}&f={PAGE_URL}&e={PAGE_REFERRER}"}];return this.generateBeaconList(al,Y,N.SERVICES.YWA,"rn");},beaconYWA:function(){var al=(document.location.protocol==="https:"?"https://z.analytics.yahoo.com/p.pl":"http://z.analytics.yahoo.com/p.pl")+"?a=1000{YWA_PROJECT_ID}&dpid={YWA_DPID}&vp={PLAYER_INT32_GUID}&vpm={MASTERPLAYER_INT32_GUID}&vid={VIDEO_CLIP_ID}&vn={VIDEO_TITLE}",Y=[{"name":"PLAYER_ERR","param":"&vx=3&vb={PAGE_TITLE}&vf={PAGE_URL}&cf50={PLAYER_ERR_TYPE}&cf51={PLAYER_ERR_CODE}&cf64={PLAYER_ERR_MSG}&cf63={AUTOPLAY}&vpl={PLAYER_LOCATION}&cf201={SITE}&cf202={REGION}&cf203={COUNTRY_LANGUAGE_CODE}&cf204={CONTRACTING_PROPERTY}&cf205={LICENSOR_NAME}&cf206={LICENSOR_ID}&cf207={LICENSE_NAME}&cf208={LICENSE_ID}&vsn={SHOW_NAME}&ve={PAGE_REFERRER}"},{"name":"VIDEO_LOADED","param":"&vlng={VIDEO_LENGTH}&vx=215&vb={PAGE_TITLE}&vf={PAGE_URL}&cf63={AUTOPLAY}&vpl={PLAYER_LOCATION}&cf201={SITE}&cf202={REGION}&cf203={COUNTRY_LANGUAGE_CODE}&cf204={CONTRACTING_PROPERTY}&cf205={LICENSOR_NAME}&cf206={LICENSOR_ID}&cf207={LICENSE_NAME}&cf208={LICENSE_ID}&cf15={CONTINUOUS_PLAY}&vsn={SHOW_NAME}&vss={EVENT_BEGIN}&vse={EVENT_END}&cf58={MEDIA_META_TAGS}&ve={PAGE_REFERRER}"},{"name":"VP_INIT_TO_START","param":"&vlng={VIDEO_LENGTH}&vx=13&vb={PAGE_TITLE}&vf={PAGE_URL}&cf63={AUTOPLAY}&vpl={PLAYER_LOCATION}&cf201={SITE}&cf202={REGION}&cf203={COUNTRY_LANGUAGE_CODE}&cf204={CONTRACTING_PROPERTY}&cf205={LICENSOR_NAME}&cf206={LICENSOR_ID}&cf207={LICENSE_NAME}&cf208={LICENSE_ID}&vsn={SHOW_NAME}&vss={EVENT_BEGIN}&vse={EVENT_END}&cf58={MEDIA_META_TAGS}&cf54={VP_INIT_TO_START}&ve={PAGE_REFERRER}"},{"name":"VP_CLICK_TO_START","param":"&vlng={VIDEO_LENGTH}&vx=14&vb={PAGE_TITLE}&vf={PAGE_URL}&cf63={AUTOPLAY}&vpl={PLAYER_LOCATION}&cf201={SITE}&cf202={REGION}&cf203={COUNTRY_LANGUAGE_CODE}&cf204={CONTRACTING_PROPERTY}&cf205={LICENSOR_NAME}&cf206={LICENSOR_ID}&cf207={LICENSE_NAME}&cf208={LICENSE_ID}&vsn={SHOW_NAME}&vss={EVENT_BEGIN}&vse={EVENT_END}&cf58={MEDIA_META_TAGS}&cf55={VP_CLICK_TO_START}&vb={PAGE_TITLE}&vf={PAGE_URL}&ve={PAGE_REFERRER}"},{"name":"PLAYBACK_REQUEST","param":"&vx=216&cf51={CMS_STATUS_CODE}&cf63={AUTOPLAY}&vpl={PLAYER_LOCATION}&cf201={SITE}&cf202={REGION}&cf203={COUNTRY_LANGUAGE_CODE}&cf204={CONTRACTING_PROPERTY}&cf205={LICENSOR_NAME}&cf206={LICENSOR_ID}&cf207={LICENSE_NAME}&cf208={LICENSE_ID}&cf15={CONTINUOUS_PLAY}"},{"name":"PLAYBACK_START","param":"&vpos=1&vstpos={VIDEO_SEQ_START}&vq={VIDEO_SEQ_NUMBER}&vt={IS_LIVE}&vbt={PLAYBACK_START_DELAY}&cf63={AUTOPLAY}&vpl={PLAYER_LOCATION}&cf201={SITE}&cf202={REGION}&cf203={COUNTRY_LANGUAGE_CODE}&cf204={CONTRACTING_PROPERTY}&cf205={LICENSOR_NAME}&cf206={LICENSOR_ID}&cf207={LICENSE_NAME}&cf208={LICENSE_ID}&cf15={CONTINUOUS_PLAY}&cf53={CONTINUOUS_PLAY_COUNT}&cf62={PLAYER_WIDTH}x{PLAYER_HEIGHT}"},{"name":"PLAYBACK_PROGRESS","param":"&vlng={VIDEO_LENGTH}&vpos={VIDEO_PLAYBACK_POS}&vt={IS_LIVE}&vstpos={VIDEO_SEQ_START}&vq={VIDEO_SEQ_NUMBER}"},{"name":"PLAYBACK_PAUSE","param":"&vpos={VIDEO_PLAYBACK_POS}&vstpos={VIDEO_SEQ_START}&vx=212&vq={VIDEO_SEQ_NUMBER}"},{"name":"PLAYBACK_RESUME","param":"&vpos={VIDEO_PLAYBACK_POS}&vstpos={VIDEO_SEQ_START}&vx=211&vq={VIDEO_SEQ_NUMBER}"},{"name":"PLAYBACK_SEEK","param":"&vpos={VIDEO_PLAYBACK_POS}&vstpos={VIDEO_SEQ_START}&vx=210&vq={VIDEO_SEQ_NUMBER}"},{"name":"PLAYBACK_COMPLETE","param":"&vpos={VIDEO_LENGTH}&vstpos={VIDEO_SEQ_START}&vq={VIDEO_SEQ_NUMBER}"},{"name":"PLAYER_FULLSCREEN","param":"&vpos={VIDEO_PLAYBACK_POS}&vstpos={VIDEO_SEQ_START}&vx=213&vq={VIDEO_SEQ_NUMBER}"},{"name":"AD_PLUGIN_METRIC","param":"&aplc{CUSTOM_PARAMS}&cf201={SITE}&cf202={REGION}&cf207={LICENSE_NAME}&cf208={LICENSE_ID}&.ys={PAGE_SPACE_ID}&cf09={EXPERIENCE_TYPE}&cf10={EXPERIENCE_NAME}"},{"name":"VP_INIT_TO_STARTSCREEN","param":"&vx=15&vpl={PLAYER_LOCATION}&vf={PAGE_URL}&vsn={SHOW_NAME}&cf201={SITE}&cf202={REGION}&cf203={COUNTRY_LANGUAGE_CODE}&cf208={LICENSE_ID}&cf52={QOS_TIMER_DIFF}&ve={PAGE_REFERRER}"},{"name":"UI_INTERACT","param":"&vx=5&cf57={UI_INTERACT_PAYLOAD}&cf201={SITE}&cf202={REGION}&cf203={COUNTRY_LANGUAGE_CODE}&vsn={SHOW_NAME}&vf={PAGE_URL}"}];
return this.generateBeaconList(al,Y,N.SERVICES.YWA,"rn");},beaconULT:function(){var al,am=document.location.protocol+"//geo.yahoo.com/p?t={RANDOM_VALUE}&_V=V&s={PAGE_SPACE_ID}&",Y="vid={VIDEO_CLIP_ID}&pstaid={VIDEO_CLIP_ID}&lcnsr_id={LICENSOR_ID}&"+"lcnsr_nm={LICENSOR_NAME}&lms_id={LICENSE_ID}&lms_nm={LICENSE_NAME}&"+"pls={PLAYER_INT32_GUID}&A_sid={PAGE_SID}&plist={CCM_PLAYLIST_ID}&site={SITE}&"+"lang={COUNTRY_LANGUAGE_CODE}&intl={REGION}&juris={JURISDICTION}&synd={SYNDICATION}&"+"_w={PAGE_URL}&pver={PLAYER_VERSION}&expn={EXPERIENCE_NAME}&expt={EXPERIENCE_TYPE}&"+"expb={EXPERIENCE_BUCKET}&loc={PLAYER_LOCATION}&type={VIDEO_TYPE}&auto={AUTOPLAY}&"+"cont={CONTINUOUS_PLAY}&contcnt={CONTINUOUS_PLAY_COUNT}&bckt={PLAYER_BUCKET}&"+"_R={PAGE_REFERRER}";al=[{"name":"PAGE_VIEW","param":am+"V_sec=pb&evt=p_load&"+Y},{"name":"PLAYBACK_REQUEST","param":am+"V_sec=pb&evt=v_req&V_slk=pr&"+Y},{"name":"AD_START","param":am+"V_sec=pb&evt=ad_start&V_slk=as0&"+Y},{"name":"PLAYBACK_START","param":am+"V_sec=pb&evt=v_start&V_slk=ps{VIDEO_WATCHED_PERCT}&"+Y},{"name":"PLAYBACK_PROGRESS","param":am+"V_sec=pb&evt=v_prog&dur={VIDEO_PLAYBACK_POS}&V_slk=ps{VIDEO_WATCHED_PERCT}&"+Y},{"name":"PLAYBACK_COMPLETE","param":am+"V_sec=pb&evt=v_comp&dur={VIDEO_PLAYBACK_POS}&V_slk=ps100&"+Y},{"name":"PLAYER_ERR","param":am+"V_sec=err&evt=err&V_slk={PLAYER_ERR_TYPE}%23{PLAYER_ERR_CODE}&"+Y},{"name":"UI_INTERACT","param":am+"V_sec={SECTION_TITLE}&evt={SECTION_TITLE}&V_slk={SECTION_LINK}&"+Y}];return this.generateBeaconList(false,al,N.SERVICES.ULT);},beaconQOS:function(){var al=(document.location.protocol==="https:")?1:0,Y=((al)?"https:":"http:")+"//qos.video.yimg.com/yep/3/qos?"+"env={PLAYER_HOSTING_ENV}"+"&pver={PLAYER_VERSION}"+"&vp={PLAYER_INT32_GUID}"+"&b={PLAYER_BUCKET}"+"&r={RENDERER_TYPE}"+"&vid={VIDEO_CLIP_ID}"+"&vn={VIDEO_TITLE}"+"&reg={REGION}"+"&site={SITE}"+"&sn={SHOW_NAME}"+"&lid={LICENSE_ID}"+"&loc={PLAYER_LOCATION}"+"&apl={AUTOPLAY}"+"&psid={PAGE_SPACE_ID}"+"&fver={FLASH_VERSION}"+"&expn={EXPERIENCE_NAME}"+"&expt={EXPERIENCE_TYPE}"+"&expb={EXPERIENCE_BUCKET}"+"&vpurl={PAGE_URL}"+"&ba={BANDWIDTH}"+"&pglt={PAGE_LATENCY}"+"&pgdns={TIMING_DNS}"+"&pgcon={TIMING_CONNECT}"+"&pgttfb={TIMING_TTFB}"+"&pgbp={TIMING_BASE_PAGE}"+"&pgfe={TIMING_FRONTEND}"+"&pgjsst={PAGE_PLAYERJS_DL_START}"+"&pgjstm={PAGE_PLAYERJS_DL_TIME}"+"&pgitmtm={PAGE_MEDIA_ITEM_PREFETCH_TIME}",am=[{"name":"PLAYER_LOADED","param":"&i"},{"name":"SAPI_LOADCLIPS","param":"&vi&tsapic={QOS_TIMER_DIFF}&rcnt={RETRY_COUNT}"},{"name":"SAPI_LOADPLAYLIST","param":"&tsapilp={QOS_TIMER_DIFF}&rcnt={RETRY_COUNT}"},{"name":"PLAYBACK_START","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tpb={PLAYBACK_START_DELAY}"},{"name":"PLAYER_ERR","param":"&e.{PLAYER_ERR_TYPE}.{PLAYER_ERR_CODE}&vm={PLAYER_ERR_MSG}"},{"name":"YSWF_SWF_ONLY_INIT_TIME","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tswfoi={QOS_TIMER_DIFF}"},{"name":"YSWF_READY","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tswfr={QOS_TIMER_DIFF}"},{"name":"YVAP_LOADED","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tswfl={QOS_TIMER_DIFF}"},{"name":"YVAP_READY","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tyvapr={QOS_TIMER_DIFF}"},{"name":"YVAP_ADSTARTED","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tyvapads={QOS_TIMER_DIFF}"},{"name":"YVAP_NOAD","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tyvapadn={QOS_TIMER_DIFF}"},{"name":"YVAP_ERROR","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tyvape={QOS_TIMER_DIFF}"},{"name":"VP_INIT_TO_START","param":"&secure="+al+"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&vpf={VIDEO_PREFETCH}&ttsapt{LIVE_INDICATOR}={QOS_TIMER_DIFF}&{QOS_TIME_BREAKUP}"},{"name":"PLAYBACK_REQUEST","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&pr&status={CMS_STATUS_CODE}"},{"name":"VP_CLICK_TO_START","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&vpf={VIDEO_PREFETCH}&ttsapf={QOS_TIMER_DIFF}"},{"name":"VP_MEDIA_CHANGE","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&vpmc={QOS_TIMER_DIFF}&vpf={VIDEO_PREFETCH}&acnt={AUTOCONTINUE}"},{"name":"SAPI_LOADRELATED","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tsapilr={QOS_TIMER_DIFF}&rcnt={RETRY_COUNT}"},{"name":"AD_PLUGIN_QOS_METRIC","param":"&qaplc{CUSTOM_PARAMS}&ln={LICENSE_NAME}"},{"name":"PLAYBACK_PROGRESS","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&prog={PROGRESS}&dur={VIDEO_LENGTH}&buff={TIME_WAITING}&br={BITRATE}&pp"},{"name":"PLAYBACK_COMPLETE","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&prog={PROGRESS}&dur={VIDEO_LENGTH}&buff={TIME_WAITING}&br={BITRATE}&pp"},{"name":"PLAYBACK_SEEK","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&prog={PROGRESS}&dur={VIDEO_LENGTH}&buff={TIME_WAITING}&br={BITRATE}&pp"},{"name":"YQL_LOAD_CC","param":"&hd={HD_AVAILABLE}&vtyp={VIDEO_TYPE}&tyqlcc={QOS_TIMER_DIFF}"}];return this.generateBeaconList(Y,am,N.SERVICES.QOS,"rn",true);}};f.namespace("VideoPlatform").playerBeaconList=w;function ah(){this._playerStartTime=(new Date()).getTime();this._profileItems=[];}ah.NAME="Profiler";ah.NS="Profiler";ah.prototype.getProfileItems=function(){return this._profileItems;};ah.prototype.setMetricsModule=function(Y){this._metricsModule=Y;};ah.prototype.getPlayerStartTime=function(){return this._playerStartTime;};ah.prototype.add=function(an){if(!an){return;}var am=this._createProfileItem(an),al="@",Y=am.type,ao=am.startTime;am.key=Y+al+ao;this._profileItems.push(am);return am.key;};ah.prototype.remove=function(am,an){var al=0,Y=this._profileItems;if(!this._isValidType(am)||Y.length===0){return;}for(;al<Y.length;al++){if((an&&an===Y[al].key)||(!an&&am===Y[al].type)){Y.splice(al,1);break;}}};ah.prototype.setStartTime=function(am,Y,an){var al=this.getItem(am,an);if(al===null){return;}al.startTime=Y;};ah.prototype.setEndTime=function(am,an,Y){var al=this.getItem(am,an);if(al===null){return;}al.endTime=Y||((new Date()).getTime()-this._playerStartTime);al.timeDiff=al.endTime-al.startTime;if(am===aj.VP_INIT_TO_START.type&&this._metricsModule){al.queryStringExtn=this._createQueryStringExtension();this._metricsModule.handleQOSProfiling(al);}};ah.prototype.setDelta=function(al,an,am){var Y=this.getItem(al,am);
if(Y===null){return;}Y.endTime=an?(Y.startTime+an):NaN;Y.timeDiff=an;};ah.prototype.getItem=function(am,an){var al=0,Y=this._profileItems;if(!this._isValidType(am)||Y.length===0){return null;}for(;al<Y.length;al++){if((an&&an===Y[al].key)||(!an&&am===Y[al].type)){return Y[al];}}return null;};ah.prototype.draw=function(){var al="",Y=this._profileItems;if(!Y||Y.length===0){return al;}al+='<p><table border="1">';al+="<tr><td>Key</td><td>Description</td><td>START</td><td>END</td><td>DIFF</td></tr>";f.each(Y,function(am){al+="<tr><td>"+am.type+"</td><td>"+am.message+"</td><td>"+am.startTime+"</td><td>"+am.endTime+"</td><td>"+am.timeDiff+"</td>"+'<td style="white-space: nowrap;">'+'<div style="display: inline-block; width:'+Math.floor(am.startTime/3)+'px; height: 25px;"></div>'+'<div style="display: inline-block; background-color: '+am.color+"; "+"width:"+Math.floor(am.timeDiff/3)+'px; height:25px; border:1px solid #000"></div></td></tr>';});al+="</table></p>";return al;};ah.prototype._createProfileItem=function(Y){return{type:Y.type,message:Y.desc,color:Y.color||"white",qosMetric:Y.qosMetric===true,startTime:Y.start||(new Date()).getTime()-this._playerStartTime,endTime:NaN,timeDiff:NaN};};ah.prototype._createQueryStringExtension=function(){var Y="",al="&",ao="_s",an="_d",am=this._profileItems;am.forEach(function(ap){if(ap.qosMetric===true){if(Y!==""){Y+=al;}Y+=ap.type+ao+"="+ap.startTime;Y+=al;Y+=ap.type+an+"="+ap.timeDiff;}});return Y;};ah.prototype._isValidType=function(Y){return(Y&&Y!==""&&typeof Y==="string");};f.namespace("VideoPlatform").Profiler=ah;},"4.1.13.21046",{requires:["arraylist","arraylist-add","arraylist-filter","array-extras","jsonp","base","substitute","io-xdr","io-base","json-parse","swf","event-mouseenter","event-key","event-hover","event-custom","node","json-stringify","classnamemanager","event-tap","event-touch","cookie","escape","yepswf","async-queue","transition","VideoAdPlugin"]});;YAHOO.VideoPlatform.i18n = {"ADVERTISEMENT":"Advertisement","ARROW_DOWN":"Arrow Down:","ARROW_LEFT":"Arrow Left:","ARROW_RIGHT":"Arrow Right:","ARROW_UP":"Arrow Up:","AUTO_UCF":"Auto","CAPTIONS_LC":"captions","CAPTIONS_FEEDBACK":"captions feedback","CLOSE_HOTKEY_MENU":"Close Hotkey Menu","CLOSE_INFO":"Close Info","CLOSE_MENU":"Close Menu","CLOSED_CAPTION_COMPLAINTS":"Closed Caption Complaints","DOWNLOAD_FLASH":"Download the free Flash Player Now!","EMBED_UCF":"Embed","EMBED_LC":"embed","EMBED_COLON":"Embed:","ERR_DEVICE":"Unfortunately, this video is not supported on this device.","ERR_EMBED":"Sorry! This video can't be embedded outside of Yahoo.","ERR_FLASH_NOT_ENABLED":"You need Adobe Flash® to play this video.","ERR_FLASH_NOT_UPTO_DATE":"Your Adobe Flash is an old version.","ERR_GEO":"We're sorry! This video is not available in your location.","ERR_NOT_ALLOWED":"You must to be signed in and can watch this video at only one location.","ERR_NOT_FOUND":"We're sorry! We're no longer able to display this video.","ERR_REL_VIDEO":"Please check out one of these related videos:","ERR_REL":"Feel free to check out one of these related videos:","ERR_REL_TECH_ERR":"Please <span class=\"yui3-videoplayer-errorscreen-sub-desc-try\">try again</span> or check out one of these related videos:","ERR_TECH_DIFFICULTIES":"Our apologies! We're having technical difficulties.","ERR_TITLE":"We're sorry...","ERR_UNAVAILABLE":"We're sorry! We're no longer able to display this video.","ERR_UNAVAILABLE_TEMP":"We're sorry! We're no longer able to display this video.","ERR_UNSUPPORTED_FORMAT":"Unfortunately, this video is not supported on this device.","ERR_UNAVAILABLE_SORRY":"Sorry, this video is no longer available.","ERR_USER":"This video is not available for the current user.","ERR_SESSION_TIMEOUT":"Your session has timed out.","FLASH_UPGRADE_NOTE":"Please upgrade to view this video.","HD_NOT_AVAIL":"HD Not Available","HOTKEY_MENU":"Hotkey Menu","JUST_WATCHED":"Just Watched","LINK_LC":"link","LINK_COLON":"Link:","LOADING":"Loading","MUTE_OFF":"Unmute","MUTE_ON":"Mute","NEXT_VIDEO":"Next Video","NOW_PLAYING":"Now Playing","ON_LC":"on","OFF_LC":"off","OPEN_HOTKEY_MENU":"Open Hotkey Menu","OPEN_INFO":"Open Info","PAUSE":"Pause","PLAY":"Play","PLAY_PAUSE":"Play/Pause","PLAY_VIDEO":"Play Video","PREV_VIDEO":"Previous Video","QUALITY_LC":"quality","QUESTION_MARK":"Question Mark:","REPLAY":"Replay","SEEK_FIVE_BACK":"Seek Back 5 seconds","SEEK_FIVE_FWD":"Seek Forwards 5 seconds","SHARE_LC":"share","SHARE_ON_FACEBOOK":"Share on Facebook","SIZE_LC":"size","SPACE_BAR":"Space Bar:","SUBSCRIBE_TO":"Subscribe to","TURN_AUTO_PLAY_OFF":"Turn Autoplay Off","TURN_AUTO_PLAY_ON":"Turn Autoplay On","UPGRADE_FLASH":"Upgrade Flash®","UP_NEXT":"Up Next:","VID_BEGIN_IN":"Your video will begin in {number} seconds","VID_PLAYER_CTRLS":"Video Player Controls","VIEW_AGAIN":"View Again","VISIT_LINK_FOR_NEW_VIDEOS":"Please visit {url_link} for new videos.","VOLUME_LC":"volume","VOL_DOWN":"Volume Down","VOL_UP":"Volume Up"};;YAHOO.VideoPlatform.PlayerHosting = {"bucket":15,"colo":"sg3","env":"p"};;YAHOO.VideoPlatform.WhiteListedDomains = {"abcnews.go.com":"","acc.independent.co.uk":"","agenciabrasil.ebc.com.br":"","and-hsk-molint-ets-uk.andintweb.dmgt.net":"","cma-nol.newsoftheworld.co.uk":"","cma.thetimes.co.uk":"","creative.dailymail.co.uk":"","dailyexpresstoby.calypso.netro42.com":"","etonline.com":"","expressandstar.com":"","fantasyfootball.metro.co.uk":"","guardian.com":"","hellogiggles.com":"","metrofantasy.qa.fsbtech.com":"","mol-uk.andweb.dmgt.net":"","self.ch1.apps.yahooapis.com":"","staging.gfm.metro.co.uk":"","telesto.netro42.net":"","thetimes.co.uk":"","video.maktoob.com":"","yahoo-the-dugout.dgtl.net":"","www.bridgnorthjournal.com":"","www.dailyexpress.co.uk":"","www.dailymail.co.uk":"","www.dailystar.co.uk":"","www.dev1.telegraph.co.uk":"","www.dev2.telegraph.co.uk":"","www.etonline.com":"","www.expressandstar.com":"","www.express.co.uk":"","www.grindtv.com":"","www.guardian.co.uk":"","www.herefordshirejournals.com":"","www.huffingtonpost.com":"","www.independent.co.uk":"","www.marketdraytonadvertiser.com":"","www.metro.co.uk":"","www.mirror.co.uk":"","www.newportadvertiser.com":"","www.newsoftheworld.co.uk":"","www.northshropshirechronicle.com":"","www.rivals.com":"","www.rivals.yahoo.com":"","www.shrewsburychronicle.com":"","www.shropshirestar.com":"","www.southshropshirejournals.com":"","www.standard.co.uk":"","www.talktalk.co.uk":"","www.telegraph.co.uk":"","www.telfordjournal.com":"","www.test1.telegraph.co.uk":"","www.test2.telegraph.co.uk":"","www.test3.telegraph.co.uk":"","www.test4.telegraph.co.uk":"","www.test5.telegraph.co.uk":"","www.test6.telegraph.co.uk":"","www.test7.telegraph.co.uk":"","www.test8.telegraph.co.uk":"","www.thepostgame.com":"","www.thesun.co.uk":"","www.thesundaytimes.co.uk":"","www.thetimes.co.uk":"","www.thisisbarton.co.uk":"","www.thisisbath.co.uk":"","www.thisisbelper.co.uk":"","www.thisisblackmorevale.co.uk":"","www.thisisboston.co.uk":"","www.thisisbridgwater.co.uk":"","www.thisisbrigg.co.uk":"","www.thisisbristol.co.uk":"","www.thisisburnham.co.uk":"","www.thisiscentralsomerset.co.uk":"","www.thisischeadle.co.uk":"","www.thisischeddarvalley.co.uk":"","www.thisisclevedon.co.uk":"","www.thisiscornwall.co.uk":"","www.thisiscourier.co.uk":"","www.thisiscrawley.co.uk":"","www.thisiscroydontoday.co.uk":"","www.thisisderbyshire.co.uk":"","www.thisisdevon.co.uk":"","www.thisisexeter.co.uk":"","www.thisisfosse-way.co.uk":"","www.thisisgloucestershire.co.uk":"","www.thisisgrimsby.co.uk":"","www.thisisguernsey.com":"","www.thisishullandeastriding.co.uk":"","www.thisisilkeston.com":"","www.thisisjersey.com":"","www.thisiskent.co.uk":"","www.thisisleek.co.uk":"","www.thisisleicestershire.co.uk":"","www.thisislichfield.co.uk":"","www.thisislincolnshire.co.uk":"","www.thisislondon.co.uk":"","www.thisislouth.co.uk":"","www.thisismiddevon.co.uk":"","www.thisisnorthdevon.co.uk":"","www.thisisnottingham.co.uk":"","www.thisisplymouth.co.uk":"","www.thisisretford.co.uk":"","www.thisisscunthorpe.co.uk":"","www.thisisshepton.co.uk":"","www.thisissomerset.co.uk":"","www.thisissomersetguardian.co.uk":"","www.thisissomersetstandard.co.uk":"","www.thisissouthderbyshire.co.uk":"","www.thisissouthdevon.co.uk":"","www.thisisstourandavon.co.uk":"","www.thisisstroudtoday.co.uk":"","www.thisissurreytoday.co.uk":"","www.thisissussex.co.uk":"","www.thisissuttoncoldfield.co.uk":"","www.thisisswansea.co.uk":"","www.thisistamworth.co.uk":"","www.thisistheforest.co.uk":"","www.thisisthesentinel.co.uk":"","www.thisistotalessex.co.uk":"","www.thisisuttoxeter.co.uk":"","www.thisiswalsallonline.co.uk":"","www.thisiswells.co.uk":"","www.thisiswesterndailypress.co.uk":"","www.thisiswesterngazette.co.uk":"","www.thisiswesternmorningnews.co.uk":"","www.thisiswestonsupermare.co.uk":"","www.timesonline.co.uk":"","www.uat1.telegraph.co.uk":"","www.uat2.telegraph.co.uk":"","www.uat3.telegraph.co.u":"","www.vosmeilleuresidees.yahoo.fr":"","www.yahoo-evenements.fr":"","www.ycorpblog.com":"","www.yourchronicle.com":"","www.zonalmarking.net":""};<!-- // p|sg3|pprd1-node37-lh2|15|4.1.13.21046|Mon Jan 06 2014 11:45:32 GMT+0000 (UTC)|600|0.3717420876491815 -->