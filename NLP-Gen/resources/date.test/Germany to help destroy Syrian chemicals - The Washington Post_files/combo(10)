var swfobject=function(){var AQ="undefined",Ac="object",AB="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",Ad="application/x-shockwave-flash",AC="SWFObjectExprInst",AW="onreadystatechange",AF=window,Ak=document,Aa=navigator,AA=false,Z=[Am],Af=[],AG=[],AL=[],Ai,AD,AP,AS,AK=false,At=false,Ag,AN,Ah=true,AH=function(){var A=typeof Ak.getElementById!=AQ&&typeof Ak.getElementsByTagName!=AQ&&typeof Ak.createElement!=AQ,E=Aa.userAgent.toLowerCase(),C=Aa.platform.toLowerCase(),H=C?/win/.test(C):/win/.test(E),J=C?/mac/.test(C):/mac/.test(E),G=/webkit/.test(E)?parseFloat(E.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,D=!+"\v1",F=[0,0,0],K=null;if(typeof Aa.plugins!=AQ&&typeof Aa.plugins[AB]==Ac){K=Aa.plugins[AB].description;if(K&&!(typeof Aa.mimeTypes!=AQ&&Aa.mimeTypes[Ad]&&!Aa.mimeTypes[Ad].enabledPlugin)){AA=true;D=false;K=K.replace(/^.*\s+(\S+\s+\S+$)/,"$1");F[0]=parseInt(K.replace(/^(.*)\..*$/,"$1"),10);F[1]=parseInt(K.replace(/^.*\.(.*)\s.*$/,"$1"),10);F[2]=/[a-zA-Z]/.test(K)?parseInt(K.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof AF.ActiveXObject!=AQ){try{var I=new ActiveXObject(X);if(I){K=I.GetVariable("$version");if(K){D=true;K=K.split(" ")[1].split(",");F=[parseInt(K[0],10),parseInt(K[1],10),parseInt(K[2],10)];}}}catch(B){}}}return{w3:A,pv:F,wk:G,ie:D,win:H,mac:J};}(),Aj=function(){if(!AH.w3){return ;}if((typeof Ak.readyState!=AQ&&Ak.readyState=="complete")||(typeof Ak.readyState==AQ&&(Ak.getElementsByTagName("body")[0]||Ak.body))){Ao();}if(!AK){if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("DOMContentLoaded",Ao,false);}if(AH.ie&&AH.win){Ak.attachEvent(AW,function(){if(Ak.readyState=="complete"){Ak.detachEvent(AW,arguments.callee);Ao();}});if(AF==top){(function(){if(AK){return ;}try{Ak.documentElement.doScroll("left");}catch(A){setTimeout(arguments.callee,0);return ;}Ao();})();}}if(AH.wk){(function(){if(AK){return ;}if(!/loaded|complete/.test(Ak.readyState)){setTimeout(arguments.callee,0);return ;}Ao();})();}Ab(Ao);}}();function Ao(){if(AK){return ;}try{var B=Ak.getElementsByTagName("body")[0].appendChild(AR("span"));B.parentNode.removeChild(B);}catch(A){return ;}AK=true;var D=Z.length;for(var C=0;C<D;C++){Z[C]();}}function AJ(A){if(AK){A();}else{Z[Z.length]=A;}}function Ab(A){if(typeof AF.addEventListener!=AQ){AF.addEventListener("load",A,false);}else{if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("load",A,false);}else{if(typeof AF.attachEvent!=AQ){Al(AF,"onload",A);}else{if(typeof AF.onload=="function"){var B=AF.onload;AF.onload=function(){B();A();};}else{AF.onload=A;}}}}}function Am(){if(AA){Y();}else{AM();}}function Y(){var D=Ak.getElementsByTagName("body")[0];var B=AR(Ac);B.setAttribute("type",Ad);var A=D.appendChild(B);if(A){var C=0;(function(){if(typeof A.GetVariable!=AQ){var E=A.GetVariable("$version");if(E){E=E.split(" ")[1].split(",");AH.pv=[parseInt(E[0],10),parseInt(E[1],10),parseInt(E[2],10)];}}else{if(C<10){C++;setTimeout(arguments.callee,10);return ;}}D.removeChild(B);A=null;AM();})();}else{AM();}}function AM(){var G=Af.length;if(G>0){for(var H=0;H<G;H++){var C=Af[H].id;var L=Af[H].callbackFn;var A={success:false,id:C};if(AH.pv[0]>0){var I=Ar(C);if(I){if(AO(Af[H].swfVersion)&&!(AH.wk&&AH.wk<312)){AX(C,true);if(L){A.success=true;A.ref=AU(C);L(A);}}else{if(Af[H].expressInstall&&AT()){var E={};E.data=Af[H].expressInstall;E.width=I.getAttribute("width")||"0";E.height=I.getAttribute("height")||"0";if(I.getAttribute("class")){E.styleclass=I.getAttribute("class");}if(I.getAttribute("align")){E.align=I.getAttribute("align");}var F={};var D=I.getElementsByTagName("param");var K=D.length;for(var J=0;J<K;J++){if(D[J].getAttribute("name").toLowerCase()!="movie"){F[D[J].getAttribute("name")]=D[J].getAttribute("value");}}AE(E,F,C,L);}else{Ae(I);if(L){L(A);}}}}}else{AX(C,true);if(L){var B=AU(C);if(B&&typeof B.SetVariable!=AQ){A.success=true;A.ref=B;}L(A);}}}}}function AU(B){var D=null;var C=Ar(B);if(C&&C.nodeName=="OBJECT"){if(typeof C.SetVariable!=AQ){D=C;}else{var A=C.getElementsByTagName(Ac)[0];if(A){D=A;}}}return D;}function AT(){return !At&&AO("6.0.65")&&(AH.win||AH.mac)&&!(AH.wk&&AH.wk<312);}function AE(F,D,H,E){At=true;AP=E||null;AS={success:false,id:H};var A=Ar(H);if(A){if(A.nodeName=="OBJECT"){Ai=An(A);AD=null;}else{Ai=A;AD=H;}F.id=AC;if(typeof F.width==AQ||(!/%$/.test(F.width)&&parseInt(F.width,10)<310)){F.width="310";}if(typeof F.height==AQ||(!/%$/.test(F.height)&&parseInt(F.height,10)<137)){F.height="137";}Ak.title=Ak.title.slice(0,47)+" - Flash Player Installation";var B=AH.ie&&AH.win?"ActiveX":"PlugIn",C="MMredirectURL="+AF.location.toString().replace(/&/g,"%26")+"&MMplayerType="+B+"&MMdoctitle="+Ak.title;if(typeof D.flashvars!=AQ){D.flashvars+="&"+C;}else{D.flashvars=C;}if(AH.ie&&AH.win&&A.readyState!=4){var G=AR("div");H+="SWFObjectNew";G.setAttribute("id",H);A.parentNode.insertBefore(G,A);A.style.display="none";(function(){if(A.readyState==4){A.parentNode.removeChild(A);}else{setTimeout(arguments.callee,10);}})();}AZ(F,D,H);}}function Ae(A){if(AH.ie&&AH.win&&A.readyState!=4){var B=AR("div");A.parentNode.insertBefore(B,A);B.parentNode.replaceChild(An(A),B);A.style.display="none";(function(){if(A.readyState==4){A.parentNode.removeChild(A);}else{setTimeout(arguments.callee,10);}})();}else{A.parentNode.replaceChild(An(A),A);}}function An(B){var D=AR("div");if(AH.win&&AH.ie){D.innerHTML=B.innerHTML;}else{var E=B.getElementsByTagName(Ac)[0];if(E){var A=E.childNodes;if(A){var F=A.length;for(var C=0;C<F;C++){if(!(A[C].nodeType==1&&A[C].nodeName=="PARAM")&&!(A[C].nodeType==8)){D.appendChild(A[C].cloneNode(true));}}}}}return D;}function AZ(E,G,C){var D,A=Ar(C);if(AH.wk&&AH.wk<312){return D;}if(A){if(typeof E.id==AQ){E.id=C;}if(AH.ie&&AH.win){var F="";for(var I in E){if(E[I]!=Object.prototype[I]){if(I.toLowerCase()=="data"){G.movie=E[I];}else{if(I.toLowerCase()=="styleclass"){F+=' class="'+E[I]+'"';}else{if(I.toLowerCase()!="classid"){F+=" "+I+'="'+E[I]+'"';}}}}}var H="";for(var J in G){if(G[J]!=Object.prototype[J]){H+='<param name="'+J+'" value="'+G[J]+'" />';}}A.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+F+">"+H+"</object>";AG[AG.length]=E.id;D=Ar(E.id);}else{var B=AR(Ac);B.setAttribute("type",Ad);for(var K in E){if(E[K]!=Object.prototype[K]){if(K.toLowerCase()=="styleclass"){B.setAttribute("class",E[K]);}else{if(K.toLowerCase()!="classid"){B.setAttribute(K,E[K]);}}}}for(var L in G){if(G[L]!=Object.prototype[L]&&L.toLowerCase()!="movie"){Ap(B,L,G[L]);}}A.parentNode.replaceChild(B,A);D=B;}}return D;}function Ap(B,D,C){var A=AR("param");A.setAttribute("name",D);A.setAttribute("value",C);B.appendChild(A);}function AV(A){var B=Ar(A);if(B&&B.nodeName=="OBJECT"){if(AH.ie&&AH.win){B.style.display="none";(function(){if(B.readyState==4){As(A);}else{setTimeout(arguments.callee,10);}})();}else{B.parentNode.removeChild(B);}}}function As(A){var B=Ar(A);if(B){for(var C in B){if(typeof B[C]=="function"){B[C]=null;}}B.parentNode.removeChild(B);}}function Ar(A){var C=null;try{C=Ak.getElementById(A);}catch(B){}return C;}function AR(A){return Ak.createElement(A);}function Al(A,C,B){A.attachEvent(C,B);AL[AL.length]=[A,C,B];}function AO(A){var B=AH.pv,C=A.split(".");C[0]=parseInt(C[0],10);C[1]=parseInt(C[1],10)||0;C[2]=parseInt(C[2],10)||0;return(B[0]>C[0]||(B[0]==C[0]&&B[1]>C[1])||(B[0]==C[0]&&B[1]==C[1]&&B[2]>=C[2]))?true:false;}function AY(B,F,A,C){if(AH.ie&&AH.mac){return ;}var E=Ak.getElementsByTagName("head")[0];if(!E){return ;}var G=(A&&typeof A=="string")?A:"screen";if(C){Ag=null;AN=null;}if(!Ag||AN!=G){var D=AR("style");D.setAttribute("type","text/css");D.setAttribute("media",G);Ag=E.appendChild(D);if(AH.ie&&AH.win&&typeof Ak.styleSheets!=AQ&&Ak.styleSheets.length>0){Ag=Ak.styleSheets[Ak.styleSheets.length-1];}AN=G;}if(AH.ie&&AH.win){if(Ag&&typeof Ag.addRule==Ac){Ag.addRule(B,F);}}else{if(Ag&&typeof Ak.createTextNode!=AQ){Ag.appendChild(Ak.createTextNode(B+" {"+F+"}"));}}}function AX(A,C){if(!Ah){return ;}var B=C?"visible":"hidden";if(AK&&Ar(A)){Ar(A).style.visibility=B;}else{AY("#"+A,"visibility:"+B);
}}function AI(B){var A=/[\\\"<>\.;]/;var C=A.exec(B)!=null;return C&&typeof encodeURIComponent!=AQ?encodeURIComponent(B):B;}var Aq=function(){if(AH.ie&&AH.win){window.attachEvent("onunload",function(){var A=AL.length;for(var B=0;B<A;B++){AL[B][0].detachEvent(AL[B][1],AL[B][2]);}var D=AG.length;for(var C=0;C<D;C++){AV(AG[C]);}for(var E in AH){AH[E]=null;}AH=null;for(var F in swfobject){swfobject[F]=null;}swfobject=null;});}}();return{registerObject:function(A,E,C,B){if(AH.w3&&A&&E){var D={};D.id=A;D.swfVersion=E;D.expressInstall=C;D.callbackFn=B;Af[Af.length]=D;AX(A,false);}else{if(B){B({success:false,id:A});}}},getObjectById:function(A){if(AH.w3){return AU(A);}},embedSWF:function(K,E,H,F,C,A,B,I,G,J){var D={success:false,id:E};if(AH.w3&&!(AH.wk&&AH.wk<312)&&K&&E&&H&&F&&C){AX(E,false);AJ(function(){H+="";F+="";var Q={};if(G&&typeof G===Ac){for(var O in G){Q[O]=G[O];}}Q.data=K;Q.width=H;Q.height=F;var N={};if(I&&typeof I===Ac){for(var P in I){N[P]=I[P];}}if(B&&typeof B===Ac){for(var L in B){if(typeof N.flashvars!=AQ){N.flashvars+="&"+L+"="+B[L];}else{N.flashvars=L+"="+B[L];}}}if(AO(C)){var M=AZ(Q,N,E);if(Q.id==E){AX(E,true);}D.success=true;D.ref=M;}else{if(A&&AT()){Q.data=A;AE(Q,N,E,J);return ;}else{AX(E,true);}}if(J){J(D);}});}else{if(J){J(D);}}},switchOffAutoHideShow:function(){Ah=false;},ua:AH,getFlashPlayerVersion:function(){return{major:AH.pv[0],minor:AH.pv[1],release:AH.pv[2]};},hasFlashPlayerVersion:AO,createSWF:function(A,B,C){if(AH.w3){return AZ(A,B,C);}else{return undefined;}},showExpressInstall:function(B,A,D,C){if(AH.w3&&AT()){AE(B,A,D,C);}},removeSWF:function(A){if(AH.w3){AV(A);}},createCSS:function(B,A,C,D){if(AH.w3){AY(B,A,C,D);}},addDomLoadEvent:AJ,addLoadEvent:Ab,getQueryParamValue:function(B){var A=Ak.location.search||Ak.location.hash;if(A){if(/\?/.test(A)){A=A.split("?")[1];}if(B==null){return AI(A);}var C=A.split("&");for(var D=0;D<C.length;D++){if(C[D].substring(0,C[D].indexOf("="))==B){return AI(C[D].substring((C[D].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(At){var A=Ar(AC);if(A&&Ai){A.parentNode.replaceChild(Ai,A);if(AD){AX(AD,true);if(AH.ie&&AH.win){Ai.style.display="block";}}if(AP){AP(AS);}}At=false;}}};}();(function(A){A.fn.tabbedpanels=function(B){var C={activeClass:"on",hiddenClass:"hide"},B=A.extend({},C,B);return this.each(function(){var F=A(this),E=F.find("ul.tabs").eq(0),D=E.find("li.hide"),J=D.find("a"),H=E.find("li a"),I=F.find(".panels"),G=F.find("div.panels:eq(0)>div.panel");panelsVariable=F.find("div.panels-variable-length:eq(0)>div.panel");D.hide().removeClass("hide").show("slow",function(){});if(I.length>0&&panelsVariable.length==0){TWP.Modules.setLargestHeight(G,I);}H.click(function(M){M.preventDefault();var L=A(this),K=L.attr("data-tab-title")||L.attr("href"),N=A(G).filter(function(){return A(this).hasClass(K);});H.not(L).removeClass(B.activeClass);L.addClass(B.activeClass);G.addClass(B.hiddenClass);N.removeClass(B.hiddenClass);if(I.length>0&&panelsVariable.length==0){TWP.Modules.setLargestHeight(G,I);}});});};})(jQuery);(function(A){A.fn.accordion=function(B){return this.each(function(){var C=A(this),D={expand:"expand",closed:"closed",bkgd:"bkgd-grey-gradient"};C.find(".acitem").hide();C.find("li.expand > .acitem").show();C.find("li a.title").click(function(E){E.preventDefault();var I=A(E.target).parents("li")[0];var H=A(I).children(".acitem");var G=A(H,I);var F=A(I).siblings();A(G).slideToggle("fast");A(I).hasClass(D.expand)?A(I).removeClass(D.expand):A(I).addClass(D.expand);A(I).hasClass(D.closed)?A(I).removeClass(D.closed).removeClass(D.bkgd):A(I).addClass(D.closed).addClass(D.bkgd);if(A(F.hasClass(D.expand))){A(F).removeClass(D.expand).addClass(D.closed).addClass(D.bkgd).find("ol").slideUp();}});});};})(jQuery);(function(A){A.fn.tooltip=function(B){return this.each(function(){new A.tooltip(this,B);});};A.tooltip=function(C,B){this.el=A(C).get(0);this.options={inner:false};this.options=A.extend(B);this.props={classes:{overState:"on",hidden:"hide"},initial:true};this.elems={};this.init();};A.tooltip.fn=A.tooltip.prototype={};A.tooltip.fn.extend=A.tooltip.extend=jQuery.extend;A.tooltip.fn.extend({init:function(){this.cacheElems();this.assignHandlers();},cacheElems:function(){this.elems.$toolTip=A(this.el);this.elems.$toolTipText=A("span:eq(0)",this.el);this.elems.$toolTipRel=A(this.el).attr("rel");},assignHandlers:function(){var B=this;this.elems.$toolTip.mouseenter(function(C){if(typeof B.elems.$toolTipRel!=="undefined"&&A(this).find("span.thistip").length==0){A(B.elems.$toolTipRel).clone().prependTo(A(this)).wrap('<span class="thistip" />');}if(typeof B.elems.$toolTipRel!=="undefined"){B.elems.$toolTipText=A("span:eq(0)",this);}B.sizeIt(B);B.showTip(B);B.props.initial=false;C.stopPropagation();C.stopImmediatePropagation();});this.elems.$toolTip.mouseleave(function(C){B.hideTip(B);});},sizeIt:function(C){if(typeof C.elems.$toolTipRel=="undefined"){var B=this.elems.$toolTipText.height();if(C.props.initial){this.elems.$toolTipText.height(B/4);}else{this.elems.$toolTipText.height(B);}}},showTip:function(B){this.elems.$toolTipText.addClass(this.props.classes.overState);},hideTip:function(B){this.elems.$toolTipText.removeClass(this.props.classes.overState);}});})(jQuery);TWP=window.TWP||{};TWP.Social=TWP.Social||{};(function(A){TWP.Social.ShareBox=function(C,B){var K=C,J=K.hasClass("bottom")?false:true,N={"facebook":{name:"Facebook",url:"http://www.facebook.com/sharer.php?u={shareURL}&title={shareTitle}"},"digg":{name:"Digg",url:"http://digg.com/submit?phase=2&url={shareURL}&title={shareTitle}"},"stumble-upon":{name:"Stumble Upon",url:"http://www.stumbleupon.com/submit?url={shareURL}&title{shareTitle}"},"email":{name:"Email",url:"mailto:?subject=The Washington Post: {shareURL}&body={shareTitle}%0A{shareURL}",emailURL:"{emailURL}"},"rss":{name:"RSS",url:"{rssURL}"},"twitter":{name:"Twitter",url:"http://twitter.com/home?status={shareURL}&title={shareTitle}"},"delicious":{name:"Delicious",url:"http://del.icio.us/post?v=4&noui&jump=close&url={shareURL}&title={shareTitle}"},"yahoo-buzz":{name:"Yahoo Buzz",url:"http://buzz.yahoo.com/submit/?submitUrl={shareURL}&title={shareTitle}"},"linkedin":{name:"LinkedIn",url:"http://www.linkedin.com/shareArticle?mini=true&url={shareURL}&title={shareTitle}"}},I=this.shareBox=A('<div class="share-box"/>').append(A('<div class="left odd"/>')).append(A('<div class="left even"/>')).append(A('<div class="clear"/>')),O=A(I).find(".odd"),E=I.find(".even"),H=0;var P=function(){if(B){K.addClass("click-only");}I.css("display","none");A("body").append(I);L();if(!K.hasClass("click-only")){K.bind("mouseenter",M);}K.unbind("click");K.bind("click",M);K.bind("mouseleave",D);I.bind("mouseleave",D);I.bind("mouseenter",M);};this.addNetwork=function(R,Q,S){N[R]={url:S,name:Q};L();};var L=this.updateLinks=function(){var Q=K.attr("href"),X=K.attr("title"),R=K.attr("emailurl"),W=K.attr("rss");var Y=[];if(K.attr("rel").toLowerCase().match("all")){for(var T in N){if(T=="rss"){if(W){Y.push(T);}}else{Y.push(T);}}}else{Y=K.attr("rel").split(",");}E.html("");O.html("");for(var V in Y){T=Y[V];if(N[T]){var S=N[T];var U=V%2?E:O;S.el=A('<a class="'+T+' icon share"/>',{target:"_blank"});S.el.attr("href",A.substitute((R&&T=="email")?S.emailURL:S.url,{shareURL:escape(Q),shareTitle:X,emailURL:R,rssURL:W}));S.el.text(S.name);U.append(S.el);if(R&&T=="email"){S.el.addClass("iframe-overlay").attr("config","width=850&height=800");}}}};var M=this.show=function(Q){if(Q){Q.preventDefault();}clearInterval(H);L();F();I.css("display","block");};var D=function(Q){if(Q){Q.preventDefault();}clearInterval(H);H=setTimeout(G,200);};var G=this.hide=function(){I.css("display","none");};var F=this.position=function(){var R=I.css("display");I.css({display:"block"});var Q=K.offset();I.offset({left:Q.left,top:Q.top+(J?(-parseInt(I.css("height"))-2):(parseInt(K.css("height"))+2))});I.css({display:R});};P();};}(jQuery));TWP=window.TWP||{};TWP.Eidos=TWP.Eidos||{};TWP.Eidos.Modules=TWP.Eidos.Modules||{};(function(A){TWP.Eidos.Modules.Flipper=function(E,P){var K=this,L=A(E),N=L.find(".flipper-main"),Q=L.find(".flipper-caption"),C={caption:L.find(".caption"),fullscreen:L.find(".large.modal"),left:L.find(".left-arrow"),right:L.find(".right-arrow"),floatLeft:A('<div class="flipper-float"/>'),floatRight:A('<div class="flipper-float"/>')},I={top:0,position:"absolute",width:"50%",zIndex:11,cursor:"pointer",opacity:0,backgroundColor:"white"},T=[],R=0,G={NORMAL:"normal",FULLSCREEN:"fullscreen"},J=P?P:G.NORMAL;
var O=function(){N.css({display:"block"});C.floatLeft.css(I).css({left:0,height:N.css("height")}).appendTo(N);C.floatRight.css(I).css({right:0,height:N.css("height")}).appendTo(N);if(C.left&&C.right){C.left.on("click",function(Y){D(Y,-1);});C.right.on("click",function(Y){D(Y,1);});}C.floatLeft.on("click",function(Y){D(Y,-1);});C.floatRight.on("click",function(Y){D(Y,1);});if(Q.find("p").length==0){var X=A("<p/>",{text:Q.text()});Q.text("");Q.append(X);}if(C.caption){C.caption.on("click",F);if(J==G.FULLSCREEN){C.fullscreen.css("display","none");}var W={display:"block",zIndex:10,opacity:0};if(J!=G.FULLSCREEN){W.top=(Q.hasClass("up"))?N.css("height"):parseInt(N.css("height"))-parseInt(Q.css("height"))+"px";}else{W.bottom="0px";Q.css("top","");}var V=N.parents(".article-side-rail");if(!V.hasClass("article-side-rail")){Q.css(W);N.append(Q);}else{Q.css("max-height","150px");}}if(C.fullscreen){C.fullscreen.on("click",B);}N.find("img").remove();L.find(".thumbs a").each(function(a,Y){var Z=new H(Y);T.push(Z);A(Z.link).on("click",function(b){b.preventDefault();U(A.inArray(Z,T));});if(A(Z.thumb).hasClass("on")){R=a;}N.append(Z.normal);N.append(Z.fullscreen);Z.normal.css({opacity:0,position:"absolute"});Z.fullscreen.css({opacity:0,position:"absolute"});});U(R);if(Q.hasClass("up")){Q.removeClass("up");F(null);}};var D=function(W,V){if(W){W.preventDefault();}if(!A(W.target).hasClass("deactivated")){U(R+V);}};var U=function(W){W=W<0?0:W;W=W>=T.length?T.length-1:W;if(C.left){C.left.toggleClass("deactivated",W==0);C.right.toggleClass("deactivated",W==T.length-1);}C.floatLeft.toggleClass("deactivated",W==0);C.floatRight.toggleClass("deactivated",W==T.length-1);var V=T[W];if(W!=R){S(T[R],false);Q.find("p").html(V.caption);}R=W;if(!V.loaded[J]){M(V,J,function(){if(W==R){S(V,true);}});}else{S(V,true);}A(K).trigger("flipper:PhotoChanged",R);};var S=function(V,W){var X=W?1:0;V.thumb.toggleClass("on",W);if(!W){V.normal.animate({opacity:X},250);V.fullscreen.animate({opacity:X},250);}else{V[J].animate({opacity:X},250);}};var M=function(X,V,Y){var W=X[V];W.load(function(){X.loaded[V]=true;var Z=function(){var a=parseInt(X[V].css("height"));var b=parseInt(X[V].css("width"));if(a!=0&&b!=0){if(V==G.FULLSCREEN){N.css({width:b+"px",height:a+"px"});}else{X[V].css({left:"50%",top:(parseInt(N.css("height"))-a)/2+"px",marginLeft:-b/2+"px"});}}else{setTimeout(Z,10);}};Z();Y();});W.attr("src",X.url[V]);};var F=function(W){if(W){W.preventDefault();}var V={};V.opacity=(Q.hasClass("up"))?0:0.6;if(J!=G.FULLSCREEN){V.top=(Q.hasClass("up"))?N.css("height"):parseInt(N.css("height"))-parseInt(Q.css("height"))+"px";}if(Q.hasClass("up")){Q.animate(V);Q.removeClass("up");}else{Q.animate(V);Q.addClass("up");}A(K).trigger("flipper:CaptionToggle");};var B=function(W){W.preventDefault();var X=new Date().getTime();var V=L.clone().attr("id",X);new TWP.Overlay(V,{callback:function(){var Y=new TWP.Eidos.Modules.Flipper(A("#"+X),G.FULLSCREEN);A(Y).on("flipper:PhotoChanged",function(a,Z){U(Z);});A(Y).on("flipper:CaptionToggle",F);}});};var H=function(W){var V=this.thumb=A(W).find("img");this.link=W;this.caption=V.attr("alt");this.url={fullscreen:W.getAttribute("fullscreen"),normal:W.getAttribute("href")};this.loaded={fullscreen:false,normal:false};this.normal=A("<img/>");this.fullscreen=A("<img/>");};O.apply(this);};}(jQuery));(function(A){A.fn.timestamp=function(R){var F={override:true,regardAttrs:true,regardArgs:true},M=365*24*60*60*1000,N=24*60*60*1000,G=60*60*1000,E=60*1000,D=1000,Q=new Date().getTime(),R=A.extend({},F,R),C=["January","February","March","April","May","June","July","August","September","October","November","December"],H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],L=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I={"y":" years","d":" days","h":" hours","m":" minutes","s":" seconds","ms":" milliseconds"},O={"y":" yrs","d":" days","h":" hrs","m":" mins","s":" secs","ms":"ms"},K={"y":"y","d":"d","h":"h","m":"m","s":"s","ms":"ms"},J={"y":"","d":"","h":"","m":"","s":"","m":""},B=/wp.com\/(homepage|local)/;return this.each(function(){var a=A(this),AM=R.override.toString().toLowerCase()=="true",g=R.regardAttrs.toString().toLowerCase()=="true",j=R.regardArgs.toString().toLowerCase()=="true",m=(AM&&j&&parseInt(R.epochTime))||(g&&parseInt(a.attr("epochTime")))||(j&&parseInt(R.epochTime))||Q,AG=(AM&&j&&parseInt(R.now))||(g&&parseInt(a.attr("now")))||(j&&parseInt(R.now))||Q,l=!!((AG-m)<0),z=(AM&&j&&parseInt(R.compareTime))||(g&&parseInt(a.attr("compareTime")))||(j&&parseInt(R.compareTime))||m,f=(AM&&j&&R.contentType)||(g&&a.attr("contentType"))||(j&&R.contentType),k=(AM&&j&&R.pageType)||(g&&a.attr("pageType"))||(j&&R.pageType)||"module",AW=(AM&&j&&R.dateTitle)||(g&&a.attr("dateTitle"))||(j&&R.dateTitle)||"",AD=(AM&&j&&R.channel)||(g&&a.attr("channel"))||(j&&R.dateTitle)||"wp.com",t=(AM&&j&&R.dateFormat)||(g&&a.attr("dateFormat"))||(j&&R.dateFormat)||"default",q=(AM&&j&&parseInt(R.thresholdAge))||(g&&parseInt(a.attr("thresholdAge")))||(j&&parseInt(R.thresholdAge))||s(),p=(AM&&j&&parseInt(R.thresholdRecent))||(g&&parseInt(a.attr("thresholdRecent")))||(j&&parseInt(R.thresholdRecent))||AP(),X=(AM&&j&&parseInt(R.thresholdArchive))||(g&&parseInt(a.attr("thresholdArchive")))||(j&&parseInt(R.thresholdArchive))||AS(),AL=(AM&&j&&parseInt(R.thresholdFuture))||(g&&parseInt(a.attr("thresholdFuture")))||(j&&parseInt(R.thresholdFuture))||b(),u=(AM&&j&&R.discussionStatus)||(g&&a.attr("discussionStatus"))||(j&&R.discussionStatus),AO=(AM&&j&&R.unitsAge)||(g&&a.attr("unitsAge"))||(j&&R.unitsAge)||"abbr",AN=(AM&&j&&R.sigFigsAge)||(g&&a.attr("sigFigsAge"))||(j&&R.sigFigsAge)||6,AF=(AM&&j&&R.placement)||(g&&a.attr("placement"))||(j&&R.placement)||"append",V=(AM&&j&&R.template)||(g&&a.attr("template"))||(j&&R.template)||Y();if(m){a.addClass("processed").removeClass("pre");var AR=new Date(m),AJ=new Date(AG),AT=new Date(z),W=AB(AR,AJ),AH=w(AR,AJ),U=((AG-m)>=0)?(AG-m):(m-AG),AV=AC(U),e=AQ(U),Z=x(U);if(k=="leaf"||k=="leaf-feature"){var AE=(parseInt(m)==parseInt(z)),y=AB(AR,AT),AU=w(AR,AT),o=(k=="leaf-feature")?"Published: ":"Published: ",v=(k=="leaf-feature")?"":" | ",AI="Updated: ",i="";if(AE){if(AW=="published"){if(AH){t="leaf-recent";}else{if(AV<AC(X)){t="leaf-old";V=o+"{{ timestamp }}";}else{t="leaf-archive";V=o+"{{ timestamp }}";}}}else{if(AW=="updated"){t="none";V="";}else{t="none";V="";}}}else{if(AU){if(AW=="published"){if(AH){t="none";}else{if(AV<AC(X)){t="leaf-old";V=o+"{{ timestamp }}";}else{t="leaf-archive";V=o+"{{ timestamp }}";}}}else{if(AW=="updated"){if(AH){t="leaf-recent";V=AI+"{{ timestamp }}";}else{t="none";}}else{t="none";V="";}}}else{if(AW=="published"){if(AV<AC(X)){t="leaf-old";V=o+"{{ timestamp }}"+v;}else{t="leaf-archive";V=o+"{{ timestamp }}"+v;}}else{if(AW=="updated"){t="leaf-recent";V=AI+"{{ timestamp }}";}else{t="none";V="";}}}}}else{if(t=="default"){if(f=="live_discussion"){if(u=="pre"){if(AH){t="recent";}else{if(l){if(e<AQ(AL)){t="recent-detailed";}else{if(W){t="old";}else{t="archive";}}}else{t="none";}}}else{if(u=="live"){t="live";}else{t="none";}}}else{if(!!AD.toLowerCase().match(B)){if(e>=0&&e<AQ(p)){t="recent";}else{t="none";}}else{if(AH){t="recent";}else{if(AV<AC(X)){t="old";}else{t="archive";}}}}}else{if(t=="stream-blog"){if(e>=0&&e<AQ(q)){AO="full";AN=(Z<61||e>24)?1:2;V=(l)?"Live in {{ timestamp }}":"Updated {{ timestamp }} ago";t="age";}else{if(AH){t="recent";}else{if(AV<AC(X)){t="old";}else{t="archive";}}}}else{if(t=="stream-topic"){if(f=="live_discussion"&&u.match(/^pre|live$/)){if(u=="live"){V="<b>LIVE<br/>NOW</b>";}else{if(AH){t="recent";V="<b>TODAY<br/>{{timestamp}}</b>";}else{if(AV<AC(X)){t="old-stream-topic";}else{t="archive-stream-topic";}}}}else{if(AH){t="recent-stream-topic";}else{if(AV<AC(X)){t="old-stream-topic";}else{t="archive-stream-topic";}}}}}}}switch(AF){case"prepend":a.prepend(AK());break;case"replace":a.empty().append(AK());break;case"append":a.append(AK());break;default:a.append(AK());
break;}if(window.TWP&&TWP.Modules&&TWP.Modules.setLargestHeight){a.parents(".set-largest-height").each(function(d,c){TWP.Modules.setLargestHeight(c.id);});}}function s(){return 3*G;}function AP(){if(!!AD.toLowerCase().match(B)){return 3*G;}else{return 40*M;}}function AS(){return 1*M/2;}function b(){return 48*G;}function h(){return"default";}function Y(){if(t=="age"){if(l){return" Live in {{ timestamp }}";}else{return" Updated {{ timestamp }} ago";}}else{return"{{ timestamp }}";}}function AK(){var Ad="";switch(t){case"age":if(U>0){var Ae=U,n,AY,Aa,AX,Af,AZ;if(Ae<q){n=Math.floor(r(Ae));Ae=Ae-(n*M);AY=Math.floor(AC(Ae));Ae=Ae-(AY*N);Aa=Math.floor(AQ(Ae));Ae=Ae-(Aa*G);AX=Math.floor(x(Ae));Ae=Ae-(AX*E);Af=Math.floor(S(Ae));ageInMillis=Ae-(Af*D);AZ=0;if(!!n&&AZ<AN){Ad+=n+AA("y",AO,n);AZ++;}if(!!AY&&AZ<AN){Ad+=" "+AY+AA("d",AO,AY);AZ++;}if(!!Aa&&AZ<AN){Ad+=" "+Aa+AA("h",AO,Aa);AZ++;}if(!!AX&&AZ<AN){Ad+=" "+AX+AA("m",AO,AX);AZ++;}if(!Ad){Ad+="less than 1"+AA("s",AO,1);}}}break;case"recent":var Ag=(AR.getHours()%12);Ag=(Ag==0)?12:Ag;var Ab=AR.getMinutes();Ab=(Ab<10)?0+""+Ab:Ab;var d=(AR.getHours()<12)?"AM":"PM";Ad=Ag+":"+Ab+"&nbsp;"+d+"&nbsp;ET";break;case"recent-stream-topic":var Ag=(AR.getHours()%12);Ag=(Ag==0)?12:Ag;var Ab=AR.getMinutes();Ab=(Ab<10)?0+""+Ab:Ab;var d=(AR.getHours()<12)?"AM":"PM";var c=P[AR.getDay()].toUpperCase();var Ac=H[AR.getMonth()].toUpperCase()+"&nbsp;"+AR.getDate();Ad="<b>"+Ag+":"+Ab+"&nbsp;"+d+"&nbsp;ET</b>";Ad+="<br/>"+c+",<br/>"+Ac;break;case"recent-detailed":var Ac=H[AR.getMonth()].toUpperCase()+"&nbsp;"+AR.getDate();var Ag=(AR.getHours()%12);Ag=(Ag==0)?12:Ag;var Ab=AR.getMinutes();Ab=(Ab<10)?0+""+Ab:Ab;var d=(AR.getHours()<12)?"AM":"PM";Ad=Ac+", "+Ag+":"+Ab+"&nbsp;"+d+"&nbsp;ET";break;case"live":Ad="Live".toUpperCase();break;case"old":Ad=H[AR.getMonth()].toUpperCase()+"&nbsp;"+AR.getDate();break;case"old-stream-topic":var c=P[AR.getDay()].toUpperCase();var Ac=H[AR.getMonth()].toUpperCase()+"&nbsp;"+AR.getDate();Ad=c+",<br/><b>"+Ac+"</b>";break;case"this-week":var c=P[AR.getDay()].toUpperCase();var Ac=H[AR.getMonth()].toUpperCase()+"&nbsp;"+AR.getDate();Ad=c+", "+Ac;break;case"archive":Ad=H[AR.getMonth()].toUpperCase()+"&nbsp;"+AR.getDate()+", "+AR.getFullYear();break;case"archive-stream-topic":var c=P[AR.getDay()].toUpperCase();var Ac=H[AR.getMonth()].toUpperCase()+"&nbsp;"+AR.getDate()+", "+AR.getFullYear();Ad=c+",<br/><b>"+Ac+"</b>";break;case"leaf-recent":var c=P[AR.getDay()];var Ac=C[AR.getMonth()]+"&nbsp;"+AR.getDate();var Ag=(AR.getHours()%12);Ag=(Ag==0)?12:Ag;var Ab=AR.getMinutes();Ab=(Ab<10)?0+""+Ab:Ab;var d=(AR.getHours()<12)?"AM":"PM";Ad=c+", "+Ac+', <span class="time special">'+Ag+":"+Ab+"&nbsp;"+d+"</span>";break;case"leaf-old":Ad=C[AR.getMonth()]+"&nbsp;"+AR.getDate();break;case"leaf-archive":Ad=C[AR.getMonth()]+"&nbsp;"+AR.getDate()+", "+AR.getFullYear();break;case"hp":Ad=C[AR.getMonth()]+"&nbsp;"+AR.getDate()+", "+AR.getFullYear();break;case"long":Ad=AR.toString();break;case"none":Ad="";break;default:Ad="";}if(!!V){return V.replace(/{{\s*timestamp\s*}}/,Ad);}else{return Ad;}}function S(c){return c/D;}function x(c){return c/E;}function AQ(c){return c/G;}function AC(c){return c/N;}function r(c){return c/M;}function AB(d,c){c=c||AJ;return(d.getFullYear()==c.getFullYear());}function T(d,c){c=c||AJ;return(AB(d,c)&&(d.getMonth()==c.getMonth()));}function w(d,c){c=c||AJ;return(AB(d,c)&&T(d,c)&&(d.getDate()==c.getDate()));}function AA(c,AX,AY){var d=(AX=="blank"?J:(AX=="full")?I:(AX=="abbr")?O:K)[c];if(AY==1&&(AX=="full"||AX=="abbr")){d=d.replace(/s$/,"");}return d;}});};})(jQuery);(function(B,A,C){B.fn.relativeDate=function(G){var H={dateGetter:function(J){return B(J).text();}},E=B.extend({},H,G),D=function(K){var J=new Date;J.setTime(Date.parse(K));return F(J);},F=function(J){return I(new Date,J);},I=function(M,L){var K=((M-L)/1000);var J=Math.floor(K/60);if(J==0){return"less than a minute ago";}if(J==1){return"a minute ago";}if(J<45){return J+" minutes ago";}if(J<90){return"about 1 hour ago";}if(J<1440){return"about "+Math.floor(J/60)+" hours ago";}if(J<2880){return"1 day ago";}if(J<43200){return Math.floor(J/1440)+" days ago";}if(J<86400){return"about 1 month ago";}if(J<525960){return Math.floor(J/43200)+" months ago";}if(J<1051199){return"about 1 year ago";}return"over "+Math.floor(J/525960)+" years ago";};return B(this).each(function(){date_str=E.dateGetter(this);B(this).html(D(date_str));});};})(jQuery,window);(function(A){A.fn.storyflipper=function(B){return this.each(function(){new A.storyflipper(this,B);});};A.storyflipper=function(C,B){var D={paginationType:"default"};this.options=A.extend(D,B);this.props={prevAvail:false,nextAvail:true,isSetUp:false};this.classes={deactivated:"deactivated",on:"on"};this.Elems={};this.init(C);};A.storyflipper.fn=A.storyflipper.prototype={};A.storyflipper.fn.extend=A.storyflipper.extend=A.extend;A.storyflipper.fn.extend({init:function(B){if(!this.props.isSetUp){this.cacheElems(B);this.setUp(B,this);this.props.isSetUp=true;this.setupControls(this.Elems.$prevControl);this.setupControls(this.Elems.$nextControl);this.assignHandlers(this);}},cacheElems:function(B){this.Elems.$stories=A(".story",B);this.Elems.$storiesContainer=A(".stories-container",B);this.Elems.$pageControls=A(".carousel-page-control",B);this.Elems.$prevControl=A(".carousel-control-prev",B);this.Elems.$nextControl=A(".carousel-control-next",B);if(this.options.paginationType=="numbered"){this.Elems.$pagination=A(".pagination-list ul",B);}},setUp:function(E,G){if(this.options.paginationType=="default"){var F='<li class="carousel-page-control"><a href="';var D='"></a></li>';}else{if(this.options.paginationType=="numbered"){var F='<li class="page-control"><a href="';var D='">';var C="</a></li>";}}var B="";this.Elems.$stories.each(function(H,J){var I=A(J);if(H!=0){if(G.options.paginationType=="default"){B=B+F+H+D;}else{if(G.options.paginationType=="numbered"){B=B+F+H+D+(H+1)+C;}}}});if(this.options.paginationType=="default"){this.Elems.$nextControl.before(B);this.Elems.$pageControls=A(".carousel-page-control",E);}if(this.options.paginationType=="numbered"){this.Elems.$pagination.append(B);this.Elems.$pageControls=A(".page-control",E);}this.Elems.$stories.each(function(H,J){var I=A(J);I.css("position","static");I.css("visibility","visible");if(H!=0){I.css("display","none");}});TWP.Modules.setLargestHeight(this.Elems.$stories,this.Elems.$storiesContainer);},assignHandlers:function(B){this.Elems.$prevControl.click(function(C){C.preventDefault();B.runControls("prev",A(this));});this.Elems.$nextControl.click(function(C){C.preventDefault();B.runControls("next",A(this));});this.Elems.$pageControls.click(function(C){C.preventDefault();B.swapStory(this,B);});},runControls:function(D,C){var E;D=="prev"?E=this.props.prevAvail:E=this.props.nextAvail;if(!E){return ;}var B=this.findNextPrevOn(D);this.swapStory(B,this);this.testControls();this.setupControls(C);this.setupControls(this.Elems.$nextControl);},testControls:function(){var C=this.findNextPrevOn("prev");var B=this.findNextPrevOn("next");C.length==0?this.props.prevAvail=false:this.props.prevAvail=true;B.length==0?this.props.nextAvail=false:this.props.nextAvail=true;},setupControls:function(B){B.hasClass("carousel-control-prev")?test=this.props.prevAvail:test=this.props.nextAvail;if(!test){B.addClass(this.classes.deactivated);}else{B.removeClass(this.classes.deactivated);}},findNextPrevOn:function(B){return this.Elems.$stories.filter("."+this.classes.on)[B]();},swapStory:function(E,F){var C=this.classes.on;if(E instanceof jQuery){var E=E;}else{var D=A("a",E).attr("href");D=D.match(/\d$/);this.Elems.$stories.each(function(G,H){if(G==D){E=A(H);}});}if(!A.browser.msie){this.Elems.$storiesContainer.animate({opacity:0},"fast",function(){E.css("display","block");E.siblings().css("display","none");F.Elems.$storiesContainer.animate({opacity:1},"fast");});}else{E.siblings().css("display","none");E.css("display","block");}E.addClass(C);E.siblings().removeClass(C);var B=E.attr("rel");this.Elems.$pageControls.each(function(G,H){if(G==B){A(H).addClass("on");
}else{A(H).removeClass("on");}});this.testControls();this.setupControls(this.Elems.$prevControl);this.setupControls(this.Elems.$nextControl);}});})(jQuery);(function(B,A){B.fn.JSONFeed=function(F){var I={url:"http://api.twitter.com/1/statuses/public_timeline.json",jsonp:"callback",jsonpCallback:"?",iterator:function(K){return K;},num:5,avatar_width:48,avatar_height:48,poll:0,pollUrlGenerator:function(K,M,L){return K;},paginate:false,paginationUrlGenerator:function(K,M,L){return K;},spinner:'<span class="jf-loading">Loading...</span>',newContentMessage:'<a href="#">Click to show new tweets.</a>',paginationButton:'<a href="#">Load more...</a>',template:'<p style="color:#a00">You haven&apos;t set a template for this feed!</p>',jsonVarP:/\{\{([^\}]+)\}\}/gm,optionP:/\{%([^%]+)%\}/gm,renderCallback:function(K){return K;},appendCallback:function(){}},H,E,D,C,J,G;H=function(K){if(B(K).attr("id")){return !B("#"+B(K).attr("id")).length;}else{return true;}};E=function(O,K,N){var L=B(K),Q=(L.attr("class").match(/page-/)!==null?"poll":"page"),M=L.parent().attr("data-num")||N.num,R={url:O||N.url,dataType:(N.jsonpCallback)?"jsonp":"json",success:function(W,S){L.find(".jf-spinner").remove();var X=N.iterator(W);B.each(X,function(Y,a){if(Y<M||Q==="poll"){var Z=B(D(a,N));if(H(Z)){L.append(Z);}}else{return false;}});if(!N.paginate&&X.length===0&&typeof N.empty!=="undefined"){L.append(N.empty);}if(Q==="poll"){if(L.children().length&&L.is(":hidden")){var T=L.siblings(".jf-show-new");if(T.length){L.before(T);}else{L.before(N.newContentMessage).prev().addClass("jf-show-new").hide().slideDown();}}var V=L.parent().data("_poll");V["data"]=W;L.parent().data("_poll",V);}else{if(X.length===0){L.siblings(".jf-show-more").remove();}else{L.siblings(".jf-show-more").removeClass("disabled");var U=L.parent().data("_page");if(U){U["data"]=W;L.parent().data("_page",U);}}}L.each(N.appendCallback);}};if(N.jsonpCallback){if(N.jsonpCallback!=="?"){R.jsonpCallback=N.jsonpCallback;R.jsonp=N.jsonp;}else{var P=R.url.split("?");R.url+=((P.length>1)?"&":"?")+N.jsonp+"="+N.jsonpCallback;}}B(L).append(B(N.spinner).addClass("jf-spinner"));if(R.url){B.ajax(R);}else{R.success([],"skipped");}};D=function(L,K){var M=K.template.replace(K.jsonVarP,function(O,N){var Q=N.split("."),P=L;B.each(Q,function(R,S){if(typeof P[S]!=="undefined"){P=P[S];}else{P="";}});return P;}).replace(K.optionP,function(O,N){var Q=N.split("."),P=K;B.each(Q,function(R,S){if(typeof K[S]!=="undefined"){P=P[S];}else{P="";}});return P;});return K.renderCallback(M);};C=function(K){return'<div class="jf-page page'+K+'"></div>';};J=function(K,M){console.log(K,M);var L=B(K),O=L.data("_poll");O.count+=1;var N=L.find(".jf-page").eq(0);if(N.children().length>0){O.page+=1;N=L.prepend(C(O.page*-1)).find(".page-"+O.page).eq(0).hide();}O.lastUrl=M.pollUrlGenerator(O.lastUrl,O["data"],M);L.data("_poll",O);E(O.lastUrl,N,M);A.setTimeout(function(){J(L,M);},O.interval*1000);};G=function(K,M){var L=B(K),O=L.data("_page");O.page+=1;var N=L.find(".jf-page").eq(-1).after(C(O.page)).next();O.lastUrl=M.paginationUrlGenerator(O.lastUrl,O["data"],M);L.data("_page",O);E(O.lastUrl,N,M);};return B(this).each(function(){var K=B(this),L=B.extend({},I,F,{url:K.attr("data-url")||F.url,poll:K.attr("data-poll")||F.poll,paginate:K.attr("data-paginate")||F.paginate}),M=K.append(C(0)).find(".page0").eq(0);E(L.url,M,L);B(this).delegate("a.jf-show-new","click",function(N){N.preventDefault();N.stopPropagation();B(this).nextAll(".jf-page").filter(":hidden").show();B(this).remove();});if(L.poll>0){K.data("_poll",{lastUrl:L.url,lastTime:new Date(),interval:L.poll,count:0,page:0});A.setTimeout(function(){J(K,L);},L.poll*1000);}if(L.paginate==="true"){K.data("_page",{lastUrl:L.url,page:0});K.append(B(L.paginationButton).addClass("jf-show-more").click(function(N){N.preventDefault();if(!B(this).hasClass("disabled")){B(this).addClass("disabled");G(K,L);}}));}});};B.fn.JSONFeed.docsURL="http://github.com/dandrinkard/jquery-json-feed/";B.fn.JSONFeed.presets=B.fn.JSONFeed.presets||{};B.fn.JSONFeed.utils=B.fn.JSONFeed.utils||{};})(jQuery,window);
/*
 * jQuery Tools v1.2.7 - The missing UI library for the Web
 * 
 * scrollable/scrollable.js
 * scrollable/scrollable.autoscroll.js
 * scrollable/scrollable.navigator.js
 * scrollable/scrollable.restrictScroll.js
 */
(function(B){B.tools=B.tools||{version:"v1.2.7"},B.tools.scrollable={conf:{activeClass:"active_class_scrollable",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:"> *",items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",size:1,speed:400,vertical:!1,touch:!0,wheelSpeed:0}};function A(G,F){var I=parseInt(G.css(F),10);if(I){return I;}var H=G[0].currentStyle;return H&&H.width&&parseInt(H.width,10);}function E(F,H){var G=B(H);return G.length<2?G:F.parent().find(H);}var D;function C(R,Q){var P=this,O=R.add(P),N=R.children(),M=0,L=Q.vertical;D||(D=P),N.length>1&&(N=B(Q.items,R)),Q.size>1&&(Q.circular=!1),B.extend(P,{getConf:function(){return Q;},getIndex:function(){return M;},getSize:function(){return P.getItems().size();},getNaviButtons:function(){return H.add(G);},getRoot:function(){return R;},getItemWrap:function(){return N;},getItems:function(){return N.find(Q.item).not("."+Q.clonedClass);},move:function(T,S){return P.seekTo(M+T,S);},next:function(S){return P.move(Q.size,S);},prev:function(S){return P.move(-Q.size,S);},begin:function(S){return P.seekTo(0,S);},end:function(S){return P.seekTo(P.getSize()-1,S);},focus:function(){D=P;return P;},addItem:function(S){S=B(S),Q.circular?(N.children().last().before(S),N.children().first().replaceWith(S.clone().addClass(Q.clonedClass))):(N.append(S),G.removeClass("disabled")),O.trigger("onAddItem",[S]);return P;},seekTo:function(T,X,V){T.jquery||(T*=1);if(Q.circular&&T===0&&M==-1&&X!==0){return P;}if(!Q.circular&&T<0||T>P.getSize()||T<-1){return P;}var U=T;T.jquery?T=P.getItems().index(T):U=P.getItems().eq(T);var S=B.Event("onBeforeSeek");if(!V){O.trigger(S,[T,X]);if(S.isDefaultPrevented()||!U.length){return P;}}var W=L?{top:-U.position().top}:{left:-U.position().left};M=T,D=P,X===undefined&&(X=Q.speed),N.animate(W,X,Q.easing,V||function(){O.trigger("onSeek",[T]);});return P;}}),B.each(["onBeforeSeek","onSeek","onAddItem"],function(S,T){B.isFunction(Q[T])&&B(P).on(T,Q[T]),P[T]=function(U){U&&B(P).on(T,U);return P;};});if(Q.circular){var K=P.getItems().slice(-1).clone().prependTo(N),J=P.getItems().eq(1).clone().appendTo(N);K.add(J).addClass(Q.clonedClass),P.onBeforeSeek(function(T,S,U){if(!T.isDefaultPrevented()){if(S==-1){P.seekTo(K,U,function(){P.end(0);});return T.preventDefault();}S==P.getSize()&&P.seekTo(J,U,function(){P.begin(0);});}});var I=R.parents().add(R).filter(function(){if(B(this).css("display")==="none"){return !0;}});I.length?(I.show(),P.seekTo(0,0,function(){}),I.hide()):P.seekTo(0,0,function(){});}var H=E(R,Q.prev).click(function(S){S.stopPropagation(),P.prev();}),G=E(R,Q.next).click(function(S){S.stopPropagation(),P.next();});Q.circular||(P.onBeforeSeek(function(T,S){setTimeout(function(){T.isDefaultPrevented()||(H.toggleClass(Q.disabledClass,S<=0),G.toggleClass(Q.disabledClass,S>=P.getSize()-1));},1);}),Q.initialIndex||H.addClass(Q.disabledClass)),P.getSize()<2&&H.add(G).addClass(Q.disabledClass),Q.mousewheel&&B.fn.mousewheel&&R.mousewheel(function(T,S){if(Q.mousewheel){P.move(S<0?1:-1,Q.wheelSpeed||50);return !1;}});if(Q.touch){var F={};N[0].ontouchstart=function(T){var S=T.touches[0];F.x=S.clientX,F.y=S.clientY;},N[0].ontouchmove=function(T){if(T.touches.length==1&&!N.is(":animated")){var S=T.touches[0],V=F.x-S.clientX,U=F.y-S.clientY;P[L&&U>0||!L&&V>0?"next":"prev"](),T.preventDefault();}};}Q.keyboard&&B(document).on("keydown.scrollable",function(S){if(!(!Q.keyboard||S.altKey||S.ctrlKey||S.metaKey||B(S.target).is(":input"))){if(Q.keyboard!="static"&&D!=P){return ;}var T=S.keyCode;if(L&&(T==38||T==40)){P.move(T==38?-1:1);return S.preventDefault();}if(!L&&(T==37||T==39)){P.move(T==37?-1:1);return S.preventDefault();
}}}),Q.initialIndex&&P.seekTo(Q.initialIndex,0,function(){});}B.fn.scrollable=function(F){var G=this.data("scrollable");if(G){return G;}F=B.extend({},B.tools.scrollable.conf,F),this.each(function(){G=new C(B(this),F),B(this).data("scrollable",G);});return F.api?G:this;};})(jQuery);(function(B){var A=B.tools.scrollable;A.autoscroll={conf:{autoplay:!0,interval:3000,autopause:!0}},B.fn.autoscroll=function(E){typeof E=="number"&&(E={interval:E});var D=B.extend({},A.autoscroll.conf,E),C;this.each(function(){var F=B(this).data("scrollable"),J=F.getRoot(),I,H=!1;function G(){I&&clearTimeout(I),I=setTimeout(function(){F.next();},D.interval);}F&&(C=F),F.play=function(){I||(H=!1,J.on("onSeek",G),G());},F.pause=function(){I=clearTimeout(I),J.off("onSeek",G);},F.resume=function(){H||F.play();},F.stop=function(){H=!0,F.pause();},D.autopause&&J.add(F.getNaviButtons()).hover(F.pause,F.resume),D.autoplay&&F.play();});return D.api?C:this;};})(jQuery);(function(B){var A=B.tools.scrollable;A.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active_class_scrollable",indexed:!1,idPrefix:null,history:!1}};function C(D,F){var E=B(F);return E.length<2?E:D.parent().find(F);}B.fn.navigator=function(E){typeof E=="string"&&(E={navi:E}),E=B.extend({},A.navigator.conf,E);var D;this.each(function(){var N=B(this).data("scrollable"),M=E.navi.jquery?E.navi:C(N.getRoot(),E.navi),L=N.getNaviButtons(),K=E.activeClass,J=E.history&&history.pushState,I=N.getConf().size;N&&(D=N),N.getNaviButtons=function(){return L.add(M);},J&&(history.pushState({i:0},""),B(window).on("popstate",function(O){var P=O.originalEvent.state;P&&N.seekTo(P.i);}));function H(O,Q,P){N.seekTo(Q),P.preventDefault(),J&&history.pushState({i:Q},"");}function G(){return M.find(E.naviItem||"> *");}function F(O){var P=B("<"+(E.naviItem||"a")+"/>").click(function(Q){H(B(this),O,Q);});O===0&&P.addClass(K),E.indexed&&P.text(O+1),E.idPrefix&&P.attr("id",E.idPrefix+O);return P.appendTo(M);}G().length?G().each(function(O){B(this).click(function(P){H(B(this),O,P);});}):B.each(N.getItems(),function(O){O%I==0&&F(O);}),N.onBeforeSeek(function(P,O){setTimeout(function(){if(!P.isDefaultPrevented()){var R=O/I,Q=G().eq(R);Q.length&&G().removeClass(K).eq(R).addClass(K);}},1);}),N.onAddItem(function(O,Q){var P=N.getItems().index(Q);P%I==0&&F(P);});});return E.api?D:this;};})(jQuery);(function(A){A.fn.restrictScroll=function(){var E=A(this).data("scrollable");var B=this;F();function F(){E.onBeforeSeek(function(I,H){return C(H);});E.onSeek(function(I,H){D(H);});A(window).resize(function(){var H=E.getIndex();D(H);});var G=E.getIndex();D(G);}function D(H){var G=E.getConf();A(G.next).toggleClass(G.disabledClass,!C(H));}function C(I){var K=false;var G=E.getIndex();if(I<G){K=true;}else{var H=E.getItems();var L=0;for(var J=G;J<H.length;J++){L+=A(H[J]).width();}K=L>A(B).width();}return K;}};})(jQuery);