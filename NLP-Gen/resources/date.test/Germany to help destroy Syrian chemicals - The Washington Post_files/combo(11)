(function(A){TWP.Modules.Action={lazyLoaded:{rightRail:false,contentWell:false},objs:{},defaults:{thisNode:null,nodeRoot:null,nodeRootChild:null,nodeRootChildCategory:null,url:window.location.href,prodURL:"http://www.washingtonpost.com",testURL:"http://testweb8c.digitalink.com"},clearField:function(D,E){var B=A.trim(D.target.defaultValue);var C=A.trim(D.target.value);if(B==D.target.value){D.target.value="";if(E){E.call();}}},timeOffSetter:function(B){B.each(function(){var D=A(this).html();var D=new Date(D);storyTimeMS=D.getTime();var C=new Date().getTime();var E=(C-storyTimeMS)/60000;if(E<61){A(this).html(E);}else{A(this).html(D.toDateString()).addClass("old_ago").removeClass("hide");}});},updateShareData:function(E){var N=E.target;var B=A(N);var H=A(N.parentNode.parentNode);var K=B.attr("href");var C=B.text();var F="Aggregate";var L=H.attr("url");var M=H.attr("loidEx");var D=L+"?counter="+escape(C)+"&loid="+escape(M);var P=L+"?counter="+escape(F)+"&loid="+escape(M);var I="1";var J=I;var O=PortalCommons.postRemoteHTML(D,J);var G=PortalCommons.postRemoteHTML(P,J);if(C=="MySpace"){window.open("http://www.myspace.com/Modules/PostTo/Pages/?u="+encodeURIComponent(K),"ptm","height=450,width=440");}else{if(C!="Email"){window.open(K);}}return false;},init:function(){this.cacheObjs();this.setUpRightRail();var B=this.objs.TimeOffset;if(B.length>0){this.timeOffSetter(B);}var C=this.objs.needYear;if(C.length>0){this.getYear(C);}this.assignHandlers(this);this.fixBorders();this.setUpGalleries();},setUpRightRail:function(){var B=this.objs.RightRailModules;var C='<div class="right-rail-shadow"></div>';if(B.length>0){B.each(function(D,E){A(E).append(C);});}},getYear:function(B){B.each(function(){var C=new Date().getFullYear();A(this).html(C);});},cacheObjs:function(){this.objs.RightRail=A("#right-rail");this.objs.ContentWell=A("#content");this.objs.TabbedPanels=A(".tabbed-panels");this.objs.TabbedPanelsInner=A(".tabbed-panels-inner");this.objs.TabbedPanelsInnerInner=A(".tabbed-panels-inner-inner");this.objs.NetworkNews=A("#NN-module-rr");this.objs.Share=A("div.share,ul.share");this.objs.TimeOffset=A(".ago");this.objs.restoredInputs=A(".restore");this.objs.grids=A(".grid",this.objs.ContentWell);this.objs.packages=A(".package",this.objs.ContentWell);this.objs.shells=A(".shell",this.objs.ContentWell);this.objs.jumpMenus=A(".jumpmenu");this.objs.needYear=A(".getYear");this.objs.newsletter=A(".newsletter-signup");this.objs.galleryCaptions=A(".gallery-caption");this.objs.RightRailModules=A(".component",this.objs.RightRail);},fixBorders:function(){var D=this.objs.grids;D.each(function(F,H){var I=A(H);var G=A(".wp-column",I);G.each(function(L,N){var O=A(N);var M=A(".module:last-child",O);M.css("padding-bottom","0");M.css("border-bottom","none");M.css("margin-bottom","0");M.css("background-image","none");var J=A(".grid:last-child",O);J.css("padding-bottom","0");J.css("border-bottom","none");J.css("margin-bottom","0");J.css("background-image","none");var K=A(".shell:last-child",O);K.css("padding-bottom","0");K.css("border-bottom","none");K.css("margin-bottom","0");K.css("background-image","none");});});var E=this.objs.packages;E.each(function(H,J){var K=A(J);var I=A(".module:last-child",K);I.css("padding-bottom","0");I.css("border-bottom","none");I.css("margin-bottom","0");I.css("background-image","none");var F=A(".grid:last-child",K);F.css("padding-bottom","0");F.css("border-bottom","none");F.css("margin-bottom","0");F.css("background-image","none");var G=A(".shell:last-child",K);G.css("padding-bottom","0");G.css("border-bottom","none");G.css("margin-bottom","0");G.css("background-image","none");});var C=this.objs.shells;C.each(function(G,I){var J=A(I);var F=A(".grid:last-child",J);F.css("padding-bottom","0");F.css("border-bottom","none");F.css("margin-bottom","0");F.css("background-image","none");var H=A(".module:last-child",J);H.css("padding-bottom","0");H.css("border-bottom","none");H.css("margin-bottom","0");H.css("background-image","none");});var B=this.objs.TabbedPanels;B.each(function(F,H){var I=A(H);var G=A(".panel",I);G.each(function(J,L){var M=A(L);var K=A(".module:last-child",M);K.css("padding-bottom","0");K.css("border-bottom","none");K.css("margin-bottom","0");K.css("background-image","none");});});},jumpMenus:function(B){var C=A("option:selected",B).val();location.href=C;},setUpGalleries:function(){var B=this.objs.galleryCaptions;B.each(function(C,D){$this=A(D);var F=$this.find("a");var E=F.attr("href");$this.attr("href",E);});},assignHandlers:function(E){var D=this.objs.Share;var C=this.objs.restoredInputs;var G=this.objs.noUser;var F=this.objs.jumpMenus;var B=this.objs.galleryCaptions;B.click(function(H){H.preventDefault();var I=A(this).attr("href");window.location.href=I;});C.not(".autocomplete").focus(function(H){E.clearField(H);});if(F.length>0){F.change(function(){E.jumpMenus(this);});}if(D.length>0){D.click(function(H){H.preventDefault();TWP.Modules.Action.updateShareData(H);});}}};A(document).ready(function(){TWP.Modules.Action.init();});})(jQuery);TWP.Util.queryStringDebugger={init:function(){if(typeof jQuery!="undefined"){var A=this;A.count=0;jQuery("body").prepend('<div id="util_debug_1_0_0"></div>');setTimeout(function(){A.render();A.intervalId=setInterval(function(){A.render();},A.getInterval()*1000);},A.getTimeout()*1000);}},render:function(){var B=this;if(this.count<100){this.count++;var A="";jQuery("#util_debug_1_0_0").html("");jQuery.each(B.getFeaturesToDebug(),function(D,E){var C=B.getConfig();if(typeof B[E]=="function"){A+=B[E](C);}else{A+=B["debug"](E,E,C);}});jQuery("#util_debug_1_0_0").html(A);}else{clearInterval(B.intervalId);}return true;},getFeaturesToDebug:function(){var B=window.location.search.substring(1).split("&");for(var A=0;A<B.length;A++){var C=B[A].split("=");if(C[0]=="debug"){return C[1].split(",");}}return[];},getInterval:function(){var B=window.location.search.substring(1).split("&");for(var A=0;A<B.length;A++){var C=B[A].split("=");if(C[0].match(/refresh|interval/)){if(!isNaN(C[1])){return Math.floor(C[1]);}}}if(this.getFeaturesWithDefaultRefreshAsRe().test(this.getFeaturesToDebug())){return 10;}else{return(1<<16);}},getFeaturesWithDefaultRefreshAsRe:function(){return/(^|,)(omnitureEpaper)(,|$)/;},getTimeout:function(){var B=window.location.search.substring(1).split("&");for(var A=0;A<B.length;A++){var C=B[A].split("=");if(C[0].match(/wait|to|delay/)){if(!isNaN(C[1])){return Math.floor(C[1]);}}}return 0;},getConfig:function(){var A={};var C=window.location.search.substring(1).split("&");for(var B=0;B<C.length;B++){var D=C[B].split("=");if(D[0]!="debug"){if(D.length>1){switch(D[0]){case"ns":A["namespaceMatch"]=D[1];break;case"p":A["propMatch"]=D[1];break;case"nsp":A["nspMatch"]=D[1];break;case"v":A["valueMatch"]=D[1];break;case"reflection":if(!isNaN(D[1])){A[D[0]]=Math.floor(D[1]);}break;case"maxLength":if(!isNaN(D[1])){A[D[0]]=Math.floor(D[1]);}break;case"type":A["typeAsRe"]=D[1];break;case"echo":A["echo"]=(D[1]!="false");break;case"verbose":A["verbose"]=(D[1]=="true");break;default:A[D[0]]=D[1];}}}}if(typeof A.echo!="boolean"){A.echo=true;}return A;},debug:function(feature,namespace,cfg){var output="";if(!feature.match(/[;{}]/)){namespace=namespace||feature;if(typeof cfg.reflection!="number"){cfg.reflection=10;}try{var obj=eval(feature);cfg.ok_to_proceed=true;cfg.is_reference_to_window=(obj===window&&feature!="window");if(cfg.is_reference_to_window){output+=namespace+" = window;";output+=this.formatting.newline;}cfg.ok_to_proceed=cfg.ok_to_proceed&&!cfg.is_reference_to_window;if(cfg.ok_to_proceed){var type=typeof obj;if(obj&&obj.constructor.toString().match(/function Array/)){type="array";}if((typeof jQuery!="undefined"&&obj===jQuery)||(typeof YUI!="undefined"&&obj===YUI)||(typeof Prototype!="undefined"&&obj===Prototype)){type="object";}if(type=="undefined"){output="<strong>"+namespace+"</strong> is not defined";}else{if(obj===window||obj===document){jQuery.extend({reflection:1},cfg);}if(type.match(/array|object/)){output+="<strong>"+namespace+"</strong>"+this.formatting.newline;
output+=this.objectToString(obj,namespace,cfg);}else{output+=this.echoValue(cfg,type,"",namespace,obj,true);}}}else{if(cfg.verbose){output+="<strong>"+namespace+"</strong>: Not ok to proceed with this object.";output+=this.formatting.newline;}}}catch(e){if(cfg.verbose){output+="<strong>"+namespace+"</strong>: Error in debug method: "+e;}}output=('<div class="'+this.tokenize(namespace)+'" style="text-align:center;"><div style="width:982px;margin:0 auto;text-align:left;font-family:courier,courier new;font-size:12px;padding:10px;background-color:#000;color:#0C0;border:3px solid #999;border-top:20px solid #999;max-height:325px;overflow:auto;margin-top:5px;-webkit-border-top-left-radius: 5px;-webkit-border-top-right-radius: 5px;-moz-border-radius-topleft: 5px;-moz-border-radius-topright: 5px;border-top-left-radius: 5px;border-top-right-radius: 5px;">'+output+"</div></div>");output+=this.formatting.newline;}return output;},tracking:function(A){return this.debug("TWP.Data.Tracking.props","wp",A);},omniture:function(A){A=jQuery.extend({reflection:-1,typeAsRe:"(string|number|boolean)",maxLength:100,suppressedValues:[null,""]},A);return this.debug("s","s",A);},twp:function(A){return this.debug("TWP","TWP",A);},combo:function(A){var B="";for(var C in TWP.yuiConfig.groups){B+=this.debug("TWP.yuiConfig.groups."+C,"TWP.yuiConfig.groups."+C,A);}return B;},comboNames:function(A){A=jQuery.extend({reflection:-1,typeAsRe:"(undefined)"},A);var B="";B+=this.combo(A);return B;},comboGlobal:function(A){return this.debug("TWP.yuiConfig.groups.global","TWP.yuiConfig.groups.global",A);},comboEidosGlobal:function(A){return this.debug("TWP.yuiConfig.groups.eidosGlobal","TWP.yuiConfig.groups.eidosGlobal",A);},comboEidosMainContent:function(A){return this.debug("TWP.yuiConfig.groups.eidosMainContent","TWP.yuiConfig.groups.eidosMainContent",A);},comboEidosModules:function(A){return this.debug("TWP.yuiConfig.groups.eidosModules","TWP.yuiConfig.groups.eidosModules",A);},comboEidosVendors:function(A){return this.debug("TWP.yuiConfig.groups.eidosVendors","TWP.yuiConfig.groups.eidosVendors",A);},comboEidosHeader:function(A){return this.debug("TWP.yuiConfig.groups.eidosHeader","TWP.yuiConfig.groups.eidosHeader",A);},comboEidosCSS:function(A){return this.debug("TWP.yuiConfig.groups.eidosCSS","TWP.yuiConfig.groups.eidosCSS",A);},comboEidosInstantRun:function(A){return this.debug("TWP.yuiConfig.groups.eidosInstantRun","TWP.yuiConfig.groups.eidosInstantRun",A);},comboEidosComments:function(A){return this.debug("TWP.yuiConfig.groups.eidosComments","TWP.yuiConfig.groups.eidosComments",A);},comboEidosExternalCommentScripts:function(A){return this.debug("TWP.yuiConfig.groups.eidosExternalCommentScripts","TWP.yuiConfig.groups.eidosExternalCommentScripts",A);},comboEidosNetworkNews:function(A){return this.debug("TWP.yuiConfig.groups.eidosNetworkNews","TWP.yuiConfig.groups.eidosNetworkNews",A);},comboEidosJSONFeeds:function(A){return this.debug("TWP.yuiConfig.groups.eidosJSONFeeds","TWP.yuiConfig.groups.eidosJSONFeeds",A);},yui:function(A){return this.debug("YUI","YUI",A);},otto:function(A){var B="";if(window.otto){B+=otto.getInformation();B=this.formatFunction(B);}else{B="otto is undefined";}B=('<div class="'+this.tokenize("otto")+'" style="text-align:center;"><div style="width:982px;margin:0 auto;text-align:left;font-family:courier,courier new;font-size:12px;padding:10px;background-color:#000;color:#0C0;border:3px solid #999;border-top:20px solid #999;max-height:325px;overflow:auto;margin-top:5px;-webkit-border-top-left-radius: 5px;-webkit-border-top-right-radius: 5px;-moz-border-radius-topleft: 5px;-moz-border-radius-topright: 5px;border-top-left-radius: 5px;border-top-right-radius: 5px;">'+B+"</div></div>");B+=this.formatting.newline;return B;},omnitureEpaper:function(A){var B="";oCfg=jQuery.extend({nspMatch:"s.(prop|evar|channel|pageName|hier)"},A);B+=this.omniture(oCfg);B+=this.tracking(A);return B;},docwrite:function(A){A=jQuery.extend({reflection:-1,typeAsRe:"(function)",echo:false,valueMatch:"document.write"},jQuery.extend(A,{"echo":false}));return this.debug("window","window",A);},docwriteExposed:function(A){A=jQuery.extend({reflection:-1,typeAsRe:"(function)",echo:true,valueMatch:"document.write"},jQuery.extend(A,{"echo":true}));return this.debug("window","window",A);},objectToString:function(B,E,I){var C="";try{for(var A in B){var L=true;var O=true;var M=B[A];var K=typeof M;if(M&&M.constructor.toString().match(/function Array/)){K="array";}if(L&&I.namespaceMatch){L=L&&((new String(E)).match(new RegExp(I.namespaceMatch,"ig")));}if(L&&I.propMatch){L=L&&((new String(A)).match(new RegExp(I.propMatch,"ig")));}if(L&&I.nspMatch){L=L&&((new String(E+"."+A)).match(new RegExp(I.nspMatch,"ig")));}if(L&&I.valueMatch){L=L&&((new String(M)).match(new RegExp(I.valueMatch,"ig")));}if(L&&I.suppressedValues){for(var F=0;F<I.suppressedValues.length;F++){L=L&&(M!=I.suppressedValues[F]);}}if(I.typeAsRe){L=L&&(K.match(new RegExp(I.typeAsRe)));}if(this.reflection>I.reflection){O=false;}if(K.match(/array|object/)){if(O){try{var D=true;var N=(M===window&&A!="window");if(N){C+=this.getIndents();C+=(E+"."+A+" =  window;");C+=this.formatting.newline;}D=D&&!N;if(D){var G=(K=="object")?"{":"[";var P=(K=="object")?"}":"]";this.reflection++;this.isArrayContext=K.match(/array/);var H=this.objectToString(M,A,I);this.isArrayContext=false;this.reflection--;if(H){C+=this.getIndents();C+=(E+"."+A+": ");C+=this.formatting.newline;C+=this.getIndents();C+=G+this.formatting.newline;C+=H;C+=this.getIndents();C+=P+this.formatting.newline;}}else{if(I.verbose){C+="<strong>"+E+"</strong>: Not ok to proceed with this object.";C+=this.formatting.newline;}}}catch(J){if(I.verbose){C+=this.getIndents();C+=J+this.formatting.newline;}this.isArrayContext=false;this.reflection--;if(I.verbose){C+=this.getIndents();C+=P+this.formatting.newline;}}}else{if(I.verbose){C+=this.getIndents();C+=(E+"."+A+": ");C+=" too deep to reflect (>"+I.reflection+")."+this.formatting.newline;}}}else{C+=this.echoValue(I,K,E,A,M,L);}}}catch(J){if(I.verbose){C+="<strong>"+E+"</strong>: Error in objectToString method: "+J;}}return C;},echoValue:function(A,F,E,H,C,D){var B="";try{if(D){C=C.toString();if(typeof A.maxLength=="number"&&A.maxLength>=0){if(C.length>A.maxLength){C=C.substring(0,A.maxLength)+"...";}}if(!A.echo){C="&lt;&lt;value suppressed&gt;&gt;";}else{if(F.match(/function/)){C=this.formatFunction(C);}else{if(F.match(/number|boolean/)){C=C;}else{C='"'+C+'"';}}}B+=this.getIndents();if(E){B+=E;}if(this.isArrayContext){B+=("["+H+"] = "+C+";");}else{if(E){B+=".";}B+=(H+" = "+C+";");}B+=this.formatting.newline;}}catch(G){if(A.verbose){B+="<strong>"+E+"</strong>: Error in echoValue method: "+G;}}return B;},reflection:0,isArrayContext:false,formatting:{space:"&nbsp;",indent:"&nbsp;&nbsp;",newline:"<br/>"},tokenize:function(A){if(A.match(/^\s*([^\s]+)\s*/g)){A=RegExp.$1;}A=A.replace(/\s+/g,"_");A=A.replace(/[^A-Za-z0-9]+/g,"_");A=A.replace(/_+/g,"_");return A;},formatString:function(A){if(A){A=A.replace(/\</g,"&lt;");A=A.replace(/\>/g,"&gt;");}return A;},formatFunction:function(E,D,A){D=D||this.reflection;A=A||this.formatting.indent;var B=this;E=new String(E);E=this.formatString(E);var C=[];jQuery.each(C,function(G,F){E=E.replace(F.re,F.raw+B.formatting.newline+B.formatting.indent);});E=E.replace(/\n/g,this.formatting.newline+this.getIndents(D));E=E.replace(/\t/g,this.formatting.indent);E=E.replace(/\s/g,this.formatting.space);return E;},getIndents:function(D,A){D=D||this.reflection;A=A||this.formatting.indent;var B="";for(var C=0;C<D;C++){B+=A;}return B;}};TWP.Util.queryStringDebugger.init();(function(F){TWP=window.TWP||{};TWP.Social=TWP.Social||{};var A=(TWP.Social&&TWP.Social.pageUrl)||F("link[rel=canonical]").eq(0).attr("href"),I=F("link[rel=shorturl]").eq(0).attr("href")||A,L=F('meta[property="og:image"]').eq(0).attr("content")||"",K=F('meta[property="og:title"]').eq(0).attr("content")||document.title.replace(" - The Washington Post",""),M=F('meta[name="description"]').eq(0).attr("content")||"";
var H=(TWP.Social&&TWP.Social.emailUrl)||A.replace(/_story.html|_blog.html/,"_email.html").substr(A.indexOf(".com")+4);var G=((TWP.Social&&TWP.Social.commentUrl)||A.replace(/_story.html|_blog.html/,"_allComments.html"))+"#comments";var D=(TWP.Social&&TWP.Social.printUrl)||A.replace(/_story.html|_blog.html/,"_print.html");var N=K;var B="washingtonpost";var E="";var C={"targetTop":F(".main-content"),"pageWrapper":"#shell","horizontalWidth":1168,"toolbarPosition":"responsive","toolbarIncludesTop":["facebook","twitter","personalpost","email","print"],"toolbarIncludesMore":["plusone","digg","delicious","stumble","tumblr","reddit"],"shareContainerTemplate":'<div id="social-tools" class="social-tools">'+"<ul>{{shareMainItems}}"+'<li class="more"><a class="more-button" href="#"><span>More</span>'+'<span class="more-arrow"></span></a>'+'<ul class="more-tools">{{shareMoreItems}}</ul>'+"</li>"+"</ul>"+"</div>","url":A,"shortUrl":I,"emailUrl":H,"commentUrl":G,"printUrl":D,"tweetText":N,"viaText":B,"tweetHash":E,"shareImage":L,"title":K,"blurb":M,"leftBuffer":20};function J(P,O){this.config=F.extend({},C,O);this.config.url=encodeURIComponent(this.config.url);this.config.blurb=encodeURIComponent(this.config.blurb.replace(/\n\r\t/g,"")).replace(/'/g,"\\'");this.config.title=encodeURIComponent(this.config.title).replace(/'/g,"\\'");var Q={tools:{example:{word:"String. Optional. Action word displayed under icon",shareUrl:"String. url for link",omnitureEvent:"String. Optional. Omniture event",initFunction:"Function. Optional. function that will be run after sharebar created",windowType:"String.  Optional. newWindow|replace|overlay|none|popup.  If not included, defaults to popup",displayText:"Boolean.  Optional. Indicates whether to display text at all times or not.  Defaults to false.",width:"String.  Optional. If newWindow false or not included, this is the width of the popup",height:"String. Optional.  If newWindow false or not included, this is the height of the popup"},commentcount:{word:"Comments",shareUrl:this.config.commentUrl,url:this.config.url,omnitureEvent:"event5",windowType:"replace",displayText:true,initFunction:function(R){try{TWP.StaticMethods.initCommentCount(".commentcount span.action",R.url);}catch(S){}}},facebook:{word:"Share to Facebook",displayText:false,shareUrl:"http://www.facebook.com/share.php?u="+this.config.url,width:"658",height:"354"},"fb-like":{word:"Like on Facebook",displayText:false,shareUrl:"",horizontalWidth:this.config.horizontalWidth,toolbarPosition:this.config.toolbarPosition,initFunction:function(S){try{var V=F(".tool.fb-like");V.addClass("fb");var U={"data-send":"false","data-layout":"box_count","data-width":"55","data-show-faces":"false"};var R={"data-send":"false","data-layout":"button_count","data-width":"55","data-show-faces":"false"};if(F(window).width()<S.horizontalWidth||S.toolbarPosition=="horizontal"){V.attr(R);}else{V.attr(U);}if(typeof FB!="object"){(function(Z,W,a){var Y,X=Z.getElementsByTagName(W)[0];if(Z.getElementById(a)){return ;}Y=Z.createElement(W);Y.id=a;Y.src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=249579685103650";X.parentNode.insertBefore(Y,X);}(document,"script","facebook-jssdk"));}else{FB.XFBML&&FB.XFBML.parse&&FB.XFBML.parse();}F(window).resize(function(X){var W=F(window).width();if(W<S.horizontalWidth&&V.attr("data-layout")=="box_count"){V.attr(R);FB.XFBML&&FB.XFBML.parse&&FB.XFBML.parse();}else{if((W>S.horizontalWidth&&S.toolbarPosition=="responsive")&&V.attr("data-layout")=="button_count"){V.attr(U);FB.XFBML&&FB.XFBML.parse&&FB.XFBML.parse();}}});}catch(T){}}},"facebook-like":{word:"Like on Facebook",displayText:false,sample:'<fb:like href="${storyURL}" layout="button_count" show_faces="${faces}" width="${width}" action="recommend" font="arial" colorscheme="light" ref="sm_btn_fb"></fb:like>',horizontalWidth:this.config.horizontalWidth,shareUrl:this.config.url,windowType:"none",toolbarPosition:this.config.toolbarPosition,initFunction:function(S){try{var W=(F(".tool.facebook-like,.tool.fb-like").find("fb\\:like").length>0)?F(".tool.facebook-like,.tool.fb-like").find("fb\\:like"):F(".tool.facebook-like, .tool.fb-like").prepend("<fb:like/>").find("fb\\:like");var V={"layout":"box_count","action":"recommend"};var U={"href":S.shareUrl,"layout":"box_count","width":"55","show-faces":"false","action":"recommend","font":"arial","colorscheme":"light","ref":"sm_btn_fb"};var R={"layout":"button_count","action":"recommend"};W.attr(U);if(F(window).width()<S.horizontalWidth||S.toolbarPosition=="horizontal"){W.attr(R);}else{W.attr(V);}if(typeof FB!="object"){(function(a,X,b){var Z,Y=a.getElementsByTagName(X)[0];if(a.getElementById(b)){return ;}Z=a.createElement(X);Z.id=b;Z.src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=249579685103650";Y.parentNode.insertBefore(Z,Y);}(document,"script","facebook-jssdk"));}else{FB.XFBML&&FB.XFBML.parse&&FB.XFBML.parse();}F(window).resize(W,function(Y){var X=F(window).width();if(X<S.horizontalWidth&&W.attr("layout")=="box_count"){W.attr(R);FB.XFBML&&FB.XFBML.parse&&FB.XFBML.parse();}else{if((X>S.horizontalWidth&&S.toolbarPosition=="responsive")&&W.attr("layout")=="button_count"){W.attr(V);FB.XFBML&&FB.XFBML.parse&&FB.XFBML.parse();}}});}catch(T){}}},twitter:{word:"Share on Twitter",displayText:false,shareUrl:"http://twitter.com/intent/tweet?text="+this.config.tweetText+"&via="+this.config.viaText+((this.config.tweetHash)?"&hashtags=":this.config.tweetHash)+"&url="+this.config.shortUrl,width:"550",height:"350"},"twitter-share-button":{word:"Share on Twitter",displayText:false,shareUrl:"",shortUrl:this.config.shortUrl,horizontalWidth:this.config.horizontalWidth,toolbarPosition:this.config.toolbarPosition,initFunction:function(S){try{var V=F("li.twitter-share-button a");V.addClass("twitter-share-button");var U={"data-url":I,"data-lang":"en","data-related":"anywhereTheJavascriptAPI","data-size":"small","data-count":"vertical"};var R={"data-url":I,"data-lang":"en","data-related":"anywhereTheJavascriptAPI","data-size":"small","data-count":"horizontal"};if(F(window).width()<S.horizontalWidth||S.toolbarPosition=="horizontal"){V.attr(R);}else{V.attr(U);}if(typeof twttr!="object"){(function(Z,W,a){var Y,X=Z.getElementsByTagName(W)[0];if(!Z.getElementById(a)){Y=Z.createElement(W);Y.id=a;Y.src="https://platform.twitter.com/widgets.js";X.parentNode.insertBefore(Y,X);}}(document,"script","twitter-wjs"));}else{twttr&&twttr.widgets&&twttr.widgets.load();}F(window).resize(function(X){var W=F(window).width();if(W<S.horizontalWidth&&F("li.twitter-share-button iframe").hasClass("twitter-count-vertical")){F("li.twitter-share-button").empty().prepend(F('<a href="#"></a>').addClass("twitter-share-button").attr(R));twttr&&twttr.widgets&&twttr.widgets.load();}else{if((W>S.horizontalWidth&&S.toolbarPosition=="responsive")&&F("li.twitter-share-button iframe").hasClass("twitter-count-horizontal")){F("li.twitter-share-button").empty().prepend(F('<a href="#"></a>').addClass("twitter-share-button").attr(U));twttr&&twttr.widgets&&twttr.widgets.load();}}});}catch(T){}}},pinterest:{word:"Share on Pinterest",displayText:false,shareUrl:"",width:"600",height:"350",initFunction:function(S){try{F(".social-tools li.pinterest a").bind({click:function(){var V=S.width?"width="+S.width+",height="+S.height+",scrollbars=no":"scrollbars=no";var T=parseInt(location.hash&&location.hash.match(/photo\=(\d+)/)[1])||1;var U=(F(".art-slot img").length==1&&F(".art-slot img").attr("src"))||(T>0&&F(".photo-slide img")[T-1]&&F(F(".photo-slide img")[T-1])&&F(F(".photo-slide img")[T-1]).attr("src"))||C.shareImage;var X=(F(".credits-box .cut-line").length==1&&encodeURIComponent(F(".credits-box .cut-line").html().replace(/\n\r\t/g,"").replace(/'/g,"\\'")))||C.blurb;var W="http://pinterest.com/pin/create/button/?url="+C.url+((T>0)?(encodeURIComponent("#photo="+T)):"")+"&description="+X+"&media="+U;window.open(W,"",V);return false;}});}catch(R){}}},personalpost:{word:"Add to PersonalPost",displayText:false,shareUrl:"http://personalpost.washingtonpost.com/c?add_url="+this.config.url,windowType:"newWindow"},kindleWidget:{word:"Save to Kindle",displayText:false,shareUrl:"",initFunction:function(){try{if(F(".ie7, .ie8").length==0&&typeof window.$SendToKindle=="undefined"){F.ajax({type:"GET",url:"https://d1xnn692s7u6t6.cloudfront.net/widget.js",dataType:"script",cache:"true"}).done(function(U,S){(function T(){window.$SendToKindle&&window.$SendToKindle.Widget?$SendToKindle.Widget.init({"content":"#article_body","exclude":"#article-side-rail","pagination":".pagination-list a.next-page","asin":"B000HC48T0"}):setTimeout(T,500);
})();});}}catch(R){}}},email:{word:"Share via Email",displayText:false,shareUrl:this.config.emailUrl,windowType:"overlay",width:"850",height:"800",initFunction:function(){try{new TWP.OverlayHelper(F(".social-tools .iframe-overlay")[0]);}catch(R){}}},print:{word:"Print Article",displayText:false,shareUrl:this.config.printUrl,windowType:"replace"},plusone:{word:"Share on Google PlusOne",displayText:false,shareUrl:"https://plus.google.com/share?url="+this.config.url,width:"832",height:"472"},digg:{word:"Share on Digg",displayText:false,shareUrl:"http://www.digg.com/submit?phase=2&url="+this.config.url,width:"540",height:"657"},delicious:{word:"Share on Delicious",displayText:false,shareUrl:"http://del.icio.us/post?url="+this.config.url+"&description="+this.config.title+"&extended="+this.config.blurb,width:"702",height:"450"},stumble:{word:"Share on StumbleUpon",displayText:false,shareUrl:"http://www.stumbleupon.com/submit?url="+this.config.url,width:"768",height:"528"},tumblr:{word:"Share on Tumblr",displayText:false,shareUrl:"http://www.tumblr.com/share?v=3&u="+this.config.url+"&t="+this.config.title,width:"550",height:"450"},reddit:{word:"Share on Reddit",displayText:false,shareUrl:"http://www.reddit.com/submit?url="+this.config.url+"&title="+this.config.title+"&notes="+this.config.blurb,width:"860",height:"548"},linkedin:{word:"Share on LinkedIn",displayText:false,shareUrl:"http://www.linkedin.com/shareArticle?mini=true&url="+this.config.url+"&title="+this.config.title+"&summary="+this.config.blurb,width:"830",height:"460"}},"omnitureEvent":"event6","omnitureVars":{"eVar1":(typeof s=="object")&&s&&s.eVar1,"eVar2":(typeof s=="object")&&s&&s.eVar2,"eVar8":(typeof s=="object")&&s&&s.eVar8,"eVar17":(typeof s=="object")&&s&&s.eVar17,"eVar27":""}};this.element=P;this.config=F.extend(true,{},Q,this.config);this.init(P);}J.prototype={init:function(S){var T=this,P=this.config;var U="";var R="";F.each(P.toolbarIncludesMore,function(W,X){if(P.tools[X]){var Y=P.tools[X];var V='<li class="'+X+'">'+T.makeOnClick(Y)+'<div class="tool '+X+'"></div></a></li>';R+=V;}});F.each(P.toolbarIncludesTop,function(W,X){if(P.tools[X]){var Y=P.tools[X];var V='<li class="'+X+'">'+T.makeOnClick(Y)+'<div class="tool '+X+'"></div>'+((typeof Y.word!="undefined")?'<span class="action'+((Y.displayText!==true)?" hideText":"")+'">'+Y.word+"</span>":"")+"</a></li>";U+=V;}});var O=P.shareContainerTemplate.replace("{{shareMainItems}}",U);O=O.replace("{{shareMoreItems}}",R);this.shareBox=F(O);if(P.toolbarPosition=="responsive"){var Q=(P.targetTop&&P.targetTop.length>0)?P.targetTop.offset().top:F(S).offset().top;this.shareBoxTop=(Q-F(S).offset().top);this.shareBox.css("top",this.shareBoxTop+"px");}this.shareBox.prependTo(S);F(".social-tools",S).find(".more").bind({click:function(V){V.stopPropagation();F(this).toggleClass("hover");}});F(".social-tools",S).find("a").parent(":not(.more)").bind({click:function(X){X.stopPropagation();if(typeof sendDataToOmniture==="function"){var W=F(this).attr("class");W=(typeof W!="undefined")?W.split(" ")[0].trim():"";P.omnitureVars.eVar27=W;var V=(P.tools[W]&&P.tools[W].omnitureEvent)?P.tools[W].omnitureEvent:P.omnitureEvent;try{sendDataToOmniture("share."+W,V,P.omnitureVars);if(typeof TWP_Debug!="undefined"&&TWP_Debug.pagedebug&&typeof console!="undefined"&&typeof console.log!="undefined"){console.log("sendDataToOmniture: ");console.log(P.omnitureVars);}}catch(Y){}}}});F.each(P.toolbarIncludesTop,function(V,W){if(P.tools[W]&&P.tools[W].initFunction&&typeof P.tools[W].initFunction==="function"){P.tools[W].initFunction.call(this,P.tools[W]);}});F.each(P.toolbarIncludesMore,function(V,W){if(P.tools[W]&&P.tools[W].initFunction&&typeof P.tools[W].initFunction==="function"){P.tools[W].initFunction.call(this,P.tools[W]);}});this.topBuffer=10;this.shareBoxWidth=this.shareBox.outerWidth()+P.leftBuffer;this.shareBoxTopInit=this.shareBox.offset().top;this.pageWrapper=F(P.pageWrapper);this.wrapper=F(S);F(window).scroll(S,function(){T.socialBarScrollCallback();});F(window).resize(S,function(){T.socialBarResizeCallback();});this.setBound();this.follow();},makeOnClick:function(Q){var P=Q.width?"'width="+Q.width+",height="+Q.height+",scrollbars=no'":"'scrollbars=no'";var O;if(Q.shareUrl!==""){switch(Q.windowType){case"undefined":O='<a href="#" onclick="window.open(\''+Q.shareUrl+"','',"+P+');return false;">';break;case"popup":O='<a href="#" onclick="window.open(\''+Q.shareUrl+"','',"+P+');return false;">';break;case"newWindow":O='<a href="'+Q.shareUrl+'" target="_new" >';break;case"replace":O='<a href="'+Q.shareUrl+'" target="_self" >';break;case"overlay":O='<a class="iframe-overlay" config="width='+Q.width+"&amp;height="+Q.height+'" href="'+Q.shareUrl+'" target="_new" >';break;case"none":O="";break;default:O='<a href="#" onclick="window.open(\''+Q.shareUrl+"','',"+P+');return false;">';break;}}else{O='<a href="#">';}return O;},socialBarResizeCallback:function(){this.setBound();this.follow();},socialBarScrollCallback:function(O){this.setBound();this.follow();},setBound:function(){this.leftBound=this.wrapper.offset().left-this.shareBoxWidth;},follow:function(P){if(this.config.toolbarPosition=="horizontal"){this.shareBox.css({position:"relative",left:"",right:"",top:""});this.shareBox.addClass("horizontal");return ;}this.shareBoxWidth=this.shareBox.outerWidth()+this.config.leftBuffer;var O=this.shareBox.css("position");if(O=="relative"||(F(window).width()<this.config.horizontalWidth)){this.shareBox.css({position:"relative",left:"",right:"",top:""});this.shareBox.addClass("horizontal");}if(O=="absolute"){this.shareBox.css({"right":(this.shareBox.parent().width()+this.config.leftBuffer),left:""});}if(F(window).width()>=this.config.horizontalWidth){this.topBound=this.shareBoxTopInit;var Q=F(window).scrollTop();if(Q>=(this.topBound-this.topBuffer)){this.shareBox.removeClass("horizontal");this.shareBox.css({position:"fixed",left:this.wrapper.offset().left-this.shareBoxWidth,top:this.topBuffer+"px",right:""});}else{this.shareBox.removeClass("horizontal");this.shareBox.css({position:"absolute","right":(this.shareBox.parent().outerWidth()+this.config.leftBuffer),left:"",top:this.shareBoxTop+"px"});}}}};F.fn.socialToolbar=function(O){return this.each(function(){if(!F.data(this,"socialToolbar")){F.data(this,"socialToolbar",new J(this,O));}});};})(jQuery);